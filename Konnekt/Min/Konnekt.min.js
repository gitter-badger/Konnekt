var Konnekt=function(){var V=function(){return function(x,u,N,p){function C(b,d,c,f){b=void 0===b?{}:b;var h={},g=window.Proxy?new Proxy(h,{set:J,deleteProperty:R}):h,m=Object.keys(b,"all");Object.defineProperties(h,{__kbname:e("string"===typeof d?d:"default",!0,!0),__kbref:e(c?c.__kbref||c:g,!0,!0),__kbscopeString:e(f||"",!0,!0),__kbImmediateParent:e(c||null,!0,!0),__kbsubscribers:e({}),__kblisteners:e({}),__kbupdatelisteners:e({}),__kbparentlisteners:e({}),__kbparentupdatelisteners:e({}),__kbcreatelisteners:e([]),
__kbdeletelisteners:e([]),__kbparentcreatelisteners:e([]),__kbparentdeletelisteners:e([]),__kbmethodlisteners:e([]),__kbmethodupdatelisteners:e([]),__kbpointers:e({}),__kbevents:e(H),length:e(0,!0),__kbnonproxy:e(h,!1,!0),__kbproxy:e(g,!1,!0),_stopChange:e(!1,!0)});h.__proto__=C.prototype;d=0;for(c=m.length;d<c;d++)g.set(m[d],b[m[d]]);h.__kbevents.addlistener=[];h.__kbevents.removelistener=[];h.addActionListener("addlistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]])b.local.__kbpointers[b.arguments[0]][b.arguments[2]](b.arguments[0],
b.arguments[1])}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]])b.local.__kbpointers[b.arguments[0]][b.arguments[2]](b.arguments[0],b.arguments[1])});return g}function y(b,d,c,f,h,g,m,l){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=d;this.arguments=g;this.type=this.event=c;this.listener=m;this.name=b.__kbname;this.root=b.__kbref;
this.scope=b.__kbscopeString;this.parent=b.__kbImmediateParent;this.value=f;this.oldValue=h;this.stopChange=l}function e(b,d,c,f){return{value:b,writable:!!d,enumerable:!!f,configurable:!!c}}function O(b,d,c){return{get:function(){return b.call(this)},set:function(c){d&&(b=c)},enumerable:!1,configurable:!!c}}function L(b,d){var c=d,f=d;return{get:function(){return c},set:function(d){var g=new y(this,b,"set",d,c,arguments,"__kblisteners",this._stopChange);!0!==k(g)&&(f=c,c=d,g.stopChange||(g.listener=
"__kbupdatelisteners",g.type="postset",k(g)),this._stopChange||this.callSubscribers(b,c,f));this._stopChange=!1},configurable:!0,enumerable:!0}}function S(b,d,c){return{get:function(){return b[d]},set:function(c){(this._stopChange?b.stopChange():b)[d]=c;this._stopChange=!1},enumerable:c.enumerable,configurable:c.configurable}}function M(b,d){for(var c=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",
action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],f=[],h,g=0,m=c.length;g<m;g++)if(h=b[c[g].listener],F.call(h))for(var f=Object.keys(h),l=0,r=f.length;l<r;l++)for(var D=0,e=h[f[l]].length;D<e;D++)d[c[g].method](f[l],h[f[l]][D]);else for(l=0,r=h.length;l<r;l++)d[c[g].method](h[l])}function J(b,d,c){if(G(b,d)||"length"===d){if("length"===d)if(c>b.length&&void 0!==b[c-1])b.length=c;else if(c<b.length){d=c;for(var f=b.length;d<f;d++)b[d]&&delete b[d];
b.length=c}return!0}b.set(d,c)}function R(b,d){b.del(d);return!0}function Q(b,d,c){var f=n(c),h=F(c),g=t(c);if(f&&c.__kbname!==b.__kbname)"default"===c.__kbname?b.merge(c,d):b.__kbpointers[d]||b.addPointer(c.__kbimmediateparent,d);else{var f=new y(this,d,"create",c,void 0,[],"__kbcreatelisteners",this._stopChange),m=k(f),l=parseInt(d,10);if(!0!==m)if((h||g)&&0!==Object.keys(c,"all").length)for(Q.call(this,b,d,{}),h=0,g=Object.keys(c,"all"),f=g.length;h<f;h++)Q.call(this[d],b[d],g[h],c[g[h]]);else{if(h||
g)c=new C(c,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+d),M(b,c);Object.defineProperty(b,d,L(d,c));!isNaN(l)&&b.length<=l&&(b.length=l+1);f.listener="__kbupdatelisteners";f.type="postcreate";k(f)}}}function P(b,d,c){var f=n(c),h=F(c),g=t(c);if(f&&c.__kbname!==b.__kbname)"default"===c.__kbname?b.merge(c,d):b.__kbpointers[d]||b.addPointer(c.__kbimmediateparent,d);else if(void 0===b[d])-1===v.indexOf(d)?Q.call(this,b,d,c):b[d]=c;else if(h||g)for(f=0,h=Object.keys(c,"all"),g=
h.length;f<g;f++)P.call(this[d],b[d],h[f],c[h[f]]);else b[d]=c}function K(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function F(b){return"object"===K(void 0!==b?b:this)}function t(b){return"array"===K(void 0!==b?b:this)}function n(b){return"mixed"===K(void 0!==b?b:this)}function G(b,d){d="string"===typeof b?b:d;var c=Object.getOwnPropertyDescriptor("string"===typeof b?this:b,d);return c?void 0===c.value:!1}function A(b,d){"number"===typeof b&&(b=b.toString());var c=-1!==
b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());P.call(this,c,b,d);return this}function z(b){return b.split(".")}function I(b,d){return function(c,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[d],g=new y(this,d,"addlistener",h,void 0,arguments,"");"string"===typeof c&&1!==z(c).length&&(h=z(c),c=h.pop(),h=h.join("."),g.local=this.getLayer(h),h=g.local[d],g.value=h);!0!==k(g)&&(F.call(h)?(void 0===h[c]&&(h[c]=
[]),h[c].push(f),g.type="postaddlistener",k(g)):t.call(h)&&"function"===typeof c&&(h.push(c),g.type="postaddlistener",k(g)));return this}}function B(b,d){return function(c,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[d],g=new y(this,d,"removelistener",h,void 0,arguments,"");"string"===typeof c&&1!==z(c).length&&(h=z(c),h.pop(),h.join("."),g.local=this.getLayer(h),h=g.local[d],g.value=h,c=z(c).pop());if(!0!==k(g))if(F.call(h)){if(void 0!==h[c])for(var m=0,l=h[c].length;m<
l;m++)if(h[c][m].toString()===f.toString()){h[c].splice(m,1);g.type="postremovelistener";k(g);break}}else if(t.call(h)&&"function"===typeof c)for(m=0,l=h.length;m<l;m++)if(h[m].toString()===c.toString()){h.splice(m,1);g.type="postremovelistener";k(g);break}return this}}function w(b,d){function c(b,d,g){var m=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),l=this,r=b;"string"===typeof b&&1!==z(b).length&&(l=z(b),r=l.pop(),l=l.join("."),l=this.getLayer(l),void 0===l[g][r]&&
(l[g][r]=[]),l[g][r].push(d));F.call(l[g])?(void 0===l[g][r]&&(l[g][r]=[]),l[g][r].push(d),void 0!==l.__kbpointers[r]&&(void 0===l.__kbpointers[r][r]&&(l.__kbpointers[r][r]=[]),l.__kbpointers[r][r].push(_func))):l[g].push(d);r=0;for(l=m.length;r<l;r++)c.call(this[m[r]],b,d,g)}return function(f,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=new y(this,d,"addchildlistener",void 0,void 0,arguments,"");!0!==k(g)&&(c.call(this.__kbnonproxy,f,h,d),g.type="postaddchildlistener",
k(g));return this}}function E(b,d){function c(b,d,g){var m=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),l=this,r=b;if("string"===typeof b&&1!==z(b).length&&(l=z(b),r=l.pop(),l.join("."),l=this.getLayer(l),void 0!==l[g][b]))for(var D=0,e=l[g][b].length;D<e;D++)if(l[g][b][D].toString()===d.toString()){l[g][b].splice(D,1);break}if(F.call(l[g])){if(void 0!==l[g][r]){D=0;for(e=l[g][r].length;D<e;D++)if(l[g][r][D].toString()===d.toString()){l[g][r].splice(D,1);break}if(-1!==
l.__kbpointers.indexOf(r)&&void 0!==l[r].__kbImmediateParent[g][r])for(D=0,e=l[r].__kbImmediateParent[g][r].length;D<e;D++)if(l[r].__kbImmediateParent[g][r][D].toString()===d.toString()){l[r].__kbImmediateParent[g][r].splice(D,1);break}}}else for(D=0,e=l[g].length;D<e;D++)if(l[g][D].toString()===d.toString()){l[g].splice(D,1);break}D=0;for(e=m.length;D<e;D++)c.call(this[m[D]],b,d,g)}return function(f,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=new y(this,d,"removechildlistener",
void 0,void 0,arguments,"");!0!==k(g)&&(c.call(this.__kbnonproxy,f,h,d),g.type="postremovechildlistener",k(g));return this}}var H={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],
postremovechildlistener:[]},v=["__proto__","_stopChange"],q=function(b,d){if(!d._stopPropogration&&b)for(var c=0,f=b.length;c!==f&&(b[c](d),!d._stopPropogration);c++);},k=function(b){if(b.listener){var d=b.local[b.listener],c=b.local[b.listener.replace("__kb","__kbparent")];F.call(d)?(q(d[b.key],b),q(d["*"],b)):q(d,b);F.call(c)?(q(c[b.key],b),q(c["*"],b)):q(c,b)}q(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);
Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof C?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,d){return Object._keys(b).filter(function(b){return d&&"object"!==d&&"o"!==d?"all"===d?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(C.prototype,{"typeof":e(K,!1,!0),sizeof:e(function(b){function d(b){for(var h=Object.keys(b,"all"),g=0,m=void 0,l=0,r=h.length;l<r;l++)m=b[h[l]],"object"===
typeof m&&void 0!==m&&null!==m?-1===c.indexOf(m)&&(c.push(m),g+=d(m)):"string"===typeof m?g+=2*m.length:"number"===typeof m?g+=8:"boolean"===typeof m?g+=4:"function"===typeof m&&(g+=2*m.toString().length),g+=2*h[l].length;return g}var c=[];return d(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:e(F,!1,!0),isArray:e(t,!1,!0),isMixed:e(n,!1,!0),isObservable:e(G,!1,!0),stringify:e(function(b){var d=[];return JSON.stringify(b||this,function(b,f){if(t(f)||F(f)){if(-1!==d.indexOf(f))return;d.push(f)}return f})},
!1,!0),getKeys:e(function(b,d){d="string"===typeof b?b:d?d:"object";return Object.keys("string"===typeof b||void 0===b?this:b,d)},!1,!0),getIndexes:e(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var d=[],c=0,f=b.length;c<f;c++)void 0!==b[c]&&(d[d.length]=c);return d},!1,!0),keyCount:O(function(){return this.getKeys("object").length},!1,!0),indexCount:O(function(){return this.length},!1,!0),count:O(function(){return this.keyCount+this.indexCount},!1,!0),concat:e(Array.prototype.concat),
every:e(Array.prototype.every),filter:e(Array.prototype.filter),find:e(Array.prototype.find),findIndex:e(Array.prototype.findIndex),forEach:e(Array.prototype.forEach),includes:e(Array.prototype.includes),indexOf:e(Array.prototype.indexOf),join:e(Array.prototype.join),lastIndexOf:e(Array.prototype.lastIndexOf),map:e(Array.prototype.map),reduce:e(Array.prototype.reduce),reduceRight:e(Array.prototype.reduceRight),slice:e(Array.prototype.slice),some:e(Array.prototype.some),entries:e(Array.prototype.entries),
toLocaleString:e(Array.prototype.toLocaleString),add:e(function(b,d){A.call(this,b,d);return this}),set:e(A),get:e(function(b){"number"===typeof b&&(b=b.toString());var d=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(d)return d[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:e(function(b,d){var c="number"===typeof b||!isNaN(parseInt(b,10));c&&(b=b.toString());var f=-1!==b.indexOf(".")?this.getLayer(b):
this,h=b.split(".").pop();if(f&&void 0!==f[h])if(c&&f.length>parseInt(b,10)&&!d)f=f.__kbnonproxy,f.splice(h,1);else{var g=new y(f,b,"delete",f[h],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==k(g)&&(f=f.__kbnonproxy,Object.defineProperty(f,h,e(void 0,!0,!0,!1)),delete f[h],c&&f.length>parseInt(b,10)&&d&&--f.length,g.listener="__kbupdatelisteners",g.type="postdelete",g.oldValue=g.value,g.value=void 0,k(g))}return this}),exists:e(function(b){var d=-1!==b.indexOf(".")?this.__kbnonproxy.getLayer(b):
this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());return d?void 0!==d[b]:!!d}),addPrototype:e(function(b,d){var c=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===c[b]?Object.defineProperty(c.__proto__,b,e(d,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,c);return this}),addPointer:e(function(b,d){b instanceof C||(b=new C(b,b.__kbname));var c=new y(this,
d,"create",b[d],void 0,[],"__kbcreatelisteners",this._stopChange),f=this.__kbnonproxy;c.root=b.__kbref.__kbproxy;if(!0!==k(c)){var h=Object.getOwnPropertyDescriptor(b,d);Object.defineProperty(f,d,S(b,d,h));f.__kbpointers[d]=b;var h=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],g=[],m;if(f[d].__kbImmediateParent)for(var l=0,r=h.length;l<r;l++){m=f[h[l].listener];for(var g=Object.keys(m),e=0,v=g.length;e<v;e++)if(d===g[l])for(var q=
0,n=m[g[l]].length;q<n;q++)void 0===f[d].__kbImmediateParent[h[l].listener][d]&&(f[d].__kbImmediateParent[h[l].listener][d]=[]),f[d].__kbImmediateParent[h[l].listener][d].push(m[g[l]][q])}M(f,f[d]);c.listener="__kbupdatelisteners";c.type="postcreate";k(c)}return this}),move:e(function(b,d){this.__kbnonproxy.set(d,b[d]);n(b)?b.del(d):(b[d]=null,delete b[d]);return this}),copy:e(function(b,d){var c=this.__kbnonproxy;n(b)?"default"===b.__kbname?c.merge(b[d],d):c.addPointer(b,d):c.set(d,b[d]);return this}),
merge:e(function(b,d){function c(b,d){for(var l=n(b)?b.keys("object"):Object.keys(b),h,e=0,k=l.length;e<k;e++)h=b[l[e]],"object"===typeof h&&-1===f.indexOf(h)&&"undefined"!==d[l[e]]?c(h,d):d.set(l[e],"object"===typeof h?{}:h)}var f=[],h=this.__kbnonproxy;d&&void 0===h[d]&&h.set(d,{});c(b,d?h[d]:h);return this}),copyWithin:e(function(b,d,c){d=d||0;c=c||0;var f=new y(this,b,"copyWithin",this[b],void 0,arguments,"__kbmethodlisteners"),h=this.__kbnonproxy;if(!0!==k(f)&&b<h.length){b=0>b?h.length-1:b;
d=d<h.length?d:h.length-1;c=c<h.length?c:h.length-1;d=0>d?h.length-1:d;c=0>d?h.length-1:c;for(var g=d;g<=c;g++)h.set(b+(g-d),h[g]);f.type="postcopyWithin";f.listener="__kbmethodupdatelisteners";k(f)}return this}),fill:e(function(b,d,c){d=void 0!==d?Math.max(0,d):0;c=void 0!==c&&c<=this.length?Math.min(this.length,Math.max(0,c)):this.length;var f=new y(this,_start,"fill",this[_start],void 0,arguments,"__kbmethodlisteners"),h=this.__kbnonproxy;if(!0!==k(f)){for(var g=a.key;g<c;g++)h[g]=b;f.type="postfill";
f.listener="__kbmethodupdatelisteners";k(f)}return this}),pop:e(function(){var b=new y(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==k(b)){var c=d[d.length-1];d.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";k(b);return c}return null}),push:e(function(b){var d=new y(this,this.length,"push",b,void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;!0!==k(d)&&(c.set(c.length,b),d.type="postpush",d.listener=
"__kbmethodupdatelisteners",k(d));return this.length}),reverse:e(function(){var b=new y(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==k(b)){for(var c=null,f=null,h=d.length,c=0;c<h/2;c+=1){var f=h-1-c,g=d[c];d[c]=d[f];d[f]=g}b.type="postreverse";b.listener="__kbmethodupdatelisteners";k(b)}return this}),shift:e(function(){var b=new y(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==k(b)){for(var c=a.key,f=
this.length-1;c<f;c++)d[c]=d[c+1];d.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";k(b)}return null}),sort:e(function(){var b=new y(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;!0!==k(b)&&(d.sort.apply(d,arguments),b.type="postsort",b.listener="__kbmethodupdatelisteners",k(b));return this}),splice:e(function(b,d,c){b="string"===typeof b?parseInt(b,10):b;var f=new y(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),
h=this.__kbnonproxy;if(!0!==k(f)){var g=[],m=Array.prototype.slice.call(arguments,2),l=m.length-2,r=0;if(0!==d&&void 0!==h[b-1+d])for(var e=0,v=d;e<v;e++){g.push(h[b+e]);for(var q=b+e,n=this.length-1;q<n;q++)h[q]=h[q+1];h.del(h.length-1,!0)}if(0!==l)for(e=0,v=l;e<v;e++){r=b+Math.min(1,e);q=h.length;for(n=r;q>n;q--)h.set(q,h[q-1]);h.set(r,m[e])}f.type="postsplice";f.listener="__kbmethodupdatelisteners";k(f);return g}return[]}),unshift:e(function(){var b=new y(this,0,"unshift",this[0],void 0,arguments,
"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==k(b)){for(var c=Array.prototype.slice.call(arguments),f=d.length-1+c.length,h=c.length;-1!==f;f--)f<h?d.set(f,c[f]):d.set(f,d[f-c.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";k(b)}return this.length}),getLayer:e(function(b){function d(b){var f=b[0];return void 0===this[f]&&0!==b.length-1?null:n(this[f])?0!==b.length-1?(b.shift(),d.call(this[f],b)):this[f]:this}b=z(b);return d.call(this,b)}),setLayer:e(function(b){function d(b){var f=
b[0];void 0===this[f]&&0!==b.length-1&&(this[f]=C({},this.__kbname,this,this.__kbscopeString+"."+f));return n(this[f])?0!==b.length-1?(b.shift(),d.call(this[f],b)):this[f]:this}b=z(b);return d.call(this,b)}),ignoreCreate:e(function(b){-1===v.indexOf(b)&&v.push(b);return this}),addActionListener:e(function(b,d){var c=this.__kbnonproxy;void 0!==c.__kbref.__kbevents[b]&&c.__kbref.__kbevents[b].push(d);return this}),removeActionListener:e(function(b,d){var c=this.__kbnonproxy;if(void 0!==c.__kbref.__kbevents[b])for(var f=
0,h=c.__kbref.__kbevents[b];f<h;f++)if(c.__kbref.__kbevents[b][f].toString()===d.toString()){c.__kbref.__kbevents[b].splice(f,1);break}return this}),subscribe:e(function(b,d){var c=this.__kbnonproxy;void 0===c.__kbsubscribers[b]&&(c.__kbsubscribers[b]=[]);c.__kbsubscribers[b].push(d);return this}),unsubscribe:e(function(b,d){var c=this.__kbnonproxy;if(void 0!==c.__kbsubscribers[b])for(var f=0,h=c.__kbsubscribers[b].length;f<h;f++)if(c.__kbsubscribers[b][f].toString()===d.toString()){c.__kbsubscribers[b].splice(f,
1);break}return this}),callSubscribers:e(function(b,d,c){var f=this.__kbnonproxy;if(void 0!==f.__kbsubscribers[b])for(var h=0,g=f.__kbsubscribers[b].length;h<g;h++)f.__kbsubscribers[b].call(this,b,d,c);return this}),stopChange:e(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(C.prototype,{addDataListener:e(I("addDataListener","__kblisteners")),removeDataListener:e(B("removeDataListener","__kblisteners")),addDataUpdateListener:e(I("addDataUpdateListener","__kbupdatelisteners")),
removeDataUpdateListener:e(B("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:e(I("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:e(B("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:e(I("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:e(B("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:e(I("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:e(B("removeDataMethodListener",
"__kbmethodlisteners")),addDataMethodUpdateListener:e(I("addDataMethodUpdateListener","__kbmethodupdatelisteners")),removeDataMethodUpdateListener:e(B("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:e(w("addChildDataListener","__kbparentlisteners")),removeChildDataListener:e(E("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:e(w("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:e(E("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:e(w("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:e(E("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:e(w("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:e(E("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return C}}(),W=function(){return function(){function x(p){if("object"===typeof p)for(var C=0,y=p.length;C<
y;C++)K_Components[p[C]]?u(p[C],K_Components[p[C]],document.getElementById("script_"+p[C])):x.load(p[C],"component/"+p[C]+"/"+location.search,u);else"string"===typeof p&&(K_Components[p[C]]?u(p,K_Components[p],document.getElementById("script_"+p)):x.load(p,"component/"+p+"/"+location.search,u))}var u=function(){},N=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});x.getUnknowns=function(p){var u=p.match(N);return u.map(function(p){return p.replace(/[<\/>]/g,"")}).filter(function(p,e){return document.createElement(p)instanceof
HTMLUnknownElement&&-1===u.indexOf(p,e+1)&&!K_Components[p]})};x.load=function(p,u,y){document.head.appendChild(function(e,p,u){var y=document.createElement("script");y.type="text/javascript";y.charset="utf-8";y.async=!0;y.src=p;y.id="script_"+e;y.onload=function(){u(e,K_Components[e],this)};return y}(p,u,y));return x};x.onLoad=function(p){if(void 0===p)return u;u="function"===typeof p?p:u;return x};return x}}(),T=function(){function x(){function u(b,d){var c=b.length,f;for(f=0;f<c&&(b[f](d),void 0===
d._stopPropogation);f++);}function x(b,d){var c=b.length,f;for(f=0;f<c&&(d.child=d.target,d.target=b[f].parent,b[f].func(d),void 0===d._stopPropogation);f++);}function p(b,d){for(var c=b.length;0<c;v++)if(b[v].toString()===d.toString())return!0;return!1}function C(b,d,c,f,h,g,m,l){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=f;this.target=b;this.attr=d;this.arguments=h;this.action=g;this.child=void 0;this.type=
m;this.stopChange=l}function y(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function e(b,d,c,f){var h=b.get,g=b.set,m;return function(b){m=h.call(this);c(this,d,b,m,void 0,this._stopChange)&&g.call(this,b);this._stopChange||f(this,d,b,m);this._stopChange=void 0}}function O(b,d,c,f){var h;
return function(g){h=b.value;c(this,d,g,h,arguments,this._stopChange)&&(b.value=g);this._stopChange||f(this,d,g,h,arguments);this._stopChange=void 0}}function L(b,d,c,f){var h=b.value,g;return function(){c(this,d,null,null,arguments,this._stopChange)&&(g=h.apply(this,arguments));this._stopChange||f(this,d,null,null,arguments,g);this._stopChange=void 0;return g}}function S(b,d,c,f,h){var g=h.style,m=d.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),l,r;return{get:function(){return r},set:function(b){l=
r;c(h,d,b,l,void 0,this._stopChange)&&(r=b,g.setProperty(m,b));this._stopChange||f(h,d,b,l);this._stopChange=void 0},enumerable:!0,configurable:!0}}function M(b,d,c,f){if("function"!==typeof d)return n;var h=-1!==["value","checked"].indexOf(b),g=-1!==E.indexOf(b),m;if(this.toString()!==n.toString())if(c){var l=this.querySelectorAll("*");c=l.length;for(var r,e=0;e<c;e++){r=l[e].attrListeners();if(h||"*"===b)void 0!==l[e].addInputBinding&&l[e].addInputBinding(),void 0!==l[e].addInputBoxBinding&&l[e].addInputBoxBinding();
if(g)n.injectStyleProperty(l[e],b),m=f?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===b){m=f?"_parentStyleUpdateListeners":"_parentStyleListeners";c=E.length;for(var k=0;k<c;k++)n.injectStyleProperty(l[e],E[k]);void 0===r[m]["*"]&&(r[m]["*"]=[]);r[m]["*"].push({parent:this,func:d})}m=f?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===r[m][b]&&(r[m][b]=[]);r[m][b].push({parent:this,func:d})}}else{r=this.attrListeners();if(g)m=f?"_styleUpdateListeners":"_styleListeners",
n.injectStyleProperty(this,b);else{if(h||"*"===b)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===b){m=f?"_styleUpdateListeners":"_styleListeners";c=E.length;for(e=0;e<c;e++)n.injectStyleProperty(this,E[e]);void 0===r[m][b]&&(r[m][b]=[]);r[m][b].push(d)}m=f?"_attrUpdateListeners":"_attrListeners"}void 0===r[m][b]&&(r[m][b]=[]);r[m][b].push(d)}else{if(h||"*"===b)for(k=document.querySelectorAll("input, textarea"),c=k.length,e=
0;e<c;e++)void 0!==k[e].addInputBinding&&k[e].addInputBinding(),void 0!==k[e].addInputBoxBinding&&k[e].addInputBoxBinding();if(g){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=g.length+1;g.unshift(document.body);for(e=0;e<c;e++)n.injectStyleProperty(g[e],b);m=f?I:z}else{if("*"===b){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=g.length+1;h=E.length;g.unshift(document.body);for(e=0;e<c;e++)for(k=0;k<h;k++)n.injectStyleProperty(g[e],E[k]);m=f?I:z;void 0===
m[b]&&(m[b]=[]);m[b].push(d)}m=f?A:G}void 0===m[b]&&(m[b]=[]);m[b].push(d)}}function J(b,d,c,f){function h(b,c){var f=c[b],g=f.length;for(e=0;e<g;e++)f[e].toString()===d.toString()&&f.splice(e,1)}if("function"!==typeof d)return n;["value","checked"].indexOf(b);var g=-1!==E.indexOf(b),e;if(this.toString()!==n.toString())if(c){c=this.querySelectorAll("*");var l=c.length;g?(g=f?"_childStyleUpdateListeners":"_childStyleListeners",h(b,this.attrListeners()[g]),g=f?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===b&&(g=f?"_childStyleUpdateListeners":"_childStyleListeners",h(b,this.attrListeners()[g])),g=f?"_childAttrUpdateListeners":"_childAttrListeners",h(b,this.attrListeners()[g]),g=f?"_parentAttrUpdateListeners":"_parentAttrListeners");for(e=0;e<l;e++){for(var r=c[e].attrListeners()[g][b],k=r.length,v=0;v<k;v++)r[v].isEqualNode(this)&&r.slice(v,1);if("*"===b)for(listenersStyle=f?"_parentStyleUpdateListeners":"_parentStyleListeners",r=c[e].attrListeners()[g][b],k=r.length,v=0;v<k;v++)r[v].isEqualNode(this)&&
r.slice(v,1)}}else g?g=f?"_styleUpdateListeners":"_styleListeners":("*"===b&&(g=f?"_styleUpdateListeners":"_styleListeners",h(b,this.attrListeners()[g])),g=f?"_attrUpdateListeners":"_attrListeners"),h(b,this.attrListeners()[g]);else g?g=f?I:z:("*"===b&&(g=f?I:z,h(b,g)),g=f?A:G),h(b,g)}function R(b,d){n.addAttrListener.call(this,b,d,!0);return this}function Q(b,d){n.addAttrUpdateListener.call(this,b,d,!0);return this}function P(b,d){n.removeAttrListener.call(this,b,d,!0);return this}function K(b,d){n.removeAttrUpdateListener.call(this,
b,d,!0);return this}function F(b,d,c){var f=this.attrListeners();"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(b){case "attr":if(p(f._attrListeners[d],c))return!0;break;case "attrupdate":if(p(f._attrUpdateListeners[d],c))return!0}return!1}function t(){this._stopChange=!0;return this}function n(){function b(b,d){var c,f=d.length;for(c=0;c<f;c++)-1===b.indexOf(d[c])&&b.push(d[c]);return b}function d(b,d){for(var c=Object.keys(b),f,g,h=0,e=c.length;h<e;h++)if(f=c[h],void 0===d[f])d[f]=
b[f].slice();else for(var m=0,k=b[f].length;m<k;m++)g=b[f][m],d[f].push(g)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var f=c.target.attrListeners(),g,h=["value","checked"],e=f._attrListeners,m=f._attrUpdateListeners,k=f._parentAttrListeners;g=f._parentAttrUpdateListeners;var v=!1;if(void 0!==G["*"]||void 0!==A["*"])v=!0;if(!0!==v&&void 0!==e["*"]||void 0!==m["*"]||void 0!==k["*"]||void 0!==g["*"])v=!0;if(!0!==v)for(var q=0;q<h.length;q++)if(void 0!==G[h[q]]||void 0!==A[h[q]]||
void 0!==e[h[q]]||void 0!==m[h[q]]||void 0!==k[h[q]]||void 0!==g[h[q]]){v=!0;break}g=v;h=Object.keys(z);e=Object.keys(I);Object.keys(f._styleListeners);Object.keys(f._styleUpdateListeners);m=Object.keys(f._parentStyleListeners);f=Object.keys(f._parentStyleUpdateListeners);k=[];if(0!==h.length||0!==e.length)k=b(k,h),k=b(k,e);if(0!==k.length&&0!==m.length||0!==f.length)k=b(k,m),k=b(k,f);-1!==k.indexOf("*")&&(k=E);var f=k,h=f.length,p,t,e=[],u,m="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,
k=c.target;void 0!==m&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(g){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(e=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||e.unshift(c.arguments[0])):e=Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));u=e.length;for(var w=0;w<u;w++)void 0!==e[w].addInputBinding&&
e[w].addInputBinding(),void 0!==e[w].addInputBoxBinding&&e[w].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(e=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),e.unshift(c.arguments[0])):e=Array.prototype.slice.call(c.target.querySelectorAll("*"));g=c.target.__kb._parentAttrListeners;v=c.target.__kb._parentAttrUpdateListeners;q=c.target.__kb._parentStyleListeners;p=c.target.__kb._parentStyleUpdateListeners;u=e.length;
for(w=0;w<u;w++){if(0!==h)for(t=0;t<h;t++)n.injectStyleProperty(e[w],f[t]);t=e[w].attrListeners();d(g,t._parentAttrListeners);d(v,t._parentAttrUpdateListeners);d(q,t._parentStyleListeners);d(p,t._parentStyleUpdateListeners)}void 0!==m&&(c.attr=m,c.target=k,c.arguments=[])}}function f(b){var d=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:"";g(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])||b.preventDefault()}function h(b){var d=b.target.attributes[b.arguments[0]],
c="setAttribute"===b.attr?b.arguments[1]:"";e(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");var g=q,e=k;n.addAttrUpdateListener("appendChild",c);n.addAttrUpdateListener("removeChild",c);n.addAttrUpdateListener("innerHTML",
c);n.addAttrUpdateListener("outerHTML",c);n.addAttrUpdateListener("innerText",c);n.addAttrUpdateListener("outerText",c);n.addAttrUpdateListener("textContent",c);n.addAttrListener("setAttribute",f);n.addAttrListener("removeAttribute",f);n.addAttrUpdateListener("setAttribute",h);n.addAttrUpdateListener("removeAttribute",h);return n}var G={},A={},z={},I={},B={},w="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),E=Object.getOwnPropertyNames(document.documentElement.style),
H=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),v,q=function(b,d,c,f,h,g){c=new C(b,d,c,f,h,void 0,"set",g);void 0!==b.__kb&&(f=b.__kb._attrListeners,h=b.__kb._styleListeners,g=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==f[d]&&u(f[d],c),void 0===c._stopPropogation&&void 0!==h[d]&&u(h[d],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(u(f["*"],c),void 0===c._stopPropogation&&u(h["*"],c)),
void 0===c._stopPropogation&&void 0!==g[d]&&x(g[d],c),void 0===c._stopPropogation&&void 0!==b[d]&&x(b[d],c),void 0===c._stopPropogation&&void 0!==g["*"]&&(x(g["*"],c),void 0===c._stopPropogation&&x(b["*"],c)));void 0===c._stopPropogation&&void 0!==G[d]&&u(G[d],c);void 0===c._stopPropogation&&void 0!==z[d]&&u(z[d],c);void 0===c._stopPropogation&&void 0!==G["*"]&&(u(G["*"],c),void 0===c._stopPropogation&&u(z["*"],c));return void 0!==c._preventDefault?!1:!0},k=function(b,d,c,f,h,g){c=new C(b,d,c,f,h,
g,"update");void 0!==b.__kb&&(f=b.__kb._attrUpdateListeners,h=b.__kb._styleUpdateListeners,g=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==f[d]&&u(f[d],c),void 0===c._stopPropogation&&void 0!==h[d]&&u(h[d],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(u(f["*"],c),void 0===c._stopPropogation&&u(h["*"],c)),void 0===c._stopPropogation&&void 0!==g[d]&&x(g[d],c),void 0===c._stopPropogation&&void 0!==b[d]&&x(b[d],c),void 0===c._stopPropogation&&void 0!==g["*"]&&(x(g["*"],
c),void 0===c._stopPropogation&&x(b["*"],c)));void 0===c._stopPropogation&&void 0!==A[d]&&u(A[d],c);void 0===c._stopPropogation&&void 0!==I[d]&&u(I[d],c);void 0===c._stopPropogation&&void 0!==A["*"]&&(u(A["*"],c),void 0===c._stopPropogation&&u(I["*"],c));return void 0!==c._preventDefault?!1:!0};n.injectPrototypeProperty=function(b,d,c,f,h){var g=b.prototype,m=Object.getOwnPropertyDescriptor(g,d);c=c||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var l=B[c];f=f||q;h=h||k;void 0===g.attrListeners&&
(g={},g.attrListeners=function(){void 0===this.__kb&&(this.__kb=new y);return this.__kb}.bind(g),g.addAttrListener=n.addAttrListener,g.addAttrUpdateListener=n.addAttrUpdateListener,g.addChildAttrListener=R,g.addChildAttrUpdateListener=Q,g.hasListener=F,g.removeAttrListener=n.removeAttrListener,g.removeAttrUpdateListener=n.removeAttrUpdateListener,g.removeChildAttrListener=P,g.removeChildAttrUpdateListener=K,g.stopChange=t);void 0===l&&(B[c]={obj:b,proto:g,descriptors:{},set:void 0,update:void 0},
l=B[c],l.set=f,l.update=h);void 0===l.descriptors[d]&&(l.descriptors[d]=m);m.configurable&&(void 0!==m.set?Object.defineProperty(g,d,{get:m.get,set:e(m,d,f,h),enumerable:!0,configurable:!0}):"function"===typeof m.value?Object.defineProperty(g,d,{value:L(m,d,f,h),writable:!0,enumerable:!0,configurable:!0}):void 0!==m.value&&Object.defineProperty(g,d,{get:function(){return m.value},set:O(m,d,f,h),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=function(b,d,c,f){var h=b.style,g=Object.getOwnPropertyDescriptor(h,
d),e=b.attrListeners().injectedStyle;c=c||q;f=f||k;void 0===e&&(b.attrListeners().injectedStyle={obj:b,proto:h,descriptors:{},set:void 0,update:void 0},b.attrListeners().injectedStyle.set=c,b.attrListeners().injectedStyle.update=f,e=b.attrListeners().injectedStyle);void 0===e.descriptors[d]&&(e.descriptors[d]=g);g.configurable&&Object.defineProperty(h,d,S(g,d,c,f,b));return n};n.injectPrototypes=function(b,d,c,f){var h=b.prototype;d=d||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=
B[d],e=Object.getOwnPropertyNames(h);c=c||q;f=f||k;var l;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new y);return this.__kb},h.addAttrListener=n.addAttrListener,h.addAttrUpdateListener=n.addAttrUpdateListener,h.addChildAttrListener=R,h.addChildAttrUpdateListener=Q,h.removeAttrListener=n.removeAttrListener,h.removeAttrUpdateListener=n.removeAttrUpdateListener,h.removeChildAttrListener=P,h.removeChildAttrUpdateListener=K,h.hasListener=F,h.stopChange=t);void 0===
g&&(B[d]={obj:b,proto:h,descriptors:{},set:void 0,update:void 0},g=B[d],g.set=c,g.update=f);l=B[d].descriptors;for(f=0;f<e.length;f+=1)void 0===l[e[f]]&&n.injectPrototypeProperty(b,e[f],d,c,k);if(-1!==e.indexOf("value")){var v=function(b){var d,c,f;if("checkbox"===this.type||"radio"===this.type)d=!0;c=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;d&&(g.set(this,
"checked",this.checked,c)?g.update(this,"checked",this.checked,c):l.checked.set.call(this,c));this.value=f;g.set(this,"value",this.value,c)?g.update(this,"value",this.value,c):l.value.set.call(this,c)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",v)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",v)};h.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;
this.removeEventListener("mouseup",v)};h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",v)}}return n};n.addAttrListener=function(b,d,c){if("html"===b){b=0;for(var f=w.length;b<f;b++)M.call(this,w[b],d,c,!1)}else if("events"===b)for(b=0,f=H.length;b<f;b++)M.call(this,H[b],d,c,!1);else M.call(this,b,d,c,!1);return this};n.addAttrUpdateListener=function(b,d,c){if("html"===b){b=0;for(var f=w.length;b<f;b++)M.call(this,w[b],d,c,!0)}else if("events"===
b)for(b=0,f=H.length;b<f;b++)M.call(this,H[b],d,c,!0);else M.call(this,b,d,c,!0);return this};n.removeAttrListener=function(b,d,c){if("html"===b){b=0;for(var f=w.length;b<f;b++)J.call(this,w[b],d,c,!1)}else if("events"===b)for(b=0,f=H.length;b<f;b++)J.call(this,H[b],d,c,!1);else J.call(this,b,d,c,!1);return this};n.removeAttrUpdateListener=function(b,d,c){if("html"===b){b=0;for(var f=w.length;b<f;b++)J.call(this,w[b],d,c,!0)}else if("events"===b)for(b=0,f=H.length;b<f;b++)J.call(this,H[b],d,c,!0);
else J.call(this,b,d,c,!0);return this};n.hasListener=function(b,d,c){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(b){case "attr":if(p(G[d],c))return!0;break;case "attrupdate":if(p(A[d],c))return!0}return!1};n.injectedPrototypes=function(){return B};return n}"function"===typeof define&&define.amd&&define("KB",x);return x}(),X=function(){return function(){function x(p){0===p.length&&(p=u);document.body.innerHTML="<"+p+"></"+p+">";N(p);return x}var u="",N=function(){};x.base=function(p){if(void 0===
p)return u;u="string"===typeof p?p:u;return x};x.onChange=function(p){if(void 0===p)return N;N="function"===typeof p?p:N;return x};x.watch=function(p){window.onhashchange=p?function(){x(window.location.hash.replace("#",""))}:null;return x};return x}}(),T=function(x){return function(){function u(e,q){this.name=e.tagName.toLowerCase();this.template=A[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=e;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");
this.wrapper.className="Wrapper Wrapper__"+this.name;q||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);q||(this.maps=this.map(this.wrapper));q||(this.wrapper.kb_maps=this.maps)}function N(e,q,k,b,d,c,f,h){function g(b){var d="for"===q?F(b):[],c=this;this.key="for"!==q?P(b):d[0];this.filterNames=K(b);this.component="for"===q?d[1]:void 0;this.id=0;this.isEvent=m;this.isInput=l;this.__proto__.bindText=this.__proto__.bindText.map(function(c){return c===b?this:c});this.__proto__.bindMaps.push(this);
Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:t("",!0)});this.updateData=function(b){if(c.isConnected&&c._data){if("object"!==typeof b||void 0===b.value)b={value:b};"function"===typeof c._data.stopChange&&c._data.stopChange().set(c.key,b.value)}};this.updateDom=function(b){if(c.isSynced()){c.element.stopChange();if("object"!==typeof b||void 0===b.value)b={value:b};c.value=b.value}};this.updateLoop=function(){c.kb_loop&&c.loop(c.kb_loop)}}
var m="attribute"===q&&-1!==I.indexOf(f.name)||"component"===q&&f.name&&-1!==I.indexOf(f.name),l="input"===h.tagName.toLowerCase();m&&h.stopChange().removeAttribute(f.name);Object.defineProperties(g.prototype,{valget:t(p),valset:t(C),refresh:t(O),connect:t(L),deleteMap:t(M),loop:t(S),unsync:t(J),isSynced:t(y),type:t(q),text:t(k,!0),bindText:t(b,!0),bindNames:t("for"===q?[F(b[0])[0]]:Q(b),!0),bindMaps:t([],!0),bindListener:t(m?d.toLowerCase():d),bindProperty:t(m?f.name.toLowerCase():c),bindTarget:t(f,
!0),element:t(h,!0),_data:t({},!0),filters:t({},!0),maps:t(e,!0),loop:t(S)});return g}function p(){return this._value}function C(e){this._value=this.isSynced()?e:this._value;this.refresh()}function y(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function e(e,q){function k(b,d){return d.reduce(function(c,d){return c+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(c,d){if(void 0!==b.filters){if(void 0!==b.filters[d])return b.filters[d](c);
console.warn("there is no filter by the name %o in the data model filters %o",d,Object.keys(b.filters));return c}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return c},d._value))},"")}return 1===q.length?"string"===typeof q[0]._value?k(e,q):q[0]._value:k(e,q)}function O(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post=
{}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=e(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var v=0,q=this._value.length;v<q;v++)this.element.stopChange().appendChild(this._value[v])}else this.bindTarget[this.bindProperty]=e(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=e(this,this.bindText));return this}function L(e){this._data=e;this.filters=void 0!==e.filters?e.filters:
this.filters;e=0;for(var q=this.bindNames.length;e<q;e++){var k=this.bindNames[e],b=this.bindMaps[e];b._data.addDataUpdateListener&&(b._data.exists(k)||(console.warn("No property by the name %o exists on this data set %o",k,b._data),b._data.add(k,b._value)),b.value=b._data.get(k),"component"!==b.type&&"for"!==b.type?(b.isConnected=!0,b._data.addDataUpdateListener(k,b.updateDom)):"for"===b.type&&b._value.addDataUpdateListener&&b._value.addDataUpdateListener("*",b.updateLoop).addDataCreateListener(b.updateLoop).addDataDeleteListener(b.updateLoop))}1!==
this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function S(e){this.kb_loop=e;this.element.stopChange().innerHTML="";for(var q=this._value,k=0,b=this.filterNames.length;k<b;k++)q=this.filters[this.filterNames[k]](q);q=0;for(k=this._value.length;q<k;q++){var b=this._value[q],d=document.createElement(this.component);d.k_post=b;d.kb_wrapper=this.element.kb_wrapper;
this.element.stopChange().appendChild(d);"function"===typeof e&&e(d)}}function M(){this.maps[this.key].splice(this.id,1);return this}function J(){for(var e=0,q=this.bindNames.length;e<q;e++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[e],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":
this.bindListener,this.updateData);this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return!1}function R(e){return e.split(new RegExp("("+B.split("").join("\\")+")(.*?)("+w.split("").join("\\")+")","g")).map(function(e,k,b){return b[k-
1]===B?B+e+w:e}).filter(function(e,k,b){return 0!==e.length&&e!==B&&e!==w&&0!==e.length})}function Q(e){return e.filter(function(e){return-1!==e.indexOf(B)&&-1!==e.indexOf(w)}).map(function(e){return P(e)})}function P(e){return e.replace(new RegExp("["+B+w+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function K(e){return-1!==e.indexOf(E)?e.replace(new RegExp("["+w+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,
"").split(","):[]}function F(e){return-1!==e.indexOf("for")?e.replace(new RegExp("["+B+w+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(e){return 0!==e.length}):[]}function t(e,q,k){return{value:e,writable:!!q,enumerable:!1,configurable:!!k}}function n(e,q){for(var k=H[e],b=0,d=k.length;b<d&&(k[b](q),q._stopPropogation);b++);return q._preventDefault}function G(e){var q=e.match(z).map(function(e){return e.replace(/[<\/>]/g,"")});q.filter(function(e,b){return document.createElement(e)instanceof
HTMLUnknownElement&&-1===q.indexOf(e,b+1)&&void 0===A[e]});0!==q.length&&n("unknown",new Event("unknown",q));return q}var A={},z=/(<\/.*?>)/g;x().call();var I=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}),B="{{",w="}}",E="|",H={unknown:[]};u.prototype.map=function(e){function q(b){for(var d=0,c=b.length;d<c;d++)if(void 0===b[d].kb_maps&&8!==b[d].nodeType){b[d].kb_mapper=e;if(3===b[d].nodeType){var f=b[d],h=k,g=f.textContent,m=f.parentElement instanceof HTMLUnknownElement;
if(g.match(new RegExp("(\\"+B.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+")","g")))for(var l=m?"component":g.match(new RegExp("(\\"+B.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+w.split("").join("\\")+")","g"))?"for":"text",f=N(h,l,g,R(g),m?"":"textContent","textContent",f,f.parentElement),g=0,m=f.prototype.bindText.length;g<m;g++){var l=g,r=f.prototype.bindText[g];0===r.indexOf(B)&&(r=new f(r),f.prototype.bindText[l]=r,void 0===h[r.key]&&(h[r.key]=[]),r.id=h[r.key].length,
h[r.key].push(r))}}else for(h=b[d],f=k,g=h.attributes,m=h instanceof HTMLUnknownElement,l=0,r=g.length;l<r;l++){r>g.length&&(l-=r-g.length,r=g.length);var n=g[l];if(n.value.match(new RegExp("(\\"+B.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+")","g")))for(var n=N(f,m?"component":"attribute",n.value,R(n.value),m?"":n.name,"value",n,h),G=0,z=n.prototype.bindText.length;G<z;G++){var p=G,A=n.prototype.bindText[G];0===A.indexOf(B)&&(A=new n(A),n.prototype.bindText[p]=A,void 0===f[A.key]&&(f[A.key]=
[]),f[A.key].push(A))}}b[d].childNodes&&0!==b[d].childNodes.length&&q(b[d].childNodes)}}var k={};q(e.childNodes);return k};u.prototype.addFilter=function(e,q){void 0!==this.maps[e]&&this.maps[e].forEach(function(e){e.filters.push(q);e.refresh()});return this};u.prototype.removeFilter=function(e,q){void 0!==this.maps[e]&&this.maps[e].forEach(function(k){k.filters.splice(this.maps[e].filters.indexOf(q),1);k.refresh()});return this};u.prototype.swapFilter=function(e,q,k){void 0!==this.maps[e]&&this.maps[e].forEach(function(b){b.filters.splice(this.maps[e].filters.indexOf(q),
1,k);b.refresh()});return this};Object.defineProperties(u,{startChars:t(function(e){if(void 0===e)return B;B="string"===typeof e?e:B;return this}),endChars:t(function(e){if(void 0===e)return w;w="string"===typeof e?e:w;return this}),pipeChars:t(function(e){if(void 0===e)return E;E="string"===typeof e?e:E;return this}),getUnknown:t(G),isRegistered:t(function(e){return void 0!==A[e]}),register:t(function(e,q){void 0===A[e]?(A[e]=q,G(q)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",
e);return this}),addEventListener:t(function(e,q){void 0!==H[e]?H[e].push(q):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",e);return this}),removeEventListener:t(function(e,q){if(void 0!==H[e])for(var k=0,b=H[e].length;k<b;k++)H[e][k].toString()===q.toString()&&H[e].splice(k,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",e);return this})});return u}}(T),U=function(x,u,N,p){return function(C,y){function e(n,
A,z,p){function t(b,c,e,h,g){for(var m=M({},b),l=0,k=Object.keys(c.prototype),n=k.length;l<n;l++)m.__proto__[k[l]]=c.prototype[k[l]];l=0;k=Object.keys(h);for(n=k.length;l<n;l++)-1!==F.indexOf(k[l])?Object.defineProperty(m,k[l],L(h[k[l]],"filters"!==k[l])):m.set(k[l],h[k[l]]);if(h.pointers)for(l=0,k=Object.keys(h.pointers),n=k.length;l<n;l++)m.addPointer(h.pointers[k[l]],k[l]);c.apply(m,e);l=0;k=Object.keys(g);for(n=k.length;l<n;l++)-1!==F.indexOf(k[l])?Object.defineProperty(m,k[l],L(g[k[l]],"filters"!==
k[l])):m.set(k[l],g[k[l]]);if(g.pointers)for(l=0,k=Object.keys(g.pointers),n=k.length;l<n;l++)m.addPointer(g.pointers[k[l]],k[l]);l=0;k=Object.keys(m.filters);for(n=k.length;l<n;l++)m.filters[k[l]]=m.filters[k[l]].bind(m);if(m.sessionStorage){if(c=sessionStorage.getItem(m.id||b))for(c=JSON.parse(c),l=0,k=Object.keys(c),n=k.length;l<n;l++)m.set(k[l],c[k[l]]);else sessionStorage.setItem(m.id||b,m.stringify());m.addChildDataUpdateListener("*",function(){sessionStorage.setItem(m.id||b,m.stringify())})}if(m.localStorage){if(c=
localStorage.getItem(m.id||b))for(c=JSON.parse(c),l=0,k=Object.keys(c),n=k.length;l<n;l++)m.set(k[l],c[k[l]]);else localStorage.setItem(m.id||b,m.stringify());m.addChildDataUpdateListener("*",function(){localStorage.setItem(m.id||b,m.stringify())})}m.store&&Q.set(m.id||b,m);return m}function u(b,c,f){b.kb_viewmodel=f;c.wrapper.innerHTML=v.template.replace(new RegExp("("+J.startChars()+"local"+J.endChars()+")","g"),f.local);var h=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=h;Object.keys(h).forEach(function(b){h[b].forEach(function(b){switch(b.type){case "for":b.connect(f);
J.isRegistered(b.component)?b.loop(function(b){e(b)}):(e.loadWaitList(b.component,function(c,d){b.loop(function(b){e(b)})}),e.loadWaitList(b.component).loading||(e.loadWaitList(b.component).loading=!0,S(b.component)));break;case "component":b.connect(f).deleteMap();break;default:b.connect(f)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,c.wrapper)}function y(d,c){v=new J(c,!0);Object.defineProperty(v.wrapper,"__kbcomponenttree",L(c.kb_mapper?c.kb_mapper.__kbcomponenttree.slice():
[]));c.parentElement.replaceChild(v.fragment,c);A.unshift(v.wrapper);u(v.wrapper,v,t(d,P[d],A,k,b));if(-1===v.wrapper.__kbcomponenttree.indexOf(d)||v.wrapper.kb_viewmodel.multiple){v.wrapper.__kbcomponenttree.push(d);v.wrapper.classList.add(v.wrapper.kb_viewmodel.local);for(var f=v.wrapper.querySelectorAll("*"),h=0,g=f.length;h<g;h++)f[h]instanceof HTMLUnknownElement&&e(f[h])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
d),console.error("Recursive Component %o on %o",v.wrapper,v.wrapper.parentElement),v.wrapper.parentElement.removeChild(v.wrapper)}var x=n.tagName.toLowerCase(),v,q=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}),k={},b={};void 0===A&&(A=[]);z&&O(z,k);Object.defineProperty(k,"local",L(k.local||x+"-"+Date.now(),!0,!1,!0));Object.defineProperty(k,"filters",L(k.filters||{},!1,!1,!0));"function"!==typeof k.onFinish&&(k.onFinish=function(){});Object.defineProperty(k,"onFinish",
L(k.onFinish,!0,!1,!0));"string"===typeof k.sessionStorage&&(k.sessionStorage="true"===k.sessionStorage);Object.defineProperty(k,"sessionStorage",L(void 0!==k.sessionStorage?k.sessionStorage:!1,!0,!1,!0));"string"===typeof k.localStorage&&(k.localStorage="true"===k.localStorage);Object.defineProperty(k,"localStorage",L(void 0!==k.localStorage?k.localStorage:!1,!0,!1,!0));"string"===typeof k.store&&(k.store="true"===k.store);Object.defineProperty(k,"store",L(void 0!==k.store?k.store:!1,!0,!1,!0));
"string"===typeof k.multiple&&(k.multiple="true"===k.multiple);Object.defineProperty(k,"multiple",L(void 0!==k.multiple?k.multiple:!1,!0,!1,!0));p&&O(p,b);b.innerHTML=n.childNodes;z=0;for(p=n.attributes.length;z<p;z++)b[n.attributes[z].name]=n.attributes[z].value;z=0;for(p=q.length;z<p;z++)n[q[z]]&&(b[q[z]]=n[q[z]]);n.k_post&&O(n.k_post,b);J.isRegistered(x)?y(x,n):(e.loadWaitList(x,function(b,c){y(x,n)}),e.loadWaitList(x).loading||(e.loadWaitList(x).loading=!0,S(x)))}function O(e,n){var p=Object.keys(e);
n.pointers||(n.pointers={});for(var t=0,u=p.length;t<u;t++)if(e.isObservable(p[t]))n.pointers[p[t]]=e;else if(e[p[t]].isMixed())n.pointers[p[t]]=e[p[t]].__kbImmediateParent;else if(Object.prototype.isObject(e[p[t]]))for(var w=0,x=Object.keys(e[p[t]]);w<u;w++)n[p[t]][x[w]]=e[p[t]][x[w]];else if(Object.prototype.isArray(e[p[t]]))for(w=0;w<u;w++)n[p[t]][w]=e[p[t]][w];else n[p[t]]=e[p[t]]}function L(e,n,p,t){return{value:e,writable:!!n,enumerable:!!t,configurable:!!p}}window.K_Components||(window.K_Components=
{});var S=u().onLoad(function(n,p){var t="<style>"+unescape(p.prototype.k_css)+"</style>"+unescape(p.prototype.k_html);e.register(n,p,t,p.prototype.cms);e.loadWaitList(n).forEach(function(e){e(n,p)});e.loadWaitList(n,"clear")}),M=x(),J=N(),R=p().base(void 0!==config&&void 0!==config.base?config.base:"default").watch(!0).onChange(function(n){e(document.querySelector(n))}),Q=M({},"Model"),P={},K=function(){return window.location.search.replace("?","").split("&").filter(function(e){return 0!==e.length}).reduce(function(e,
n){e[n.split("=")[0]]=n.split("=")[1];return e},{})}(),F="id filters class sessionStorage localStorage store component multiple".split(" "),t={},n;e.register=function(n,p,t,u){J.register(n,t);P[n]=p;return e};e.loadWaitList=function(n,p){if("undefined"===typeof p&&n)return t[n];if(n){if(void 0===t[n]||"clear"===p){var u=void 0===t[n]?!1:!!t[n].loading;t[n]=[];t[n].loading=u}"function"===typeof p&&t[n].push(p)}return e};e.localRouting=function(p){p?(n=Node.prototype.appendChild,Node.prototype.appendChild=
function(e){if("script"===e.nodeName.toLowerCase()){e.src=e.src.substring(0,-1!==e.src.indexOf("?")?e.src.indexOf("?"):e.src.length);var p=e.src.match(/(.*?component\/)/);p&&(K.env||(K.env="prod"),"dev"===K.env&&(K.env="qa"),p=e.src.replace(p[0],"").replace(/[\/\s]/g,""),e.src="/components/"+p+"/build/"+K.env+"/"+p+(K.debug&&"prod"!==K.env?"":".min")+".js",arguments[0]=e)}return n.apply(this,arguments)}):n&&(Node.prototype.appendChild=n,n=null);return e};C&&e.localRouting(C);y&&R(window.location.hash.replace("#",
""));return e}}(V,W,T,X);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return U}):"undefined"!==typeof module&&(module.exports=U);return U}();
