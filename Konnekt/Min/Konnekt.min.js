var Konnekt=function(){var T=function(){return function(z,y,Q,r){function x(b,c,d,e){b=void 0===b?{}:b;var h={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var k=new Proxy(h,{set:B,deleteProperty:N}),n=Object.keys(b,"all");Object.defineProperties(h,{__kbname:g("string"===typeof c?c:"default",!0,!0),__kbref:g(d?d.__kbref||d:k,!0,!0),__kbscopeString:g(e||"",!0,!0),__kbImmediateParent:g(d||
null,!0,!0),__kbsubscribers:g({}),__kblisteners:g({}),__kbupdatelisteners:g({}),__kbparentlisteners:g({}),__kbparentupdatelisteners:g({}),__kbcreatelisteners:g([]),__kbdeletelisteners:g([]),__kbparentcreatelisteners:g([]),__kbparentdeletelisteners:g([]),__kbpointers:g({}),__kbevents:g(E),length:g(0,!0),__kbnonproxy:g(h,!1,!0),_stopChange:g(!1,!0)});c=0;for(d=n.length;c<d;c++)k[n[c]]=b[n[c]];h.__proto__=x.prototype;h.__kbevents.addlistener=[];h.__kbevents.removelistener=[];h.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return k}function v(b,c,d,e,h,k,n,l){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=k;this.type=this.event=d;this.listener=n;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=e;this.oldValue=h;this.stopChange=l}function g(b,c,d){return{value:b,writable:!!c,enumerable:!1,configurable:!!d}}function O(b,c,d){return{get:function(){return b.call(this)},set:function(d){c&&(b=d)},enumerable:!1,configurable:!!d}}function M(b,c){var d=c,e=c;return{get:function(){return d},
set:function(c){var k=new v(this,b,"set",c,d,arguments,"__kblisteners",this._stopChange);!0!==m(k)&&(e=d,d=c,k.stopChange||(k.listener="__kbupdatelisteners",k.type="postset",m(k)),this._stopChange||this.callSubscribers(b,d,e));this._stopChange=!1},configurable:!0,enumerable:!0}}function P(b,c,d){return{get:function(){return b[c]},set:function(d){(this._stopChange?b.stopChange():b)[c]=d;this._stopChange=!1},enumerable:d.enumerable,configurable:d.configurable}}function K(b,c){for(var d=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],e=[],h,k=0,n=d.length;k<n;k++)if(h=b[d[k].listener],u.call(h))for(var e=Object.keys(h),l=0,q=e.length;l<q;l++)for(var f=0,m=h[e[l]].length;f<m;f++)c[d[k].method](e[l],h[e[l]][f]);else for(l=0,q=h.length;l<q;l++)c[d[k].method](h[l])}function G(b,c){var d=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],e=[],h;if(b[c].__kbImmediateParent)for(var k=0,n=d.length;k<n;k++){h=b[d[k].listener];for(var e=Object.keys(h),l=0,q=e.length;l<q;l++)if(c===e[k])for(var f=0,m=h[e[k]].length;f<m;f++)void 0===b[c].__kbImmediateParent[d[k].listener][c]&&(b[c].__kbImmediateParent[d[k].listener][c]=[]),b[c].__kbImmediateParent[d[k].listener][c].push(h[e[k]][f])}K(b,b[c])}function H(b,c,d,e){d=new x(d,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);K(b,d);if(e){e=new v(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange);var h=m(e);!0!==h&&(Object.defineProperty(b,c,M(c,d)),e.listener="__kbupdatelisteners",e.type="postcreate",m(e))}else e=new v(b,c,"set",d,void 0,[],"__kblisteners",b._stopChange),h=m(e),!0!==h&&(Object.defineProperty(b,c,M(c,d)),e.listener="__kbupdatelisteners",e.type="postset",m(e));return!0!==h}function L(b,c,d,e){if(e){e=new v(b,c,"create",d,void 0,[],"__kbcreatelisteners",
b._stopChange);var h=m(e);if(!0!==h){var k=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,P(d.__kbImmediateParent,c,k));b.__kbpointers.push(c);G(b,c);e.listener="__kbupdatelisteners";e.type="postcreate";m(e)}return!0!==h}k=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,P(d.__kbImmediateParent,c,k));b.__kbpointers.push(c);G(b,c);return!0}function B(b,c,d){if(I.call(b,c)){if("length"===c)if(d>b.length&&void 0!==b[d-1])b.length=
d;else{if(d<b.length){c=d;for(var e=b.length;c<e;c++)b[c]&&delete b[c];b.length=d}}else{if("object"===typeof d)return H(b,c,d);if(d instanceof x)return L(b,c,d);b[c]=d}return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=d,!0;if(-1===F.indexOf(c)){if("object"===typeof d)return H(b,c,d,!0);if(d instanceof x)return L(b,c,d,!0);var e=new v(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange),h=m(e);!0!==h&&(Object.defineProperty(b,
c,M(c,d)),e.listener="__kbupdatelisteners",e.type="postcreate",m(e));return!0!==h}}function N(b,c){var d=new v(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),e=m(d);!0!==e&&("object"===typeof b[c]&&(b[c]=null),delete b[c],d.listener="__kbupdatelisteners",d.type="postdelete",m(d));return!0!==e}function u(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===
typeof b?b:this[b]:this)}function p(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function t(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function I(b,c){if(this==Object.prototype&&void 0===
b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var d=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return d?void 0===d.value:!1}function C(b){return b.split(".")}function J(b,c){return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[c],k=new v(this,c,"addlistener",h,
void 0,arguments,"");"string"===typeof d&&1!==C(d).length&&(h=C(d),h.pop(),h.join("."),k.local=this.getLayer(h),h=k.local[c],k.value=h,d=C(d).pop());!0!==m(k)&&(u.call(h)?(void 0===h[d]&&(h[d]=[]),h[d].push(e),k.type="postaddlistener",m(k)):p.call(h)&&"function"===typeof d&&(h.push(d),k.type="postaddlistener",m(k)));return this}}function D(b,c){return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[c],k=new v(this,c,"removelistener",h,void 0,arguments,"");
"string"===typeof d&&1!==C(d).length&&(h=C(d),h.pop(),h.join("."),k.local=this.getLayer(h),h=k.local[c],k.value=h,d=C(d).pop());if(!0!==m(k))if(u.call(h)){if(void 0!==h[d])for(var n=0,l=h[d].length;n<l;n++)if(h[d][n].toString()===e.toString()){h[d].splice(n,1);k.type="postremovelistener";m(k);break}}else if(p.call(h)&&"function"===typeof d)for(n=0,l=h.length;n<l;n++)if(h[n].toString()===d.toString()){h.splice(n,1);k.type="postremovelistener";m(k);break}return this}}function A(b,c){function d(c,b,
k){var n=Object.keys(this,"all").filter(function(c){return t.call(this[c])}.bind(this)),l=this,q=c;"string"===typeof c&&1!==C(c).length&&(l=C(c),q=l.pop(),l.join("."),l=this.getLayer(l),void 0===l[k][c]&&(l[k][c]=[]),l[k][c].push(b));u.call(l[k])?(void 0===l[k][q]&&(l[k][q]=[]),l[k][q].push(b),void 0!==l.__kbpointers[q]&&(void 0===l.__kbpointers[q][q]&&(l.__kbpointers[q][q]=[]),l.__kbpointers[q][q].push(_func))):l[k].push(b);q=0;for(l=n.length;q<l;q++)d.call(this[n[q]],c,b,k)}return function(e,h){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var k=new v(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==m(k)&&(d.call(this,e,h,c),k.type="postaddchildlistener",m(k));return this}}function w(b,c){function d(c,b,k){var n=Object.keys(this,"all").filter(function(c){return t.call(this[c])}.bind(this)),l=this,q=c;if("string"===typeof c&&1!==C(c).length&&(l=C(c),q=l.pop(),l.join("."),l=this.getLayer(l),void 0!==l[k][c]))for(var f=0,m=l[k][c].length;f<m;f++)if(l[k][c][f].toString()===
b.toString()){l[k][c].splice(f,1);break}if(u.call(l[k])){if(void 0!==l[k][q]){f=0;for(m=l[k][q].length;f<m;f++)if(l[k][q][f].toString()===b.toString()){l[k][q].splice(f,1);break}if(-1!==l.__kbpointers.indexOf(q)&&void 0!==l[q].__kbImmediateParent[k][q])for(f=0,m=l[q].__kbImmediateParent[k][q].length;f<m;f++)if(l[q].__kbImmediateParent[k][q][f].toString()===b.toString()){l[q].__kbImmediateParent[k][q].splice(f,1);break}}}else for(f=0,m=l[k].length;f<m;f++)if(l[k][f].toString()===b.toString()){l[k].splice(f,
1);break}f=0;for(m=n.length;f<m;f++)d.call(this[n[f]],c,b,k)}return function(e,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=new v(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==m(k)&&(d.call(this,e,h,c),k.type="postremovechildlistener",m(k));return this}}var E={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],
reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},F=["__proto__"],f=function(b,c){if(!c._stopPropogration&&b)for(var d=0,e=b.length;d!==e&&(b[d](c),!c._stopPropogration);d++);},m=function(b){if(b.listener){var c=b.local[b.listener],d=b.local[b.listener.replace("__kb","__kbparent")];u.call(c)?(f(c[b.key],b),f(c["*"],b)):f(c,b);u.call(d)?
(f(d[b.key],b),f(d["*"],b)):f(d,b)}f(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof x?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(d){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(d,10)):isNaN(parseInt(d,
10))})};Object.defineProperties(Object.prototype,{"typeof":g(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:g(function(b){function c(b){for(var h=Object.keys(b,"all"),k=0,n=void 0,l=0,q=h.length;l<q;l++)n=b[h[l]],"object"===typeof n&&void 0!==n&&null!==n?-1===d.indexOf(n)&&(d.push(n),k+=c(n)):"string"===typeof n?k+=2*n.length:"number"===typeof n?k+=8:"boolean"===typeof n?k+=4:"function"===typeof n&&(k+=2*n.toString().length),k+=2*h[l].length;return k}
if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var d=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:g(u,!1,!0),isArray:g(p,!1,!0),isMixed:g(t,!1,!0),isObservable:g(I,!1,!0),stringify:g(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,function(d,b){if(p(b)||u(b)){if(-1!==c.indexOf(b))return;c.push(b)}return b})},
!1,!0),getKeys:g(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:g(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==
c[b]})},!1,!0),keyCount:O(function(){return this.getKeys("o").length},!1,!0),indexCount:O(function(b){return this.length},!1,!0),count:O(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(x.prototype,{concat:g(Array.prototype.concat),every:g(Array.prototype.every),filter:g(Array.prototype.filter),find:g(Array.prototype.find),findIndex:g(Array.prototype.findIndex),forEach:g(Array.prototype.forEach),includes:g(Array.prototype.includes),indexOf:g(Array.prototype.indexOf),
join:g(Array.prototype.join),lastIndexOf:g(Array.prototype.lastIndexOf),map:g(Array.prototype.map),reduce:g(Array.prototype.reduce),reduceRight:g(Array.prototype.reduceRight),slice:g(Array.prototype.slice),some:g(Array.prototype.some),entries:g(Array.prototype.entries),toLocaleString:g(Array.prototype.toLocaleString),add:g(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());"undefined"===d[b]&&(d[b]=c);return this}),set:g(function(b,c){var d=-1!==
b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());d[b]=c;return this}),get:g(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:g(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:g(function(b){var c=
-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:g(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,b,g(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,d);return this}),addPointer:g(function(b,c){b instanceof x||(b=new x(b,b.__kbname));var d=Object.getOwnPropertyDescriptor(b,
c);Object.defineProperty(this,c,P(b,c,d));this.__kbpointers[c]=b}),move:g(function(b,c){this[c]=b[c];b instanceof x||(b[c]=null);delete b[c];return this}),copy:g(function(b,c){this[c]=b[c];return this}),merge:g(function(b){function c(b,h){for(var k=b instanceof x?b.keys("o"):Object.keys(b),n,l=0,q=k.length;l<q;l++)n=b[k[l]],"object"===typeof n&&-1===d.indexOf(n)&&"undefined"!==h[k[l]]?c(n,h):h[k[l]]=n}var d=[];c(b,this);return this}),copyWithin:g(function(b,c,d){c=c||0;d=d||0;var e=new v(this,b,"copyWithin",
this[b],void 0,arguments,"");if(!0!==m(e)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;d=d<this.length?d:this.length-1;c=0>c?this.length-1:c;d=0>c?this.length-1:d;for(var h=c;h<=d;h++)this[b+(h-c)]=this[h];e.type="postcopyWithin";m(e)}return this}),fill:g(function(b,c,d){c=void 0!==c?Math.max(0,c):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;var e=new v(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==m(e)){for(var h=a.key;h<d;h++)this[h]=
b;e.type="postfill";m(e)}return this}),pop:g(function(){var b=new v(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==m(b)){var c=this[this.length-1];--this.length;b.type="postpop";m(b);return c}return null}),push:g(function(b){var c=new v(this,this.length,"push",b,void 0,arguments,"");!0!==m(c)&&(this[this.length]=b,c.type="postpush",m(c));return this.length}),reverse:g(function(){var b=new v(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==m(b)){for(var c=this.slice().reverse(),
d=0,e=this.length;d<e;d++)this[d]=c[d];b.type="postreverse";m(b)}return this}),shift:g(function(){var b=new v(this,0,"shift",this[0],void 0,arguments,"");if(!0!==m(b)){for(var c=a.key,d=this.length-1;c<d;c++)this[c]=this[c+1];--this.length;b.type="postshift";m(b)}return null}),sort:g(function(){var b=new v(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==m(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),d=0,e=this.length;d<e;d++)this[d]=c[d];b.type="postsort";m(b)}return this}),splice:g(function(b,
c,d){var e=new v(this,b,"splice",void 0,void 0,arguments,"");if(!0!==m(e)){var h=[],k=Array.prototype.slice.call(arguments,2),n=k.length-2,l=0;if(0!==c&&void 0!==this[b-1+c])for(var q=0,f=c;q<f;q++){h.push(this[b+q]);for(var g=b+q,R=this.length-1;g<R;g++)this[g]=this[g+1];delete this[this.length-1]}if(0!==n)for(q=0,f=n;q<f;q++){l=b+Math.min(1,q);g=this.length;for(R=l;g>R;g--)this[g]=this[g-1];this[l]=k[q]}e.type="postsplice";e.listener="";m(e);return h}return[]}),unshift:g(function(){var b=new v(this,
0,"unshift",this[0],void 0,arguments,"");if(!0!==m(b)){for(var c=Array.prototype.slice.call(arguments),d=this.length-1+c.length,e=c.length;-1!==d;d--)this[d]=d<e?c[d]:this[d-c.length];b.type="postunshift";m(b)}return this.length}),getLayer:g(function(b){function c(b){var e=b[0];return void 0===this[e]&&0!==b.length-1?null:t(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=C(b);return c.call(this,b)}),setLayer:g(function(b){function c(b){var e=b[0];void 0===this[e]&&0!==b.length-
1&&(this[e]=x({},this.__kbname,this,this.__kbscopeString+"."+e));return t(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=C(b);return c.call(this,b)}),ignoreCreate:g(function(b){-1===F.indexOf(b)&&F.push(b);return this}),addActionListener:g(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:g(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var d=0,e=this.__kbref.__kbevents[b];d<e;d++)if(this.__kbref.__kbevents[b][d].toString()===
c.toString()){this.__kbref.__kbevents[b].splice(d,1);break}return this}),subscribe:g(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:g(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var d=0,e=this.__kbsubscribers[b].length;d<e;d++)if(this.__kbsubscribers[b][d].toString()===c.toString()){this.__kbsubscribers[b].splice(d,1);break}return this}),callSubscribers:g(function(b,c,d){if(void 0!==this.__kbsubscribers[b])for(var e=
0,h=this.__kbsubscribers[b].length;e<h;e++)this.__kbsubscribers[b].call(this,b,c,d);return this}),stopChange:g(function(){this._stopChange=!0;return this})});Object.defineProperties(x.prototype,{addDataListener:g(J("addDataListener","__kblisteners")),removeDataListener:g(D("removeDataListener","__kblisteners")),addDataUpdateListener:g(J("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:g(D("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:g(J("addDataCreateListener",
"__kbcreatelisteners")),removeDataCreateListener:g(D("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:g(J("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:g(D("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:g(A("addChildDataListener","__kbparentlisteners")),removeChildDataListener:g(w("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:g(A("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:g(w("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:g(A("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:g(w("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:g(A("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:g(w("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return x}}(),U=function(){return function(){function z(r){if("object"===typeof r)for(var x=0,v=r.length;x<
v;x++)K_Components[r[x]]?y(r[x],K_Components[r[x]],document.getElementById("script_"+r[x])):z.load(r[x],"component/"+r[x]+"/"+location.search,y);else"string"===typeof r&&(K_Components[r[x]]?y(r,K_Components[r],document.getElementById("script_"+r)):z.load(r,"component/"+r+"/"+location.search,y))}var y=function(){},Q=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});z.getUnknowns=function(r){var x=r.match(Q);return x.map(function(r){return r.replace(/[<\/>]/g,"")}).filter(function(r,g){return document.createElement(r)instanceof
HTMLUnknownElement&&-1===x.indexOf(r,g+1)&&!K_Components[r]})};z.load=function(r,x,v){document.head.appendChild(function(g,r,x){var v=document.createElement("script");v.type="text/javascript";v.charset="utf-8";v.async=!0;v.src=r;v.id="script_"+g;v.onload=function(){x(g,K_Components[g],this)};return v}(r,x,v));return z};z.onLoad=function(r){if(void 0===r)return y;y="function"===typeof r?r:y;return z};return z}}(),V=function(z){return function(){function y(f){this.name=f.tagName.toLowerCase();this.template=
C[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=f;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function Q(f,m,b,c,d,e,h,k){function n(c){var b="for"===m?u(c):[],d=this;this.key="for"!==m?B(c):b[0];this.filterNames=N(c);this.component=
"for"===m?b[1]:void 0;this.id=0;this.isEvent=l;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:p("",!0)});this.__proto__.updateData=function(c){if(d.isConnected&&d._data){if("object"!==typeof c||void 0===c.value)c={value:c};"function"===typeof d._data.stopChange&&d._data.stopChange().set(d.key,c.value)}};this.__proto__.updateDom=function(c){if(d.isSynced()){d.element.stopChange();
if("object"!==typeof c||void 0===c.value)c={value:c};d.value=c.value}};this.__proto__.updateLoop=function(){d.kb_loop&&d.loop(d.kb_loop)}}var l="attribute"===m&&-1!==D.indexOf(h.name)||"component"===m&&h.name&&-1!==D.indexOf(h.name);l&&k.stopChange().removeAttribute(h.name);Object.defineProperties(n.prototype,{valget:p(r),valset:p(x),refresh:p(O),connect:p(M),deleteMap:p(K),loop:p(P),unsync:p(G),isSynced:p(v),type:p(m),text:p(b,!0),bindText:p(c,!0),bindNames:p("for"===m?[u(c[0])[0]]:L(c),!0),bindListener:p(l?
d.toLowerCase():d),bindProperty:p(l?h.name.toLowerCase():e),bindTarget:p(h,!0),element:p(k,!0),_data:p({},!0),filters:p({},!0),maps:p(f,!0),loop:p(P)});return n}function r(){return this._value}function x(f){this._value=this.isSynced()?f:this._value;this.refresh()}function v(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function g(f,m){function b(c,b){return b.reduce(function(b,d){return b+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(b,
d){if(void 0!==c.filters){if(void 0!==c.filters[d])return c.filters[d](b);console.warn("there is no filter by the name %o in the data model filters %o",d,Object.keys(c.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},d._value))},"")}return 1===m.length?"string"===typeof m[0]._value?b(f,m):m[0]._value:b(f,m)}function O(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===
this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=g(this,this.bindText)):this.bindTarget[this.bindProperty]=g(this,this.bindText));return this}function M(f){this._data=f;this.filters=void 0!==f.filters?f.filters:this.filters;f=0;for(var m=this.bindNames.length;f<m;f++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[f])||(console.warn("No property by the name %o exists on this data set %o",
this.bindNames[f],this._data),this._data.add(this.bindNames[f],this._value)),this.value=this._data.get(this.bindNames[f]),"component"!==this.type&&"for"!==this.type?(this.isConnected=!0,this._data.addDataUpdateListener(this.bindNames[f],this.updateDom)):"for"===this.type&&this._value.addDataUpdateListener&&this._value.addDataUpdateListener("*",this.updateLoop).addDataCreateListener(this.updateLoop).addDataDeleteListener(this.updateLoop));1!==this.bindText.length||"text"!==this.type&&"attribute"!==
this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function P(f){this.kb_loop=f;this.element.stopChange().innerHTML="";for(var m=this._value,b=0,c=this.filterNames.length;b<c;b++)m=this.filters[this.filterNames[b]](m);m=0;for(b=this._value.length;m<b;m++)c=document.createElement(this.component),c.k_post=this._value[m],c.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(c),"function"===typeof f&&
f(c)}function K(){this.maps[this.key].splice(this.id,1);return this}function G(){for(var f=0,m=this.bindNames.length;f<m;f++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[f],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=this.bindNames=this.filters=
this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function H(f){return f.split(new RegExp("("+A.split("").join("\\")+")(.*?)("+w.split("").join("\\")+")","g")).map(function(f,b,c){return c[b-1]===A?A+f+w:f}).filter(function(f,b,c){return 0!==f.length&&f!==A&&f!==w&&0!==f.length})}function L(f){return f.filter(function(f){return-1!==
f.indexOf(A)&&-1!==f.indexOf(w)}).map(function(f){return B(f)})}function B(f){return f.replace(new RegExp("["+A+w+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function N(f){return-1!==f.indexOf(E)?f.replace(new RegExp("["+w+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function u(f){return-1!==f.indexOf("for")?f.replace(new RegExp("["+A+w+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(f){return 0!==
f.length}):[]}function p(f,m,b){return{value:f,writable:!!m,enumerable:!1,configurable:!!b}}function t(f,m){for(var b=F[f],c=0,d=b.length;c<d&&(b[c](m),m._stopPropogation);c++);return m._preventDefault}function I(f){var m=f.match(J).map(function(b){return b.replace(/[<\/>]/g,"")});m.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===m.indexOf(b,c+1)&&void 0===C[b]});0!==m.length&&t("unknown",new Event("unknown",m));return m}var C={},J=/(<\/.*?>)/g;z().call();
var D=Object.keys(HTMLElement.prototype).filter(function(f){return 0===f.indexOf("on")}),A="{{",w="}}",E="|",F={unknown:[]};y.prototype.map=function(f){function m(c){for(var d=0,e=c.length;d<e;d++)if(void 0===c[d].kb_maps&&8!==c[d].nodeType){c[d].kb_mapper=f;if(3===c[d].nodeType){var h=c[d],k=b,n=h.textContent,l=h.parentElement instanceof HTMLUnknownElement;if(n.match(new RegExp("(\\"+A.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+")","g")))for(var q=l?"component":-1!==n.indexOf("for")&&
void 0!==n.indexOf("loop")?"for":"text",h=Q(k,q,n,H(n),l?"":"textContent","textContent",h,h.parentElement),n=0,l=h.prototype.bindText.length;n<l;n++)0===h.prototype.bindText[n].indexOf(A)&&(q=new h(h.prototype.bindText[n]),h.prototype.bindText[n]=q,void 0===k[q.key]&&(k[q.key]=[]),q.id=k[q.key].length,k[q.key].push(q))}else for(var k=c[d],h=b,n=k.attributes,l=k instanceof HTMLUnknownElement,q=0,g=n.length;q<g;q++)if(n[q].value.match(new RegExp("(\\"+A.split("").join("\\")+")(.*?)(\\"+w.split("").join("\\")+
")","g")))for(var t=Q(h,l?"component":"attribute",n[q].value,H(n[q].value),l?"":n[q].name,"value",n[q],k),p=0,r=t.prototype.bindText.length;p<r;p++)if(0===t.prototype.bindText[p].indexOf(A)){var u=new t(t.prototype.bindText[p]);t.prototype.bindText[p]=u;void 0===h[u.key]&&(h[u.key]=[]);h[u.key].push(u)}c[d].childNodes&&0!==c[d].childNodes.length&&m(c[d].childNodes)}}var b={};m(f.childNodes);return b};y.prototype.addFilter=function(f,m){void 0!==this.maps[f]&&this.maps[f].forEach(function(b){b.filters.push(m);
b.refresh()});return this};y.prototype.removeFilter=function(f,m){void 0!==this.maps[f]&&this.maps[f].forEach(function(b){b.filters.splice(this.maps[f].filters.indexOf(m),1);b.refresh()});return this};y.prototype.swapFilter=function(f,m,b){void 0!==this.maps[f]&&this.maps[f].forEach(function(c){c.filters.splice(this.maps[f].filters.indexOf(m),1,b);c.refresh()});return this};Object.defineProperties(y,{startChars:p(function(f){if(void 0===f)return A;A="string"===typeof f?f:A;return this}),endChars:p(function(f){if(void 0===
f)return w;w="string"===typeof f?f:w;return this}),pipeChars:p(function(f){if(void 0===f)return E;E="string"===typeof f?f:E;return this}),getUnknown:p(I),isRegistered:p(function(f){return void 0!==C[f]}),register:p(function(f,m){void 0===C[f]?(C[f]=m,I(m)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",f);return this}),addEventListener:p(function(f,m){void 0!==F[f]?F[f].push(m):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",
f);return this}),removeEventListener:p(function(f,m){if(void 0!==F[f])for(var b=0,c=F[f].length;b<c;b++)F[f][b].toString()===m.toString()&&F[f].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",f);return this})});return y}}(function(){function z(){function y(c,b){var e=c.length,h;for(h=0;h<e&&(c[h](b),void 0===b._stopPropogation);h++);}function z(c,b){var e=c.length,h;for(h=0;h<e&&(b.child=b.target,b.target=c[h].parent,c[h].func(b),void 0===
b._stopPropogation);h++);}function r(c,b){for(var e=c.length;0<e;f++)if(c[f].toString()===b.toString())return!0;return!1}function x(c,b,e,h,k,f,l,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=e;this.oldValue=h;this.target=c;this.attr=b;this.arguments=k;this.action=f;this.child=void 0;this.type=l;this.stopChange=q}function v(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners=
{};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function g(c,b,e,h){var k=c.get,f=c.set,l;return function(c){l=k.call(this);e(this,b,c,l,void 0,this._stopChange)&&f.call(this,c);this._stopChange||h(this,b,c,l);this._stopChange=void 0}}function O(c,b,e,h){var k;return function(f){k=c.value;e(this,b,f,k,arguments,this._stopChange)&&(c.value=f);this._stopChange||h(this,b,f,k,arguments);this._stopChange=
void 0}}function M(c,b,e,h){var k=c.value,f;return function(){e(this,b,null,null,arguments,this._stopChange)&&(f=k.apply(this,arguments));this._stopChange||h(this,b,null,null,arguments,f);this._stopChange=void 0;return f}}function P(c,b,e,h,k){var f=k.style,l=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,m;return{get:function(){return m},set:function(c){q=m;e(k,b,c,q,void 0,this._stopChange)&&(m=c,f.setProperty(l,c));this._stopChange||h(k,b,c,q);this._stopChange=void 0},enumerable:!0,
configurable:!0}}function K(c,b,e,h){if("function"!==typeof b)return t;var k=-1!==["value","checked"].indexOf(c),f=-1!==E.indexOf(c),l;if(this.toString()!==t.toString())if(e){var q=this.querySelectorAll("*");e=q.length;for(var m,g=0;g<e;g++){m=q[g].attrListeners();if(k||"*"===c)void 0!==q[g].addInputBinding&&q[g].addInputBinding(),void 0!==q[g].addInputBoxBinding&&q[g].addInputBoxBinding();if(f)t.injectStyleProperty(q[g],c),l=h?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){l=
h?"_parentStyleUpdateListeners":"_parentStyleListeners";e=E.length;for(var p=0;p<e;p++)t.injectStyleProperty(q[g],E[p]);void 0===m[l]["*"]&&(m[l]["*"]=[]);m[l]["*"].push({parent:this,func:b})}l=h?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===m[l][c]&&(m[l][c]=[]);m[l][c].push({parent:this,func:b})}}else{m=this.attrListeners();if(f)l=h?"_styleUpdateListeners":"_styleListeners",t.injectStyleProperty(this,c);else{if(k||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==
this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){l=h?"_styleUpdateListeners":"_styleListeners";e=E.length;for(g=0;g<e;g++)t.injectStyleProperty(this,E[g]);void 0===m[l][c]&&(m[l][c]=[]);m[l][c].push(b)}l=h?"_attrUpdateListeners":"_attrListeners"}void 0===m[l][c]&&(m[l][c]=[]);m[l][c].push(b)}else{if(k||"*"===c)for(p=document.querySelectorAll("input, textarea"),e=p.length,g=0;g<e;g++)void 0!==p[g].addInputBinding&&p[g].addInputBinding(),void 0!==p[g].addInputBoxBinding&&p[g].addInputBoxBinding();
if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=f.length+1;f.unshift(document.body);for(g=0;g<e;g++)t.injectStyleProperty(f[g],c);l=h?D:J}else{if("*"===c){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=f.length+1;k=E.length;f.unshift(document.body);for(g=0;g<e;g++)for(p=0;p<k;p++)t.injectStyleProperty(f[g],E[p]);l=h?D:J;void 0===l[c]&&(l[c]=[]);l[c].push(b)}l=h?C:I}void 0===l[c]&&(l[c]=[]);l[c].push(b)}}function G(c,b,e,h){function k(c,e){var h=e[c],
f=h.length;for(l=0;l<f;l++)h[l].toString()===b.toString()&&h.splice(l,1)}if("function"!==typeof b)return t;["value","checked"].indexOf(c);var f=-1!==E.indexOf(c),l;if(this.toString()!==t.toString())if(e){e=this.querySelectorAll("*");var q=e.length;f?(f=h?"_childStyleUpdateListeners":"_childStyleListeners",k(c,this.attrListeners()[f]),f=h?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===c&&(f=h?"_childStyleUpdateListeners":"_childStyleListeners",k(c,this.attrListeners()[f])),f=h?"_childAttrUpdateListeners":
"_childAttrListeners",k(c,this.attrListeners()[f]),f=h?"_parentAttrUpdateListeners":"_parentAttrListeners");for(l=0;l<q;l++){for(var g=e[l].attrListeners()[f][c],m=g.length,p=0;p<m;p++)g[p].isEqualNode(this)&&g.slice(p,1);if("*"===c)for(listenersStyle=h?"_parentStyleUpdateListeners":"_parentStyleListeners",g=e[l].attrListeners()[f][c],m=g.length,p=0;p<m;p++)g[p].isEqualNode(this)&&g.slice(p,1)}}else f?f=h?"_styleUpdateListeners":"_styleListeners":("*"===c&&(f=h?"_styleUpdateListeners":"_styleListeners",
k(c,this.attrListeners()[f])),f=h?"_attrUpdateListeners":"_attrListeners"),k(c,this.attrListeners()[f]);else f?f=h?D:J:("*"===c&&(f=h?D:J,k(c,f)),f=h?C:I),k(c,f)}function H(c,b){t.addAttrListener.call(this,c,b,!0);return this}function L(c,b){t.addAttrUpdateListener.call(this,c,b,!0);return this}function B(c,b){t.removeAttrListener.call(this,c,b,!0);return this}function N(c,b){t.removeAttrUpdateListener.call(this,c,b,!0);return this}function u(c,b,e){var h=this.attrListeners();"html"===b&&(b="innerHTML");
"events"===b&&(b="onclick");switch(c){case "attr":if(r(h._attrListeners[b],e))return!0;break;case "attrupdate":if(r(h._attrUpdateListeners[b],e))return!0}return!1}function p(){this._stopChange=!0;return this}function t(){function c(c,b){var d,e=b.length;for(d=0;d<e;d++)-1===c.indexOf(b[d])&&c.push(b[d]);return c}function d(c,b){for(var d=Object.keys(c),e,h,f=0,k=d.length;f<k;f++)if(e=d[f],void 0===b[e])b[e]=c[e].slice();else for(var l=0,g=c[e].length;l<g;l++)h=c[e][l],b[e].push(h)}function e(b){if(3!==
b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),h,f=["value","checked"],k=e._attrListeners,l=e._attrUpdateListeners,g=e._parentAttrListeners;h=e._parentAttrUpdateListeners;var m=!1;if(void 0!==I["*"]||void 0!==C["*"])m=!0;if(!0!==m&&void 0!==k["*"]||void 0!==l["*"]||void 0!==g["*"]||void 0!==h["*"])m=!0;if(!0!==m)for(var n=0;n<f.length;n++)if(void 0!==I[f[n]]||void 0!==C[f[n]]||void 0!==k[f[n]]||void 0!==l[f[n]]||void 0!==g[f[n]]||void 0!==h[f[n]]){m=!0;break}h=m;f=Object.keys(J);
k=Object.keys(D);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);l=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);g=[];if(0!==f.length||0!==k.length)g=c(g,f),g=c(g,k);if(0!==g.length&&0!==l.length||0!==e.length)g=c(g,l),g=c(g,e);-1!==g.indexOf("*")&&(g=E);var e=g,f=e.length,p,u,k=[],r,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,g=b.target;void 0!==l&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);
if(h){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(k=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||k.unshift(b.arguments[0])):k=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));r=k.length;for(var B=0;B<r;B++)void 0!==k[B].addInputBinding&&k[B].addInputBinding(),void 0!==k[B].addInputBoxBinding&&k[B].addInputBoxBinding()}"appendChild"===
b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(k=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),k.unshift(b.arguments[0])):k=Array.prototype.slice.call(b.target.querySelectorAll("*"));h=b.target.__kb._parentAttrListeners;m=b.target.__kb._parentAttrUpdateListeners;n=b.target.__kb._parentStyleListeners;p=b.target.__kb._parentStyleUpdateListeners;r=k.length;for(B=0;B<r;B++){if(0!==f)for(u=0;u<f;u++)t.injectStyleProperty(k[B],e[u]);u=k[B].attrListeners();
d(h,u._parentAttrListeners);d(m,u._parentAttrUpdateListeners);d(n,u._parentStyleListeners);d(p,u._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=g,b.arguments=[])}}function h(c){var b=c.target.attributes[c.arguments[0]],d="setAttribute"===c.attr?c.arguments[1]:"";g(c.target,c.arguments[0],d,void 0!==b?b.value:"",[d])||c.preventDefault()}function f(c){var b=c.target.attributes[c.arguments[0]],d="setAttribute"===c.attr?c.arguments[1]:"";l(c.target,c.arguments[0],d,void 0!==b?b.value:"",
[d])}t.injectPrototypes(Node,"Node");t.injectPrototypes(Element,"Element");t.injectPrototypes(HTMLElement,"HTMLElement");t.injectPrototypes(HTMLInputElement,"HTMLInputElement");t.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");t.injectPrototypes(Document,"Document");var g=m,l=b;t.addAttrUpdateListener("appendChild",e);t.addAttrUpdateListener("removeChild",e);t.addAttrUpdateListener("innerHTML",e);t.addAttrUpdateListener("outerHTML",e);t.addAttrUpdateListener("innerText",e);t.addAttrUpdateListener("outerText",
e);t.addAttrUpdateListener("textContent",e);t.addAttrListener("setAttribute",h);t.addAttrListener("removeAttribute",h);t.addAttrUpdateListener("setAttribute",f);t.addAttrUpdateListener("removeAttribute",f);return t}var I={},C={},J={},D={},A={},w="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),E=Object.getOwnPropertyNames(document.body.style),F=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener",
"removeEventListener"]),f,m=function(c,b,e,h,f,g){e=new x(c,b,e,h,f,void 0,"set",g);void 0!==c.__kb&&(h=c.__kb._attrListeners,f=c.__kb._styleListeners,g=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==h[b]&&y(h[b],e),void 0===e._stopPropogation&&void 0!==f[b]&&y(f[b],e),void 0===e._stopPropogation&&void 0!==h["*"]&&(y(h["*"],e),void 0===e._stopPropogation&&y(f["*"],e)),void 0===e._stopPropogation&&void 0!==g[b]&&z(g[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&z(c[b],e),void 0===
e._stopPropogation&&void 0!==g["*"]&&(z(g["*"],e),void 0===e._stopPropogation&&z(c["*"],e)));void 0===e._stopPropogation&&void 0!==I[b]&&y(I[b],e);void 0===e._stopPropogation&&void 0!==J[b]&&y(J[b],e);void 0===e._stopPropogation&&void 0!==I["*"]&&(y(I["*"],e),void 0===e._stopPropogation&&y(J["*"],e));return void 0!==e._preventDefault?!1:!0},b=function(c,b,e,h,f,g){e=new x(c,b,e,h,f,g,"update");void 0!==c.__kb&&(h=c.__kb._attrUpdateListeners,f=c.__kb._styleUpdateListeners,g=c.__kb._parentAttrUpdateListeners,
c=c.__kb._parentStyleUpdateListeners,void 0!==h[b]&&y(h[b],e),void 0===e._stopPropogation&&void 0!==f[b]&&y(f[b],e),void 0===e._stopPropogation&&void 0!==h["*"]&&(y(h["*"],e),void 0===e._stopPropogation&&y(f["*"],e)),void 0===e._stopPropogation&&void 0!==g[b]&&z(g[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&z(c[b],e),void 0===e._stopPropogation&&void 0!==g["*"]&&(z(g["*"],e),void 0===e._stopPropogation&&z(c["*"],e)));void 0===e._stopPropogation&&void 0!==C[b]&&y(C[b],e);void 0===e._stopPropogation&&
void 0!==D[b]&&y(D[b],e);void 0===e._stopPropogation&&void 0!==C["*"]&&(y(C["*"],e),void 0===e._stopPropogation&&y(D["*"],e));return void 0!==e._preventDefault?!1:!0};t.injectPrototypeProperty=function(c,d,e,h,f){var n=c.prototype,l=Object.getOwnPropertyDescriptor(n,d);e=e||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var q=A[e];h=h||m;f=f||b;void 0===n.attrListeners&&(n={},n.attrListeners=function(){void 0===this.__kb&&(this.__kb=new v);return this.__kb}.bind(n),n.addAttrListener=
t.addAttrListener,n.addAttrUpdateListener=t.addAttrUpdateListener,n.addChildAttrListener=H,n.addChildAttrUpdateListener=L,n.hasListener=u,n.removeAttrListener=t.removeAttrListener,n.removeAttrUpdateListener=t.removeAttrUpdateListener,n.removeChildAttrListener=B,n.removeChildAttrUpdateListener=N,n.stopChange=p);void 0===q&&(A[e]={obj:c,proto:n,descriptors:{},set:void 0,update:void 0},q=A[e],q.set=h,q.update=f);void 0===q.descriptors[d]&&(q.descriptors[d]=l);l.configurable&&(void 0!==l.set?Object.defineProperty(n,
d,{get:l.get,set:g(l,d,h,f),enumerable:!0,configurable:!0}):"function"===typeof l.value?Object.defineProperty(n,d,{value:M(l,d,h,f),writable:!0,enumerable:!0,configurable:!0}):void 0!==l.value&&Object.defineProperty(n,d,{get:function(){return l.value},set:O(l,d,h,f),enumerable:!0,configurable:!0}));return t};t.injectStyleProperty=function(c,d,e,f){var k=c.style,g=Object.getOwnPropertyDescriptor(k,d),l=c.attrListeners().injectedStyle;e=e||m;f=f||b;void 0===l&&(c.attrListeners().injectedStyle={obj:c,
proto:k,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=e,c.attrListeners().injectedStyle.update=f,l=c.attrListeners().injectedStyle);void 0===l.descriptors[d]&&(l.descriptors[d]=g);g.configurable&&Object.defineProperty(k,d,P(g,d,e,f,c));return t};t.injectPrototypes=function(c,d,e,f){var k=c.prototype;d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=A[d],l=Object.getOwnPropertyNames(k);e=e||m;f=f||b;var q;void 0===k.attrListeners&&(k.attrListeners=
function(){void 0===this.__kb&&(this.__kb=new v);return this.__kb},k.addAttrListener=t.addAttrListener,k.addAttrUpdateListener=t.addAttrUpdateListener,k.addChildAttrListener=H,k.addChildAttrUpdateListener=L,k.removeAttrListener=t.removeAttrListener,k.removeAttrUpdateListener=t.removeAttrUpdateListener,k.removeChildAttrListener=B,k.removeChildAttrUpdateListener=N,k.hasListener=u,k.stopChange=p);void 0===g&&(A[d]={obj:c,proto:k,descriptors:{},set:void 0,update:void 0},g=A[d],g.set=e,g.update=f);q=A[d].descriptors;
for(f=0;f<l.length;f+=1)void 0===q[l[f]]&&t.injectPrototypeProperty(c,l[f],d,e,b);if(-1!==l.indexOf("value")){var r=function(c){var b,d,e;if("checkbox"===this.type||"radio"===this.type)b=!0;d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){e=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(g.set(this,"checked",this.checked,d)?g.update(this,"checked",this.checked,d):q.checked.set.call(this,d));this.value=
e;g.set(this,"value",this.value,d)?g.update(this,"value",this.value,d):q.value.set.call(this,d)}.bind(this),0)};k.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",r)};k.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",r)};k.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",r)};k.addInputBoxBinding=function(){this.attrListeners()._onmousedown=
!0;this.addEventListener("mouseup",r)}}return t};t.addAttrListener=function(b,d,e){if("html"===b){b=0;for(var f=w.length;b<f;b++)K.call(this,w[b],d,e,!1)}else if("events"===b)for(b=0,f=F.length;b<f;b++)K.call(this,F[b],d,e,!1);else K.call(this,b,d,e,!1);return this};t.addAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var f=w.length;b<f;b++)K.call(this,w[b],d,e,!0)}else if("events"===b)for(b=0,f=F.length;b<f;b++)K.call(this,F[b],d,e,!0);else K.call(this,b,d,e,!0);return this};t.removeAttrListener=
function(b,d,e){if("html"===b){b=0;for(var f=w.length;b<f;b++)G.call(this,w[b],d,e,!1)}else if("events"===b)for(b=0,f=F.length;b<f;b++)G.call(this,F[b],d,e,!1);else G.call(this,b,d,e,!1);return this};t.removeAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var f=w.length;b<f;b++)G.call(this,w[b],d,e,!0)}else if("events"===b)for(b=0,f=F.length;b<f;b++)G.call(this,F[b],d,e,!0);else G.call(this,b,d,e,!0);return this};t.hasListener=function(b,d,e){"html"===d&&(d="innerHTML");"events"===d&&(d=
"onclick");switch(b){case "attr":if(r(I[d],e))return!0;break;case "attrupdate":if(r(C[d],e))return!0}return!1};t.injectedPrototypes=function(){return A};return t}"function"===typeof define&&define.amd&&define("KB",z);return z}()),S=function(z,y,Q){return function(){function r(B,N,u,p){function t(g,f,m,b,c){for(var d=O({},g),e=0,h=Object.keys(f.prototype),k=h.length;e<k;e++)d.__proto__[h[e]]=f.prototype[h[e]];e=0;h=Object.keys(b);for(k=h.length;e<k;e++)d.set(h[e],b[h[e]]);if(b.pointers)for(e=0,h=Object.keys(b.pointers),
k=h.length;e<k;e++)d.addPointer(b.pointers[h[e]],h[e]);f.apply(d,m);e=0;h=Object.keys(c);for(k=h.length;e<k;e++)d.set(h[e],c[h[e]]);if(c.pointers)for(e=0,h=Object.keys(c.pointers),k=h.length;e<k;e++)d.addPointer(c.pointers[h[e]],h[e]);e=0;h=Object.keys(d.filters);for(k=h.length;e<k;e++)d.filters[h[e]]=d.filters[h[e]].bind(d);if(d.sessionStorage){if(f=sessionStorage.getItem(d.id||g))for(f=JSON.parse(f),e=0,h=Object.keys(f),k=h.length;e<k;e++)d.set(h[e],f[h[e]]);else sessionStorage.setItem(d.id||g,
d.stringify());d.addChildDataUpdateListener("*",function(){sessionStorage.setItem(d.id||g,d.stringify())})}if(d.localStorage){if(f=localStorage.getItem(d.id||g))for(f=JSON.parse(f),e=0,h=Object.keys(f),k=h.length;e<k;e++)d.set(h[e],f[h[e]]);else localStorage.setItem(d.id||g,d.stringify());d.addChildDataUpdateListener("*",function(){localStorage.setItem(d.id||g,d.stringify())})}d.store&&P.set(d.id||g,d);return d}function y(p,f,m){p.kb_viewmodel=m;Object.keys(f).forEach(function(b){f[b].forEach(function(b){switch(b.type){case "for":b.connect(m);
M.isRegistered(b.component)?b.loop(function(b){r(b)}):(r.loadWaitList(b.component,function(d,e){b.loop(function(b){r(b)})}),r.loadWaitList(b.component).loading||(r.loadWaitList(b.component).loading=!0,g(b.component)));break;case "component":b.connect(m).deleteMap();break;default:b.connect(m)}})})}function C(g,f){D=new M(f);Object.defineProperty(D.wrapper,"__kbcomponenttree",v(f.kb_mapper?f.kb_mapper.__kbcomponenttree:[]));f.parentElement.replaceChild(D.fragment,f);N.unshift(D.wrapper);y(D.wrapper,
D.maps,t(g,K[g],N,w,E));if(-1===D.wrapper.__kbcomponenttree.indexOf(g)||D.wrapper.kb_viewmodel.multiple){D.wrapper.__kbcomponenttree.push(g);for(var m=D.wrapper.querySelectorAll("*"),b=0,c=m.length;b<c;b++)m[b]instanceof HTMLUnknownElement&&r(m[b])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
g),console.error("Recursive Component %o on %o",D.wrapper,D.wrapper.parentElement),D.wrapper.parentElement.removeChild(D.wrapper)}var z=B.tagName.toLowerCase(),D,A=Object.keys(HTMLElement.prototype).filter(function(g){return 0===g.indexOf("on")}),w={},E={};void 0===N&&(N=[]);u&&x(u,w);Object.defineProperty(w,"id",v(w.id||z+"-"+Date.now(),!0,!1,!0));Object.defineProperty(w,"filters",v(w.filters||{},!1,!1,!0));"string"===typeof w.sessionStorage&&(w.sessionStorage="true"===w.sessionStorage);Object.defineProperty(w,
"sessionStorage",v(void 0!==w.sessionStorage?w.sessionStorage:!1,!0,!1,!0));"string"===typeof w.localStorage&&(w.localStorage="true"===w.localStorage);Object.defineProperty(w,"localStorage",v(void 0!==w.localStorage?w.localStorage:!1,!0,!1,!0));"string"===typeof w.store&&(w.store="true"===w.store);Object.defineProperty(w,"store",v(void 0!==w.store?w.store:!1,!0,!1,!0));"string"===typeof w.multiple&&(w.multiple="true"===w.multiple);Object.defineProperty(w,"multiple",v(void 0!==w.multiple?w.multiple:
!1,!0,!1,!0));p&&x(p,E);E.innerHTML=B.innerHTML.toString();u=0;for(p=B.attributes.length;u<p;u++)E[B.attributes[u].name]=B.attributes[u].value;u=0;for(p=A.length;u<p;u++)B[A[u]]&&(E[A[u]]=B[A[u]]);B.k_post&&x(B.k_post,E);M.isRegistered(z)?C(z,B):(r.loadWaitList(z,function(g,f){C(z,B)}),r.loadWaitList(z).loading||(r.loadWaitList(z).loading=!0,g(z)))}function x(g,r){var u=Object.keys(g);r.pointers||(r.pointers={});for(var p=0,t=u.length;p<t;p++)if(g.isObservable(u[p]))r.pointers[u[p]]=g;else if(g[u[p]].isMixed())r.pointers[u[p]]=
g[u[p]].__kbImmediateParent;else if(Object.prototype.isObject(g[u[p]]))for(var v=0,x=Object.keys(g[u[p]]);v<t;v++)r[u[p]][x[v]]=g[u[p]][x[v]];else if(Object.prototype.isArray(g[u[p]]))for(v=0;v<t;v++)r[u[p]][v]=g[u[p]][v];else r[u[p]]=g[u[p]]}function v(g,r,u,p){return{value:g,writable:!!r,enumerable:!!p,configurable:!!u}}window.K_Components||(window.K_Components={});var g=y().onLoad(function(g,v){var u="<style>"+unescape(v.prototype.k_css)+"</style>"+unescape(v.prototype.k_html);r.register(g,v,u,
v.prototype.cms);r.loadWaitList(g).forEach(function(p){p(g,v)});r.loadWaitList(g,"clear")}),O=z(),M=Q(),P=O({},"Model"),K={},G=function(){return window.location.search.replace("?","").split("&").filter(function(g){return 0!==g.length}).reduce(function(g,r){g[r.split("=")[0]]=r.split("=")[1];return g},{})}(),H={},L;r.register=function(g,v,u,p){M.register(g,u);K[g]=v;return r};r.loadWaitList=function(g,v){if("undefined"===typeof v&&g)return H[g];if(g){if(void 0===H[g]||"clear"===v){var u=void 0===H[g]?
!1:!!H[g].loading;H[g]=[];H[g].loading=u}"function"===typeof v&&H[g].push(v)}return r};r.localRouting=function(g){g?(L=Node.prototype.appendChild,Node.prototype.appendChild=function(g){if("script"===g.tagName.toLowerCase()){g.src=g.src.substring(0,-1!==g.src.indexOf("?")?g.src.indexOf("?"):g.src.length);var r=g.src.match(/(.*?component\/)/);r&&(G.env||(G.env="prod"),"dev"===G.env&&(G.env="qa"),r=g.src.replace(r[0],"").replace(/[\/\s]/g,""),g.src="/components/"+r+"/build/"+G.env+"/"+r+(G.debug&&"prod"!==
G.env?"":".min")+".js",arguments[0]=g)}return L.apply(this,arguments)}):L&&(Node.prototype.appendChild=L,L=null);return r};return r}}(T,U,V);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return S}):"undefined"!==typeof module&&(module.exports=S);return S}();
