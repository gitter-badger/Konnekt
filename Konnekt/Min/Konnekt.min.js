var Konnekt=function(){var S=function(){return function(D,z,Q,n){function x(b,c,f,e){b=void 0===b?{}:b;var k={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var l=new Proxy(k,{set:M,deleteProperty:A}),q=Object.keys(b,"all");Object.defineProperties(k,{__kbname:h("string"===typeof c?c:"default",!0,!0),__kbref:h(f?f.__kbref||f:l,!0,!0),__kbscopeString:h(e||"",!0,!0),__kbImmediateParent:h(f||
null,!0,!0),__kbsubscribers:h({}),__kblisteners:h({}),__kbupdatelisteners:h({}),__kbparentlisteners:h({}),__kbparentupdatelisteners:h({}),__kbcreatelisteners:h([]),__kbdeletelisteners:h([]),__kbparentcreatelisteners:h([]),__kbparentdeletelisteners:h([]),__kbpointers:h({}),__kbevents:h(t),length:h(0,!0),__kbnonproxy:h(k,!1,!0),_stopChange:h(!1,!0)});c=0;for(f=q.length;c<f;c++)l[q[c]]=b[q[c]];k.__proto__=x.prototype;k.__kbevents.addlistener=[];k.__kbevents.removelistener=[];k.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return l}function w(b,c,f,e,k,l,q,v){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=l;this.type=this.event=f;this.listener=q;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=e;this.oldValue=k;this.stopChange=v}function h(b,c,f){return{value:b,writable:!!c,enumerable:!1,configurable:!!f}}function O(b,c,f){return{get:function(){return b.call(this)},set:function(f){c&&(b=f)},enumerable:!1,configurable:!!f}}function K(b,c){var f=c,e=c;return{get:function(){return f},
set:function(c){var l=new w(this,b,"set",c,f,arguments,"__kblisteners",this._stopChange);!0!==g(l)&&(e=f,f=c,l.stopChange||(l.listener="__kbupdatelisteners",l.type="postset",g(l)),this._stopChange||this.callSubscribers(b,f,e));this._stopChange=!1},configurable:!0,enumerable:!0}}function P(b,c,f){return{get:function(){return b[c]},set:function(f){(this._stopChange?b.stopChange():b)[c]=f;this._stopChange=!1},enumerable:f.enumerable,configurable:f.configurable}}function L(b,c){for(var f=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],e=[],k,l=0,q=f.length;l<q;l++)if(k=b[f[l].listener],r.call(k))for(var e=Object.keys(k),v=0,u=e.length;v<u;v++)for(var g=0,d=k[e[v]].length;g<d;g++)c[f[l].method](e[v],k[e[v]][g]);else for(v=0,u=k.length;v<u;v++)c[f[l].method](k[v])}function G(b,c){var f=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],e=[],k;if(b[c].__kbImmediateParent)for(var l=0,q=f.length;l<q;l++){k=b[f[l].listener];for(var e=Object.keys(k),v=0,g=e.length;v<g;v++)if(c===e[l])for(var d=0,h=k[e[l]].length;d<h;d++)void 0===b[c].__kbImmediateParent[f[l].listener][c]&&(b[c].__kbImmediateParent[f[l].listener][c]=[]),b[c].__kbImmediateParent[f[l].listener][c].push(k[e[l]][d])}L(b,b[c])}function N(b,c,f,e){f=new x(f,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);L(b,f);if(e){e=new w(b,c,"create",f,void 0,[],"__kbcreatelisteners",b._stopChange);var k=g(e);!0!==k&&(Object.defineProperty(b,c,K(c,f)),e.listener="__kbupdatelisteners",e.type="postcreate",g(e))}else e=new w(b,c,"set",f,void 0,[],"__kblisteners",b._stopChange),k=g(e),!0!==k&&(Object.defineProperty(b,c,K(c,f)),e.listener="__kbupdatelisteners",e.type="postset",g(e));return!0!==k}function H(b,c,f,e){if(e){e=new w(b,c,"create",f,void 0,[],"__kbcreatelisteners",
b._stopChange);var k=g(e);if(!0!==k){var l=Object.getOwnPropertyDescriptor(f.__kbImmediateParent,c);Object.defineProperty(b,c,P(f.__kbImmediateParent,c,l));b.__kbpointers.push(c);G(b,c);e.listener="__kbupdatelisteners";e.type="postcreate";g(e)}return!0!==k}l=Object.getOwnPropertyDescriptor(f.__kbImmediateParent,c);Object.defineProperty(b,c,P(f.__kbImmediateParent,c,l));b.__kbpointers.push(c);G(b,c);return!0}function M(b,c,f){if(I.call(b,c)||"length"===c){if("length"===c)if(f>b.length&&void 0!==b[f-
1])b.length=f;else{if(f<b.length){c=f;for(var e=b.length;c<e;c++)b[c]&&delete b[c];b.length=f}}else if("object"!==typeof f||f instanceof Node){if(f instanceof x)return H(b,c,f);b[c]=f}else return N(b,c,f);return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=f,!0;if(-1===E.indexOf(c)){if("object"!==typeof f||f instanceof Node){if(f instanceof x)return H(b,c,f,!0);var e=new w(b,c,"create",f,void 0,[],"__kbcreatelisteners",b._stopChange),
k=g(e);!0!==k&&(Object.defineProperty(b,c,K(c,f)),e.listener="__kbupdatelisteners",e.type="postcreate",g(e));return!0!==k}return N(b,c,f,!0)}}function A(b,c){var f=new w(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),e=g(f);!0!==e&&(b[c]&&"object"===typeof b[c]&&(b[c]=null),isNaN(parseInt(c,10))?delete b[c]:void 0!==b[c]&&(c=parseInt(c,10),b.splice(c,1),--b.length),f.listener="__kbupdatelisteners",f.type="postdelete",g(f));return!0!==e}function r(b){return this==Object.prototype&&
void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function m(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function p(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):
"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function I(b,c){if(this==Object.prototype&&void 0===b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var f=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return f?void 0===f.value:!1}function C(b){return b.split(".")}function J(b,
c){return function(f,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=this[c],l=new w(this,c,"addlistener",k,void 0,arguments,"");"string"===typeof f&&1!==C(f).length&&(k=C(f),k.pop(),k.join("."),l.local=this.getLayer(k),k=l.local[c],l.value=k,f=C(f).pop());!0!==g(l)&&(r.call(k)?(void 0===k[f]&&(k[f]=[]),k[f].push(e),l.type="postaddlistener",g(l)):m.call(k)&&"function"===typeof f&&(k.push(f),l.type="postaddlistener",g(l)));return this}}function F(b,c){return function(f,e){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var k=this[c],l=new w(this,c,"removelistener",k,void 0,arguments,"");"string"===typeof f&&1!==C(f).length&&(k=C(f),k.pop(),k.join("."),l.local=this.getLayer(k),k=l.local[c],l.value=k,f=C(f).pop());if(!0!==g(l))if(r.call(k)){if(void 0!==k[f])for(var q=0,v=k[f].length;q<v;q++)if(k[f][q].toString()===e.toString()){k[f].splice(q,1);l.type="postremovelistener";g(l);break}}else if(m.call(k)&&"function"===typeof f)for(q=0,v=k.length;q<v;q++)if(k[q].toString()===
f.toString()){k.splice(q,1);l.type="postremovelistener";g(l);break}return this}}function y(b,c){function f(c,b,l){var q=Object.keys(this,"all").filter(function(c){return p.call(this[c])}.bind(this)),v=this,g=c;"string"===typeof c&&1!==C(c).length&&(v=C(c),g=v.pop(),v.join("."),v=this.getLayer(v),void 0===v[l][c]&&(v[l][c]=[]),v[l][c].push(b));r.call(v[l])?(void 0===v[l][g]&&(v[l][g]=[]),v[l][g].push(b),void 0!==v.__kbpointers[g]&&(void 0===v.__kbpointers[g][g]&&(v.__kbpointers[g][g]=[]),v.__kbpointers[g][g].push(_func))):
v[l].push(b);g=0;for(v=q.length;g<v;g++)f.call(this[q[g]],c,b,l)}return function(e,k){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var l=new w(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==g(l)&&(f.call(this,e,k,c),l.type="postaddchildlistener",g(l));return this}}function B(b,c){function f(c,b,l){var q=Object.keys(this,"all").filter(function(c){return p.call(this[c])}.bind(this)),g=this,u=c;if("string"===typeof c&&1!==C(c).length&&(g=C(c),u=g.pop(),g.join("."),g=
this.getLayer(g),void 0!==g[l][c]))for(var d=0,h=g[l][c].length;d<h;d++)if(g[l][c][d].toString()===b.toString()){g[l][c].splice(d,1);break}if(r.call(g[l])){if(void 0!==g[l][u]){d=0;for(h=g[l][u].length;d<h;d++)if(g[l][u][d].toString()===b.toString()){g[l][u].splice(d,1);break}if(-1!==g.__kbpointers.indexOf(u)&&void 0!==g[u].__kbImmediateParent[l][u])for(d=0,h=g[u].__kbImmediateParent[l][u].length;d<h;d++)if(g[u].__kbImmediateParent[l][u][d].toString()===b.toString()){g[u].__kbImmediateParent[l][u].splice(d,
1);break}}}else for(d=0,h=g[l].length;d<h;d++)if(g[l][d].toString()===b.toString()){g[l].splice(d,1);break}d=0;for(h=q.length;d<h;d++)f.call(this[q[d]],c,b,l)}return function(e,k){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var l=new w(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==g(l)&&(f.call(this,e,k,c),l.type="postremovechildlistener",g(l));return this}}var t={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],
postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},E=["__proto__"],d=function(b,c){if(!c._stopPropogration&&b)for(var f=0,e=b.length;f!==e&&(b[f](c),!c._stopPropogration);f++);},g=function(b){if(b.listener){var c=b.local[b.listener],f=b.local[b.listener.replace("__kb",
"__kbparent")];r.call(c)?(d(c[b.key],b),d(c["*"],b)):d(c,b);r.call(f)?(d(f[b.key],b),d(f["*"],b)):d(f,b)}d(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof x?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&
"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(Object.prototype,{"typeof":h(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:h(function(b){function c(b){for(var k=Object.keys(b,"all"),l=0,g=void 0,d=0,u=k.length;d<u;d++)g=b[k[d]],"object"===typeof g&&void 0!==g&&null!==g?-1===f.indexOf(g)&&(f.push(g),l+=c(g)):"string"===typeof g?l+=2*g.length:"number"===typeof g?l+=8:"boolean"===typeof g?l+=4:"function"===
typeof g&&(l+=2*g.toString().length),l+=2*k[d].length;return l}if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var f=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:h(r,!1,!0),isArray:h(m,!1,!0),isMixed:h(p,!1,!0),isObservable:h(I,!1,!0),stringify:h(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,
function(b,e){if(m(e)||r(e)){if(-1!==c.indexOf(e))return;c.push(e)}return e})},!1,!0),getKeys:h(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:h(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;
return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==c[b]})},!1,!0),keyCount:O(function(){return this.getKeys("o").length},!1,!0),indexCount:O(function(b){return this.length},!1,!0),count:O(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(x.prototype,{concat:h(Array.prototype.concat),every:h(Array.prototype.every),filter:h(Array.prototype.filter),find:h(Array.prototype.find),findIndex:h(Array.prototype.findIndex),forEach:h(Array.prototype.forEach),
includes:h(Array.prototype.includes),indexOf:h(Array.prototype.indexOf),join:h(Array.prototype.join),lastIndexOf:h(Array.prototype.lastIndexOf),map:h(Array.prototype.map),reduce:h(Array.prototype.reduce),reduceRight:h(Array.prototype.reduceRight),slice:h(Array.prototype.slice),some:h(Array.prototype.some),entries:h(Array.prototype.entries),toLocaleString:h(Array.prototype.toLocaleString),add:h(function(b,c){"number"===typeof b&&(b=b.toString());var f=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==
b.indexOf(".")&&(b=b.split(".").pop());"undefined"===f[b]&&(f[b]=c);return this}),set:h(function(b,c){"number"===typeof b&&(b=b.toString());var f=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());f[b]=c;return this}),get:h(function(b){"number"===typeof b&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",
this,b)}),del:h(function(b){"number"===typeof b&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:h(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:h(function(b,c){var f=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===f[b]?Object.defineProperty(f.__proto__,
b,h(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,f);return this}),addPointer:h(function(b,c){b instanceof x||(b=new x(b,b.__kbname));var f=Object.getOwnPropertyDescriptor(b,c);Object.defineProperty(this,c,P(b,c,f));this.__kbpointers[c]=b}),move:h(function(b,c){this[c]=b[c];b instanceof x||(b[c]=null);delete b[c];return this}),copy:h(function(b,c){this[c]=b[c];return this}),merge:h(function(b){function c(b,k){for(var l=b instanceof
x?b.keys("o"):Object.keys(b),g,d=0,u=l.length;d<u;d++)g=b[l[d]],"object"===typeof g&&-1===f.indexOf(g)&&"undefined"!==k[l[d]]?c(g,k):k[l[d]]=g}var f=[];c(b,this);return this}),copyWithin:h(function(b,c,f){c=c||0;f=f||0;var e=new w(this,b,"copyWithin",this[b],void 0,arguments,"");if(!0!==g(e)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;f=f<this.length?f:this.length-1;c=0>c?this.length-1:c;f=0>c?this.length-1:f;for(var k=c;k<=f;k++)this[b+(k-c)]=this[k];e.type="postcopyWithin";
g(e)}return this}),fill:h(function(b,c,f){c=void 0!==c?Math.max(0,c):0;f=void 0!==f&&f<=this.length?Math.min(this.length,Math.max(0,f)):this.length;var e=new w(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==g(e)){for(var k=a.key;k<f;k++)this[k]=b;e.type="postfill";g(e)}return this}),pop:h(function(){var b=new w(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==g(b)){var c=this[this.length-1];delete this[this.length-1];b.type="postpop";g(b);return c}return null}),
push:h(function(b){var c=new w(this,this.length,"push",b,void 0,arguments,"");!0!==g(c)&&(this[this.length]=b,c.type="postpush",g(c));return this.length}),reverse:h(function(){var b=new w(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==g(b)){for(var c=this.slice().reverse(),f=0,e=this.length;f<e;f++)this[f]=c[f];b.type="postreverse";g(b)}return this}),shift:h(function(){var b=new w(this,0,"shift",this[0],void 0,arguments,"");if(!0!==g(b)){for(var c=a.key,f=this.length-1;c<f;c++)this[c]=
this[c+1];delete this[this.length-1];b.type="postshift";g(b)}return null}),sort:h(function(){var b=new w(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==g(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),f=0,e=this.length;f<e;f++)this[f]=c[f];b.type="postsort";g(b)}return this}),splice:h(function(b,c,f){var e=new w(this,b,"splice",void 0,void 0,arguments,"");if(!0!==g(e)){var k=[],l=Array.prototype.slice.call(arguments,2),q=l.length-2,d=0;if(0!==c&&void 0!==this[b-1+c])for(var u=0,h=
c;u<h;u++){k.push(this[b+u]);for(var p=b+u,m=this.length-1;p<m;p++)this[p]=this[p+1];delete this[this.length-1]}if(0!==q)for(u=0,h=q;u<h;u++){d=b+Math.min(1,u);p=this.length;for(m=d;p>m;p--)this[p]=this[p-1];this[d]=l[u]}e.type="postsplice";e.listener="__kbupdatelistener";g(e);return k}return[]}),unshift:h(function(){var b=new w(this,0,"unshift",this[0],void 0,arguments,"");if(!0!==g(b)){for(var c=Array.prototype.slice.call(arguments),f=this.length-1+c.length,e=c.length;-1!==f;f--)this[f]=f<e?c[f]:
this[f-c.length];b.type="postunshift";g(b)}return this.length}),getLayer:h(function(b){function c(b){var e=b[0];return void 0===this[e]&&0!==b.length-1?null:p(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=C(b);return c.call(this,b)}),setLayer:h(function(b){function c(b){var e=b[0];void 0===this[e]&&0!==b.length-1&&(this[e]=x({},this.__kbname,this,this.__kbscopeString+"."+e));return p(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=C(b);return c.call(this,
b)}),ignoreCreate:h(function(b){-1===E.indexOf(b)&&E.push(b);return this}),addActionListener:h(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:h(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var f=0,e=this.__kbref.__kbevents[b];f<e;f++)if(this.__kbref.__kbevents[b][f].toString()===c.toString()){this.__kbref.__kbevents[b].splice(f,1);break}return this}),subscribe:h(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=
[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:h(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var f=0,e=this.__kbsubscribers[b].length;f<e;f++)if(this.__kbsubscribers[b][f].toString()===c.toString()){this.__kbsubscribers[b].splice(f,1);break}return this}),callSubscribers:h(function(b,c,f){if(void 0!==this.__kbsubscribers[b])for(var e=0,k=this.__kbsubscribers[b].length;e<k;e++)this.__kbsubscribers[b].call(this,b,c,f);return this}),stopChange:h(function(){this._stopChange=!0;
return this})});Object.defineProperties(x.prototype,{addDataListener:h(J("addDataListener","__kblisteners")),removeDataListener:h(F("removeDataListener","__kblisteners")),addDataUpdateListener:h(J("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:h(F("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:h(J("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:h(F("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:h(J("addDataDeleteListener",
"__kbdeletelisteners")),removeDataDeleteListener:h(F("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:h(y("addChildDataListener","__kbparentlisteners")),removeChildDataListener:h(B("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:h(y("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:h(B("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:h(y("addChildDataCreateListener","__kbparentcreatelisteners")),
removeChildDataCreateListener:h(B("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:h(y("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:h(B("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return x}}(),T=function(){return function(){function D(n){if("object"===typeof n)for(var x=0,w=n.length;x<w;x++)K_Components[n[x]]?z(n[x],K_Components[n[x]],document.getElementById("script_"+n[x])):D.load(n[x],"component/"+
n[x]+"/"+location.search,z);else"string"===typeof n&&(K_Components[n[x]]?z(n,K_Components[n],document.getElementById("script_"+n)):D.load(n,"component/"+n+"/"+location.search,z))}var z=function(){},Q=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});D.getUnknowns=function(n){var x=n.match(Q);return x.map(function(n){return n.replace(/[<\/>]/g,"")}).filter(function(n,h){return document.createElement(n)instanceof HTMLUnknownElement&&-1===x.indexOf(n,h+1)&&!K_Components[n]})};D.load=function(n,
x,w){document.head.appendChild(function(h,n,w){var x=document.createElement("script");x.type="text/javascript";x.charset="utf-8";x.async=!0;x.src=n;x.id="script_"+h;x.onload=function(){w(h,K_Components[h],this)};return x}(n,x,w));return D};D.onLoad=function(n){if(void 0===n)return z;z="function"===typeof n?n:z;return D};return D}}(),U=function(D){return function(){function z(d,g){this.name=d.tagName.toLowerCase();this.template=C[this.name]||'<div class="missing_component">Unknown Component</div>';
this.node=d;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;g||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);g||(this.maps=this.map(this.wrapper));g||(this.wrapper.kb_maps=this.maps)}function Q(d,g,b,c,f,e,k,l){function q(c){var b="for"===g?r(c):[],f=this;this.key="for"!==g?M(c):b[0];this.filterNames=A(c);this.component="for"===g?b[1]:void 0;this.id=0;this.isEvent=v;this.isInput=
u;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:m("",!0)});this.updateData=function(c){if(f.isConnected&&f._data){if("object"!==typeof c||void 0===c.value)c={value:c};"function"===typeof f._data.stopChange&&f._data.stopChange().set(f.key,c.value)}};this.updateDom=function(c){if(f.isSynced()){f.element.stopChange();if("object"!==
typeof c||void 0===c.value)c={value:c};f.value=c.value}};this.updateLoop=function(){f.kb_loop&&f.loop(f.kb_loop)}}var v="attribute"===g&&-1!==F.indexOf(k.name)||"component"===g&&k.name&&-1!==F.indexOf(k.name),u="input"===l.tagName.toLowerCase();v&&l.stopChange().removeAttribute(k.name);Object.defineProperties(q.prototype,{valget:m(n),valset:m(x),refresh:m(O),connect:m(K),deleteMap:m(L),loop:m(P),unsync:m(G),isSynced:m(w),type:m(g),text:m(b,!0),bindText:m(c,!0),bindNames:m("for"===g?[r(c[0])[0]]:H(c),
!0),bindMaps:m([],!0),bindListener:m(v?f.toLowerCase():f),bindProperty:m(v?k.name.toLowerCase():e),bindTarget:m(k,!0),element:m(l,!0),_data:m({},!0),filters:m({},!0),maps:m(d,!0),loop:m(P)});return q}function n(){return this._value}function x(d){this._value=this.isSynced()?d:this._value;this.refresh()}function w(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function h(d,g){function b(c,b){return b.reduce(function(b,f){return b+("string"===typeof f?f:0===f.filterNames.length?
f._value:f.filterNames.reduce(function(b,f){if(void 0!==c.filters){if(void 0!==c.filters[f])return c.filters[f](b);console.warn("there is no filter by the name %o in the data model filters %o",f,Object.keys(c.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},f._value))},"")}return 1===g.length?"string"===typeof g[0]._value?b(d,g):g[0]._value:b(d,g)}function O(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=
this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=h(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var d=0,g=this._value.length;d<g;d++)this.element.stopChange().appendChild(this._value[d])}else this.bindTarget[this.bindProperty]=h(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=
h(this,this.bindText));return this}function K(d){this._data=d;this.filters=void 0!==d.filters?d.filters:this.filters;d=0;for(var g=this.bindNames.length;d<g;d++){var b=this.bindNames[d],c=this.bindMaps[d];c._data.addDataUpdateListener&&(c._data.exists(b)||(console.warn("No property by the name %o exists on this data set %o",b,c._data),c._data.add(b,c._value)),c.value=c._data.get(b),"component"!==c.type&&"for"!==c.type?(c.isConnected=!0,c._data.addDataUpdateListener(b,c.updateDom)):"for"===c.type&&
c._value.addDataUpdateListener&&c._value.addDataUpdateListener("*",c.updateLoop))}1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function P(d){this.kb_loop=d;this.element.stopChange().innerHTML="";for(var g=this._value,b=0,c=this.filterNames.length;b<c;b++)g=this.filters[this.filterNames[b]](g);g=0;for(b=this._value.length;g<b;g++){var c=this._value[g],
f=document.createElement(this.component);f.k_post=c;f.kb_wrapper=this.element.kb_wrapper;this.element.stopChange().appendChild(f);"function"===typeof d&&d(f)}}function L(){this.maps[this.key].splice(this.id,1);return this}function G(){for(var d=0,g=this.bindNames.length;d<g;d++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[d],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));
this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return!1}function N(d){return d.split(new RegExp("("+y.split("").join("\\")+")(.*?)("+
B.split("").join("\\")+")","g")).map(function(g,b,c){return c[b-1]===y?y+g+B:g}).filter(function(g,b,c){return 0!==g.length&&g!==y&&g!==B&&0!==g.length})}function H(d){return d.filter(function(g){return-1!==g.indexOf(y)&&-1!==g.indexOf(B)}).map(function(g){return M(g)})}function M(d){return d.replace(new RegExp("["+y+B+"]","g"),"").replace(new RegExp("\\"+t.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function A(d){return-1!==d.indexOf(t)?d.replace(new RegExp("["+B+"]","g"),"").replace(new RegExp("(.*?)(\\"+
t.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function r(d){return-1!==d.indexOf("for")?d.replace(new RegExp("["+y+B+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(g){return 0!==g.length}):[]}function m(d,g,b){return{value:d,writable:!!g,enumerable:!1,configurable:!!b}}function p(d,g){for(var b=E[d],c=0,f=b.length;c<f&&(b[c](g),g._stopPropogation);c++);return g._preventDefault}function I(d){var g=d.match(J).map(function(b){return b.replace(/[<\/>]/g,
"")});g.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===g.indexOf(b,c+1)&&void 0===C[b]});0!==g.length&&p("unknown",new Event("unknown",g));return g}var C={},J=/(<\/.*?>)/g;D().call();var F=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}),y="{{",B="}}",t="|",E={unknown:[]};z.prototype.map=function(d){function g(c){for(var f=0,e=c.length;f<e;f++)if(void 0===c[f].kb_maps&&8!==c[f].nodeType){c[f].kb_mapper=d;if(3===c[f].nodeType){var k=
c[f],l=b,q=k.textContent,v=k.parentElement instanceof HTMLUnknownElement;if(q.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+")","g")))for(var u=v?"component":q.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+B.split("").join("\\")+")","g"))?"for":"text",k=Q(l,u,q,N(q),v?"":"textContent","textContent",k,k.parentElement),q=0,v=k.prototype.bindText.length;q<v;q++){var u=q,h=k.prototype.bindText[q];0===h.indexOf(y)&&(h=new k(h),k.prototype.bindText[u]=
h,void 0===l[h.key]&&(l[h.key]=[]),h.id=l[h.key].length,l[h.key].push(h))}}else for(l=c[f],k=b,q=l.attributes,v=l instanceof HTMLUnknownElement,u=0,h=q.length;u<h;u++){h>q.length&&(u-=h-q.length,h=q.length);var p=q[u];if(p.value.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+")","g")))for(var p=Q(k,v?"component":"attribute",p.value,N(p.value),v?"":p.name,"value",p,l),m=0,n=p.prototype.bindText.length;m<n;m++){var A=m,r=p.prototype.bindText[m];0===r.indexOf(y)&&(r=
new p(r),p.prototype.bindText[A]=r,void 0===k[r.key]&&(k[r.key]=[]),k[r.key].push(r))}}c[f].childNodes&&0!==c[f].childNodes.length&&g(c[f].childNodes)}}var b={};g(d.childNodes);return b};z.prototype.addFilter=function(d,g){void 0!==this.maps[d]&&this.maps[d].forEach(function(b){b.filters.push(g);b.refresh()});return this};z.prototype.removeFilter=function(d,g){void 0!==this.maps[d]&&this.maps[d].forEach(function(b){b.filters.splice(this.maps[d].filters.indexOf(g),1);b.refresh()});return this};z.prototype.swapFilter=
function(d,g,b){void 0!==this.maps[d]&&this.maps[d].forEach(function(c){c.filters.splice(this.maps[d].filters.indexOf(g),1,b);c.refresh()});return this};Object.defineProperties(z,{startChars:m(function(d){if(void 0===d)return y;y="string"===typeof d?d:y;return this}),endChars:m(function(d){if(void 0===d)return B;B="string"===typeof d?d:B;return this}),pipeChars:m(function(d){if(void 0===d)return t;t="string"===typeof d?d:t;return this}),getUnknown:m(I),isRegistered:m(function(d){return void 0!==C[d]}),
register:m(function(d,g){void 0===C[d]?(C[d]=g,I(g)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",d);return this}),addEventListener:m(function(d,g){void 0!==E[d]?E[d].push(g):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",d);return this}),removeEventListener:m(function(d,g){if(void 0!==E[d])for(var b=0,c=E[d].length;b<c;b++)E[d][b].toString()===g.toString()&&E[d].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",
d);return this})});return z}}(function(){function D(){function z(c,b){var e=c.length,k;for(k=0;k<e&&(c[k](b),void 0===b._stopPropogation);k++);}function D(c,b){var e=c.length,k;for(k=0;k<e&&(b.child=b.target,b.target=c[k].parent,c[k].func(b),void 0===b._stopPropogation);k++);}function n(c,b){for(var e=c.length;0<e;d++)if(c[d].toString()===b.toString())return!0;return!1}function x(c,b,e,k,l,g,d,h){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=
!0};this.value=e;this.oldValue=k;this.target=c;this.attr=b;this.arguments=l;this.action=g;this.child=void 0;this.type=d;this.stopChange=h}function w(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function h(c,b,e,k){var l=c.get,g=c.set,d;return function(c){d=l.call(this);e(this,b,c,d,void 0,
this._stopChange)&&g.call(this,c);this._stopChange||k(this,b,c,d);this._stopChange=void 0}}function O(c,b,e,k){var l;return function(g){l=c.value;e(this,b,g,l,arguments,this._stopChange)&&(c.value=g);this._stopChange||k(this,b,g,l,arguments);this._stopChange=void 0}}function K(c,b,e,k){var l=c.value,g;return function(){e(this,b,null,null,arguments,this._stopChange)&&(g=l.apply(this,arguments));this._stopChange||k(this,b,null,null,arguments,g);this._stopChange=void 0;return g}}function P(c,b,e,k,l){var g=
l.style,d=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),h,p;return{get:function(){return p},set:function(c){h=p;e(l,b,c,h,void 0,this._stopChange)&&(p=c,g.setProperty(d,c));this._stopChange||k(l,b,c,h);this._stopChange=void 0},enumerable:!0,configurable:!0}}function L(c,b,e,k){if("function"!==typeof b)return p;var l=-1!==["value","checked"].indexOf(c),g=-1!==t.indexOf(c),d;if(this.toString()!==p.toString())if(e){var h=this.querySelectorAll("*");e=h.length;for(var m,r=0;r<e;r++){m=h[r].attrListeners();
if(l||"*"===c)void 0!==h[r].addInputBinding&&h[r].addInputBinding(),void 0!==h[r].addInputBoxBinding&&h[r].addInputBoxBinding();if(g)p.injectStyleProperty(h[r],c),d=k?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){d=k?"_parentStyleUpdateListeners":"_parentStyleListeners";e=t.length;for(var n=0;n<e;n++)p.injectStyleProperty(h[r],t[n]);void 0===m[d]["*"]&&(m[d]["*"]=[]);m[d]["*"].push({parent:this,func:b})}d=k?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===m[d][c]&&
(m[d][c]=[]);m[d][c].push({parent:this,func:b})}}else{m=this.attrListeners();if(g)d=k?"_styleUpdateListeners":"_styleListeners",p.injectStyleProperty(this,c);else{if(l||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){d=k?"_styleUpdateListeners":"_styleListeners";e=t.length;for(r=0;r<e;r++)p.injectStyleProperty(this,t[r]);void 0===m[d][c]&&(m[d][c]=[]);m[d][c].push(b)}d=k?"_attrUpdateListeners":"_attrListeners"}void 0===
m[d][c]&&(m[d][c]=[]);m[d][c].push(b)}else{if(l||"*"===c)for(n=document.querySelectorAll("input, textarea"),e=n.length,r=0;r<e;r++)void 0!==n[r].addInputBinding&&n[r].addInputBinding(),void 0!==n[r].addInputBoxBinding&&n[r].addInputBoxBinding();if(g){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=g.length+1;g.unshift(document.body);for(r=0;r<e;r++)p.injectStyleProperty(g[r],c);d=k?F:J}else{if("*"===c){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=g.length+
1;l=t.length;g.unshift(document.body);for(r=0;r<e;r++)for(n=0;n<l;n++)p.injectStyleProperty(g[r],t[n]);d=k?F:J;void 0===d[c]&&(d[c]=[]);d[c].push(b)}d=k?C:I}void 0===d[c]&&(d[c]=[]);d[c].push(b)}}function G(c,b,e,k){function g(c,e){var k=e[c],d=k.length;for(h=0;h<d;h++)k[h].toString()===b.toString()&&k.splice(h,1)}if("function"!==typeof b)return p;["value","checked"].indexOf(c);var d=-1!==t.indexOf(c),h;if(this.toString()!==p.toString())if(e){e=this.querySelectorAll("*");var u=e.length;d?(d=k?"_childStyleUpdateListeners":
"_childStyleListeners",g(c,this.attrListeners()[d]),d=k?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===c&&(d=k?"_childStyleUpdateListeners":"_childStyleListeners",g(c,this.attrListeners()[d])),d=k?"_childAttrUpdateListeners":"_childAttrListeners",g(c,this.attrListeners()[d]),d=k?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<u;h++){for(var m=e[h].attrListeners()[d][c],r=m.length,n=0;n<r;n++)m[n].isEqualNode(this)&&m.slice(n,1);if("*"===c)for(listenersStyle=k?"_parentStyleUpdateListeners":
"_parentStyleListeners",m=e[h].attrListeners()[d][c],r=m.length,n=0;n<r;n++)m[n].isEqualNode(this)&&m.slice(n,1)}}else d?d=k?"_styleUpdateListeners":"_styleListeners":("*"===c&&(d=k?"_styleUpdateListeners":"_styleListeners",g(c,this.attrListeners()[d])),d=k?"_attrUpdateListeners":"_attrListeners"),g(c,this.attrListeners()[d]);else d?d=k?F:J:("*"===c&&(d=k?F:J,g(c,d)),d=k?C:I),g(c,d)}function N(c,b){p.addAttrListener.call(this,c,b,!0);return this}function H(c,b){p.addAttrUpdateListener.call(this,c,
b,!0);return this}function M(c,b){p.removeAttrListener.call(this,c,b,!0);return this}function A(c,b){p.removeAttrUpdateListener.call(this,c,b,!0);return this}function r(c,b,e){var k=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(c){case "attr":if(n(k._attrListeners[b],e))return!0;break;case "attrupdate":if(n(k._attrUpdateListeners[b],e))return!0}return!1}function m(){this._stopChange=!0;return this}function p(){function c(c,b){var f,e=b.length;for(f=0;f<e;f++)-1===
c.indexOf(b[f])&&c.push(b[f]);return c}function f(c,b){for(var f=Object.keys(c),e,k,g=0,d=f.length;g<d;g++)if(e=f[g],void 0===b[e])b[e]=c[e].slice();else for(var l=0,h=c[e].length;l<h;l++)k=c[e][l],b[e].push(k)}function e(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),k,g=["value","checked"],d=e._attrListeners,l=e._attrUpdateListeners,h=e._parentAttrListeners;k=e._parentAttrUpdateListeners;var m=!1;if(void 0!==I["*"]||void 0!==C["*"])m=!0;if(!0!==m&&void 0!==d["*"]||
void 0!==l["*"]||void 0!==h["*"]||void 0!==k["*"])m=!0;if(!0!==m)for(var q=0;q<g.length;q++)if(void 0!==I[g[q]]||void 0!==C[g[q]]||void 0!==d[g[q]]||void 0!==l[g[q]]||void 0!==h[g[q]]||void 0!==k[g[q]]){m=!0;break}k=m;g=Object.keys(J);d=Object.keys(F);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);l=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);h=[];if(0!==g.length||0!==d.length)h=c(h,g),h=c(h,d);if(0!==h.length&&0!==l.length||0!==e.length)h=
c(h,l),h=c(h,e);-1!==h.indexOf("*")&&(h=t);var e=h,g=e.length,r,n,d=[],v,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,h=b.target;void 0!==l&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(k){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(d=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||d.unshift(b.arguments[0])):d=
Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));v=d.length;for(var A=0;A<v;A++)void 0!==d[A].addInputBinding&&d[A].addInputBinding(),void 0!==d[A].addInputBoxBinding&&d[A].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(d=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),d.unshift(b.arguments[0])):d=Array.prototype.slice.call(b.target.querySelectorAll("*"));k=b.target.__kb._parentAttrListeners;
m=b.target.__kb._parentAttrUpdateListeners;q=b.target.__kb._parentStyleListeners;r=b.target.__kb._parentStyleUpdateListeners;v=d.length;for(A=0;A<v;A++){if(0!==g)for(n=0;n<g;n++)p.injectStyleProperty(d[A],e[n]);n=d[A].attrListeners();f(k,n._parentAttrListeners);f(m,n._parentAttrUpdateListeners);f(q,n._parentStyleListeners);f(r,n._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=h,b.arguments=[])}}function k(c){var b=c.target.attributes[c.arguments[0]],f="setAttribute"===c.attr?c.arguments[1]:
"";h(c.target,c.arguments[0],f,void 0!==b?b.value:"",[f])||c.preventDefault()}function d(c){var b=c.target.attributes[c.arguments[0]],f="setAttribute"===c.attr?c.arguments[1]:"";m(c.target,c.arguments[0],f,void 0!==b?b.value:"",[f])}p.injectPrototypes(Node,"Node");p.injectPrototypes(Element,"Element");p.injectPrototypes(HTMLElement,"HTMLElement");p.injectPrototypes(HTMLInputElement,"HTMLInputElement");p.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");p.injectPrototypes(Document,"Document");
var h=g,m=b;p.addAttrUpdateListener("appendChild",e);p.addAttrUpdateListener("removeChild",e);p.addAttrUpdateListener("innerHTML",e);p.addAttrUpdateListener("outerHTML",e);p.addAttrUpdateListener("innerText",e);p.addAttrUpdateListener("outerText",e);p.addAttrUpdateListener("textContent",e);p.addAttrListener("setAttribute",k);p.addAttrListener("removeAttribute",k);p.addAttrUpdateListener("setAttribute",d);p.addAttrUpdateListener("removeAttribute",d);return p}var I={},C={},J={},F={},y={},B="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
t=Object.getOwnPropertyNames(document.body.style),E=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener","removeEventListener"]),d,g=function(c,b,e,k,g,d){e=new x(c,b,e,k,g,void 0,"set",d);void 0!==c.__kb&&(k=c.__kb._attrListeners,g=c.__kb._styleListeners,d=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==k[b]&&z(k[b],e),void 0===e._stopPropogation&&void 0!==g[b]&&z(g[b],e),void 0===e._stopPropogation&&void 0!==k["*"]&&(z(k["*"],
e),void 0===e._stopPropogation&&z(g["*"],e)),void 0===e._stopPropogation&&void 0!==d[b]&&D(d[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&D(c[b],e),void 0===e._stopPropogation&&void 0!==d["*"]&&(D(d["*"],e),void 0===e._stopPropogation&&D(c["*"],e)));void 0===e._stopPropogation&&void 0!==I[b]&&z(I[b],e);void 0===e._stopPropogation&&void 0!==J[b]&&z(J[b],e);void 0===e._stopPropogation&&void 0!==I["*"]&&(z(I["*"],e),void 0===e._stopPropogation&&z(J["*"],e));return void 0!==e._preventDefault?!1:
!0},b=function(c,b,e,k,g,d){e=new x(c,b,e,k,g,d,"update");void 0!==c.__kb&&(k=c.__kb._attrUpdateListeners,g=c.__kb._styleUpdateListeners,d=c.__kb._parentAttrUpdateListeners,c=c.__kb._parentStyleUpdateListeners,void 0!==k[b]&&z(k[b],e),void 0===e._stopPropogation&&void 0!==g[b]&&z(g[b],e),void 0===e._stopPropogation&&void 0!==k["*"]&&(z(k["*"],e),void 0===e._stopPropogation&&z(g["*"],e)),void 0===e._stopPropogation&&void 0!==d[b]&&D(d[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&D(c[b],e),void 0===
e._stopPropogation&&void 0!==d["*"]&&(D(d["*"],e),void 0===e._stopPropogation&&D(c["*"],e)));void 0===e._stopPropogation&&void 0!==C[b]&&z(C[b],e);void 0===e._stopPropogation&&void 0!==F[b]&&z(F[b],e);void 0===e._stopPropogation&&void 0!==C["*"]&&(z(C["*"],e),void 0===e._stopPropogation&&z(F["*"],e));return void 0!==e._preventDefault?!1:!0};p.injectPrototypeProperty=function(c,f,e,k,d){var q=c.prototype,n=Object.getOwnPropertyDescriptor(q,f);e=e||c.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var u=y[e];k=k||g;d=d||b;void 0===q.attrListeners&&(q={},q.attrListeners=function(){void 0===this.__kb&&(this.__kb=new w);return this.__kb}.bind(q),q.addAttrListener=p.addAttrListener,q.addAttrUpdateListener=p.addAttrUpdateListener,q.addChildAttrListener=N,q.addChildAttrUpdateListener=H,q.hasListener=r,q.removeAttrListener=p.removeAttrListener,q.removeAttrUpdateListener=p.removeAttrUpdateListener,q.removeChildAttrListener=M,q.removeChildAttrUpdateListener=A,q.stopChange=m);void 0===u&&(y[e]={obj:c,
proto:q,descriptors:{},set:void 0,update:void 0},u=y[e],u.set=k,u.update=d);void 0===u.descriptors[f]&&(u.descriptors[f]=n);n.configurable&&(void 0!==n.set?Object.defineProperty(q,f,{get:n.get,set:h(n,f,k,d),enumerable:!0,configurable:!0}):"function"===typeof n.value?Object.defineProperty(q,f,{value:K(n,f,k,d),writable:!0,enumerable:!0,configurable:!0}):void 0!==n.value&&Object.defineProperty(q,f,{get:function(){return n.value},set:O(n,f,k,d),enumerable:!0,configurable:!0}));return p};p.injectStyleProperty=
function(c,f,e,k){var d=c.style,h=Object.getOwnPropertyDescriptor(d,f),m=c.attrListeners().injectedStyle;e=e||g;k=k||b;void 0===m&&(c.attrListeners().injectedStyle={obj:c,proto:d,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=e,c.attrListeners().injectedStyle.update=k,m=c.attrListeners().injectedStyle);void 0===m.descriptors[f]&&(m.descriptors[f]=h);h.configurable&&Object.defineProperty(d,f,P(h,f,e,k,c));return p};p.injectPrototypes=function(c,f,e,d){var l=c.prototype;
f=f||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var h=y[f],n=Object.getOwnPropertyNames(l);e=e||g;d=d||b;var u;void 0===l.attrListeners&&(l.attrListeners=function(){void 0===this.__kb&&(this.__kb=new w);return this.__kb},l.addAttrListener=p.addAttrListener,l.addAttrUpdateListener=p.addAttrUpdateListener,l.addChildAttrListener=N,l.addChildAttrUpdateListener=H,l.removeAttrListener=p.removeAttrListener,l.removeAttrUpdateListener=p.removeAttrUpdateListener,l.removeChildAttrListener=M,
l.removeChildAttrUpdateListener=A,l.hasListener=r,l.stopChange=m);void 0===h&&(y[f]={obj:c,proto:l,descriptors:{},set:void 0,update:void 0},h=y[f],h.set=e,h.update=d);u=y[f].descriptors;for(d=0;d<n.length;d+=1)void 0===u[n[d]]&&p.injectPrototypeProperty(c,n[d],f,e,b);if(-1!==n.indexOf("value")){var t=function(b){var c,e,f;if("checkbox"===this.type||"radio"===this.type)c=!0;e=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=c?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;c&&(h.set(this,"checked",this.checked,e)?h.update(this,"checked",this.checked,e):u.checked.set.call(this,e));this.value=f;h.set(this,"value",this.value,e)?h.update(this,"value",this.value,e):u.value.set.call(this,e)}.bind(this),0)};l.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",t)};l.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",t)};l.removeInputBoxBinding=
function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",t)};l.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",t)}}return p};p.addAttrListener=function(c,b,e){if("html"===c){c=0;for(var d=B.length;c<d;c++)L.call(this,B[c],b,e,!1)}else if("events"===c)for(c=0,d=E.length;c<d;c++)L.call(this,E[c],b,e,!1);else L.call(this,c,b,e,!1);return this};p.addAttrUpdateListener=function(b,f,e){if("html"===b){b=0;for(var d=B.length;b<
d;b++)L.call(this,B[b],f,e,!0)}else if("events"===b)for(b=0,d=E.length;b<d;b++)L.call(this,E[b],f,e,!0);else L.call(this,b,f,e,!0);return this};p.removeAttrListener=function(b,f,e){if("html"===b){b=0;for(var d=B.length;b<d;b++)G.call(this,B[b],f,e,!1)}else if("events"===b)for(b=0,d=E.length;b<d;b++)G.call(this,E[b],f,e,!1);else G.call(this,b,f,e,!1);return this};p.removeAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var g=B.length;b<g;b++)G.call(this,B[b],d,e,!0)}else if("events"===b)for(b=
0,g=E.length;b<g;b++)G.call(this,E[b],d,e,!0);else G.call(this,b,d,e,!0);return this};p.hasListener=function(b,d,e){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(b){case "attr":if(n(I[d],e))return!0;break;case "attrupdate":if(n(C[d],e))return!0}return!1};p.injectedPrototypes=function(){return y};return p}"function"===typeof define&&define.amd&&define("KB",D);return D}()),R=function(D,z,Q){return function(){function n(A,r,m,p){function z(d,g,b,c,f){for(var e=O({},d),k=0,l=Object.keys(g.prototype),
h=l.length;k<h;k++)e.__proto__[l[k]]=g.prototype[l[k]];k=0;l=Object.keys(c);for(h=l.length;k<h;k++)-1!==N.indexOf(l[k])?Object.defineProperty(e,l[k],w(c[l[k]],"filters"!==l[k])):e.set(l[k],c[l[k]]);if(c.pointers)for(k=0,l=Object.keys(c.pointers),h=l.length;k<h;k++)e.addPointer(c.pointers[l[k]],l[k]);g.apply(e,b);k=0;l=Object.keys(f);for(h=l.length;k<h;k++)-1!==N.indexOf(l[k])?Object.defineProperty(e,l[k],w(f[l[k]],"filters"!==l[k])):e.set(l[k],f[l[k]]);if(f.pointers)for(k=0,l=Object.keys(f.pointers),
h=l.length;k<h;k++)e.addPointer(f.pointers[l[k]],l[k]);k=0;l=Object.keys(e.filters);for(h=l.length;k<h;k++)e.filters[l[k]]=e.filters[l[k]].bind(e);if(e.sessionStorage){if(g=sessionStorage.getItem(e.id||d))for(g=JSON.parse(g),k=0,l=Object.keys(g),h=l.length;k<h;k++)e.set(l[k],g[l[k]]);else sessionStorage.setItem(e.id||d,e.stringify());e.addChildDataUpdateListener("*",function(){sessionStorage.setItem(e.id||d,e.stringify())})}if(e.localStorage){if(g=localStorage.getItem(e.id||d))for(g=JSON.parse(g),
k=0,l=Object.keys(g),h=l.length;k<h;k++)e.set(l[k],g[l[k]]);else localStorage.setItem(e.id||d,e.stringify());e.addChildDataUpdateListener("*",function(){localStorage.setItem(e.id||d,e.stringify())})}e.store&&P.set(e.id||d,e);return e}function C(d,g,b){d.kb_viewmodel=b;g.wrapper.innerHTML=y.template.replace(new RegExp("("+K.startChars()+"local"+K.endChars()+")","g"),b.local);var c=g.maps=g.map(g.wrapper);g.wrapper.kb_maps=c;Object.keys(c).forEach(function(d){c[d].forEach(function(c){switch(c.type){case "for":c.connect(b);
K.isRegistered(c.component)?c.loop(function(b){n(b)}):(n.loadWaitList(c.component,function(b,d){c.loop(function(b){n(b)})}),n.loadWaitList(c.component).loading||(n.loadWaitList(c.component).loading=!0,h(c.component)));break;case "component":c.connect(b).deleteMap();break;default:c.connect(b)}})});g.wrapper.kb_viewmodel.onFinish.call(g.wrapper.kb_viewmodel,g.wrapper)}function D(d,g){y=new K(g,!0);Object.defineProperty(y.wrapper,"__kbcomponenttree",w(g.kb_mapper?g.kb_mapper.__kbcomponenttree.slice():
[]));g.parentElement.replaceChild(y.fragment,g);r.unshift(y.wrapper);C(y.wrapper,y,z(d,L[d],r,t,E));if(-1===y.wrapper.__kbcomponenttree.indexOf(d)||y.wrapper.kb_viewmodel.multiple){y.wrapper.__kbcomponenttree.push(d);y.wrapper.classList.add(y.wrapper.kb_viewmodel.local);for(var b=y.wrapper.querySelectorAll("*"),c=0,f=b.length;c<f;c++)b[c]instanceof HTMLUnknownElement&&n(b[c])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
d),console.error("Recursive Component %o on %o",y.wrapper,y.wrapper.parentElement),y.wrapper.parentElement.removeChild(y.wrapper)}var F=A.tagName.toLowerCase(),y,B=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}),t={},E={};void 0===r&&(r=[]);m&&x(m,t);Object.defineProperty(t,"local",w(t.local||F+"-"+Date.now(),!0,!1,!0));Object.defineProperty(t,"filters",w(t.filters||{},!1,!1,!0));"function"!==typeof t.onFinish&&(t.onFinish=function(){});Object.defineProperty(t,"onFinish",
w(t.onFinish,!0,!1,!0));"string"===typeof t.sessionStorage&&(t.sessionStorage="true"===t.sessionStorage);Object.defineProperty(t,"sessionStorage",w(void 0!==t.sessionStorage?t.sessionStorage:!1,!0,!1,!0));"string"===typeof t.localStorage&&(t.localStorage="true"===t.localStorage);Object.defineProperty(t,"localStorage",w(void 0!==t.localStorage?t.localStorage:!1,!0,!1,!0));"string"===typeof t.store&&(t.store="true"===t.store);Object.defineProperty(t,"store",w(void 0!==t.store?t.store:!1,!0,!1,!0));
"string"===typeof t.multiple&&(t.multiple="true"===t.multiple);Object.defineProperty(t,"multiple",w(void 0!==t.multiple?t.multiple:!1,!0,!1,!0));p&&x(p,E);E.innerHTML=A.childNodes;m=0;for(p=A.attributes.length;m<p;m++)E[A.attributes[m].name]=A.attributes[m].value;m=0;for(p=B.length;m<p;m++)A[B[m]]&&(E[B[m]]=A[B[m]]);A.k_post&&x(A.k_post,E);K.isRegistered(F)?D(F,A):(n.loadWaitList(F,function(d,g){D(F,A)}),n.loadWaitList(F).loading||(n.loadWaitList(F).loading=!0,h(F)))}function x(h,n){var m=Object.keys(h);
n.pointers||(n.pointers={});for(var p=0,x=m.length;p<x;p++)if(h.isObservable(m[p]))n.pointers[m[p]]=h;else if(h[m[p]].isMixed())n.pointers[m[p]]=h[m[p]].__kbImmediateParent;else if(Object.prototype.isObject(h[m[p]]))for(var w=0,z=Object.keys(h[m[p]]);w<x;w++)n[m[p]][z[w]]=h[m[p]][z[w]];else if(Object.prototype.isArray(h[m[p]]))for(w=0;w<x;w++)n[m[p]][w]=h[m[p]][w];else n[m[p]]=h[m[p]]}function w(h,n,m,p){return{value:h,writable:!!n,enumerable:!!p,configurable:!!m}}window.K_Components||(window.K_Components=
{});var h=z().onLoad(function(h,r){var m="<style>"+unescape(r.prototype.k_css)+"</style>"+unescape(r.prototype.k_html);n.register(h,r,m,r.prototype.cms);n.loadWaitList(h).forEach(function(m){m(h,r)});n.loadWaitList(h,"clear")}),O=D(),K=Q(),P=O({},"Model"),L={},G=function(){return window.location.search.replace("?","").split("&").filter(function(h){return 0!==h.length}).reduce(function(h,n){h[n.split("=")[0]]=n.split("=")[1];return h},{})}(),N="id filters class sessionStorage localStorage store component multiple".split(" "),
H={},M;n.register=function(h,r,m,p){K.register(h,m);L[h]=r;return n};n.loadWaitList=function(h,r){if("undefined"===typeof r&&h)return H[h];if(h){if(void 0===H[h]||"clear"===r){var m=void 0===H[h]?!1:!!H[h].loading;H[h]=[];H[h].loading=m}"function"===typeof r&&H[h].push(r)}return n};n.localRouting=function(h){h?(M=Node.prototype.appendChild,Node.prototype.appendChild=function(h){if("script"===h.nodeName.toLowerCase()){h.src=h.src.substring(0,-1!==h.src.indexOf("?")?h.src.indexOf("?"):h.src.length);
var m=h.src.match(/(.*?component\/)/);m&&(G.env||(G.env="prod"),"dev"===G.env&&(G.env="qa"),m=h.src.replace(m[0],"").replace(/[\/\s]/g,""),h.src="/components/"+m+"/build/"+G.env+"/"+m+(G.debug&&"prod"!==G.env?"":".min")+".js",arguments[0]=h)}return M.apply(this,arguments)}):M&&(Node.prototype.appendChild=M,M=null);return n};return n}}(S,T,U);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return R}):"undefined"!==typeof module&&
(module.exports=R);return R}();
