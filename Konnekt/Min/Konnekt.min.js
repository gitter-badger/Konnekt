var Konnekt=function(){var U=function(){return function(z,y,R,p){function x(b,c,d,e){b=void 0===b?{}:b;var h={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var k=new Proxy(h,{set:B,deleteProperty:O}),n=Object.keys(b,"all");Object.defineProperties(h,{__kbname:g("string"===typeof c?c:"default",!0,!0),__kbref:g(d?d.__kbref||d:k,!0,!0),__kbscopeString:g(e||"",!0,!0),__kbImmediateParent:g(d||
null,!0,!0),__kbsubscribers:g({}),__kblisteners:g({}),__kbupdatelisteners:g({}),__kbparentlisteners:g({}),__kbparentupdatelisteners:g({}),__kbcreatelisteners:g([]),__kbdeletelisteners:g([]),__kbparentcreatelisteners:g([]),__kbparentdeletelisteners:g([]),__kbpointers:g({}),__kbevents:g(E),length:g(0,!0),__kbnonproxy:g(h,!1,!0),_stopChange:g(!1,!0)});c=0;for(d=n.length;c<d;c++)k[n[c]]=b[n[c]];h.__proto__=x.prototype;h.__kbevents.addlistener=[];h.__kbevents.removelistener=[];h.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return k}function v(b,c,d,e,h,k,n,m){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=k;this.type=this.event=d;this.listener=n;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=e;this.oldValue=h;this.stopChange=m}function g(b,c,d){return{value:b,writable:!!c,enumerable:!1,configurable:!!d}}function P(b,c,d){return{get:function(){return b.call(this)},set:function(d){c&&(b=d)},enumerable:!1,configurable:!!d}}function N(b,c){var d=c,e=c;return{get:function(){return d},
set:function(c){var k=new v(this,b,"set",c,d,arguments,"__kblisteners",this._stopChange);!0!==l(k)&&(e=d,d=c,k.stopChange||(k.listener="__kbupdatelisteners",k.type="postset",l(k)),this._stopChange||this.callSubscribers(b,d,e));this._stopChange=!1},configurable:!0,enumerable:!0}}function Q(b,c,d){return{get:function(){return b[c]},set:function(d){(this._stopChange?b.stopChange():b)[c]=d;this._stopChange=!1},enumerable:d.enumerable,configurable:d.configurable}}function L(b,c){for(var d=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],e=[],h,k=0,n=d.length;k<n;k++)if(h=b[d[k].listener],w.call(h))for(var e=Object.keys(h),m=0,q=e.length;m<q;m++)for(var f=0,l=h[e[m]].length;f<l;f++)c[d[k].method](e[m],h[e[m]][f]);else for(m=0,q=h.length;m<q;m++)c[d[k].method](h[m])}function G(b,c){var d=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],e=[],h;if(b[c].__kbImmediateParent)for(var k=0,n=d.length;k<n;k++){h=b[d[k].listener];for(var e=Object.keys(h),m=0,q=e.length;m<q;m++)if(c===e[k])for(var f=0,l=h[e[k]].length;f<l;f++)void 0===b[c].__kbImmediateParent[d[k].listener][c]&&(b[c].__kbImmediateParent[d[k].listener][c]=[]),b[c].__kbImmediateParent[d[k].listener][c].push(h[e[k]][f])}L(b,b[c])}function H(b,c,d,e){d=new x(d,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);L(b,d);if(e){e=new v(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange);var h=l(e);!0!==h&&(Object.defineProperty(b,c,N(c,d)),e.listener="__kbupdatelisteners",e.type="postcreate",l(e))}else e=new v(b,c,"set",d,void 0,[],"__kblisteners",b._stopChange),h=l(e),!0!==h&&(Object.defineProperty(b,c,N(c,d)),e.listener="__kbupdatelisteners",e.type="postset",l(e));return!0!==h}function M(b,c,d,e){if(e){e=new v(b,c,"create",d,void 0,[],"__kbcreatelisteners",
b._stopChange);var h=l(e);if(!0!==h){var k=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,Q(d.__kbImmediateParent,c,k));b.__kbpointers.push(c);G(b,c);e.listener="__kbupdatelisteners";e.type="postcreate";l(e)}return!0!==h}k=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,Q(d.__kbImmediateParent,c,k));b.__kbpointers.push(c);G(b,c);return!0}function B(b,c,d){if(J.call(b,c)){if("length"===c)if(d>b.length&&void 0!==b[d-1])b.length=
d;else{if(d<b.length){c=d;for(var e=b.length;c<e;c++)b[c]&&delete b[c];b.length=d}}else{if("object"===typeof d)return H(b,c,d);if(d instanceof x)return M(b,c,d);b[c]=d}return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=d,!0;if(-1===F.indexOf(c)){if("object"===typeof d)return H(b,c,d,!0);if(d instanceof x)return M(b,c,d,!0);var e=new v(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange),h=l(e);!0!==h&&(Object.defineProperty(b,
c,N(c,d)),e.listener="__kbupdatelisteners",e.type="postcreate",l(e));return!0!==h}}function O(b,c){var d=new v(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),e=l(d);!0!==e&&("object"===typeof b[c]&&(b[c]=null),delete b[c],d.listener="__kbupdatelisteners",d.type="postdelete",l(d));return!0!==e}function w(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===
typeof b?b:this[b]:this)}function t(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function r(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function J(b,c){if(this==Object.prototype&&void 0===
b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var d=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return d?void 0===d.value:!1}function C(b){return b.split(".")}function K(b,c){return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[c],k=new v(this,c,"addlistener",h,
void 0,arguments,"");"string"===typeof d&&1!==C(d).length&&(h=C(d),h.pop(),h.join("."),k.local=this.getLayer(h),h=k.local[c],k.value=h,d=C(d).pop());!0!==l(k)&&(w.call(h)?(void 0===h[d]&&(h[d]=[]),h[d].push(e),k.type="postaddlistener",l(k)):t.call(h)&&"function"===typeof d&&(h.push(d),k.type="postaddlistener",l(k)));return this}}function D(b,c){return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[c],k=new v(this,c,"removelistener",h,void 0,arguments,"");
"string"===typeof d&&1!==C(d).length&&(h=C(d),h.pop(),h.join("."),k.local=this.getLayer(h),h=k.local[c],k.value=h,d=C(d).pop());if(!0!==l(k))if(w.call(h)){if(void 0!==h[d])for(var n=0,m=h[d].length;n<m;n++)if(h[d][n].toString()===e.toString()){h[d].splice(n,1);k.type="postremovelistener";l(k);break}}else if(t.call(h)&&"function"===typeof d)for(n=0,m=h.length;n<m;n++)if(h[n].toString()===e.toString()){h.splice(n,1);k.type="postremovelistener";l(k);break}return this}}function A(b,c){function d(c,b,
k){var n=Object.keys(this,"all").filter(function(c){return r.call(this[c])}.bind(this)),m=this,q=c;"string"===typeof c&&1!==C(c).length&&(m=C(c),q=m.pop(),m.join("."),m=this.getLayer(m),void 0===m[k][c]&&(m[k][c]=[]),m[k][c].push(b));w.call(m[k])?(void 0===m[k][q]&&(m[k][q]=[]),m[k][q].push(b),void 0!==m.__kbpointers[q]&&(void 0===m.__kbpointers[q][q]&&(m.__kbpointers[q][q]=[]),m.__kbpointers[q][q].push(_func))):m[k].push(b);q=0;for(m=n.length;q<m;q++)d.call(this[n[q]],c,b,k)}return function(e,h){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var k=new v(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==l(k)&&(d.call(this,e,h,c),k.type="postaddchildlistener",l(k));return this}}function u(b,c){function d(c,b,k){var n=Object.keys(this,"all").filter(function(c){return r.call(this[c])}.bind(this)),m=this,q=c;if("string"===typeof c&&1!==C(c).length&&(m=C(c),q=m.pop(),m.join("."),m=this.getLayer(m),void 0!==m[k][c]))for(var f=0,l=m[k][c].length;f<l;f++)if(m[k][c][f].toString()===
b.toString()){m[k][c].splice(f,1);break}if(w.call(m[k])){if(void 0!==m[k][q]){f=0;for(l=m[k][q].length;f<l;f++)if(m[k][q][f].toString()===b.toString()){m[k][q].splice(f,1);break}if(-1!==m.__kbpointers.indexOf(q)&&void 0!==m[q].__kbImmediateParent[k][q])for(f=0,l=m[q].__kbImmediateParent[k][q].length;f<l;f++)if(m[q].__kbImmediateParent[k][q][f].toString()===b.toString()){m[q].__kbImmediateParent[k][q].splice(f,1);break}}}else for(f=0,l=m[k].length;f<l;f++)if(m[k][f].toString()===b.toString()){m[k].splice(f,
1);break}f=0;for(l=n.length;f<l;f++)d.call(this[n[f]],c,b,k)}return function(e,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=new v(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==l(k)&&(d.call(this,e,h,c),k.type="postremovechildlistener",l(k));return this}}var E={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],
reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},F=["__proto__"],f=function(b,c){if(!c._stopPropogration&&b)for(var d=0,e=b.length;d!==e&&(b[d](c),!c._stopPropogration);d++);},l=function(b){if(b.listener){var c=b.local[b.listener],d=b.local[b.listener.replace("__kb","__kbparent")];w.call(c)?(f(c[b.key],b),f(c["*"],b)):f(c,b);w.call(d)?
(f(d[b.key],b),f(d["*"],b)):f(d,b)}f(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof x?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(d){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(d,10)):isNaN(parseInt(d,
10))})};Object.defineProperties(Object.prototype,{"typeof":g(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:g(function(b){function c(b){for(var h=Object.keys(b,"all"),k=0,n=void 0,f=0,q=h.length;f<q;f++)n=b[h[f]],"object"===typeof n&&void 0!==n&&null!==n?-1===d.indexOf(n)&&(d.push(n),k+=c(n)):"string"===typeof n?k+=2*n.length:"number"===typeof n?k+=8:"boolean"===typeof n?k+=4:"function"===typeof n&&(k+=2*n.toString().length),k+=2*h[f].length;return k}
if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var d=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:g(w,!1,!0),isArray:g(t,!1,!0),isMixed:g(r,!1,!0),isObservable:g(J,!1,!0),stringify:g(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,function(d,b){if(t(b)||w(b)){if(-1!==c.indexOf(b))return;c.push(b)}return b})},
!1,!0),getKeys:g(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:g(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==
c[b]})},!1,!0),keyCount:P(function(){return this.getKeys("o").length},!1,!0),indexCount:P(function(b){return this.length},!1,!0),count:P(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(x.prototype,{concat:g(Array.prototype.concat),every:g(Array.prototype.every),filter:g(Array.prototype.filter),find:g(Array.prototype.find),findIndex:g(Array.prototype.findIndex),forEach:g(Array.prototype.forEach),includes:g(Array.prototype.includes),indexOf:g(Array.prototype.indexOf),
join:g(Array.prototype.join),lastIndexOf:g(Array.prototype.lastIndexOf),map:g(Array.prototype.map),reduce:g(Array.prototype.reduce),reduceRight:g(Array.prototype.reduceRight),slice:g(Array.prototype.slice),some:g(Array.prototype.some),entries:g(Array.prototype.entries),toLocaleString:g(Array.prototype.toLocaleString),add:g(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());"undefined"===d[b]&&(d[b]=c);return this}),set:g(function(b,c){var d=-1!==
b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());d[b]=c;return this}),get:g(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:g(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:g(function(b){var c=
-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:g(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,b,g(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,d);return this}),addPointer:g(function(b,c){b instanceof x||(b=new x(b,b.__kbname));var d=Object.getOwnPropertyDescriptor(b,
c);Object.defineProperty(this,c,Q(b,c,d));this.__kbpointers[c]=b}),move:g(function(b,c){this[c]=b[c];b instanceof x||(b[c]=null);delete b[c];return this}),copy:g(function(b,c){this[c]=b[c];return this}),merge:g(function(b){function c(b,h){for(var k=b instanceof x?b.keys("o"):Object.keys(b),n,f=0,q=k.length;f<q;f++)n=b[k[f]],"object"===typeof n&&-1===d.indexOf(n)&&"undefined"!==h[k[f]]?c(n,h):h[k[f]]=n}var d=[];c(b,this);return this}),copyWithin:g(function(b,c,d){c=c||0;d=d||0;var e=new v(this,b,"copyWithin",
this[b],void 0,arguments,"");if(!0!==l(e)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;d=d<this.length?d:this.length-1;c=0>c?this.length-1:c;d=0>c?this.length-1:d;for(var h=c;h<=d;h++)this[b+(h-c)]=this[h];e.type="postcopyWithin";l(e)}return this}),fill:g(function(b,c,d){c=void 0!==c?Math.max(0,c):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;var e=new v(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==l(e)){for(var h=a.key;h<d;h++)this[h]=
b;e.type="postfill";l(e)}return this}),pop:g(function(){var b=new v(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==l(b)){var c=this[this.length-1];--this.length;b.type="postpop";l(b);return c}return null}),push:g(function(b){var c=new v(this,this.length,"push",b,void 0,arguments,"");!0!==l(c)&&(this[this.length]=b,c.type="postpush",l(c));return this.length}),reverse:g(function(){var b=new v(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==l(b)){for(var c=this.slice().reverse(),
d=0,e=this.length;d<e;d++)this[d]=c[d];b.type="postreverse";l(b)}return this}),shift:g(function(){var b=new v(this,0,"shift",this[0],void 0,arguments,"");if(!0!==l(b)){for(var c=a.key,d=this.length-1;c<d;c++)this[c]=this[c+1];--this.length;b.type="postshift";l(b)}return null}),sort:g(function(){var b=new v(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==l(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),d=0,e=this.length;d<e;d++)this[d]=c[d];b.type="postsort";l(b)}return this}),splice:g(function(b,
c,d){var e=new v(this,b,"splice",void 0,void 0,arguments,"");if(!0!==l(e)){var h=[],k=Array.prototype.slice.call(arguments,2),n=k.length-2,f=0;if(0!==c&&void 0!==this[b-1+c])for(var q=0,g=c;q<g;q++){h.push(this[b+q]);for(var I=b+q,S=this.length-1;I<S;I++)this[I]=this[I+1];delete this[this.length-1]}if(0!==n)for(q=0,g=n;q<g;q++){f=b+Math.min(1,q);I=this.length;for(S=f;I>S;I--)this[I]=this[I-1];this[f]=k[q]}e.type="postsplice";e.listener="";l(e);return h}return[]}),unshift:g(function(){var b=new v(this,
0,"unshift",this[0],void 0,arguments,"");if(!0!==l(b)){for(var c=Array.prototype.slice.call(arguments),d=this.length-1+c.length,e=c.length;-1!==d;d--)this[d]=d<e?c[d]:this[d-c.length];b.type="postunshift";l(b)}return this.length}),getLayer:g(function(b){function c(b){var e=b[0];return void 0===this[e]&&0!==b.length-1?null:r(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=C(b);return c.call(this,b)}),setLayer:g(function(b){function c(b){var e=b[0];void 0===this[e]&&0!==b.length-
1&&(this[e]=x({},this.__kbname,this,this.__kbscopeString+"."+e));return r(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=C(b);return c.call(this,b)}),ignoreCreate:g(function(b){-1===F.indexOf(b)&&F.push(b);return this}),addActionListener:g(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:g(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var d=0,e=this.__kbref.__kbevents[b];d<e;d++)if(this.__kbref.__kbevents[b][d].toString()===
c.toString()){this.__kbref.__kbevents[b].splice(d,1);break}return this}),subscribe:g(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:g(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var d=0,e=this.__kbsubscribers[b].length;d<e;d++)if(this.__kbsubscribers[b][d].toString()===c.toString()){this.__kbsubscribers[b].splice(d,1);break}return this}),callSubscribers:g(function(b,c,d){if(void 0!==this.__kbsubscribers[b])for(var e=
0,h=this.__kbsubscribers[b].length;e<h;e++)this.__kbsubscribers[b].call(this,b,c,d);return this}),stopChange:g(function(){this._stopChange=!0;return this})});Object.defineProperties(x.prototype,{addDataListener:g(K("addDataListener","__kblisteners")),removeDataListener:g(D("removeDataListener","__kblisteners")),addDataUpdateListener:g(K("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:g(D("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:g(K("addDataCreateListener",
"__kbcreatelisteners")),removeDataCreateListener:g(D("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:g(K("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:g(D("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:g(A("addChildDataListener","__kbparentlisteners")),removeChildDataListener:g(u("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:g(A("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:g(u("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:g(A("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:g(u("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:g(A("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:g(u("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return x}}(),V=function(){return function(){function z(p){if("object"===typeof p)for(var x=0,v=p.length;x<
v;x++)K_Components[p[x]]?y(p[x],K_Components[p[x]],document.getElementById("script_"+p[x])):z.load(p[x],"component/"+p[x]+"/"+location.search,y);else"string"===typeof p&&(K_Components[p[x]]?y(p,K_Components[p],document.getElementById("script_"+p)):z.load(p,"component/"+p+"/"+location.search,y))}var y=function(){},R=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});z.getUnknowns=function(p){var x=p.match(R);return x.map(function(p){return p.replace(/[<\/>]/g,"")}).filter(function(p,g){return document.createElement(p)instanceof
HTMLUnknownElement&&-1===x.indexOf(p,g+1)&&!K_Components[p]})};z.load=function(p,x,v){document.head.appendChild(function(g,p,x){var v=document.createElement("script");v.type="text/javascript";v.charset="utf-8";v.async=!0;v.src=p;v.id="script_"+g;v.onload=function(){x(g,K_Components[g],this)};return v}(p,x,v));return z};z.onLoad=function(p){if(void 0===p)return y;y="function"===typeof p?p:y;return z};return z}}(),W=function(z){return function(){function y(f){this.name=f.tagName.toLowerCase();this.template=
C[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=f;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function R(f,l,b,c,d,e,h,k){function n(c){var b="for"===l?w(c):[],d=this;this.key="for"!==l?B(c):b[0];this.filterNames=O(c);this.component=
"for"===l?b[1]:void 0;this.id=0;this.isEvent=m;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:t("",!0)});this.__proto__.updateData=function(c){if(d.isConnected&&d._data){if("object"!==typeof c||void 0===c.value)c={value:c};"function"===typeof d._data.stopChange&&d._data.stopChange().set(d.key,c.value)}};this.__proto__.updateDom=function(c){if(d.isSynced()){d.element.stopChange();
if("object"!==typeof c||void 0===c.value)c={value:c};d.value=c.value}};this.__proto__.updateLoop=function(){d.kb_loop&&d.loop(d.kb_loop)}}var m="attribute"===l&&-1!==D.indexOf(h.name)||"component"===l&&h.name&&-1!==D.indexOf(h.name);m&&k.stopChange().removeAttribute(h.name);Object.defineProperties(n.prototype,{valget:t(p),valset:t(x),refresh:t(P),connect:t(N),deleteMap:t(L),loop:t(Q),unsync:t(G),isSynced:t(v),type:t(l),text:t(b,!0),bindText:t(c,!0),bindNames:t("for"===l?[w(c[0])[0]]:M(c),!0),bindListener:t(m?
d.toLowerCase():d),bindProperty:t(m?h.name.toLowerCase():e),bindTarget:t(h,!0),element:t(k,!0),_data:t({},!0),filters:t({},!0),maps:t(f,!0),loop:t(Q)});return n}function p(){return this._value}function x(f){this._value=this.isSynced()?f:this._value;this.refresh()}function v(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function g(f,l){function b(c,b){return b.reduce(function(b,d){return b+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(b,
d){if(void 0!==c.filters){if(void 0!==c.filters[d])return c.filters[d](b);console.warn("there is no filter by the name %o in the data model filters %o",d,Object.keys(c.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},d._value))},"")}return 1===l.length?"string"===typeof l[0]._value?b(f,l):l[0]._value:b(f,l)}function P(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===
this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=g(this,this.bindText)):this.bindTarget[this.bindProperty]=g(this,this.bindText));return this}function N(f){this._data=f;this.filters=void 0!==f.filters?f.filters:this.filters;f=0;for(var l=this.bindNames.length;f<l;f++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[f])||(console.warn("No property by the name %o exists on this data set %o",
this.bindNames[f],this._data),this._data.add(this.bindNames[f],this._value)),this.value=this._data.get(this.bindNames[f]),"component"!==this.type&&(this.isConnected=!0,this._data.removeDataUpdateListener(this.bindNames[f],this.updateDom).addDataUpdateListener(this.bindNames[f],this.updateDom),"for"===this.type&&this._value.addActionListener&&this._value.removeDataUpdateListener("*",this.updateLoop).addDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).addDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop).addDataDeleteListener(this.updateLoop)));
1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function Q(f){this.kb_loop=f;this.element.stopChange().innerHTML="";for(var l=this._value,b=0,c=this.filterNames.length;b<c;b++)l=this.filters[this.filterNames[b]](l);l=0;for(b=this._value.length;l<b;l++)c=document.createElement(this.component),c.k_post=this._value[l],c.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(c),
"function"===typeof f&&f(c)}function L(){this.maps[this.key].splice(this.id,1);return this}function G(){for(var f=0,l=this.bindNames.length;f<l;f++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[f],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=
this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function H(f){return f.split(new RegExp("("+A.split("").join("\\")+")(.*?)("+u.split("").join("\\")+")","g")).map(function(f,b,c){return c[b-1]===A?A+f+u:f}).filter(function(f,b,c){return 0!==f.length&&f!==A&&f!==u&&0!==f.length})}
function M(f){return f.filter(function(f){return-1!==f.indexOf(A)&&-1!==f.indexOf(u)}).map(function(f){return B(f)})}function B(f){return f.replace(new RegExp("["+A+u+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function O(f){return-1!==f.indexOf(E)?f.replace(new RegExp("["+u+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function w(f){return-1!==f.indexOf("for")?f.replace(new RegExp("["+A+u+"]",
"g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(f){return 0!==f.length}):[]}function t(f,l,b){return{value:f,writable:!!l,enumerable:!1,configurable:!!b}}function r(f,l){for(var b=F[f],c=0,d=b.length;c<d&&(b[c](l),l._stopPropogation);c++);return l._preventDefault}function J(f){var l=f.match(K).map(function(b){return b.replace(/[<\/>]/g,"")});l.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===l.indexOf(b,c+1)&&void 0===C[b]});
0!==l.length&&r("unknown",new Event("unknown",l));return l}var C={},K=/(<\/.*?>)/g;z().call();var D=Object.keys(HTMLElement.prototype).filter(function(f){return 0===f.indexOf("on")}),A="{{",u="}}",E="|",F={unknown:[]};y.prototype.map=function(f){function l(c){for(var d=0,e=c.length;d<e;d++)if(void 0===c[d].kb_maps){c[d].kb_mapper=f;if(3===c[d].nodeType){var h=c[d],k=b,n=h.textContent,m=h.parentElement instanceof HTMLUnknownElement;if(n.match(new RegExp("(\\"+A.split("").join("\\")+")(.*?)(\\"+u.split("").join("\\")+
")","g")))for(var q=m?"component":-1!==n.indexOf("for")&&void 0!==n.indexOf("loop")?"for":"text",h=R(k,q,n,H(n),m?"":"textContent","textContent",h,h.parentElement),n=0,m=h.prototype.bindText.length;n<m;n++)0===h.prototype.bindText[n].indexOf(A)&&(q=new h(h.prototype.bindText[n]),h.prototype.bindText[n]=q,void 0===k[q.key]&&(k[q.key]=[]),q.id=k[q.key].length,k[q.key].push(q))}else for(var k=c[d],h=b,n=k.attributes,m=k instanceof HTMLUnknownElement,q=0,g=n.length;q<g;q++)if(n[q].value.match(new RegExp("(\\"+
A.split("").join("\\")+")(.*?)(\\"+u.split("").join("\\")+")","g")))for(var I=R(h,m?"component":"attribute",n[q].value,H(n[q].value),m?"":n[q].name,"value",n[q],k),r=0,t=I.prototype.bindText.length;r<t;r++)if(0===I.prototype.bindText[r].indexOf(A)){var p=new I(I.prototype.bindText[r]);I.prototype.bindText[r]=p;void 0===h[p.key]&&(h[p.key]=[]);h[p.key].push(p)}c[d].childNodes&&0!==c[d].childNodes.length&&l(c[d].childNodes)}}var b={};l(f.childNodes);return b};y.prototype.addFilter=function(f,l){void 0!==
this.maps[f]&&this.maps[f].forEach(function(b){b.filters.push(l);b.refresh()});return this};y.prototype.removeFilter=function(f,l){void 0!==this.maps[f]&&this.maps[f].forEach(function(b){b.filters.splice(this.maps[f].filters.indexOf(l),1);b.refresh()});return this};y.prototype.swapFilter=function(f,l,b){void 0!==this.maps[f]&&this.maps[f].forEach(function(c){c.filters.splice(this.maps[f].filters.indexOf(l),1,b);c.refresh()});return this};Object.defineProperties(y,{startChars:t(function(f){if(void 0===
f)return A;A="string"===typeof f?f:A;return this}),endChars:t(function(f){if(void 0===f)return u;u="string"===typeof f?f:u;return this}),pipeChars:t(function(f){if(void 0===f)return E;E="string"===typeof f?f:E;return this}),getUnknown:t(J),isRegistered:t(function(f){return void 0!==C[f]}),register:t(function(f,l){void 0===C[f]?(C[f]=l,J(l)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",f);return this}),addEventListener:t(function(f,l){void 0!==F[f]?
F[f].push(l):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",f);return this}),removeEventListener:t(function(f,l){if(void 0!==F[f])for(var b=0,c=F[f].length;b<c;b++)F[f][b].toString()===l.toString()&&F[f].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",f);return this})});return y}}(function(){function z(){function y(c,b){var e=c.length,h;for(h=0;h<e&&(c[h](b),void 0===b._stopPropogation);h++);
}function z(c,b){var e=c.length,h;for(h=0;h<e&&(b.child=b.target,b.target=c[h].parent,c[h].func(b),void 0===b._stopPropogation);h++);}function p(c,b){for(var e=c.length;0<e;f++)if(c[f].toString()===b.toString())return!0;return!1}function x(c,b,e,h,k,f,m,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=e;this.oldValue=h;this.target=c;this.attr=b;this.arguments=k;this.action=f;this.child=void 0;this.type=m;this.stopChange=
q}function v(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function g(c,b,e,h){var k=c.get,f=c.set,m;return function(c){m=k.call(this);e(this,b,c,m,void 0,this._stopChange)&&f.call(this,c);this._stopChange||h(this,b,c,m);this._stopChange=void 0}}function P(c,b,e,h){var k;return function(f){k=
c.value;e(this,b,f,k,arguments,this._stopChange)&&(c.value=f);this._stopChange||h(this,b,f,k,arguments);this._stopChange=void 0}}function N(c,b,e,h){var k=c.value,f;return function(){e(this,b,null,null,arguments,this._stopChange)&&(f=k.apply(this,arguments));this._stopChange||h(this,b,null,null,arguments,f);this._stopChange=void 0;return f}}function Q(c,b,e,h,k){var f=k.style,m=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,l;return{get:function(){return l},set:function(c){q=l;e(k,b,c,
q,void 0,this._stopChange)&&(l=c,f.setProperty(m,c));this._stopChange||h(k,b,c,q);this._stopChange=void 0},enumerable:!0,configurable:!0}}function L(c,b,e,h){if("function"!==typeof b)return r;var k=-1!==["value","checked"].indexOf(c),f=-1!==E.indexOf(c),m;if(this.toString()!==r.toString())if(e){var q=this.querySelectorAll("*");e=q.length;for(var l,g=0;g<e;g++){l=q[g].attrListeners();if(k||"*"===c)void 0!==q[g].addInputBinding&&q[g].addInputBinding(),void 0!==q[g].addInputBoxBinding&&q[g].addInputBoxBinding();
if(f)r.injectStyleProperty(q[g],c),m=h?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){m=h?"_parentStyleUpdateListeners":"_parentStyleListeners";e=E.length;for(var p=0;p<e;p++)r.injectStyleProperty(q[g],E[p]);void 0===l[m]["*"]&&(l[m]["*"]=[]);l[m]["*"].push({parent:this,func:b})}m=h?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===l[m][c]&&(l[m][c]=[]);l[m][c].push({parent:this,func:b})}}else{l=this.attrListeners();if(f)m=h?"_styleUpdateListeners":"_styleListeners",
r.injectStyleProperty(this,c);else{if(k||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){m=h?"_styleUpdateListeners":"_styleListeners";e=E.length;for(g=0;g<e;g++)r.injectStyleProperty(this,E[g]);void 0===l[m][c]&&(l[m][c]=[]);l[m][c].push(b)}m=h?"_attrUpdateListeners":"_attrListeners"}void 0===l[m][c]&&(l[m][c]=[]);l[m][c].push(b)}else{if(k||"*"===c)for(p=document.querySelectorAll("input, textarea"),e=p.length,g=
0;g<e;g++)void 0!==p[g].addInputBinding&&p[g].addInputBinding(),void 0!==p[g].addInputBoxBinding&&p[g].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=f.length+1;f.unshift(document.body);for(g=0;g<e;g++)r.injectStyleProperty(f[g],c);m=h?D:K}else{if("*"===c){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=f.length+1;k=E.length;f.unshift(document.body);for(g=0;g<e;g++)for(p=0;p<k;p++)r.injectStyleProperty(f[g],E[p]);m=h?D:K;void 0===
m[c]&&(m[c]=[]);m[c].push(b)}m=h?C:J}void 0===m[c]&&(m[c]=[]);m[c].push(b)}}function G(c,b,e,h){function f(c,e){var h=e[c],k=h.length;for(m=0;m<k;m++)h[m].toString()===b.toString()&&h.splice(m,1)}if("function"!==typeof b)return r;["value","checked"].indexOf(c);var n=-1!==E.indexOf(c),m;if(this.toString()!==r.toString())if(e){e=this.querySelectorAll("*");var q=e.length;n?(n=h?"_childStyleUpdateListeners":"_childStyleListeners",f(c,this.attrListeners()[n]),n=h?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===c&&(n=h?"_childStyleUpdateListeners":"_childStyleListeners",f(c,this.attrListeners()[n])),n=h?"_childAttrUpdateListeners":"_childAttrListeners",f(c,this.attrListeners()[n]),n=h?"_parentAttrUpdateListeners":"_parentAttrListeners");for(m=0;m<q;m++){for(var l=e[m].attrListeners()[n][c],g=l.length,p=0;p<g;p++)l[p].isEqualNode(this)&&l.slice(p,1);if("*"===c)for(listenersStyle=h?"_parentStyleUpdateListeners":"_parentStyleListeners",l=e[m].attrListeners()[n][c],g=l.length,p=0;p<g;p++)l[p].isEqualNode(this)&&
l.slice(p,1)}}else n?n=h?"_styleUpdateListeners":"_styleListeners":("*"===c&&(n=h?"_styleUpdateListeners":"_styleListeners",f(c,this.attrListeners()[n])),n=h?"_attrUpdateListeners":"_attrListeners"),f(c,this.attrListeners()[n]);else n?n=h?D:K:("*"===c&&(n=h?D:K,f(c,n)),n=h?C:J),f(c,n)}function H(c,b){r.addAttrListener.call(this,c,b,!0);return this}function M(c,b){r.addAttrUpdateListener.call(this,c,b,!0);return this}function B(c,b){r.removeAttrListener.call(this,c,b,!0);return this}function O(c,b){r.removeAttrUpdateListener.call(this,
c,b,!0);return this}function w(c,b,e){var h=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(c){case "attr":if(p(h._attrListeners[b],e))return!0;break;case "attrupdate":if(p(h._attrUpdateListeners[b],e))return!0}return!1}function t(){this._stopChange=!0;return this}function r(){function c(c,b){var d,e=b.length;for(d=0;d<e;d++)-1===c.indexOf(b[d])&&c.push(b[d]);return c}function d(c,b){for(var d=Object.keys(c),e,h,f=0,k=d.length;f<k;f++)if(e=d[f],void 0===b[e])b[e]=
c[e].slice();else for(var l=0,m=c[e].length;l<m;l++)h=c[e][l],b[e].push(h)}function e(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),h,f=["value","checked"],k=e._attrListeners,l=e._attrUpdateListeners,m=e._parentAttrListeners;h=e._parentAttrUpdateListeners;var n=!1;if(void 0!==J["*"]||void 0!==C["*"])n=!0;if(!0!==n&&void 0!==k["*"]||void 0!==l["*"]||void 0!==m["*"]||void 0!==h["*"])n=!0;if(!0!==n)for(var g=0;g<f.length;g++)if(void 0!==J[f[g]]||void 0!==C[f[g]]||
void 0!==k[f[g]]||void 0!==l[f[g]]||void 0!==m[f[g]]||void 0!==h[f[g]]){n=!0;break}h=n;f=Object.keys(K);k=Object.keys(D);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);l=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);m=[];if(0!==f.length||0!==k.length)m=c(m,f),m=c(m,k);if(0!==m.length&&0!==l.length||0!==e.length)m=c(m,l),m=c(m,e);-1!==m.indexOf("*")&&(m=E);var e=m,f=e.length,p,t,k=[],u,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,
m=b.target;void 0!==l&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(h){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(k=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||k.unshift(b.arguments[0])):k=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));u=k.length;for(var B=0;B<u;B++)void 0!==k[B].addInputBinding&&
k[B].addInputBinding(),void 0!==k[B].addInputBoxBinding&&k[B].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(k=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),k.unshift(b.arguments[0])):k=Array.prototype.slice.call(b.target.querySelectorAll("*"));h=b.target.__kb._parentAttrListeners;n=b.target.__kb._parentAttrUpdateListeners;g=b.target.__kb._parentStyleListeners;p=b.target.__kb._parentStyleUpdateListeners;u=k.length;
for(B=0;B<u;B++){if(0!==f)for(t=0;t<f;t++)r.injectStyleProperty(k[B],e[t]);t=k[B].attrListeners();d(h,t._parentAttrListeners);d(n,t._parentAttrUpdateListeners);d(g,t._parentStyleListeners);d(p,t._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=m,b.arguments=[])}}function h(c){var b=c.target.attributes[c.arguments[0]],d="setAttribute"===c.attr?c.arguments[1]:"";n(c.target,c.arguments[0],d,void 0!==b?b.value:"",[d])||c.preventDefault()}function f(c){var b=c.target.attributes[c.arguments[0]],
d="setAttribute"===c.attr?c.arguments[1]:"";m(c.target,c.arguments[0],d,void 0!==b?b.value:"",[d])}r.injectPrototypes(Node,"Node");r.injectPrototypes(Element,"Element");r.injectPrototypes(HTMLElement,"HTMLElement");r.injectPrototypes(HTMLInputElement,"HTMLInputElement");r.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");r.injectPrototypes(Document,"Document");var n=l,m=b;r.addAttrUpdateListener("appendChild",e);r.addAttrUpdateListener("removeChild",e);r.addAttrUpdateListener("innerHTML",
e);r.addAttrUpdateListener("outerHTML",e);r.addAttrUpdateListener("innerText",e);r.addAttrUpdateListener("outerText",e);r.addAttrUpdateListener("textContent",e);r.addAttrListener("setAttribute",h);r.addAttrListener("removeAttribute",h);r.addAttrUpdateListener("setAttribute",f);r.addAttrUpdateListener("removeAttribute",f);return r}var J={},C={},K={},D={},A={},u="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),E=Object.getOwnPropertyNames(document.body.style),
F=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener","removeEventListener"]),f,l=function(c,b,e,h,f,l){e=new x(c,b,e,h,f,void 0,"set",l);void 0!==c.__kb&&(h=c.__kb._attrListeners,f=c.__kb._styleListeners,l=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==h[b]&&y(h[b],e),void 0===e._stopPropogation&&void 0!==f[b]&&y(f[b],e),void 0===e._stopPropogation&&void 0!==h["*"]&&(y(h["*"],e),void 0===e._stopPropogation&&y(f["*"],e)),
void 0===e._stopPropogation&&void 0!==l[b]&&z(l[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&z(c[b],e),void 0===e._stopPropogation&&void 0!==l["*"]&&(z(l["*"],e),void 0===e._stopPropogation&&z(c["*"],e)));void 0===e._stopPropogation&&void 0!==J[b]&&y(J[b],e);void 0===e._stopPropogation&&void 0!==K[b]&&y(K[b],e);void 0===e._stopPropogation&&void 0!==J["*"]&&(y(J["*"],e),void 0===e._stopPropogation&&y(K["*"],e));return void 0!==e._preventDefault?!1:!0},b=function(c,b,e,h,f,l){e=new x(c,b,e,h,f,
l,"update");void 0!==c.__kb&&(h=c.__kb._attrUpdateListeners,f=c.__kb._styleUpdateListeners,l=c.__kb._parentAttrUpdateListeners,c=c.__kb._parentStyleUpdateListeners,void 0!==h[b]&&y(h[b],e),void 0===e._stopPropogation&&void 0!==f[b]&&y(f[b],e),void 0===e._stopPropogation&&void 0!==h["*"]&&(y(h["*"],e),void 0===e._stopPropogation&&y(f["*"],e)),void 0===e._stopPropogation&&void 0!==l[b]&&z(l[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&z(c[b],e),void 0===e._stopPropogation&&void 0!==l["*"]&&(z(l["*"],
e),void 0===e._stopPropogation&&z(c["*"],e)));void 0===e._stopPropogation&&void 0!==C[b]&&y(C[b],e);void 0===e._stopPropogation&&void 0!==D[b]&&y(D[b],e);void 0===e._stopPropogation&&void 0!==C["*"]&&(y(C["*"],e),void 0===e._stopPropogation&&y(D["*"],e));return void 0!==e._preventDefault?!1:!0};r.injectPrototypeProperty=function(c,d,e,h,f){var n=c.prototype,m=Object.getOwnPropertyDescriptor(n,d);e=e||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var q=A[e];h=h||l;f=f||b;void 0===n.attrListeners&&
(n={},n.attrListeners=function(){void 0===this.__kb&&(this.__kb=new v);return this.__kb}.bind(n),n.addAttrListener=r.addAttrListener,n.addAttrUpdateListener=r.addAttrUpdateListener,n.addChildAttrListener=H,n.addChildAttrUpdateListener=M,n.hasListener=w,n.removeAttrListener=r.removeAttrListener,n.removeAttrUpdateListener=r.removeAttrUpdateListener,n.removeChildAttrListener=B,n.removeChildAttrUpdateListener=O,n.stopChange=t);void 0===q&&(A[e]={obj:c,proto:n,descriptors:{},set:void 0,update:void 0},
q=A[e],q.set=h,q.update=f);void 0===q.descriptors[d]&&(q.descriptors[d]=m);m.configurable&&(void 0!==m.set?Object.defineProperty(n,d,{get:m.get,set:g(m,d,h,f),enumerable:!0,configurable:!0}):"function"===typeof m.value?Object.defineProperty(n,d,{value:N(m,d,h,f),writable:!0,enumerable:!0,configurable:!0}):void 0!==m.value&&Object.defineProperty(n,d,{get:function(){return m.value},set:P(m,d,h,f),enumerable:!0,configurable:!0}));return r};r.injectStyleProperty=function(c,d,e,f){var k=c.style,g=Object.getOwnPropertyDescriptor(k,
d),m=c.attrListeners().injectedStyle;e=e||l;f=f||b;void 0===m&&(c.attrListeners().injectedStyle={obj:c,proto:k,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=e,c.attrListeners().injectedStyle.update=f,m=c.attrListeners().injectedStyle);void 0===m.descriptors[d]&&(m.descriptors[d]=g);g.configurable&&Object.defineProperty(k,d,Q(g,d,e,f,c));return r};r.injectPrototypes=function(c,d,e,f){var k=c.prototype;d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=
A[d],m=Object.getOwnPropertyNames(k);e=e||l;f=f||b;var q;void 0===k.attrListeners&&(k.attrListeners=function(){void 0===this.__kb&&(this.__kb=new v);return this.__kb},k.addAttrListener=r.addAttrListener,k.addAttrUpdateListener=r.addAttrUpdateListener,k.addChildAttrListener=H,k.addChildAttrUpdateListener=M,k.removeAttrListener=r.removeAttrListener,k.removeAttrUpdateListener=r.removeAttrUpdateListener,k.removeChildAttrListener=B,k.removeChildAttrUpdateListener=O,k.hasListener=w,k.stopChange=t);void 0===
g&&(A[d]={obj:c,proto:k,descriptors:{},set:void 0,update:void 0},g=A[d],g.set=e,g.update=f);q=A[d].descriptors;for(f=0;f<m.length;f+=1)void 0===q[m[f]]&&r.injectPrototypeProperty(c,m[f],d,e,b);if(-1!==m.indexOf("value")){var p=function(b){var c,d,e;if("checkbox"===this.type||"radio"===this.type)c=!0;d=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){e=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;c&&(g.set(this,
"checked",this.checked,d)?g.update(this,"checked",this.checked,d):q.checked.set.call(this,d));this.value=e;g.set(this,"value",this.value,d)?g.update(this,"value",this.value,d):q.value.set.call(this,d)}.bind(this),0)};k.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",p)};k.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",p)};k.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;
this.removeEventListener("mouseup",p)};k.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",p)}}return r};r.addAttrListener=function(c,b,e){if("html"===c){c=0;for(var f=u.length;c<f;c++)L.call(this,u[c],b,e,!1)}else if("events"===c)for(c=0,f=F.length;c<f;c++)L.call(this,F[c],b,e,!1);else L.call(this,c,b,e,!1);return this};r.addAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var f=u.length;b<f;b++)L.call(this,u[b],d,e,!0)}else if("events"===
b)for(b=0,f=F.length;b<f;b++)L.call(this,F[b],d,e,!0);else L.call(this,b,d,e,!0);return this};r.removeAttrListener=function(b,d,e){if("html"===b){b=0;for(var f=u.length;b<f;b++)G.call(this,u[b],d,e,!1)}else if("events"===b)for(b=0,f=F.length;b<f;b++)G.call(this,F[b],d,e,!1);else G.call(this,b,d,e,!1);return this};r.removeAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var f=u.length;b<f;b++)G.call(this,u[b],d,e,!0)}else if("events"===b)for(b=0,f=F.length;b<f;b++)G.call(this,F[b],d,e,!0);
else G.call(this,b,d,e,!0);return this};r.hasListener=function(b,d,e){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(b){case "attr":if(p(J[d],e))return!0;break;case "attrupdate":if(p(C[d],e))return!0}return!1};r.injectedPrototypes=function(){return A};return r}"function"===typeof define&&define.amd&&define("KB",z);return z}()),T=function(z,y,R){return function(){function p(B,O,w,t){function r(g,f,l,b,c){for(var d=P({},g),e=0,h=Object.keys(f.prototype),k=h.length;e<k;e++)d.__proto__[h[e]]=
f.prototype[h[e]];e=0;h=Object.keys(b);for(k=h.length;e<k;e++)d.set(h[e],b[h[e]]);if(b.pointers)for(e=0,h=Object.keys(b.pointers),k=h.length;e<k;e++)d.addPointer(b.pointers[h[e]],h[e]);f.apply(d,l);e=0;h=Object.keys(c);for(k=h.length;e<k;e++)d.set(h[e],c[h[e]]);if(c.pointers)for(e=0,h=Object.keys(c.pointers),k=h.length;e<k;e++)d.addPointer(c.pointers[h[e]],h[e]);if(d.sessionStorage){if(f=sessionStorage.getItem(d.id||g))for(f=JSON.parse(f),e=0,h=Object.keys(f),k=h.length;e<k;e++)d.set(h[e],f[h[e]]);
else sessionStorage.setItem(d.id||g,d.stringify());d.addChildDataUpdateListener("*",function(){sessionStorage.setItem(d.id||g,d.stringify())})}if(d.localStorage){if(f=localStorage.getItem(d.id||g))for(f=JSON.parse(f),e=0,h=Object.keys(f),k=h.length;e<k;e++)d.set(h[e],f[h[e]]);else localStorage.setItem(d.id||g,d.stringify());d.addChildDataUpdateListener("*",function(){localStorage.setItem(d.id||g,d.stringify())})}d.store&&Q.set(d.id||g,d);return d}function y(r,f,l){r.kb_viewmodel=l;Object.keys(f).forEach(function(b){f[b].forEach(function(b){switch(b.type){case "for":b.connect(l);
N.isRegistered(b.component)?b.loop(function(b){p(b)}):(p.loadWaitList(b.component,function(d,e){b.loop(function(b){p(b)})}),p.loadWaitList(b.component).loading||(p.loadWaitList(b.component).loading=!0,g(b.component)));break;case "component":b.connect(l).deleteMap();break;default:b.connect(l)}})})}function C(g,f){D=new N(f);Object.defineProperty(D.wrapper,"__kbcomponenttree",v(f.kb_mapper?f.kb_mapper.__kbcomponenttree:[]));f.parentElement.replaceChild(D.fragment,f);O.unshift(D.wrapper);y(D.wrapper,
D.maps,r(g,L[g],O,u,E));if(-1===D.wrapper.__kbcomponenttree.indexOf(g)||D.wrapper.kb_viewmodel.multiple){D.wrapper.__kbcomponenttree.push(g);for(var l=D.wrapper.querySelectorAll("*"),b=0,c=l.length;b<c;b++)l[b]instanceof HTMLUnknownElement&&p(l[b])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
g),console.error("Recursive Component %o on %o",D.wrapper,D.wrapper.parentElement),D.wrapper.parentElement.removeChild(D.wrapper)}var z=B.tagName.toLowerCase(),D,A=Object.keys(HTMLElement.prototype).filter(function(g){return 0===g.indexOf("on")}),u={},E={};void 0===O&&(O=[]);w&&x(w,u);Object.defineProperty(u,"id",v(u.id||z+"-"+Date.now(),!0));Object.defineProperty(u,"filters",v(u.filters||{}));"string"===typeof u.sessionStorage&&(u.sessionStorage="true"===u.sessionStorage);Object.defineProperty(u,
"sessionStorage",v(void 0!==u.sessionStorage?u.sessionStorage:!1,!0));"string"===typeof u.localStorage&&(u.localStorage="true"===u.localStorage);Object.defineProperty(u,"localStorage",v(void 0!==u.localStorage?u.localStorage:!1,!0));"string"===typeof u.store&&(u.store="true"===u.store);Object.defineProperty(u,"store",v(void 0!==u.store?u.store:!1,!0));"string"===typeof u.multiple&&(u.multiple="true"===u.multiple);Object.defineProperty(u,"multiple",v(void 0!==u.multiple?u.multiple:!1,!0));t&&x(t,E);
E.innerHTML=B.innerHTML.toString();w=0;for(t=B.attributes.length;w<t;w++)E[B.attributes[w].name]=B.attributes[w].value;w=0;for(t=A.length;w<t;w++)B[A[w]]&&(E[A[w]]=B[A[w]]);B.k_post&&x(B.k_post,E);N.isRegistered(z)?C(z,B):(p.loadWaitList(z,function(g,f){C(z,B)}),p.loadWaitList(z).loading||(p.loadWaitList(z).loading=!0,g(z)))}function x(g,p){var w=Object.keys(g);p.pointers||(p.pointers={});for(var t=0,r=w.length;t<r;t++)g.isObservable(w[t])?p.pointers[w[t]]=g:g[w[t]].isMixed()?p.pointers[w[t]]=g[w[t]].__kbImmediateParent:
p[w[t]]=g[w[t]]}function v(g,p,w){return{value:g,writable:!!p,enumerable:!1,configurable:!!w}}window.K_Components||(window.K_Components={});var g=y().onLoad(function(g,v){var w="<style>"+unescape(v.prototype.k_css)+"</style>"+unescape(v.prototype.k_html);p.register(g,v,w,v.prototype.cms);p.loadWaitList(g).forEach(function(p){p(g,v)});p.loadWaitList(g,"clear")}),P=z(),N=R(),Q=P({},"Model"),L={},G=function(){return window.location.search.replace("?","").split("&").filter(function(g){return 0!==g.length}).reduce(function(g,
p){g[p.split("=")[0]]=p.split("=")[1];return g},{})}(),H={},M;p.register=function(g,v,w,t){N.register(g,w);L[g]=v;return p};p.loadWaitList=function(g,v){if("undefined"===typeof v&&g)return H[g];if(g){if(void 0===H[g]||"clear"===v){var w=void 0===H[g]?!1:!!H[g].loading;H[g]=[];H[g].loading=w}"function"===typeof v&&H[g].push(v)}return p};p.localRouting=function(g){g?(M=Node.prototype.appendChild,Node.prototype.appendChild=function(g){if("script"===g.tagName.toLowerCase()){g.src=g.src.substring(0,-1!==
g.src.indexOf("?")?g.src.indexOf("?"):g.src.length);var p=g.src.match(/(.*?component\/)/);if(p){G.env||(G.env="prod");"dev"===G.env&&(G.env="qa");var t=g.src.replace(p[0],"").replace(/[\/\s]/g,"");g.src=p[0].replace("component/","components/")+t+"/build/"+G.env+"/"+t+(G.debug&&"prod"!==G.env?"":".min")+".js";arguments[0]=g}}return M.apply(this,arguments)}):M&&(Node.prototype.appendChild=M,M=null);return p};return p}}(U,V,W);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==
typeof window.require?define([],function(){return T}):"undefined"!==typeof module&&(module.exports=T);return T}();
