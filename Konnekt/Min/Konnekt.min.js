var Konnekt=function(){var W=function(){return function(x,v,M,p){function r(b,c,k,l){b=void 0===b?{}:b;var e={},d=window.Proxy?new Proxy(e,{set:N,deleteProperty:S}):e,A=Object.keys(b,"all");Object.defineProperties(e,{__kbname:g("string"===typeof c?c:"default",!0,!0),__kbref:g(k?k.__kbref||k:d,!0,!0),__kbscopeString:g(l||"",!0,!0),__kbImmediateParent:g(k||null,!0,!0),__kbsubscribers:g({}),__kblisteners:g({}),__kbupdatelisteners:g({}),__kbparentlisteners:g({}),__kbparentupdatelisteners:g({}),__kbcreatelisteners:g([]),
__kbdeletelisteners:g([]),__kbparentcreatelisteners:g([]),__kbparentdeletelisteners:g([]),__kbmethodlisteners:g([]),__kbmethodupdatelisteners:g([]),__kbpointers:g({}),__kbevents:g(C),length:g(0,!0),__kbnonproxy:g(e,!1,!0),__kbproxy:g(d,!1,!0),_stopChange:g(!1,!0)});e.__proto__=r.prototype;c=0;for(k=A.length;c<k;c++)d.set(A[c],b[A[c]]);e.__kbevents.addlistener=[];e.__kbevents.removelistener=[];e.addActionListener("addlistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]])b.local.__kbpointers[b.arguments[0]][b.arguments[2]](b.arguments[0],
b.arguments[1])}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]])b.local.__kbpointers[b.arguments[0]][b.arguments[2]](b.arguments[0],b.arguments[1])});return d}function B(b,c,k,l,e,d,A,f){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=d;this.type=this.event=k;this.listener=A;this.name=b.__kbname;this.root=b.__kbref;
this.scope=b.__kbscopeString;this.parent=b.__kbImmediateParent;this.value=l;this.oldValue=e;this.stopChange=f}function g(b,c,k,l){return{value:b,writable:!!c,enumerable:!!l,configurable:!!k}}function O(b,c,k){return{get:function(){return b.call(this)},set:function(k){c&&(b=k)},enumerable:!1,configurable:!!k}}function P(b,c){var k=c,l=c;return{get:function(){return k},set:function(c){var d=new B(this,b,"set",c,k,arguments,"__kblisteners",this._stopChange);!0!==f(d)&&(l=k,k=c,d.stopChange||(d.listener=
"__kbupdatelisteners",d.type="postset",f(d)),this._stopChange||this.callSubscribers(b,k,l));this._stopChange=!1},configurable:!0,enumerable:!0}}function Q(b,c,k){return{get:function(){return b[c]},set:function(k){(this._stopChange?b.stopChange():b)[c]=k;this._stopChange=!1},enumerable:k.enumerable,configurable:k.configurable}}function L(b,c){for(var k=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",
action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],d=[],e,h=0,A=k.length;h<A;h++)if(e=b[k[h].listener],E.call(e))for(var d=Object.keys(e),f=0,q=d.length;f<q;f++)for(var T=0,g=e[d[f]].length;T<g;T++)c[k[h].method](d[f],e[d[f]][T]);else for(f=0,q=e.length;f<q;f++)c[k[h].method](e[f])}function N(b,c,k){if(m(b,c)||"length"===c){if("length"===c)if(k>b.length&&void 0!==b[k-1])b.length=k;else{if(k<b.length){c=k;for(var d=b.length;c<d;c++)b[c]&&delete b[c];
b.length=k}}else b[c]=k;return!0}b.set(c,k)}function S(b,c){b.del(c);return!0}function J(b,c,k){var d=n(k),e=E(k),h=t(k);if(d&&k.__kbname!==b.__kbname)"default"===k.__kbname?b.merge(k,c):b.__kbpointers[c]||b.addPointer(k,c);else{var d=new B(this,c,"create",k,void 0,[],"__kbcreatelisteners",this._stopChange),A=f(d),w=parseInt(c,10);if(!0!==A)if((e||h)&&0!==Object.keys(k,"all").length)for(J.call(this,b,c,{}),e=0,h=Object.keys(k,"all"),d=h.length;e<d;e++)J.call(this[c],b[c],h[e],k[h[e]]);else{if(e||
h)k=new r(k,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+c),L(b,k);Object.defineProperty(b,c,P(c,k));!isNaN(w)&&b.length<=w&&(b.length=w+1);d.listener="__kbupdatelisteners";d.type="postcreate";f(d)}}}function R(b,c,k){var d=n(k),e=E(k),h=t(k);if(d&&k.__kbname!==b.__kbname)"default"===k.__kbname?b.merge(k,c):b.__kbpointers[c]||b.addPointer(k,c);else if(void 0===b[c])-1===u.indexOf(c)?J.call(this,b,c,k):b[c]=k;else if(e||h)for(d=0,e=Object.keys(k,"all"),h=e.length;d<h;d++)R.call(this[c],
b[c],e[d],k[e[d]]);else b[c]=k}function H(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function E(b){return"object"===H(void 0!==b?b:this)}function t(b){return"array"===H(void 0!==b?b:this)}function n(b){return"mixed"===H(void 0!==b?b:this)}function m(b,c){c="string"===typeof b?b:c;var k=Object.getOwnPropertyDescriptor("string"===typeof b?this:b,c);return k?void 0===k.value:!1}function K(b,c){"number"===typeof b&&(b=b.toString());var k=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):
this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());var d=new B(this,b,"set",c,this[b],arguments,"__kbmethodlisteners");!0!==f(d)&&(R.call(this,k,b,c),d.type="postset",d.listener="__kbmethodupdatelisteners",f(d));return this}function G(b){return b.split(".")}function z(b,c){return function(k,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var e=this[c],h=new B(this,c,"addlistener",e,void 0,arguments,"");"string"===typeof k&&1!==G(k).length&&(e=G(k),k=e.pop(),e=e.join("."),
h.local=this.getLayer(e),e=h.local[c],h.value=e);!0!==f(h)&&(E.call(e)?(void 0===e[k]&&(e[k]=[]),e[k].push(d),h.type="postaddlistener",f(h)):t.call(e)&&"function"===typeof k&&(e.push(k),h.type="postaddlistener",f(h)));return this}}function I(b,c){return function(k,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var e=this[c],h=new B(this,c,"removelistener",e,void 0,arguments,"");"string"===typeof k&&1!==G(k).length&&(e=G(k),e.pop(),e.join("."),h.local=this.getLayer(e),e=h.local[c],
h.value=e,k=G(k).pop());if(!0!==f(h))if(E.call(e)){if(void 0!==e[k])for(var A=0,w=e[k].length;A<w;A++)if(e[k][A].toString()===d.toString()){e[k].splice(A,1);h.type="postremovelistener";f(h);break}}else if(t.call(e)&&"function"===typeof k)for(A=0,w=e.length;A<w;A++)if(e[A].toString()===k.toString()){e.splice(A,1);h.type="postremovelistener";f(h);break}return this}}function F(b,c){function k(b,c,d){var A=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),f=this,q=b;"string"===
typeof b&&1!==G(b).length&&(f=G(b),q=f.pop(),f=f.join("."),f=this.getLayer(f),void 0===f[d][q]&&(f[d][q]=[]),f[d][q].push(c));E.call(f[d])?(void 0===f[d][q]&&(f[d][q]=[]),f[d][q].push(c),void 0!==f.__kbpointers[q]&&(void 0===f.__kbpointers[q][q]&&(f.__kbpointers[q][q]=[]),f.__kbpointers[q][q].push(_func))):f[d].push(c);q=0;for(f=A.length;q<f;q++)k.call(this[A[q]],b,c,d)}return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=new B(this,c,"addchildlistener",void 0,
void 0,arguments,"");!0!==f(h)&&(k.call(this.__kbnonproxy,d,e,c),h.type="postaddchildlistener",f(h));return this}}function y(b,c){function k(b,c,d){var f=Object.keys(this,"all").filter(function(b){return n.call(this[b])}.bind(this)),w=this,q=b;if("string"===typeof b&&1!==G(b).length&&(w=G(b),q=w.pop(),w.join("."),w=this.getLayer(w),void 0!==w[d][b]))for(var g=0,m=w[d][b].length;g<m;g++)if(w[d][b][g].toString()===c.toString()){w[d][b].splice(g,1);break}if(E.call(w[d])){if(void 0!==w[d][q]){g=0;for(m=
w[d][q].length;g<m;g++)if(w[d][q][g].toString()===c.toString()){w[d][q].splice(g,1);break}if(-1!==w.__kbpointers.indexOf(q)&&void 0!==w[q].__kbImmediateParent[d][q])for(g=0,m=w[q].__kbImmediateParent[d][q].length;g<m;g++)if(w[q].__kbImmediateParent[d][q][g].toString()===c.toString()){w[q].__kbImmediateParent[d][q].splice(g,1);break}}}else for(g=0,m=w[d].length;g<m;g++)if(w[d][g].toString()===c.toString()){w[d].splice(g,1);break}g=0;for(m=f.length;g<m;g++)k.call(this[f[g]],b,c,d)}return function(d,
e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=new B(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==f(h)&&(k.call(this.__kbnonproxy,d,e,c),h.type="postremovechildlistener",f(h));return this}}var C={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],
removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},u=["__proto__","_stopChange"],D=function(b,c){if(!c._stopPropogration&&b)for(var k=0,d=b.length;k!==d&&(b[k](c),!c._stopPropogration);k++);},f=function(b){if(b.listener){var c=b.local[b.listener],d=b.local[b.listener.replace("__kb","__kbparent")];E.call(c)?(D(c[b.key],b),D(c["*"],b)):D(c,b);E.call(d)?(D(d[b.key],b),D(d["*"],b)):D(d,b)}D(b.local.__kbref.__kbevents[b.type],
b);return b._preventDefault},d=Array.prototype.sort;Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof r?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(r.prototype,
{"typeof":g(H,!1,!0),sizeof:g(function(b){function c(b){for(var e=Object.keys(b,"all"),h=0,f=void 0,g=0,q=e.length;g<q;g++)f=b[e[g]],"object"===typeof f&&void 0!==f&&null!==f?-1===d.indexOf(f)&&(d.push(f),h+=c(f)):"string"===typeof f?h+=2*f.length:"number"===typeof f?h+=8:"boolean"===typeof f?h+=4:"function"===typeof f&&(h+=2*f.toString().length),h+=2*e[g].length;return h}var d=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:g(E,!1,!0),isArray:g(t,!1,!0),isMixed:g(n,!1,!0),isObservable:g(m,
!1,!0),stringify:g(function(b){var c=[];return JSON.stringify(b||this,function(b,d){if(t(d)||E(d)){if(-1!==c.indexOf(d))return;c.push(d)}return d})},!1,!0),getKeys:g(function(b,c){c="string"===typeof b?b:c?c:"object";return Object.keys("string"===typeof b||void 0===b?this:b,c)},!1,!0),getIndexes:g(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var c=[],d=0,l=b.length;d<l;d++)void 0!==b[d]&&(c[c.length]=d);return c},!1,!0),keyCount:O(function(){return this.getKeys("object").length},
!1,!0),indexCount:O(function(){return this.length},!1,!0),count:O(function(){return this.keyCount+this.indexCount},!1,!0),concat:g(Array.prototype.concat),every:g(Array.prototype.every),filter:g(Array.prototype.filter),find:g(Array.prototype.find),findIndex:g(Array.prototype.findIndex),forEach:g(Array.prototype.forEach),includes:g(Array.prototype.includes),indexOf:g(Array.prototype.indexOf),join:g(Array.prototype.join),lastIndexOf:g(Array.prototype.lastIndexOf),map:g(Array.prototype.map),reduce:g(Array.prototype.reduce),
reduceRight:g(Array.prototype.reduceRight),slice:g(Array.prototype.slice),some:g(Array.prototype.some),entries:g(Array.prototype.entries),toLocaleString:g(Array.prototype.toLocaleString),add:g(function(b,c){K.call(this,b,c);return this}),set:g(K),get:g(function(b){"number"===typeof b&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,
b)}),del:g(function(b,c){var d="number"===typeof b||!isNaN(parseInt(b,10));d&&(b=b.toString());var l=-1!==b.indexOf(".")?this.getLayer(b):this,e=b.split(".").pop();if(l&&void 0!==l[e])if(d&&l.length>parseInt(b,10)&&!c)l=l.__kbnonproxy,l.splice(e,1);else{var h=new B(l,b,"delete",l[e],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==f(h)&&(l=l.__kbnonproxy,Object.defineProperty(l,e,g(void 0,!0,!0,!1)),delete l[e],d&&l.length>parseInt(b,10)&&c&&--l.length,h.listener="__kbupdatelisteners",h.type=
"postdelete",h.oldValue=h.value,h.value=void 0,f(h))}return this}),exists:g(function(b){var c=-1!==b.indexOf(".")?this.__kbnonproxy.getLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:g(function(b,c){var d=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,b,g(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",
prop,d);return this}),addPointer:g(function(b,c){b instanceof r||(b=new r(b,b.__kbname));var d=new B(this,c,"create",b[c],void 0,[],"__kbcreatelisteners",this._stopChange),l=this.__kbnonproxy;d.root=b.__kbref.__kbproxy;if(!0!==f(d)){var e=Object.getOwnPropertyDescriptor(b,c);Object.defineProperty(l,c,Q(b,c,e));l.__kbpointers[c]=b;var e=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],h=[],A;if(l[c].__kbImmediateParent)for(var g=
0,q=e.length;g<q;g++){A=l[e[g].listener];for(var h=Object.keys(A),n=0,m=h.length;n<m;n++)if(c===h[g])for(var t=0,p=A[h[g]].length;t<p;t++)void 0===l[c].__kbImmediateParent[e[g].listener][c]&&(l[c].__kbImmediateParent[e[g].listener][c]=[]),l[c].__kbImmediateParent[e[g].listener][c].push(A[h[g]][t])}L(l,l[c]);d.listener="__kbupdatelisteners";d.type="postcreate";f(d)}return this}),move:g(function(b,c){this.__kbnonproxy.set(c,b[c]);n(b)?b.del(c):(b[c]=null,delete b[c]);return this}),copy:g(function(b,
c){var d=this.__kbnonproxy;n(b)?"default"===b.__kbname?d.merge(b[c],c):d.addPointer(b,c):d.set(c,b[c]);return this}),merge:g(function(b,c){function d(b,c){for(var e=n(b)?b.keys("object"):Object.keys(b),f,g=0,m=e.length;g<m;g++)f=b[e[g]],"object"===typeof f&&-1===l.indexOf(f)&&"undefined"!==c[e[g]]?d(f,c):c.set(e[g],"object"===typeof f?{}:f)}var l=[],e=this.__kbnonproxy;c&&void 0===e[c]&&e.set(c,{});d(b,c?e[c]:e);return this}),copyWithin:g(function(b,c,d){c=c||0;d=d||0;var l=new B(this,b,"copyWithin",
this[b],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==f(l)&&b<e.length){b=0>b?e.length-1:b;c=c<e.length?c:e.length-1;d=d<e.length?d:e.length-1;c=0>c?e.length-1:c;d=0>c?e.length-1:d;for(var h=c;h<=d;h++)e.set(b+(h-c),e[h]);l.type="postcopyWithin";l.listener="__kbmethodupdatelisteners";f(l)}return this}),fill:g(function(b,c,d){c=void 0!==c?Math.max(0,c):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;var l=new B(this,_start,"fill",this[_start],void 0,
arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==f(l)){for(var h=a.key;h<d;h++)e[h]=b;l.type="postfill";l.listener="__kbmethodupdatelisteners";f(l)}return this}),pop:g(function(){var b=new B(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;if(!0!==f(b)){var d=c[c.length-1];c.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";f(b);return d}return null}),push:g(function(b){var c=new B(this,this.length,"push",
b,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;!0!==f(c)&&(d.set(d.length,b),c.type="postpush",c.listener="__kbmethodupdatelisteners",f(c));return this.length}),reverse:g(function(){var b=new B(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;if(!0!==f(b)){for(var d=null,l=null,e=c.length,d=0;d<e/2;d+=1){var l=e-1-d,h=c[d];c[d]=c[l];c[l]=h}b.type="postreverse";b.listener="__kbmethodupdatelisteners";f(b)}return this}),shift:g(function(){var b=
new B(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;if(!0!==f(b)){for(var d=a.key,l=this.length-1;d<l;d++)c[d]=c[d+1];c.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";f(b)}return null}),sort:g(function(){var b=new B(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;!0!==f(b)&&(d.apply(c,arguments),b.type="postsort",b.listener="__kbmethodupdatelisteners",f(b));return this}),splice:g(function(b,c,
d){b="string"===typeof b?parseInt(b,10):b;var l=new B(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==f(l)){var h=[],g=Array.prototype.slice.call(arguments,2),n=g.length-2,q=0;if(0!==c&&void 0!==e[b-1+c])for(var m=0,t=c;m<t;m++){h.push(e[b+m]);for(var p=b+m,r=this.length-1;p<r;p++)e[p]=e[p+1];e.del(e.length-1,!0)}if(0!==n)for(m=0,t=n;m<t;m++){q=b+Math.min(1,m);p=e.length;for(r=q;p>r;p--)e.set(p,e[p-1]);e.set(q,g[m])}l.type="postsplice";l.listener="__kbmethodupdatelisteners";
f(l);return h}return[]}),unshift:g(function(){var b=new B(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;if(!0!==f(b)){for(var d=Array.prototype.slice.call(arguments),l=c.length-1+d.length,e=d.length;-1!==l;l--)l<e?c.set(l,d[l]):c.set(l,c[l-d.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";f(b)}return this.length}),getLayer:g(function(b){function c(b){var d=b[0];return void 0===this[d]&&0!==b.length-1?null:n(this[d])?0!==b.length-1?(b.shift(),
c.call(this[d],b)):this[d]:this}b=G(b);return c.call(this,b)}),setLayer:g(function(b){function c(b){var d=b[0];void 0===this[d]&&0!==b.length-1&&(this[d]=r({},this.__kbname,this,this.__kbscopeString+"."+d));return n(this[d])?0!==b.length-1?(b.shift(),c.call(this[d],b)):this[d]:this}b=G(b);return c.call(this,b)}),ignoreCreate:g(function(b){-1===u.indexOf(b)&&u.push(b);return this}),addActionListener:g(function(b,c){var d=this.__kbnonproxy;void 0!==d.__kbref.__kbevents[b]&&d.__kbref.__kbevents[b].push(c);
return this}),removeActionListener:g(function(b,c){var d=this.__kbnonproxy;if(void 0!==d.__kbref.__kbevents[b])for(var f=0,e=d.__kbref.__kbevents[b];f<e;f++)if(d.__kbref.__kbevents[b][f].toString()===c.toString()){d.__kbref.__kbevents[b].splice(f,1);break}return this}),subscribe:g(function(b,c){var d=this.__kbnonproxy;void 0===d.__kbsubscribers[b]&&(d.__kbsubscribers[b]=[]);d.__kbsubscribers[b].push(c);return this}),unsubscribe:g(function(b,c){var d=this.__kbnonproxy;if(void 0!==d.__kbsubscribers[b])for(var f=
0,e=d.__kbsubscribers[b].length;f<e;f++)if(d.__kbsubscribers[b][f].toString()===c.toString()){d.__kbsubscribers[b].splice(f,1);break}return this}),callSubscribers:g(function(b,d,k){var f=this.__kbnonproxy;if(void 0!==f.__kbsubscribers[b])for(var e=0,h=f.__kbsubscribers[b].length;e<h;e++)f.__kbsubscribers[b].call(this,b,d,k);return this}),stopChange:g(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(r.prototype,{addDataListener:g(z("addDataListener","__kblisteners")),
removeDataListener:g(I("removeDataListener","__kblisteners")),addDataUpdateListener:g(z("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:g(I("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:g(z("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:g(I("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:g(z("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:g(I("removeDataDeleteListener","__kbdeletelisteners")),
addDataMethodListener:g(z("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:g(I("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:g(z("addDataMethodUpdateListener","__kbmethodupdatelisteners")),removeDataMethodUpdateListener:g(I("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:g(F("addChildDataListener","__kbparentlisteners")),removeChildDataListener:g(y("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:g(F("addChildDataUpdateListener",
"__kbparentupdatelisteners")),removeChildDataUpdateListener:g(y("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:g(F("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:g(y("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:g(F("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:g(y("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return r}}(),
X=function(){return function(){function x(p){if("object"===typeof p)for(var r=0,B=p.length;r<B;r++)K_Components[p[r]]?v(p[r],K_Components[p[r]],document.getElementById("script_"+p[r])):x.load(p[r],"component/"+p[r]+"/"+location.search,v);else"string"===typeof p&&(K_Components[p[r]]?v(p,K_Components[p],document.getElementById("script_"+p)):x.load(p,"component/"+p+"/"+location.search,v))}var v=function(){},M=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});x.getUnknowns=function(p){var r=
p.match(M);return r.map(function(p){return p.replace(/[<\/>]/g,"")}).filter(function(p,g){return document.createElement(p)instanceof HTMLUnknownElement&&-1===r.indexOf(p,g+1)&&!K_Components[p]})};x.load=function(p,r,v){document.head.appendChild(function(g,p,r){var v=document.createElement("script");v.type="text/javascript";v.charset="utf-8";v.async=!0;v.src=p;v.id="script_"+g;v.onload=function(){r(g,K_Components[g],this)};return v}(p,r,v));return x};x.onLoad=function(p){if(void 0===p)return v;v="function"===
typeof p?p:v;return x};return x}}(),U=function(){function x(){function v(d,b){var c=d.length,k;for(k=0;k<c&&(d[k](b),void 0===b._stopPropogation);k++);}function x(d,b){var c=d.length,k;for(k=0;k<c&&(b.child=b.target,b.target=d[k].parent,d[k].func(b),void 0===b._stopPropogation);k++);}function p(d,b){for(var c=d.length;0<c;u++)if(d[u].toString()===b.toString())return!0;return!1}function r(d,b,c,k,f,e,h,g){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=
!0};this.value=c;this.oldValue=k;this.target=d;this.attr=b;this.arguments=f;this.action=e;this.child=void 0;this.type=h;this.stopChange=g}function B(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function g(d,b,c,k){var f=d.get,e=d.set,h;return function(d){h=f.call(this);c(this,b,d,h,void 0,
this._stopChange)&&e.call(this,d);this._stopChange||k(this,b,d,h);this._stopChange=void 0}}function O(d,b,c,k){var f;return function(e){f=d.value;c(this,b,e,f,arguments,this._stopChange)&&(d.value=e);this._stopChange||k(this,b,e,f,arguments);this._stopChange=void 0}}function P(d,b,c,k){var f=d.value,e;return function(){c(this,b,null,null,arguments,this._stopChange)&&(e=f.apply(this,arguments));this._stopChange||k(this,b,null,null,arguments,e);this._stopChange=void 0;return e}}function Q(d,b,c,f,l){var e=
l.style,h=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),g,n;return{get:function(){return n},set:function(d){g=n;c(l,b,d,g,void 0,this._stopChange)&&(n=d,e.setProperty(h,d));this._stopChange||f(l,b,d,g);this._stopChange=void 0},enumerable:!0,configurable:!0}}function L(d,b,c,f){if("function"!==typeof b)return n;var l=-1!==["value","checked"].indexOf(d),e=-1!==y.indexOf(d),h;if(this.toString()!==n.toString())if(c){var g=this.querySelectorAll("*");c=g.length;for(var w,q=0;q<c;q++){w=g[q].attrListeners();
if(l||"*"===d)void 0!==g[q].addInputBinding&&g[q].addInputBinding(),void 0!==g[q].addInputBoxBinding&&g[q].addInputBoxBinding();if(e)n.injectStyleProperty(g[q],d),h=f?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===d){h=f?"_parentStyleUpdateListeners":"_parentStyleListeners";c=y.length;for(var t=0;t<c;t++)n.injectStyleProperty(g[q],y[t]);void 0===w[h]["*"]&&(w[h]["*"]=[]);w[h]["*"].push({parent:this,func:b})}h=f?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===w[h][d]&&
(w[h][d]=[]);w[h][d].push({parent:this,func:b})}}else{w=this.attrListeners();if(e)h=f?"_styleUpdateListeners":"_styleListeners",n.injectStyleProperty(this,d);else{if(l||"*"===d)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===d){h=f?"_styleUpdateListeners":"_styleListeners";c=y.length;for(q=0;q<c;q++)n.injectStyleProperty(this,y[q]);void 0===w[h][d]&&(w[h][d]=[]);w[h][d].push(b)}h=f?"_attrUpdateListeners":"_attrListeners"}void 0===
w[h][d]&&(w[h][d]=[]);w[h][d].push(b)}else{if(l||"*"===d)for(t=document.querySelectorAll("input, textarea"),c=t.length,q=0;q<c;q++)void 0!==t[q].addInputBinding&&t[q].addInputBinding(),void 0!==t[q].addInputBoxBinding&&t[q].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+1;e.unshift(document.body);for(q=0;q<c;q++)n.injectStyleProperty(e[q],d);h=f?z:G}else{if("*"===d){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=e.length+
1;l=y.length;e.unshift(document.body);for(q=0;q<c;q++)for(t=0;t<l;t++)n.injectStyleProperty(e[q],y[t]);h=f?z:G;void 0===h[d]&&(h[d]=[]);h[d].push(b)}h=f?K:m}void 0===h[d]&&(h[d]=[]);h[d].push(b)}}function N(d,b,c,f){function g(d,c){var e=c[d],f=e.length;for(h=0;h<f;h++)e[h].toString()===b.toString()&&e.splice(h,1)}if("function"!==typeof b)return n;["value","checked"].indexOf(d);var e=-1!==y.indexOf(d),h;if(this.toString()!==n.toString())if(c){c=this.querySelectorAll("*");var A=c.length;e?(e=f?"_childStyleUpdateListeners":
"_childStyleListeners",g(d,this.attrListeners()[e]),e=f?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===d&&(e=f?"_childStyleUpdateListeners":"_childStyleListeners",g(d,this.attrListeners()[e])),e=f?"_childAttrUpdateListeners":"_childAttrListeners",g(d,this.attrListeners()[e]),e=f?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<A;h++){for(var w=c[h].attrListeners()[e][d],q=w.length,t=0;t<q;t++)w[t].isEqualNode(this)&&w.slice(t,1);if("*"===d)for(listenersStyle=f?"_parentStyleUpdateListeners":
"_parentStyleListeners",w=c[h].attrListeners()[e][d],q=w.length,t=0;t<q;t++)w[t].isEqualNode(this)&&w.slice(t,1)}}else e?e=f?"_styleUpdateListeners":"_styleListeners":("*"===d&&(e=f?"_styleUpdateListeners":"_styleListeners",g(d,this.attrListeners()[e])),e=f?"_attrUpdateListeners":"_attrListeners"),g(d,this.attrListeners()[e]);else e?e=f?z:G:("*"===d&&(e=f?z:G,g(d,e)),e=f?K:m),g(d,e)}function S(d,b){n.addAttrListener.call(this,d,b,!0);return this}function J(d,b){n.addAttrUpdateListener.call(this,d,
b,!0);return this}function R(d,b){n.removeAttrListener.call(this,d,b,!0);return this}function H(d,b){n.removeAttrUpdateListener.call(this,d,b,!0);return this}function E(d,b,c){var f=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(p(f._attrListeners[b],c))return!0;break;case "attrupdate":if(p(f._attrUpdateListeners[b],c))return!0}return!1}function t(){this._stopChange=!0;return this}function n(){function d(b,d){var c,e=d.length;for(c=0;c<e;c++)-1===
b.indexOf(d[c])&&b.push(d[c]);return b}function b(b,d){for(var c=Object.keys(b),e,f,k=0,h=c.length;k<h;k++)if(e=c[k],void 0===d[e])d[e]=b[e].slice();else for(var g=0,l=b[e].length;g<l;g++)f=b[e][g],d[e].push(f)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var e=c.target.attrListeners(),f,k=["value","checked"],h=e._attrListeners,g=e._attrUpdateListeners,l=e._parentAttrListeners;f=e._parentAttrUpdateListeners;var t=!1;if(void 0!==m["*"]||void 0!==K["*"])t=!0;if(!0!==t&&void 0!==h["*"]||
void 0!==g["*"]||void 0!==l["*"]||void 0!==f["*"])t=!0;if(!0!==t)for(var p=0;p<k.length;p++)if(void 0!==m[k[p]]||void 0!==K[k[p]]||void 0!==h[k[p]]||void 0!==g[k[p]]||void 0!==l[k[p]]||void 0!==f[k[p]]){t=!0;break}f=t;k=Object.keys(G);h=Object.keys(z);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);g=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);l=[];if(0!==k.length||0!==h.length)l=d(l,k),l=d(l,h);if(0!==l.length&&0!==g.length||0!==e.length)l=
d(l,g),l=d(l,e);-1!==l.indexOf("*")&&(l=y);var e=l,k=e.length,r,u,h=[],v,g="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,l=c.target;void 0!==g&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(f){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(h=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||h.unshift(c.arguments[0])):h=
Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));v=h.length;for(var x=0;x<v;x++)void 0!==h[x].addInputBinding&&h[x].addInputBinding(),void 0!==h[x].addInputBoxBinding&&h[x].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(h=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),h.unshift(c.arguments[0])):h=Array.prototype.slice.call(c.target.querySelectorAll("*"));f=c.target.__kb._parentAttrListeners;
t=c.target.__kb._parentAttrUpdateListeners;p=c.target.__kb._parentStyleListeners;r=c.target.__kb._parentStyleUpdateListeners;v=h.length;for(x=0;x<v;x++){if(0!==k)for(u=0;u<k;u++)n.injectStyleProperty(h[x],e[u]);u=h[x].attrListeners();b(f,u._parentAttrListeners);b(t,u._parentAttrUpdateListeners);b(p,u._parentStyleListeners);b(r,u._parentStyleUpdateListeners)}void 0!==g&&(c.attr=g,c.target=l,c.arguments=[])}}function k(b){var c=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:
"";e(b.target,b.arguments[0],d,void 0!==c?c.value:"",[d])||b.preventDefault()}function g(b){var c=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:"";h(b.target,b.arguments[0],d,void 0!==c?c.value:"",[d])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");
var e=D,h=f;n.addAttrUpdateListener("appendChild",c);n.addAttrUpdateListener("removeChild",c);n.addAttrUpdateListener("innerHTML",c);n.addAttrUpdateListener("outerHTML",c);n.addAttrUpdateListener("innerText",c);n.addAttrUpdateListener("outerText",c);n.addAttrUpdateListener("textContent",c);n.addAttrListener("setAttribute",k);n.addAttrListener("removeAttribute",k);n.addAttrUpdateListener("setAttribute",g);n.addAttrUpdateListener("removeAttribute",g);return n}var m={},K={},G={},z={},I={},F="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
y=Object.getOwnPropertyNames(document.documentElement.style),C=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}).concat(["addEventListener","removeEventListener"]),u,D=function(d,b,c,f,g,e){c=new r(d,b,c,f,g,void 0,"set",e);void 0!==d.__kb&&(f=d.__kb._attrListeners,g=d.__kb._styleListeners,e=d.__kb._parentAttrListeners,d=d.__kb._parentStyleListeners,void 0!==f[b]&&v(f[b],c),void 0===c._stopPropogation&&void 0!==g[b]&&v(g[b],c),void 0===c._stopPropogation&&void 0!==
f["*"]&&(v(f["*"],c),void 0===c._stopPropogation&&v(g["*"],c)),void 0===c._stopPropogation&&void 0!==e[b]&&x(e[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&x(d[b],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(x(e["*"],c),void 0===c._stopPropogation&&x(d["*"],c)));void 0===c._stopPropogation&&void 0!==m[b]&&v(m[b],c);void 0===c._stopPropogation&&void 0!==G[b]&&v(G[b],c);void 0===c._stopPropogation&&void 0!==m["*"]&&(v(m["*"],c),void 0===c._stopPropogation&&v(G["*"],c));return void 0!==c._preventDefault?
!1:!0},f=function(d,b,c,f,g,e){c=new r(d,b,c,f,g,e,"update");void 0!==d.__kb&&(f=d.__kb._attrUpdateListeners,g=d.__kb._styleUpdateListeners,e=d.__kb._parentAttrUpdateListeners,d=d.__kb._parentStyleUpdateListeners,void 0!==f[b]&&v(f[b],c),void 0===c._stopPropogation&&void 0!==g[b]&&v(g[b],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(v(f["*"],c),void 0===c._stopPropogation&&v(g["*"],c)),void 0===c._stopPropogation&&void 0!==e[b]&&x(e[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&x(d[b],c),
void 0===c._stopPropogation&&void 0!==e["*"]&&(x(e["*"],c),void 0===c._stopPropogation&&x(d["*"],c)));void 0===c._stopPropogation&&void 0!==K[b]&&v(K[b],c);void 0===c._stopPropogation&&void 0!==z[b]&&v(z[b],c);void 0===c._stopPropogation&&void 0!==K["*"]&&(v(K["*"],c),void 0===c._stopPropogation&&v(z["*"],c));return void 0!==c._preventDefault?!1:!0};n.injectPrototypeProperty=function(d,b,c,k,l){var e=d.prototype,h=Object.getOwnPropertyDescriptor(e,b);c=c||d.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var m=I[c];k=k||D;l=l||f;void 0===e.attrListeners&&(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new B);return this.__kb}.bind(e),e.addAttrListener=n.addAttrListener,e.addAttrUpdateListener=n.addAttrUpdateListener,e.addChildAttrListener=S,e.addChildAttrUpdateListener=J,e.hasListener=E,e.removeAttrListener=n.removeAttrListener,e.removeAttrUpdateListener=n.removeAttrUpdateListener,e.removeChildAttrListener=R,e.removeChildAttrUpdateListener=H,e.stopChange=t);void 0===m&&(I[c]={obj:d,
proto:e,descriptors:{},set:void 0,update:void 0},m=I[c],m.set=k,m.update=l);void 0===m.descriptors[b]&&(m.descriptors[b]=h);h.configurable&&(void 0!==h.set?Object.defineProperty(e,b,{get:h.get,set:g(h,b,k,l),enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(e,b,{value:P(h,b,k,l),writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&Object.defineProperty(e,b,{get:function(){return h.value},set:O(h,b,k,l),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=
function(d,b,c,k){var g=d.style,e=Object.getOwnPropertyDescriptor(g,b),h=d.attrListeners().injectedStyle;c=c||D;k=k||f;void 0===h&&(d.attrListeners().injectedStyle={obj:d,proto:g,descriptors:{},set:void 0,update:void 0},d.attrListeners().injectedStyle.set=c,d.attrListeners().injectedStyle.update=k,h=d.attrListeners().injectedStyle);void 0===h.descriptors[b]&&(h.descriptors[b]=e);e.configurable&&Object.defineProperty(g,b,Q(e,b,c,k,d));return n};n.injectPrototypes=function(d,b,c,g){var l=d.prototype;
b=b||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=I[b],h=Object.getOwnPropertyNames(l);c=c||D;g=g||f;var m;void 0===l.attrListeners&&(l.attrListeners=function(){void 0===this.__kb&&(this.__kb=new B);return this.__kb},l.addAttrListener=n.addAttrListener,l.addAttrUpdateListener=n.addAttrUpdateListener,l.addChildAttrListener=S,l.addChildAttrUpdateListener=J,l.removeAttrListener=n.removeAttrListener,l.removeAttrUpdateListener=n.removeAttrUpdateListener,l.removeChildAttrListener=R,
l.removeChildAttrUpdateListener=H,l.hasListener=E,l.stopChange=t);void 0===e&&(I[b]={obj:d,proto:l,descriptors:{},set:void 0,update:void 0},e=I[b],e.set=c,e.update=g);m=I[b].descriptors;for(g=0;g<h.length;g+=1)void 0===m[h[g]]&&n.injectPrototypeProperty(d,h[g],b,c,f);if(-1!==h.indexOf("value")){var p=function(b){var c,d,f;if("checkbox"===this.type||"radio"===this.type)c=!0;d=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=c?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;c&&(e.set(this,"checked",this.checked,d)?e.update(this,"checked",this.checked,d):m.checked.set.call(this,d));this.value=f;e.set(this,"value",this.value,d)?e.update(this,"value",this.value,d):m.value.set.call(this,d)}.bind(this),0)};l.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",p)};l.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",p)};l.removeInputBoxBinding=
function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",p)};l.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",p)}}return n};n.addAttrListener=function(d,b,c){if("html"===d){d=0;for(var f=F.length;d<f;d++)L.call(this,F[d],b,c,!1)}else if("events"===d)for(d=0,f=C.length;d<f;d++)L.call(this,C[d],b,c,!1);else L.call(this,d,b,c,!1);return this};n.addAttrUpdateListener=function(d,b,c){if("html"===d){d=0;for(var f=F.length;d<
f;d++)L.call(this,F[d],b,c,!0)}else if("events"===d)for(d=0,f=C.length;d<f;d++)L.call(this,C[d],b,c,!0);else L.call(this,d,b,c,!0);return this};n.removeAttrListener=function(d,b,c){if("html"===d){d=0;for(var f=F.length;d<f;d++)N.call(this,F[d],b,c,!1)}else if("events"===d)for(d=0,f=C.length;d<f;d++)N.call(this,C[d],b,c,!1);else N.call(this,d,b,c,!1);return this};n.removeAttrUpdateListener=function(d,b,c){if("html"===d){d=0;for(var f=F.length;d<f;d++)N.call(this,F[d],b,c,!0)}else if("events"===d)for(d=
0,f=C.length;d<f;d++)N.call(this,C[d],b,c,!0);else N.call(this,d,b,c,!0);return this};n.hasListener=function(d,b,c){"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(p(m[b],c))return!0;break;case "attrupdate":if(p(K[b],c))return!0}return!1};n.injectedPrototypes=function(){return I};return n}"function"===typeof define&&define.amd&&define("KB",x);return x}(),Y=function(){return function(){function x(p){0===p.length&&(p=v);document.body.innerHTML="<"+p+"></"+p+">";M(p);
return x}var v="",M=function(){};x.base=function(p){if(void 0===p)return v;v="string"===typeof p?p:v;return x};x.onChange=function(p){if(void 0===p)return M;M="function"===typeof p?p:M;return x};x.watch=function(p){window.onhashchange=p?function(){x(window.location.hash.replace("#",""))}:null;return x};return x}}(),U=function(x){return function(){function v(f,d){this.name=f.tagName.toLowerCase();this.template=z[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=f;this.fragment=
document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;d||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);d||(this.maps=this.map(this.wrapper));d||(this.wrapper.kb_maps=this.maps)}function M(){return new RegExp("(\\"+y.split("").join("\\")+")(.*?)(\\"+C.split("").join("\\")+")","g")}function p(f,d,b,c,k,l,e,h){function p(b){var c="for"===d?n(b):[],e=this;this.key="for"!==d?E(b):c[0];this.filterNames=
t(b);this.component="for"===d?c[1]:void 0;this.id=0;this.isEvent=w;this.isInput=q;this.__proto__.bindText=this.__proto__.bindText.map(function(c){return c===b?this:c});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:m("",!0)});this.updateData=function(b){if(this.isConnected&&this._data){if("object"!==typeof b||void 0===b.value)b={value:b};"function"===typeof this._data.stopChange&&this._data.stopChange().set(e.key,
b.value)}}.bind(this);this.updateDom=function(b){if(this.isSynced()){this.element.stopChange();if("object"!==typeof b||void 0===b.value)b={value:b};this.value=b.value}}.bind(this);this.updateLoop=function(b){this.kb_loop&&this.loop(b,this.kb_loop)}.bind(this)}var w="attribute"===d&&-1!==F.indexOf(e.name)||"component"===d&&e.name&&-1!==F.indexOf(e.name),q="input"===h.tagName.toLowerCase();w&&h.stopChange().removeAttribute(e.name);Object.defineProperties(p.prototype,{valget:m(r),valset:m(B),refresh:m(P),
connect:m(Q),deleteMap:m(N),loop:m(L),unsync:m(J),unconnect:m(S),isSynced:m(g),type:m(d),text:m(b,!0),bindText:m(c,!0),bindNames:m("for"===d?[n(c[0])[0]]:H(c),!0),bindMaps:m([],!0),bindListener:m(w?k.toLowerCase():k),bindProperty:m(w?e.name.toLowerCase():l),bindTarget:m(e,!0),element:m(h,!0),_data:m({},!0),filters:m({},!0),maps:m(f,!0)});return p}function r(){return this._value}function B(f){this._value=this.isSynced()?f:this._value;this.refresh()}function g(){return this.element.parentElement?!!this.element.parentElement:
this.unsync()}function O(f,d){function b(b,d){return d.reduce(function(d,e){return d+("string"===typeof e?e:0===e.filterNames.length?e._value:e.filterNames.reduce(function(d,e){if(void 0!==b.filters){if(void 0!==b.filters[e])return b.filters[e](d);console.warn("there is no filter by the name %o in the data model filters %o",e,Object.keys(b.filters));return d}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return d},e._value))},"")}return 1===
d.length?"string"===typeof d[0]._value?b(f,d):d[0]._value:b(f,d)}function P(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=O(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var f=0,d=this._value.length;f<d;f++)this.element.stopChange().appendChild(this._value[f])}else this.bindTarget[this.bindProperty]=
O(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=O(this,this.bindText));return this}function Q(f){this._data=f;this.filters=void 0!==f.filters?f.filters:this.filters;f=0;for(var d=this.bindNames.length;f<d;f++){var b=this.bindNames[f],c=this.bindMaps[f];c._data.addDataUpdateListener&&(c._data.exists(b)||(console.warn("No property by the name %o exists on this data set %o",b,c._data),c._data.add(b,c._value)),c.value=c._data.get(b),"component"!==c.type&&"for"!==c.type?
(c.isConnected=!0,c._data.addDataUpdateListener(b,c.updateDom)):"for"===c.type&&c._value.addDataUpdateListener&&(c.element.stopChange().innerHTML="",c._value.addDataMethodUpdateListener(c.updateLoop).addDataDeleteListener(c.updateLoop)))}1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function L(f,d){"function"===typeof f&&(this.kb_loop=f);for(var b=this._value,
c=0,g=this.filterNames.length;c<g;c++)b=this.filters[this.filterNames[c]](b);if("function"===typeof f)for(c=0,g=this._value.length;c<g;c++)b=document.createElement(this.component),b.k_post=this._value[c],b.k_post.k_id=c,b.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(b),f(b);else if("postset"===f.type&&"undefined"===typeof f.oldValue)b=document.createElement(this.component),c=this.element.children.length,b.k_post=this._value[f.key],b.kb_wrapper=this.element.kb_wrapper,parseInt(f.key)>=
c?this.element.stopChange().appendChild(b):this.element.stopChange().insertBefore(b,this.element.children[f.key]),"function"===typeof d&&d(b);else if("delete"===f.event)this.element.stopChange().removeChild(this.element.children[f.key]);else if("postpush"!==f.type)for(this.element.stopChange().innerHTML="",c=0,g=this._value.length;c<g;c++)b=document.createElement(this.component),b.k_post=this._value[c],b.k_post.k_id=c,b.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(b),d&&
d(b)}function N(){this.maps[this.key].splice(this.id,1);return this}function S(f){f=0;for(var d=this.bindNames.length;f<d;f++)this._data.removeDataUpdateListener(this.bindNames[f],this.updateDom);return this}function J(){for(var f=0,d=this.bindNames.length;f<d;f++)this._data.removeDataUpdateListener&&("for"===this.type?this._value.removeDataMethodUpdateListener("*",this.updateLoop).removeDataDeleteListener(this.updateLoop):"component"!==this.type&&this._data.removeDataUpdateListener(this.bindNames[f],
this.updateDom));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps[this.key].splice(this.id,1);f=0;for(d=this.maps[this.key].length;f<d;f++)this.maps[this.key][f].id=f;this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=
null;this.__proto__.bindMaps=null;return this}function R(f){return f.split(new RegExp("("+y.split("").join("\\")+")(.*?)("+C.split("").join("\\")+")","g")).map(function(d,b,c){return c[b-1]===y?y+d+C:d}).filter(function(d,b,c){return 0!==d.length&&d!==y&&d!==C&&0!==d.length})}function H(f){return f.filter(function(d){return-1!==d.indexOf(y)&&-1!==d.indexOf(C)}).map(function(d){return E(d)})}function E(f){return f.replace(new RegExp("["+y+C+"]","g"),"").replace(new RegExp("\\"+u.split("").join("\\")+
"(.*)"),"").replace(/\s/g,"")}function t(f){return-1!==f.indexOf(u)?f.replace(new RegExp("["+C+"]","g"),"").replace(new RegExp("(.*?)(\\"+u.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function n(f){return-1!==f.indexOf("for")?f.replace(new RegExp("["+y+C+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(d){return 0!==d.length}):[]}function m(f,d,b){return{value:f,writable:!!d,enumerable:!1,configurable:!!b}}function K(f,d){for(var b=D[f],c=
0,g=b.length;c<g&&(b[c](d),d._stopPropogation);c++);return d._preventDefault}function G(f){var d=f.match(I).map(function(b){return b.replace(/[<\/>]/g,"")});d.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===d.indexOf(b,c+1)&&void 0===z[b]});0!==d.length&&K("unknown",new Event("unknown",d));return d}var z={},I=/(<\/.*?>)/g;x().call();var F=Object.keys(HTMLElement.prototype).filter(function(f){return 0===f.indexOf("on")}),y="{{",C="}}",u="|",D={unknown:[]};v.prototype.map=
function(f){function d(c){c=Array.prototype.slice.call(c);for(var g=0,l=c.length;g<l;g++)if(void 0===c[g].kb_maps&&8!==c[g].nodeType){c[g].kb_mapper=f;if(3===c[g].nodeType){var e=c[g],h=b,m=e.textContent,n=e.parentElement instanceof HTMLUnknownElement;if(m.match(M()))for(var t=n?"component":m.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+C.split("").join("\\")+")","g"))?"for":"text",e=p(h,t,m,R(m),n?"":"textContent","textContent",e,e.parentElement),m=0,n=e.prototype.bindText.length;m<
n;m++){var t=m,r=e.prototype.bindText[m];0===r.indexOf(y)&&(r=new e(r),e.prototype.bindText[t]=r,void 0===h[r.key]&&(h[r.key]=[]),r.id=h[r.key].length,h[r.key].push(r))}}else for(h=c[g],e=b,m=Array.prototype.slice.call(h.attributes),n=h instanceof HTMLUnknownElement,t=0,r=m.length;t<r;t++){var u=m[t];if(u.value.match(M()))for(var u=p(e,n?"component":"attribute",u.value,R(u.value),n?"":u.name,"value",u,h),v=0,x=u.prototype.bindText.length;v<x;v++){var K=v,z=u.prototype.bindText[v];0===z.indexOf(y)&&
(z=new u(z),u.prototype.bindText[K]=z,void 0===e[z.key]&&(e[z.key]=[]),e[z.key].push(z),z.id=e[z.key].length-1)}}c[g].childNodes&&0!==c[g].childNodes.length&&d(c[g].childNodes)}}var b={};d(f.childNodes);return b};Object.defineProperties(v,{start:m(function(f){if(void 0===f)return y;y="string"===typeof f?f:y;return this}),end:m(function(f){if(void 0===f)return C;C="string"===typeof f?f:C;return this}),pipe:m(function(f){if(void 0===f)return u;u="string"===typeof f?f:u;return this}),getUnknown:m(G),
isRegistered:m(function(f){return void 0!==z[f]}),register:m(function(f,d){void 0===z[f]?(z[f]=d,G(d)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",f);return this}),addEventListener:m(function(f,d){void 0!==D[f]?D[f].push(d):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",f);return this}),removeEventListener:m(function(f,d){if(void 0!==D[f])for(var b=0,c=D[f].length;b<c;b++)D[f][b].toString()===d.toString()&&
D[f].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",f);return this})});return v}}(U),V=function(x,v,M,p){return function(){function r(t,n,m,p){function v(f,d,b,c,k){for(var l=P({},f),e=0,h=Object.keys(d.prototype),m=h.length;e<m;e++)l.__proto__[h[e]]=d.prototype[h[e]];e=0;h=Object.keys(c);for(m=h.length;e<m;e++)-1!==R.indexOf(h[e])?Object.defineProperty(l,h[e],g(c[h[e]],"filters"!==h[e])):l.set(h[e],c[h[e]]);if(c.pointers)for(e=0,
h=Object.keys(c.pointers),m=h.length;e<m;e++)l.addPointer(c.pointers[h[e]],h[e]);d.apply(l,b);e=0;h=Object.keys(k);for(m=h.length;e<m;e++)-1!==R.indexOf(h[e])?Object.defineProperty(l,h[e],g(k[h[e]],"filters"!==h[e])):l.set(h[e],k[h[e]]);if(k.pointers)for(e=0,h=Object.keys(k.pointers),m=h.length;e<m;e++)l.addPointer(k.pointers[h[e]],h[e]);e=0;h=Object.keys(l.filters);for(m=h.length;e<m;e++)l.filters[h[e]]=l.filters[h[e]].bind(l);if(l.sessionStorage){if(d=sessionStorage.getItem(l.id||f))for(d=JSON.parse(d),
e=0,h=Object.keys(d),m=h.length;e<m;e++)l.set(h[e],d[h[e]]);else sessionStorage.setItem(l.id||f,l.stringify());l.addChildDataUpdateListener("*",function(){sessionStorage.setItem(l.id||f,l.stringify())})}if(l.localStorage){if(d=localStorage.getItem(l.id||f))for(d=JSON.parse(d),e=0,h=Object.keys(d),m=h.length;e<m;e++)l.set(h[e],d[h[e]]);else localStorage.setItem(l.id||f,l.stringify());l.addChildDataUpdateListener("*",function(){localStorage.setItem(l.id||f,l.stringify())})}l.store&&N.set(l.id||f,l);
return l}function x(f,d,b){f.kb_viewmodel=b;d.wrapper.innerHTML=y.template.replace(new RegExp("("+Q.start()+"local"+Q.end()+")","g"),b.local);var c=d.maps=d.map(d.wrapper);d.wrapper.kb_maps=c;Object.keys(c).forEach(function(d){c[d].forEach(function(c){switch(c.type){case "for":c.connect(b);Q.isRegistered(c.component)?c.loop(function(b){r(b)}):(r.loadWaitList(c.component,function(b,d){c.loop(function(b){r(b)})}),r.loadWaitList(c.component).loading||(r.loadWaitList(c.component).loading=!0,O(c.component)));
break;case "component":c.connect(b).unsync();break;default:c.connect(b)}})});d.wrapper.kb_viewmodel.onFinish.call(d.wrapper.kb_viewmodel,d.wrapper)}function E(f,d){y=new Q(d,!0);Object.defineProperty(y.wrapper,"__kbcomponenttree",g(d.kb_mapper?d.kb_mapper.__kbcomponenttree.slice():[]));d.parentElement.replaceChild(y.fragment,d);n.unshift(y.wrapper);x(y.wrapper,y,v(f,S[f],n,u,D));if(-1===y.wrapper.__kbcomponenttree.indexOf(f)||y.wrapper.kb_viewmodel.multiple){y.wrapper.__kbcomponenttree.push(f);y.wrapper.classList.add(y.wrapper.kb_viewmodel.local);
for(var b=y.wrapper.querySelectorAll("*"),c=0,k=b.length;c<k;c++)b[c]instanceof HTMLUnknownElement&&r(b[c])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",f),console.error("Recursive Component %o on %o",y.wrapper,y.wrapper.parentElement),y.wrapper.parentElement.removeChild(y.wrapper)}
var F=t.tagName.toLowerCase(),y,C=Object.keys(HTMLElement.prototype).filter(function(f){return 0===f.indexOf("on")}),u={},D={};void 0===n&&(n=[]);m&&B(m,u);Object.defineProperty(u,"local",g(u.local||F+"-"+Date.now(),!0,!1,!0));Object.defineProperty(u,"filters",g(u.filters||{},!1,!1,!0));"function"!==typeof u.onFinish&&(u.onFinish=function(){});Object.defineProperty(u,"onFinish",g(u.onFinish,!0,!1,!0));"string"===typeof u.sessionStorage&&(u.sessionStorage="true"===u.sessionStorage);Object.defineProperty(u,
"sessionStorage",g(void 0!==u.sessionStorage?u.sessionStorage:!1,!0,!1,!0));"string"===typeof u.localStorage&&(u.localStorage="true"===u.localStorage);Object.defineProperty(u,"localStorage",g(void 0!==u.localStorage?u.localStorage:!1,!0,!1,!0));"string"===typeof u.store&&(u.store="true"===u.store);Object.defineProperty(u,"store",g(void 0!==u.store?u.store:!1,!0,!1,!0));"string"===typeof u.multiple&&(u.multiple="true"===u.multiple);Object.defineProperty(u,"multiple",g(void 0!==u.multiple?u.multiple:
!1,!0,!1,!0));p&&B(p,D);D.innerHTML=Array.prototype.slice.call(t.childNodes);m=0;for(p=t.attributes.length;m<p;m++)D[t.attributes[m].name]=t.attributes[m].value;m=0;for(p=C.length;m<p;m++)t[C[m]]&&(D[C[m]]=t[C[m]]);t.k_post&&B(t.k_post,D);Q.isRegistered(F)?E(F,t):(r.loadWaitList(F,function(f,d){E(F,t)}),r.loadWaitList(F).loading||(r.loadWaitList(F).loading=!0,O(F)))}function B(g,n){var m=Object.keys(g);n.pointers||(n.pointers={});for(var p=0,r=m.length;p<r;p++)if(P.prototype.isObservable(g,m[p]))n.pointers[m[p]]=
g;else if(P.prototype.isMixed(g[m[p]]))n.pointers[m[p]]=g[m[p]].__kbImmediateParent;else if(P.prototype.isObject(g[m[p]]))for(var v=0,x=Object.keys(g[m[p]]);v<r;v++)n[m[p]][x[v]]=g[m[p]][x[v]];else if(P.prototype.isArray(g[m[p]]))for(v=0;v<r;v++)n[m[p]][v]=g[m[p]][v];else n[m[p]]=g[m[p]]}function g(g,n,m,p){return{value:g,writable:!!n,enumerable:!!p,configurable:!!m}}window.K_Components||(window.K_Components={});var O=v().onLoad(function(g,n){var m="<style>"+unescape(n.prototype.k_css)+"</style>"+
unescape(n.prototype.k_html);r.register(g,n,m,n.prototype.cms);r.loadWaitList(g).forEach(function(m){m(g,n)});r.loadWaitList(g,"clear")}),P=x(),Q=M(),L=p().base(void 0!==config&&void 0!==config.base?config.base:"default").watch(!0).onChange(function(g){r(document.querySelector(g))}),N=P({},"Model"),S={},J=function(){return window.location.search.replace("?","").split("&").filter(function(g){return 0!==g.length}).reduce(function(g,n){g[n.split("=")[0]]=n.split("=")[1];return g},{})}(),R="id filters class sessionStorage localStorage store component multiple".split(" "),
H={},E;r.register=function(g,n,m,p){Q.register(g,m);S[g]=n;return r};r.loadWaitList=function(g,n){if("undefined"===typeof n&&g)return H[g];if(g){if(void 0===H[g]||"clear"===n){var m=void 0===H[g]?!1:!!H[g].loading;H[g]=[];H[g].loading=m}"function"===typeof n&&H[g].push(n)}return r};r.localRouting=function(g){g?(E=Node.prototype.appendChild,Node.prototype.appendChild=function(g){if("script"===g.nodeName.toLowerCase()){g.src=g.src.substring(0,-1!==g.src.indexOf("?")?g.src.indexOf("?"):g.src.length);
var m=g.src.match(/(.*?component\/)/);m&&(J.env||(J.env="prod"),"dev"===J.env&&(J.env="qa"),m=g.src.replace(m[0],"").replace(/[\/\s]/g,""),g.src="/components/"+m+"/build/"+J.env+"/"+m+(J.debug&&"prod"!==J.env?"":".min")+".js",arguments[0]=g)}return E.apply(this,arguments)}):E&&(Node.prototype.appendChild=E,E=null);return r};r.hashRouting=function(g){g&&L(window.location.hash.replace("#",""))};return r}}(W,X,U,Y);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?
define([],function(){return V}):"undefined"!==typeof module&&(module.exports=V);return V}();
