var Konnekt=function(){var U=function(){return function(x,t,M,r){function v(b,c,d,f){b=void 0===b?{}:b;var g={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var h=new Proxy(g,{set:P,deleteProperty:K}),m=Object.keys(b,"all");Object.defineProperties(g,{__kbname:e("string"===typeof c?c:"default",!0,!0),__kbref:e(d?d.__kbref||d:h,!0,!0),__kbscopeString:e(f||"",!0,!0),__kbImmediateParent:e(d||
null,!0,!0),__kbsubscribers:e({}),__kblisteners:e({}),__kbupdatelisteners:e({}),__kbparentlisteners:e({}),__kbparentupdatelisteners:e({}),__kbcreatelisteners:e([]),__kbdeletelisteners:e([]),__kbparentcreatelisteners:e([]),__kbparentdeletelisteners:e([]),__kbpointers:e({}),__kbevents:e(E),length:e(0,!0),__kbnonproxy:e(g,!1,!0),_stopChange:e(!1,!0)});c=0;for(d=m.length;c<d;c++)h[m[c]]=b[m[c]];g.__proto__=v.prototype;g.__kbevents.addlistener=[];g.__kbevents.removelistener=[];g.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return h}function A(b,c,d,f,g,h,m,l){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=h;this.type=this.event=d;this.listener=m;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=f;this.oldValue=g;this.stopChange=l}function e(b,c,d){return{value:b,writable:!!c,enumerable:!1,configurable:!!d}}function N(b,c,d){return{get:function(){return b.call(this)},set:function(d){c&&(b=d)},enumerable:!1,configurable:!!d}}function F(b,c){var d=c,f=c;return{get:function(){return d},
set:function(c){var h=new A(this,b,"set",c,d,arguments,"__kblisteners",this._stopChange);!0!==k(h)&&(f=d,d=c,h.stopChange||(h.listener="__kbupdatelisteners",h.type="postset",k(h)),this._stopChange||this.callSubscribers(b,d,f));this._stopChange=!1},configurable:!0,enumerable:!0}}function O(b,c,d){return{get:function(){return b[c]},set:function(d){(this._stopChange?b.stopChange():b)[c]=d;this._stopChange=!1},enumerable:d.enumerable,configurable:d.configurable}}function L(b,c){for(var d=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],f=[],g,h=0,m=d.length;h<m;h++)if(g=b[d[h].listener],G.call(g))for(var f=Object.keys(g),l=0,p=f.length;l<p;l++)for(var q=0,k=g[f[l]].length;q<k;q++)c[d[h].method](f[l],g[f[l]][q]);else for(l=0,p=g.length;l<p;l++)c[d[h].method](g[l])}function H(b,c){var d=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],f=[],g;if(b[c].__kbImmediateParent)for(var h=0,m=d.length;h<m;h++){g=b[d[h].listener];for(var f=Object.keys(g),l=0,p=f.length;l<p;l++)if(c===f[h])for(var q=0,k=g[f[h]].length;q<k;q++)void 0===b[c].__kbImmediateParent[d[h].listener][c]&&(b[c].__kbImmediateParent[d[h].listener][c]=[]),b[c].__kbImmediateParent[d[h].listener][c].push(g[f[h]][q])}L(b,b[c])}function Q(b,c,d,f){d=new v(d,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);L(b,d);if(f){f=new A(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange);var g=k(f);!0!==g&&(Object.defineProperty(b,c,F(c,d)),f.listener="__kbupdatelisteners",f.type="postcreate",k(f))}else f=new A(b,c,"set",d,void 0,[],"__kblisteners",b._stopChange),g=k(f),!0!==g&&(Object.defineProperty(b,c,F(c,d)),f.listener="__kbupdatelisteners",f.type="postset",k(f));return!0!==g}function R(b,c,d,f){if(f){f=new A(b,c,"create",d,void 0,[],"__kbcreatelisteners",
b._stopChange);var g=k(f);if(!0!==g){var h=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,O(d.__kbImmediateParent,c,h));b.__kbpointers.push(c);H(b,c);f.listener="__kbupdatelisteners";f.type="postcreate";k(f)}return!0!==g}h=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,O(d.__kbImmediateParent,c,h));b.__kbpointers.push(c);H(b,c);return!0}function P(b,c,d){if(I.call(b,c)||"length"===c){if("length"===c)if(d>b.length&&void 0!==b[d-
1])b.length=d;else{if(d<b.length){c=d;for(var f=b.length;c<f;c++)b[c]&&delete b[c];b.length=d}}else if("object"!==typeof d||d instanceof Node){if(d instanceof v)return R(b,c,d);b[c]=d}else return Q(b,c,d);return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=d,!0;if(-1===D.indexOf(c)){if("object"!==typeof d||d instanceof Node){if(d instanceof v)return R(b,c,d,!0);var f=new A(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange),
g=k(f);!0!==g&&(Object.defineProperty(b,c,F(c,d)),f.listener="__kbupdatelisteners",f.type="postcreate",k(f));return!0!==g}return Q(b,c,d,!0)}}function K(b,c){var d=new A(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),f=k(d);!0!==f&&(b[c]&&"object"===typeof b[c]&&(b[c]=null),isNaN(parseInt(c,10))?delete b[c]:void 0!==b[c]&&(c=parseInt(c,10),b.splice(c,1),--b.length),d.listener="__kbupdatelisteners",d.type="postdelete",k(d));return!0!==f}function G(b){return this==Object.prototype&&
void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function w(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function n(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):
"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function I(b,c){if(this==Object.prototype&&void 0===b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var d=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return d?void 0===d.value:!1}function y(b){return b.split(".")}function z(b,
c){return function(d,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=this[c],h=new A(this,c,"addlistener",g,void 0,arguments,"");"string"===typeof d&&1!==y(d).length&&(g=y(d),g.pop(),g.join("."),h.local=this.getLayer(g),g=h.local[c],h.value=g,d=y(d).pop());!0!==k(h)&&(G.call(g)?(void 0===g[d]&&(g[d]=[]),g[d].push(f),h.type="postaddlistener",k(h)):w.call(g)&&"function"===typeof d&&(g.push(d),h.type="postaddlistener",k(h)));return this}}function J(b,c){return function(d,f){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var g=this[c],h=new A(this,c,"removelistener",g,void 0,arguments,"");"string"===typeof d&&1!==y(d).length&&(g=y(d),g.pop(),g.join("."),h.local=this.getLayer(g),g=h.local[c],h.value=g,d=y(d).pop());if(!0!==k(h))if(G.call(g)){if(void 0!==g[d])for(var m=0,l=g[d].length;m<l;m++)if(g[d][m].toString()===f.toString()){g[d].splice(m,1);h.type="postremovelistener";k(h);break}}else if(w.call(g)&&"function"===typeof d)for(m=0,l=g.length;m<l;m++)if(g[m].toString()===
d.toString()){g.splice(m,1);h.type="postremovelistener";k(h);break}return this}}function B(b,c){function d(c,b,h){var m=Object.keys(this,"all").filter(function(c){return n.call(this[c])}.bind(this)),l=this,p=c;"string"===typeof c&&1!==y(c).length&&(l=y(c),p=l.pop(),l.join("."),l=this.getLayer(l),void 0===l[h][c]&&(l[h][c]=[]),l[h][c].push(b));G.call(l[h])?(void 0===l[h][p]&&(l[h][p]=[]),l[h][p].push(b),void 0!==l.__kbpointers[p]&&(void 0===l.__kbpointers[p][p]&&(l.__kbpointers[p][p]=[]),l.__kbpointers[p][p].push(_func))):
l[h].push(b);p=0;for(l=m.length;p<l;p++)d.call(this[m[p]],c,b,h)}return function(f,g){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=new A(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==k(h)&&(d.call(this,f,g,c),h.type="postaddchildlistener",k(h));return this}}function C(b,c){function d(c,b,h){var m=Object.keys(this,"all").filter(function(c){return n.call(this[c])}.bind(this)),l=this,p=c;if("string"===typeof c&&1!==y(c).length&&(l=y(c),p=l.pop(),l.join("."),l=
this.getLayer(l),void 0!==l[h][c]))for(var q=0,k=l[h][c].length;q<k;q++)if(l[h][c][q].toString()===b.toString()){l[h][c].splice(q,1);break}if(G.call(l[h])){if(void 0!==l[h][p]){q=0;for(k=l[h][p].length;q<k;q++)if(l[h][p][q].toString()===b.toString()){l[h][p].splice(q,1);break}if(-1!==l.__kbpointers.indexOf(p)&&void 0!==l[p].__kbImmediateParent[h][p])for(q=0,k=l[p].__kbImmediateParent[h][p].length;q<k;q++)if(l[p].__kbImmediateParent[h][p][q].toString()===b.toString()){l[p].__kbImmediateParent[h][p].splice(q,
1);break}}}else for(q=0,k=l[h].length;q<k;q++)if(l[h][q].toString()===b.toString()){l[h].splice(q,1);break}q=0;for(k=m.length;q<k;q++)d.call(this[m[q]],c,b,h)}return function(f,g){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=new A(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==k(h)&&(d.call(this,f,g,c),h.type="postremovechildlistener",k(h));return this}}var E={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],
postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},D=["__proto__"],u=function(b,c){if(!c._stopPropogration&&b)for(var d=0,f=b.length;d!==f&&(b[d](c),!c._stopPropogration);d++);},k=function(b){if(b.listener){var c=b.local[b.listener],d=b.local[b.listener.replace("__kb",
"__kbparent")];G.call(c)?(u(c[b.key],b),u(c["*"],b)):u(c,b);G.call(d)?(u(d[b.key],b),u(d["*"],b)):u(d,b)}u(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof v?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&
"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(Object.prototype,{"typeof":e(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:e(function(b){function c(b){for(var g=Object.keys(b,"all"),h=0,m=void 0,l=0,p=g.length;l<p;l++)m=b[g[l]],"object"===typeof m&&void 0!==m&&null!==m?-1===d.indexOf(m)&&(d.push(m),h+=c(m)):"string"===typeof m?h+=2*m.length:"number"===typeof m?h+=8:"boolean"===typeof m?h+=4:"function"===
typeof m&&(h+=2*m.toString().length),h+=2*g[l].length;return h}if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var d=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:e(G,!1,!0),isArray:e(w,!1,!0),isMixed:e(n,!1,!0),isObservable:e(I,!1,!0),stringify:e(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,
function(b,f){if(w(f)||G(f)){if(-1!==c.indexOf(f))return;c.push(f)}return f})},!1,!0),getKeys:e(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:e(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;
return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==c[b]})},!1,!0),keyCount:N(function(){return this.getKeys("o").length},!1,!0),indexCount:N(function(b){return this.length},!1,!0),count:N(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(v.prototype,{concat:e(Array.prototype.concat),every:e(Array.prototype.every),filter:e(Array.prototype.filter),find:e(Array.prototype.find),findIndex:e(Array.prototype.findIndex),forEach:e(Array.prototype.forEach),
includes:e(Array.prototype.includes),indexOf:e(Array.prototype.indexOf),join:e(Array.prototype.join),lastIndexOf:e(Array.prototype.lastIndexOf),map:e(Array.prototype.map),reduce:e(Array.prototype.reduce),reduceRight:e(Array.prototype.reduceRight),slice:e(Array.prototype.slice),some:e(Array.prototype.some),entries:e(Array.prototype.entries),toLocaleString:e(Array.prototype.toLocaleString),add:e(function(b,c){"number"===typeof b&&(b=b.toString());var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==
b.indexOf(".")&&(b=b.split(".").pop());"undefined"===d[b]&&(d[b]=c);return this}),set:e(function(b,c){"number"===typeof b&&(b=b.toString());var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());d[b]=c;return this}),get:e(function(b){"number"===typeof b&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",
this,b)}),del:e(function(b){"number"===typeof b&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:e(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:e(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,
b,e(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,d);return this}),addPointer:e(function(b,c){b instanceof v||(b=new v(b,b.__kbname));var d=Object.getOwnPropertyDescriptor(b,c);Object.defineProperty(this,c,O(b,c,d));this.__kbpointers[c]=b}),move:e(function(b,c){this[c]=b[c];b instanceof v||(b[c]=null);delete b[c];return this}),copy:e(function(b,c){this[c]=b[c];return this}),merge:e(function(b){function c(b,g){for(var h=b instanceof
v?b.keys("o"):Object.keys(b),m,l=0,p=h.length;l<p;l++)m=b[h[l]],"object"===typeof m&&-1===d.indexOf(m)&&"undefined"!==g[h[l]]?c(m,g):g[h[l]]=m}var d=[];c(b,this);return this}),copyWithin:e(function(b,c,d){c=c||0;d=d||0;var f=new A(this,b,"copyWithin",this[b],void 0,arguments,"");if(!0!==k(f)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;d=d<this.length?d:this.length-1;c=0>c?this.length-1:c;d=0>c?this.length-1:d;for(var g=c;g<=d;g++)this[b+(g-c)]=this[g];f.type="postcopyWithin";
k(f)}return this}),fill:e(function(b,c,d){c=void 0!==c?Math.max(0,c):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;var f=new A(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==k(f)){for(var g=a.key;g<d;g++)this[g]=b;f.type="postfill";k(f)}return this}),pop:e(function(){var b=new A(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==k(b)){var c=this[this.length-1];delete this[this.length-1];b.type="postpop";k(b);return c}return null}),
push:e(function(b){var c=new A(this,this.length,"push",b,void 0,arguments,"");!0!==k(c)&&(this[this.length]=b,c.type="postpush",k(c));return this.length}),reverse:e(function(){var b=new A(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==k(b)){for(var c=this.slice().reverse(),d=0,f=this.length;d<f;d++)this[d]=c[d];b.type="postreverse";k(b)}return this}),shift:e(function(){var b=new A(this,0,"shift",this[0],void 0,arguments,"");if(!0!==k(b)){for(var c=a.key,d=this.length-1;c<d;c++)this[c]=
this[c+1];delete this[this.length-1];b.type="postshift";k(b)}return null}),sort:e(function(){var b=new A(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==k(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),d=0,f=this.length;d<f;d++)this[d]=c[d];b.type="postsort";k(b)}return this}),splice:e(function(b,c,d){var f=new A(this,b,"splice",void 0,void 0,arguments,"");if(!0!==k(f)){var g=[],h=Array.prototype.slice.call(arguments,2),m=h.length-2,l=0;if(0!==c&&void 0!==this[b-1+c])for(var p=0,q=
c;p<q;p++){g.push(this[b+p]);for(var e=b+p,u=this.length-1;e<u;e++)this[e]=this[e+1];delete this[this.length-1]}if(0!==m)for(p=0,q=m;p<q;p++){l=b+Math.min(1,p);e=this.length;for(u=l;e>u;e--)this[e]=this[e-1];this[l]=h[p]}f.type="postsplice";f.listener="__kbupdatelistener";k(f);return g}return[]}),unshift:e(function(){var b=new A(this,0,"unshift",this[0],void 0,arguments,"");if(!0!==k(b)){for(var c=Array.prototype.slice.call(arguments),d=this.length-1+c.length,f=c.length;-1!==d;d--)this[d]=d<f?c[d]:
this[d-c.length];b.type="postunshift";k(b)}return this.length}),getLayer:e(function(b){function c(b){var f=b[0];return void 0===this[f]&&0!==b.length-1?null:n(this[f])?0!==b.length-1?(b.shift(),c.call(this[f],b)):this[f]:this}b=y(b);return c.call(this,b)}),setLayer:e(function(b){function c(b){var f=b[0];void 0===this[f]&&0!==b.length-1&&(this[f]=v({},this.__kbname,this,this.__kbscopeString+"."+f));return n(this[f])?0!==b.length-1?(b.shift(),c.call(this[f],b)):this[f]:this}b=y(b);return c.call(this,
b)}),ignoreCreate:e(function(b){-1===D.indexOf(b)&&D.push(b);return this}),addActionListener:e(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:e(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var d=0,f=this.__kbref.__kbevents[b];d<f;d++)if(this.__kbref.__kbevents[b][d].toString()===c.toString()){this.__kbref.__kbevents[b].splice(d,1);break}return this}),subscribe:e(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=
[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:e(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var d=0,f=this.__kbsubscribers[b].length;d<f;d++)if(this.__kbsubscribers[b][d].toString()===c.toString()){this.__kbsubscribers[b].splice(d,1);break}return this}),callSubscribers:e(function(b,c,d){if(void 0!==this.__kbsubscribers[b])for(var f=0,g=this.__kbsubscribers[b].length;f<g;f++)this.__kbsubscribers[b].call(this,b,c,d);return this}),stopChange:e(function(){this._stopChange=!0;
return this})});Object.defineProperties(v.prototype,{addDataListener:e(z("addDataListener","__kblisteners")),removeDataListener:e(J("removeDataListener","__kblisteners")),addDataUpdateListener:e(z("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:e(J("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:e(z("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:e(J("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:e(z("addDataDeleteListener",
"__kbdeletelisteners")),removeDataDeleteListener:e(J("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:e(B("addChildDataListener","__kbparentlisteners")),removeChildDataListener:e(C("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:e(B("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:e(C("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:e(B("addChildDataCreateListener","__kbparentcreatelisteners")),
removeChildDataCreateListener:e(C("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:e(B("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:e(C("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return v}}(),V=function(){return function(){function x(r){if("object"===typeof r)for(var v=0,A=r.length;v<A;v++)K_Components[r[v]]?t(r[v],K_Components[r[v]],document.getElementById("script_"+r[v])):x.load(r[v],"component/"+
r[v]+"/"+location.search,t);else"string"===typeof r&&(K_Components[r[v]]?t(r,K_Components[r],document.getElementById("script_"+r)):x.load(r,"component/"+r+"/"+location.search,t))}var t=function(){},M=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});x.getUnknowns=function(r){var t=r.match(M);return t.map(function(r){return r.replace(/[<\/>]/g,"")}).filter(function(r,e){return document.createElement(r)instanceof HTMLUnknownElement&&-1===t.indexOf(r,e+1)&&!K_Components[r]})};x.load=function(r,
t,A){document.head.appendChild(function(e,r,t){var v=document.createElement("script");v.type="text/javascript";v.charset="utf-8";v.async=!0;v.src=r;v.id="script_"+e;v.onload=function(){t(e,K_Components[e],this)};return v}(r,t,A));return x};x.onLoad=function(r){if(void 0===r)return t;t="function"===typeof r?r:t;return x};return x}}(),S=function(){function x(){function t(c,b){var f=c.length,g;for(g=0;g<f&&(c[g](b),void 0===b._stopPropogation);g++);}function x(c,b){var f=c.length,g;for(g=0;g<f&&(b.child=
b.target,b.target=c[g].parent,c[g].func(b),void 0===b._stopPropogation);g++);}function r(c,b){for(var f=c.length;0<f;u++)if(c[u].toString()===b.toString())return!0;return!1}function v(c,b,f,g,h,m,l,p){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=f;this.oldValue=g;this.target=c;this.attr=b;this.arguments=h;this.action=m;this.child=void 0;this.type=l;this.stopChange=p}function A(){this._attrListeners={};this._attrUpdateListeners=
{};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function e(c,b,f,g){var h=c.get,m=c.set,l;return function(c){l=h.call(this);f(this,b,c,l,void 0,this._stopChange)&&m.call(this,c);this._stopChange||g(this,b,c,l);this._stopChange=void 0}}function N(c,b,f,g){var h;return function(m){h=c.value;f(this,b,m,h,arguments,this._stopChange)&&(c.value=
m);this._stopChange||g(this,b,m,h,arguments);this._stopChange=void 0}}function F(c,b,f,g){var h=c.value,m;return function(){f(this,b,null,null,arguments,this._stopChange)&&(m=h.apply(this,arguments));this._stopChange||g(this,b,null,null,arguments,m);this._stopChange=void 0;return m}}function O(c,b,f,g,h){var m=h.style,l=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),p,q;return{get:function(){return q},set:function(c){p=q;f(h,b,c,p,void 0,this._stopChange)&&(q=c,m.setProperty(l,c));this._stopChange||
g(h,b,c,p);this._stopChange=void 0},enumerable:!0,configurable:!0}}function L(c,b,f,g){if("function"!==typeof b)return n;var h=-1!==["value","checked"].indexOf(c),m=-1!==E.indexOf(c),l;if(this.toString()!==n.toString())if(f){var p=this.querySelectorAll("*");f=p.length;for(var q,k=0;k<f;k++){q=p[k].attrListeners();if(h||"*"===c)void 0!==p[k].addInputBinding&&p[k].addInputBinding(),void 0!==p[k].addInputBoxBinding&&p[k].addInputBoxBinding();if(m)n.injectStyleProperty(p[k],c),l=g?"_parentStyleUpdateListeners":
"_parentStyleListeners";else{if("*"===c){l=g?"_parentStyleUpdateListeners":"_parentStyleListeners";f=E.length;for(var e=0;e<f;e++)n.injectStyleProperty(p[k],E[e]);void 0===q[l]["*"]&&(q[l]["*"]=[]);q[l]["*"].push({parent:this,func:b})}l=g?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===q[l][c]&&(q[l][c]=[]);q[l][c].push({parent:this,func:b})}}else{q=this.attrListeners();if(m)l=g?"_styleUpdateListeners":"_styleListeners",n.injectStyleProperty(this,c);else{if(h||"*"===c)void 0!==this.addInputBinding&&
this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){l=g?"_styleUpdateListeners":"_styleListeners";f=E.length;for(k=0;k<f;k++)n.injectStyleProperty(this,E[k]);void 0===q[l][c]&&(q[l][c]=[]);q[l][c].push(b)}l=g?"_attrUpdateListeners":"_attrListeners"}void 0===q[l][c]&&(q[l][c]=[]);q[l][c].push(b)}else{if(h||"*"===c)for(e=document.querySelectorAll("input, textarea"),f=e.length,k=0;k<f;k++)void 0!==e[k].addInputBinding&&e[k].addInputBinding(),void 0!==e[k].addInputBoxBinding&&
e[k].addInputBoxBinding();if(m){m=Array.prototype.slice.call(document.body.querySelectorAll("*"));f=m.length+1;m.unshift(document.body);for(k=0;k<f;k++)n.injectStyleProperty(m[k],c);l=g?J:z}else{if("*"===c){m=Array.prototype.slice.call(document.body.querySelectorAll("*"));f=m.length+1;h=E.length;m.unshift(document.body);for(k=0;k<f;k++)for(e=0;e<h;e++)n.injectStyleProperty(m[k],E[e]);l=g?J:z;void 0===l[c]&&(l[c]=[]);l[c].push(b)}l=g?y:I}void 0===l[c]&&(l[c]=[]);l[c].push(b)}}function H(c,b,f,g){function h(c,
f){var g=f[c],h=g.length;for(l=0;l<h;l++)g[l].toString()===b.toString()&&g.splice(l,1)}if("function"!==typeof b)return n;["value","checked"].indexOf(c);var m=-1!==E.indexOf(c),l;if(this.toString()!==n.toString())if(f){f=this.querySelectorAll("*");var p=f.length;m?(m=g?"_childStyleUpdateListeners":"_childStyleListeners",h(c,this.attrListeners()[m]),m=g?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===c&&(m=g?"_childStyleUpdateListeners":"_childStyleListeners",h(c,this.attrListeners()[m])),
m=g?"_childAttrUpdateListeners":"_childAttrListeners",h(c,this.attrListeners()[m]),m=g?"_parentAttrUpdateListeners":"_parentAttrListeners");for(l=0;l<p;l++){for(var k=f[l].attrListeners()[m][c],e=k.length,u=0;u<e;u++)k[u].isEqualNode(this)&&k.slice(u,1);if("*"===c)for(listenersStyle=g?"_parentStyleUpdateListeners":"_parentStyleListeners",k=f[l].attrListeners()[m][c],e=k.length,u=0;u<e;u++)k[u].isEqualNode(this)&&k.slice(u,1)}}else m?m=g?"_styleUpdateListeners":"_styleListeners":("*"===c&&(m=g?"_styleUpdateListeners":
"_styleListeners",h(c,this.attrListeners()[m])),m=g?"_attrUpdateListeners":"_attrListeners"),h(c,this.attrListeners()[m]);else m?m=g?J:z:("*"===c&&(m=g?J:z,h(c,m)),m=g?y:I),h(c,m)}function Q(c,b){n.addAttrListener.call(this,c,b,!0);return this}function R(c,b){n.addAttrUpdateListener.call(this,c,b,!0);return this}function P(c,b){n.removeAttrListener.call(this,c,b,!0);return this}function K(c,b){n.removeAttrUpdateListener.call(this,c,b,!0);return this}function G(c,b,f){var g=this.attrListeners();"html"===
b&&(b="innerHTML");"events"===b&&(b="onclick");switch(c){case "attr":if(r(g._attrListeners[b],f))return!0;break;case "attrupdate":if(r(g._attrUpdateListeners[b],f))return!0}return!1}function w(){this._stopChange=!0;return this}function n(){function c(c,b){var d,f=b.length;for(d=0;d<f;d++)-1===c.indexOf(b[d])&&c.push(b[d]);return c}function d(c,b){for(var d=Object.keys(c),f,g,h=0,l=d.length;h<l;h++)if(f=d[h],void 0===b[f])b[f]=c[f].slice();else for(var m=0,k=c[f].length;m<k;m++)g=c[f][m],b[f].push(g)}
function f(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var f=b.target.attrListeners(),g,h=["value","checked"],l=f._attrListeners,m=f._attrUpdateListeners,k=f._parentAttrListeners;g=f._parentAttrUpdateListeners;var e=!1;if(void 0!==I["*"]||void 0!==y["*"])e=!0;if(!0!==e&&void 0!==l["*"]||void 0!==m["*"]||void 0!==k["*"]||void 0!==g["*"])e=!0;if(!0!==e)for(var u=0;u<h.length;u++)if(void 0!==I[h[u]]||void 0!==y[h[u]]||void 0!==l[h[u]]||void 0!==m[h[u]]||void 0!==k[h[u]]||void 0!==g[h[u]]){e=
!0;break}g=e;h=Object.keys(z);l=Object.keys(J);Object.keys(f._styleListeners);Object.keys(f._styleUpdateListeners);m=Object.keys(f._parentStyleListeners);f=Object.keys(f._parentStyleUpdateListeners);k=[];if(0!==h.length||0!==l.length)k=c(k,h),k=c(k,l);if(0!==k.length&&0!==m.length||0!==f.length)k=c(k,m),k=c(k,f);-1!==k.indexOf("*")&&(k=E);var f=k,h=f.length,r,t,l=[],w,m="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,k=b.target;void 0!==m&&(b.attr="appendChild",b.arguments=[b.target],b.target=
b.target.parentElement);if(g){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(l=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||l.unshift(b.arguments[0])):l=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));w=l.length;for(var v=0;v<w;v++)void 0!==l[v].addInputBinding&&l[v].addInputBinding(),void 0!==l[v].addInputBoxBinding&&l[v].addInputBoxBinding()}"appendChild"===
b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(l=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),l.unshift(b.arguments[0])):l=Array.prototype.slice.call(b.target.querySelectorAll("*"));g=b.target.__kb._parentAttrListeners;e=b.target.__kb._parentAttrUpdateListeners;u=b.target.__kb._parentStyleListeners;r=b.target.__kb._parentStyleUpdateListeners;w=l.length;for(v=0;v<w;v++){if(0!==h)for(t=0;t<h;t++)n.injectStyleProperty(l[v],f[t]);t=l[v].attrListeners();
d(g,t._parentAttrListeners);d(e,t._parentAttrUpdateListeners);d(u,t._parentStyleListeners);d(r,t._parentStyleUpdateListeners)}void 0!==m&&(b.attr=m,b.target=k,b.arguments=[])}}function g(b){var c=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:"";m(b.target,b.arguments[0],d,void 0!==c?c.value:"",[d])||b.preventDefault()}function h(b){var c=b.target.attributes[b.arguments[0]],d="setAttribute"===b.attr?b.arguments[1]:"";l(b.target,b.arguments[0],d,void 0!==c?c.value:"",
[d])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");var m=k,l=b;n.addAttrUpdateListener("appendChild",f);n.addAttrUpdateListener("removeChild",f);n.addAttrUpdateListener("innerHTML",f);n.addAttrUpdateListener("outerHTML",f);n.addAttrUpdateListener("innerText",f);n.addAttrUpdateListener("outerText",
f);n.addAttrUpdateListener("textContent",f);n.addAttrListener("setAttribute",g);n.addAttrListener("removeAttribute",g);n.addAttrUpdateListener("setAttribute",h);n.addAttrUpdateListener("removeAttribute",h);return n}var I={},y={},z={},J={},B={},C="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),E=Object.getOwnPropertyNames(document.documentElement.style),D=Object.keys(HTMLElement.prototype).filter(function(b){return 0===
b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),u,k=function(b,d,f,g,h,k){f=new v(b,d,f,g,h,void 0,"set",k);void 0!==b.__kb&&(g=b.__kb._attrListeners,h=b.__kb._styleListeners,k=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==g[d]&&t(g[d],f),void 0===f._stopPropogation&&void 0!==h[d]&&t(h[d],f),void 0===f._stopPropogation&&void 0!==g["*"]&&(t(g["*"],f),void 0===f._stopPropogation&&t(h["*"],f)),void 0===f._stopPropogation&&void 0!==k[d]&&x(k[d],f),void 0===f._stopPropogation&&
void 0!==b[d]&&x(b[d],f),void 0===f._stopPropogation&&void 0!==k["*"]&&(x(k["*"],f),void 0===f._stopPropogation&&x(b["*"],f)));void 0===f._stopPropogation&&void 0!==I[d]&&t(I[d],f);void 0===f._stopPropogation&&void 0!==z[d]&&t(z[d],f);void 0===f._stopPropogation&&void 0!==I["*"]&&(t(I["*"],f),void 0===f._stopPropogation&&t(z["*"],f));return void 0!==f._preventDefault?!1:!0},b=function(b,d,f,g,h,k){f=new v(b,d,f,g,h,k,"update");void 0!==b.__kb&&(g=b.__kb._attrUpdateListeners,h=b.__kb._styleUpdateListeners,
k=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==g[d]&&t(g[d],f),void 0===f._stopPropogation&&void 0!==h[d]&&t(h[d],f),void 0===f._stopPropogation&&void 0!==g["*"]&&(t(g["*"],f),void 0===f._stopPropogation&&t(h["*"],f)),void 0===f._stopPropogation&&void 0!==k[d]&&x(k[d],f),void 0===f._stopPropogation&&void 0!==b[d]&&x(b[d],f),void 0===f._stopPropogation&&void 0!==k["*"]&&(x(k["*"],f),void 0===f._stopPropogation&&x(b["*"],f)));void 0===f._stopPropogation&&void 0!==
y[d]&&t(y[d],f);void 0===f._stopPropogation&&void 0!==J[d]&&t(J[d],f);void 0===f._stopPropogation&&void 0!==y["*"]&&(t(y["*"],f),void 0===f._stopPropogation&&t(J["*"],f));return void 0!==f._preventDefault?!1:!0};n.injectPrototypeProperty=function(c,d,f,g,h){var m=c.prototype,l=Object.getOwnPropertyDescriptor(m,d);f=f||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var u=B[f];g=g||k;h=h||b;void 0===m.attrListeners&&(m={},m.attrListeners=function(){void 0===this.__kb&&(this.__kb=new A);
return this.__kb}.bind(m),m.addAttrListener=n.addAttrListener,m.addAttrUpdateListener=n.addAttrUpdateListener,m.addChildAttrListener=Q,m.addChildAttrUpdateListener=R,m.hasListener=G,m.removeAttrListener=n.removeAttrListener,m.removeAttrUpdateListener=n.removeAttrUpdateListener,m.removeChildAttrListener=P,m.removeChildAttrUpdateListener=K,m.stopChange=w);void 0===u&&(B[f]={obj:c,proto:m,descriptors:{},set:void 0,update:void 0},u=B[f],u.set=g,u.update=h);void 0===u.descriptors[d]&&(u.descriptors[d]=
l);l.configurable&&(void 0!==l.set?Object.defineProperty(m,d,{get:l.get,set:e(l,d,g,h),enumerable:!0,configurable:!0}):"function"===typeof l.value?Object.defineProperty(m,d,{value:F(l,d,g,h),writable:!0,enumerable:!0,configurable:!0}):void 0!==l.value&&Object.defineProperty(m,d,{get:function(){return l.value},set:N(l,d,g,h),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=function(c,d,f,g){var h=c.style,m=Object.getOwnPropertyDescriptor(h,d),l=c.attrListeners().injectedStyle;f=f||
k;g=g||b;void 0===l&&(c.attrListeners().injectedStyle={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=f,c.attrListeners().injectedStyle.update=g,l=c.attrListeners().injectedStyle);void 0===l.descriptors[d]&&(l.descriptors[d]=m);m.configurable&&Object.defineProperty(h,d,O(m,d,f,g,c));return n};n.injectPrototypes=function(c,d,f,g){var h=c.prototype;d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var m=B[d],l=Object.getOwnPropertyNames(h);
f=f||k;g=g||b;var e;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new A);return this.__kb},h.addAttrListener=n.addAttrListener,h.addAttrUpdateListener=n.addAttrUpdateListener,h.addChildAttrListener=Q,h.addChildAttrUpdateListener=R,h.removeAttrListener=n.removeAttrListener,h.removeAttrUpdateListener=n.removeAttrUpdateListener,h.removeChildAttrListener=P,h.removeChildAttrUpdateListener=K,h.hasListener=G,h.stopChange=w);void 0===m&&(B[d]={obj:c,proto:h,descriptors:{},
set:void 0,update:void 0},m=B[d],m.set=f,m.update=g);e=B[d].descriptors;for(g=0;g<l.length;g+=1)void 0===e[l[g]]&&n.injectPrototypeProperty(c,l[g],d,f,b);if(-1!==l.indexOf("value")){var u=function(b){var c,d,f;if("checkbox"===this.type||"radio"===this.type)c=!0;d=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;c&&(m.set(this,"checked",this.checked,d)?m.update(this,
"checked",this.checked,d):e.checked.set.call(this,d));this.value=f;m.set(this,"value",this.value,d)?m.update(this,"value",this.value,d):e.value.set.call(this,d)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",u)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",u)};h.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",u)};
h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",u)}}return n};n.addAttrListener=function(b,d,f){if("html"===b){b=0;for(var g=C.length;b<g;b++)L.call(this,C[b],d,f,!1)}else if("events"===b)for(b=0,g=D.length;b<g;b++)L.call(this,D[b],d,f,!1);else L.call(this,b,d,f,!1);return this};n.addAttrUpdateListener=function(b,d,f){if("html"===b){b=0;for(var g=C.length;b<g;b++)L.call(this,C[b],d,f,!0)}else if("events"===b)for(b=0,g=D.length;b<g;b++)L.call(this,
D[b],d,f,!0);else L.call(this,b,d,f,!0);return this};n.removeAttrListener=function(b,d,f){if("html"===b){b=0;for(var g=C.length;b<g;b++)H.call(this,C[b],d,f,!1)}else if("events"===b)for(b=0,g=D.length;b<g;b++)H.call(this,D[b],d,f,!1);else H.call(this,b,d,f,!1);return this};n.removeAttrUpdateListener=function(b,d,f){if("html"===b){b=0;for(var g=C.length;b<g;b++)H.call(this,C[b],d,f,!0)}else if("events"===b)for(b=0,g=D.length;b<g;b++)H.call(this,D[b],d,f,!0);else H.call(this,b,d,f,!0);return this};
n.hasListener=function(b,d,f){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(b){case "attr":if(r(I[d],f))return!0;break;case "attrupdate":if(r(y[d],f))return!0}return!1};n.injectedPrototypes=function(){return B};return n}"function"===typeof define&&define.amd&&define("KB",x);return x}(),W=function(){return function(){function x(r){0===r.length&&(r=t);document.body.innerHTML="<"+r+"></"+r+">";M(r);return x}var t="",M=function(){};x.base=function(r){if(void 0===r)return t;t="string"===
typeof r?r:t;return x};x.onChange=function(r){if(void 0===r)return M;M="function"===typeof r?r:M;return x};x.watch=function(r){window.onhashchange=r?function(){x(window.location.hash.replace("#",""))}:null;return x};return x}}(),S=function(x){return function(){function t(e,k){this.name=e.tagName.toLowerCase();this.template=y[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=e;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className=
"Wrapper Wrapper__"+this.name;k||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);k||(this.maps=this.map(this.wrapper));k||(this.wrapper.kb_maps=this.maps)}function M(e,k,b,c,d,f,g,h){function m(b){var c="for"===k?G(b):[],d=this;this.key="for"!==k?P(b):c[0];this.filterNames=K(b);this.component="for"===k?c[1]:void 0;this.id=0;this.isEvent=l;this.isInput=p;this.__proto__.bindText=this.__proto__.bindText.map(function(c){return c===b?this:c});this.__proto__.bindMaps.push(this);
Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:w("",!0)});this.updateData=function(b){if(d.isConnected&&d._data){if("object"!==typeof b||void 0===b.value)b={value:b};"function"===typeof d._data.stopChange&&d._data.stopChange().set(d.key,b.value)}};this.updateDom=function(b){if(d.isSynced()){d.element.stopChange();if("object"!==typeof b||void 0===b.value)b={value:b};d.value=b.value}};this.updateLoop=function(){d.kb_loop&&d.loop(d.kb_loop)}}
var l="attribute"===k&&-1!==J.indexOf(g.name)||"component"===k&&g.name&&-1!==J.indexOf(g.name),p="input"===h.tagName.toLowerCase();l&&h.stopChange().removeAttribute(g.name);Object.defineProperties(m.prototype,{valget:w(r),valset:w(v),refresh:w(N),connect:w(F),deleteMap:w(L),loop:w(O),unsync:w(H),isSynced:w(A),type:w(k),text:w(b,!0),bindText:w(c,!0),bindNames:w("for"===k?[G(c[0])[0]]:R(c),!0),bindMaps:w([],!0),bindListener:w(l?d.toLowerCase():d),bindProperty:w(l?g.name.toLowerCase():f),bindTarget:w(g,
!0),element:w(h,!0),_data:w({},!0),filters:w({},!0),maps:w(e,!0),loop:w(O)});return m}function r(){return this._value}function v(e){this._value=this.isSynced()?e:this._value;this.refresh()}function A(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function e(e,k){function b(b,d){return d.reduce(function(d,g){return d+("string"===typeof g?g:0===g.filterNames.length?g._value:g.filterNames.reduce(function(d,f){if(void 0!==b.filters){if(void 0!==b.filters[f])return b.filters[f](d);
console.warn("there is no filter by the name %o in the data model filters %o",f,Object.keys(b.filters));return d}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return d},g._value))},"")}return 1===k.length?"string"===typeof k[0]._value?b(e,k):k[0]._value:b(e,k)}function N(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=this.bindText[0]._value;else if("component"===this.type)this.element.k_post||(this.element.k_post=
{}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=e(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var u=0,k=this._value.length;u<k;u++)this.element.stopChange().appendChild(this._value[u])}else this.bindTarget[this.bindProperty]=e(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=e(this,this.bindText));return this}function F(e){this._data=e;this.filters=void 0!==e.filters?e.filters:
this.filters;e=0;for(var k=this.bindNames.length;e<k;e++){var b=this.bindNames[e],c=this.bindMaps[e];c._data.addDataUpdateListener&&(c._data.exists(b)||(console.warn("No property by the name %o exists on this data set %o",b,c._data),c._data.add(b,c._value)),c.value=c._data.get(b),"component"!==c.type&&"for"!==c.type?(c.isConnected=!0,c._data.addDataUpdateListener(b,c.updateDom)):"for"===c.type&&c._value.addDataUpdateListener&&c._value.addDataUpdateListener("*",c.updateLoop).addDataCreateListener(c.updateLoop).addDataDeleteListener(c.updateLoop))}1!==
this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function O(e){this.kb_loop=e;this.element.stopChange().innerHTML="";for(var k=this._value,b=0,c=this.filterNames.length;b<c;b++)k=this.filters[this.filterNames[b]](k);k=0;for(b=this._value.length;k<b;k++){var c=this._value[k],d=document.createElement(this.component);d.k_post=c;d.kb_wrapper=this.element.kb_wrapper;
this.element.stopChange().appendChild(d);"function"===typeof e&&e(d)}}function L(){this.maps[this.key].splice(this.id,1);return this}function H(){for(var e=0,k=this.bindNames.length;e<k;e++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[e],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":
this.bindListener,this.updateData);this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return!1}function Q(e){return e.split(new RegExp("("+B.split("").join("\\")+")(.*?)("+C.split("").join("\\")+")","g")).map(function(k,b,c){return c[b-
1]===B?B+k+C:k}).filter(function(k,b,c){return 0!==k.length&&k!==B&&k!==C&&0!==k.length})}function R(e){return e.filter(function(k){return-1!==k.indexOf(B)&&-1!==k.indexOf(C)}).map(function(k){return P(k)})}function P(e){return e.replace(new RegExp("["+B+C+"]","g"),"").replace(new RegExp("\\"+E.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function K(e){return-1!==e.indexOf(E)?e.replace(new RegExp("["+C+"]","g"),"").replace(new RegExp("(.*?)(\\"+E.split("").join("\\")+")"),"").replace(/\s/g,
"").split(","):[]}function G(e){return-1!==e.indexOf("for")?e.replace(new RegExp("["+B+C+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(k){return 0!==k.length}):[]}function w(e,k,b){return{value:e,writable:!!k,enumerable:!1,configurable:!!b}}function n(e,k){for(var b=D[e],c=0,d=b.length;c<d&&(b[c](k),k._stopPropogation);c++);return k._preventDefault}function I(e){var k=e.match(z).map(function(b){return b.replace(/[<\/>]/g,"")});k.filter(function(b,c){return document.createElement(b)instanceof
HTMLUnknownElement&&-1===k.indexOf(b,c+1)&&void 0===y[b]});0!==k.length&&n("unknown",new Event("unknown",k));return k}var y={},z=/(<\/.*?>)/g;x().call();var J=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}),B="{{",C="}}",E="|",D={unknown:[]};t.prototype.map=function(e){function k(c){for(var d=0,f=c.length;d<f;d++)if(void 0===c[d].kb_maps&&8!==c[d].nodeType){c[d].kb_mapper=e;if(3===c[d].nodeType){var g=c[d],h=b,m=g.textContent,l=g.parentElement instanceof HTMLUnknownElement;
if(m.match(new RegExp("(\\"+B.split("").join("\\")+")(.*?)(\\"+C.split("").join("\\")+")","g")))for(var p=l?"component":m.match(new RegExp("(\\"+B.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+C.split("").join("\\")+")","g"))?"for":"text",g=M(h,p,m,Q(m),l?"":"textContent","textContent",g,g.parentElement),m=0,l=g.prototype.bindText.length;m<l;m++){var p=m,q=g.prototype.bindText[m];0===q.indexOf(B)&&(q=new g(q),g.prototype.bindText[p]=q,void 0===h[q.key]&&(h[q.key]=[]),q.id=h[q.key].length,
h[q.key].push(q))}}else for(h=c[d],g=b,m=h.attributes,l=h instanceof HTMLUnknownElement,p=0,q=m.length;p<q;p++){q>m.length&&(p-=q-m.length,q=m.length);var y=m[p];if(y.value.match(new RegExp("(\\"+B.split("").join("\\")+")(.*?)(\\"+C.split("").join("\\")+")","g")))for(var y=M(g,l?"component":"attribute",y.value,Q(y.value),l?"":y.name,"value",y,h),n=0,I=y.prototype.bindText.length;n<I;n++){var r=n,z=y.prototype.bindText[n];0===z.indexOf(B)&&(z=new y(z),y.prototype.bindText[r]=z,void 0===g[z.key]&&(g[z.key]=
[]),g[z.key].push(z))}}c[d].childNodes&&0!==c[d].childNodes.length&&k(c[d].childNodes)}}var b={};k(e.childNodes);return b};t.prototype.addFilter=function(e,k){void 0!==this.maps[e]&&this.maps[e].forEach(function(b){b.filters.push(k);b.refresh()});return this};t.prototype.removeFilter=function(e,k){void 0!==this.maps[e]&&this.maps[e].forEach(function(b){b.filters.splice(this.maps[e].filters.indexOf(k),1);b.refresh()});return this};t.prototype.swapFilter=function(e,k,b){void 0!==this.maps[e]&&this.maps[e].forEach(function(c){c.filters.splice(this.maps[e].filters.indexOf(k),
1,b);c.refresh()});return this};Object.defineProperties(t,{startChars:w(function(e){if(void 0===e)return B;B="string"===typeof e?e:B;return this}),endChars:w(function(e){if(void 0===e)return C;C="string"===typeof e?e:C;return this}),pipeChars:w(function(e){if(void 0===e)return E;E="string"===typeof e?e:E;return this}),getUnknown:w(I),isRegistered:w(function(e){return void 0!==y[e]}),register:w(function(e,k){void 0===y[e]?(y[e]=k,I(k)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",
e);return this}),addEventListener:w(function(e,k){void 0!==D[e]?D[e].push(k):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",e);return this}),removeEventListener:w(function(e,k){if(void 0!==D[e])for(var b=0,c=D[e].length;b<c;b++)D[e][b].toString()===k.toString()&&D[e].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",e);return this})});return t}}(S),T=function(x,t,M,r){return function(v,A){function e(n,
y,z,r){function t(b,c,e,h,k){for(var l=L({},b),p=0,q=Object.keys(c.prototype),n=q.length;p<n;p++)l.__proto__[q[p]]=c.prototype[q[p]];p=0;q=Object.keys(h);for(n=q.length;p<n;p++)-1!==G.indexOf(q[p])?Object.defineProperty(l,q[p],F(h[q[p]],"filters"!==q[p])):l.set(q[p],h[q[p]]);if(h.pointers)for(p=0,q=Object.keys(h.pointers),n=q.length;p<n;p++)l.addPointer(h.pointers[q[p]],q[p]);c.apply(l,e);p=0;q=Object.keys(k);for(n=q.length;p<n;p++)-1!==G.indexOf(q[p])?Object.defineProperty(l,q[p],F(k[q[p]],"filters"!==
q[p])):l.set(q[p],k[q[p]]);if(k.pointers)for(p=0,q=Object.keys(k.pointers),n=q.length;p<n;p++)l.addPointer(k.pointers[q[p]],q[p]);p=0;q=Object.keys(l.filters);for(n=q.length;p<n;p++)l.filters[q[p]]=l.filters[q[p]].bind(l);if(l.sessionStorage){if(c=sessionStorage.getItem(l.id||b))for(c=JSON.parse(c),p=0,q=Object.keys(c),n=q.length;p<n;p++)l.set(q[p],c[q[p]]);else sessionStorage.setItem(l.id||b,l.stringify());l.addChildDataUpdateListener("*",function(){sessionStorage.setItem(l.id||b,l.stringify())})}if(l.localStorage){if(c=
localStorage.getItem(l.id||b))for(c=JSON.parse(c),p=0,q=Object.keys(c),n=q.length;p<n;p++)l.set(q[p],c[q[p]]);else localStorage.setItem(l.id||b,l.stringify());l.addChildDataUpdateListener("*",function(){localStorage.setItem(l.id||b,l.stringify())})}l.store&&R.set(l.id||b,l);return l}function v(b,c,g){b.kb_viewmodel=g;c.wrapper.innerHTML=u.template.replace(new RegExp("("+H.startChars()+"local"+H.endChars()+")","g"),g.local);var h=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=h;Object.keys(h).forEach(function(b){h[b].forEach(function(b){switch(b.type){case "for":b.connect(g);
H.isRegistered(b.component)?b.loop(function(b){e(b)}):(e.loadWaitList(b.component,function(c,d){b.loop(function(b){e(b)})}),e.loadWaitList(b.component).loading||(e.loadWaitList(b.component).loading=!0,O(b.component)));break;case "component":b.connect(g).deleteMap();break;default:b.connect(g)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,c.wrapper)}function w(d,f){u=new H(f,!0);Object.defineProperty(u.wrapper,"__kbcomponenttree",F(f.kb_mapper?f.kb_mapper.__kbcomponenttree.slice():
[]));f.parentElement.replaceChild(u.fragment,f);y.unshift(u.wrapper);v(u.wrapper,u,t(d,P[d],y,b,c));if(-1===u.wrapper.__kbcomponenttree.indexOf(d)||u.wrapper.kb_viewmodel.multiple){u.wrapper.__kbcomponenttree.push(d);u.wrapper.classList.add(u.wrapper.kb_viewmodel.local);for(var g=u.wrapper.querySelectorAll("*"),h=0,k=g.length;h<k;h++)g[h]instanceof HTMLUnknownElement&&e(g[h])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
d),console.error("Recursive Component %o on %o",u.wrapper,u.wrapper.parentElement),u.wrapper.parentElement.removeChild(u.wrapper)}var x=n.tagName.toLowerCase(),u,k=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}),b={},c={};void 0===y&&(y=[]);z&&N(z,b);Object.defineProperty(b,"local",F(b.local||x+"-"+Date.now(),!0,!1,!0));Object.defineProperty(b,"filters",F(b.filters||{},!1,!1,!0));"function"!==typeof b.onFinish&&(b.onFinish=function(){});Object.defineProperty(b,"onFinish",
F(b.onFinish,!0,!1,!0));"string"===typeof b.sessionStorage&&(b.sessionStorage="true"===b.sessionStorage);Object.defineProperty(b,"sessionStorage",F(void 0!==b.sessionStorage?b.sessionStorage:!1,!0,!1,!0));"string"===typeof b.localStorage&&(b.localStorage="true"===b.localStorage);Object.defineProperty(b,"localStorage",F(void 0!==b.localStorage?b.localStorage:!1,!0,!1,!0));"string"===typeof b.store&&(b.store="true"===b.store);Object.defineProperty(b,"store",F(void 0!==b.store?b.store:!1,!0,!1,!0));
"string"===typeof b.multiple&&(b.multiple="true"===b.multiple);Object.defineProperty(b,"multiple",F(void 0!==b.multiple?b.multiple:!1,!0,!1,!0));r&&N(r,c);c.innerHTML=n.childNodes;z=0;for(r=n.attributes.length;z<r;z++)c[n.attributes[z].name]=n.attributes[z].value;z=0;for(r=k.length;z<r;z++)n[k[z]]&&(c[k[z]]=n[k[z]]);n.k_post&&N(n.k_post,c);H.isRegistered(x)?w(x,n):(e.loadWaitList(x,function(b,c){w(x,n)}),e.loadWaitList(x).loading||(e.loadWaitList(x).loading=!0,O(x)))}function N(e,n){var r=Object.keys(e);
n.pointers||(n.pointers={});for(var t=0,w=r.length;t<w;t++)if(e.isObservable(r[t]))n.pointers[r[t]]=e;else if(e[r[t]].isMixed())n.pointers[r[t]]=e[r[t]].__kbImmediateParent;else if(Object.prototype.isObject(e[r[t]]))for(var v=0,x=Object.keys(e[r[t]]);v<w;v++)n[r[t]][x[v]]=e[r[t]][x[v]];else if(Object.prototype.isArray(e[r[t]]))for(v=0;v<w;v++)n[r[t]][v]=e[r[t]][v];else n[r[t]]=e[r[t]]}function F(e,n,r,t){return{value:e,writable:!!n,enumerable:!!t,configurable:!!r}}window.K_Components||(window.K_Components=
{});var O=t().onLoad(function(n,r){var t="<style>"+unescape(r.prototype.k_css)+"</style>"+unescape(r.prototype.k_html);e.register(n,r,t,r.prototype.cms);e.loadWaitList(n).forEach(function(e){e(n,r)});e.loadWaitList(n,"clear")}),L=x(),H=M(),Q=r().base(void 0!==config&&void 0!==config.base?config.base:"default").watch(!0).onChange(function(n){e(document.querySelector(n))}),R=L({},"Model"),P={},K=function(){return window.location.search.replace("?","").split("&").filter(function(e){return 0!==e.length}).reduce(function(e,
n){e[n.split("=")[0]]=n.split("=")[1];return e},{})}(),G="id filters class sessionStorage localStorage store component multiple".split(" "),w={},n;e.register=function(n,r,t,v){H.register(n,t);P[n]=r;return e};e.loadWaitList=function(n,r){if("undefined"===typeof r&&n)return w[n];if(n){if(void 0===w[n]||"clear"===r){var t=void 0===w[n]?!1:!!w[n].loading;w[n]=[];w[n].loading=t}"function"===typeof r&&w[n].push(r)}return e};e.localRouting=function(r){r?(n=Node.prototype.appendChild,Node.prototype.appendChild=
function(e){if("script"===e.nodeName.toLowerCase()){e.src=e.src.substring(0,-1!==e.src.indexOf("?")?e.src.indexOf("?"):e.src.length);var r=e.src.match(/(.*?component\/)/);r&&(K.env||(K.env="prod"),"dev"===K.env&&(K.env="qa"),r=e.src.replace(r[0],"").replace(/[\/\s]/g,""),e.src="/components/"+r+"/build/"+K.env+"/"+r+(K.debug&&"prod"!==K.env?"":".min")+".js",arguments[0]=e)}return n.apply(this,arguments)}):n&&(Node.prototype.appendChild=n,n=null);return e};v&&e.localRouting(v);A&&Q(window.location.hash.replace("#",
""));return e}}(U,V,S,W);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return T}):"undefined"!==typeof module&&(module.exports=T);return T}();
