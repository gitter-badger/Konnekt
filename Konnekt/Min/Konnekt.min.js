var Konnekt=function(){var U=function(){return function(C,u,P,n){function y(b,c,d,e){b=void 0===b?{}:b;var k={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var l=new Proxy(k,{set:E,deleteProperty:Q}),p=Object.keys(b,"all");Object.defineProperties(k,{__kbname:g("string"===typeof c?c:"default",!0,!0),__kbref:g(d?d.__kbref||d:l,!0,!0),__kbscopeString:g(e||"",!0,!0),__kbImmediateParent:g(d||
null,!0,!0),__kbsubscribers:g({}),__kblisteners:g({}),__kbupdatelisteners:g({}),__kbparentlisteners:g({}),__kbparentupdatelisteners:g({}),__kbcreatelisteners:g([]),__kbdeletelisteners:g([]),__kbparentcreatelisteners:g([]),__kbparentdeletelisteners:g([]),__kbpointers:g({}),__kbevents:g(I),length:g(0,!0),__kbnonproxy:g(k,!1,!0),_stopChange:g(!1,!0)});c=0;for(d=p.length;c<d;c++)l[p[c]]=b[p[c]];k.__proto__=y.prototype;k.__kbevents.addlistener=[];k.__kbevents.removelistener=[];k.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return l}function r(b,c,d,e,k,l,p,m){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=l;this.type=this.event=d;this.listener=p;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=e;this.oldValue=k;this.stopChange=m}function g(b,c,d){return{value:b,writable:!!c,enumerable:!1,configurable:!!d}}function N(b,c,d){return{get:function(){return b.call(this)},set:function(d){c&&(b=d)},enumerable:!1,configurable:!!d}}function L(b,c){var d=c,e=c;return{get:function(){return d},
set:function(c){var l=new r(this,b,"set",c,d,arguments,"__kblisteners",this._stopChange);!0!==f(l)&&(e=d,d=c,l.stopChange||(l.listener="__kbupdatelisteners",l.type="postset",f(l)),this._stopChange||this.callSubscribers(b,d,e));this._stopChange=!1},configurable:!0,enumerable:!0}}function O(b,c,d){return{get:function(){return b[c]},set:function(d){(this._stopChange?b.stopChange():b)[c]=d;this._stopChange=!1},enumerable:d.enumerable,configurable:d.configurable}}function K(b,c){for(var d=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],e=[],k,l=0,p=d.length;l<p;l++)if(k=b[d[l].listener],J.call(k))for(var e=Object.keys(k),m=0,q=e.length;m<q;m++)for(var f=0,h=k[e[m]].length;f<h;f++)c[d[l].method](e[m],k[e[m]][f]);else for(m=0,q=k.length;m<q;m++)c[d[l].method](k[m])}function H(b,c){var d=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],e=[],k;if(b[c].__kbImmediateParent)for(var l=0,p=d.length;l<p;l++){k=b[d[l].listener];for(var e=Object.keys(k),m=0,q=e.length;m<q;m++)if(c===e[l])for(var f=0,h=k[e[l]].length;f<h;f++)void 0===b[c].__kbImmediateParent[d[l].listener][c]&&(b[c].__kbImmediateParent[d[l].listener][c]=[]),b[c].__kbImmediateParent[d[l].listener][c].push(k[e[l]][f])}K(b,b[c])}function w(b,c,d,e){d=new y(d,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);K(b,d);if(e){e=new r(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange);var k=f(e);!0!==k&&(Object.defineProperty(b,c,L(c,d)),e.listener="__kbupdatelisteners",e.type="postcreate",f(e))}else e=new r(b,c,"set",d,void 0,[],"__kblisteners",b._stopChange),k=f(e),!0!==k&&(Object.defineProperty(b,c,L(c,d)),e.listener="__kbupdatelisteners",e.type="postset",f(e));return!0!==k}function M(b,c,d,e){if(e){e=new r(b,c,"create",d,void 0,[],"__kbcreatelisteners",
b._stopChange);var k=f(e);if(!0!==k){var l=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,O(d.__kbImmediateParent,c,l));b.__kbpointers.push(c);H(b,c);e.listener="__kbupdatelisteners";e.type="postcreate";f(e)}return!0!==k}l=Object.getOwnPropertyDescriptor(d.__kbImmediateParent,c);Object.defineProperty(b,c,O(d.__kbImmediateParent,c,l));b.__kbpointers.push(c);H(b,c);return!0}function E(b,c,d){if(D.call(b,c)){if("length"===c)if(d>b.length&&void 0!==b[d-1])b.length=
d;else{if(d<b.length){c=d;for(var e=b.length;c<e;c++)b[c]&&delete b[c];b.length=d}}else{if("object"===typeof d)return w(b,c,d);if(d instanceof y)return M(b,c,d);b[c]=d}return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=d,!0;if(-1===F.indexOf(c)){if("object"===typeof d)return w(b,c,d,!0);if(d instanceof y)return M(b,c,d,!0);var e=new r(b,c,"create",d,void 0,[],"__kbcreatelisteners",b._stopChange),k=f(e);!0!==k&&(Object.defineProperty(b,
c,L(c,d)),e.listener="__kbupdatelisteners",e.type="postcreate",f(e));return!0!==k}}function Q(b,c){var d=new r(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),e=f(d);!0!==e&&("object"===typeof b[c]&&(b[c]=null),delete b[c],d.listener="__kbupdatelisteners",d.type="postdelete",f(d));return!0!==e}function J(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===
typeof b?b:this[b]:this)}function z(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function t(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function D(b,c){if(this==Object.prototype&&void 0===
b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var d=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return d?void 0===d.value:!1}function x(b){return b.split(".")}function G(b,c){return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=this[c],l=new r(this,c,"addlistener",k,
void 0,arguments,"");"string"===typeof d&&1!==x(d).length&&(k=x(d),k.pop(),k.join("."),l.local=this.getLayer(k),k=l.local[c],l.value=k,d=x(d).pop());!0!==f(l)&&(J.call(k)?(void 0===k[d]&&(k[d]=[]),k[d].push(e),l.type="postaddlistener",f(l)):z.call(k)&&"function"===typeof d&&(k.push(d),l.type="postaddlistener",f(l)));return this}}function v(b,c){return function(d,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=this[c],l=new r(this,c,"removelistener",k,void 0,arguments,"");
"string"===typeof d&&1!==x(d).length&&(k=x(d),k.pop(),k.join("."),l.local=this.getLayer(k),k=l.local[c],l.value=k,d=x(d).pop());if(!0!==f(l))if(J.call(k)){if(void 0!==k[d])for(var p=0,m=k[d].length;p<m;p++)if(k[d][p].toString()===e.toString()){k[d].splice(p,1);l.type="postremovelistener";f(l);break}}else if(z.call(k)&&"function"===typeof d)for(p=0,m=k.length;p<m;p++)if(k[p].toString()===e.toString()){k.splice(p,1);l.type="postremovelistener";f(l);break}return this}}function A(b,c){function d(c,b,
l){var p=Object.keys(this,"all").filter(function(c){return t.call(this[c])}.bind(this)),m=this,q=c;"string"===typeof c&&1!==x(c).length&&(m=x(c),q=m.pop(),m.join("."),m=this.getLayer(m),void 0===m[l][c]&&(m[l][c]=[]),m[l][c].push(b));J.call(m[l])?(void 0===m[l][q]&&(m[l][q]=[]),m[l][q].push(b),void 0!==m.__kbpointers[q]&&(void 0===m.__kbpointers[q][q]&&(m.__kbpointers[q][q]=[]),m.__kbpointers[q][q].push(_func))):m[l].push(b);q=0;for(m=p.length;q<m;q++)d.call(this[p[q]],c,b,l)}return function(e,k){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var l=new r(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==f(l)&&(d.call(this,e,k,c),l.type="postaddchildlistener",f(l));return this}}function B(b,c){function d(c,b,l){var p=Object.keys(this,"all").filter(function(c){return t.call(this[c])}.bind(this)),m=this,q=c;if("string"===typeof c&&1!==x(c).length&&(m=x(c),q=m.pop(),m.join("."),m=this.getLayer(m),void 0!==m[l][c]))for(var f=0,h=m[l][c].length;f<h;f++)if(m[l][c][f].toString()===
b.toString()){m[l][c].splice(f,1);break}if(J.call(m[l])){if(void 0!==m[l][q]){f=0;for(h=m[l][q].length;f<h;f++)if(m[l][q][f].toString()===b.toString()){m[l][q].splice(f,1);break}if(-1!==m.__kbpointers.indexOf(q)&&void 0!==m[q].__kbImmediateParent[l][q])for(f=0,h=m[q].__kbImmediateParent[l][q].length;f<h;f++)if(m[q].__kbImmediateParent[l][q][f].toString()===b.toString()){m[q].__kbImmediateParent[l][q].splice(f,1);break}}}else for(f=0,h=m[l].length;f<h;f++)if(m[l][f].toString()===b.toString()){m[l].splice(f,
1);break}f=0;for(h=p.length;f<h;f++)d.call(this[p[f]],c,b,l)}return function(e,k){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var l=new r(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==f(l)&&(d.call(this,e,k,c),l.type="postremovechildlistener",f(l));return this}}var I={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],
reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},F=["__proto__"],h=function(b,c){if(!c._stopPropogration&&b)for(var d=0,e=b.length;d!==e&&(b[d](c),!c._stopPropogration);d++);},f=function(b){if(b.listener){var c=b.local[b.listener],d=b.local[b.listener.replace("__kb","__kbparent")];J.call(c)?(h(c[b.key],b),h(c["*"],b)):h(c,b);J.call(d)?
(h(d[b.key],b),h(d["*"],b)):h(d,b)}h(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof y?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,
10))})};Object.defineProperties(Object.prototype,{"typeof":g(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:g(function(b){function c(b){for(var k=Object.keys(b,"all"),l=0,p=void 0,f=0,q=k.length;f<q;f++)p=b[k[f]],"object"===typeof p&&void 0!==p&&null!==p?-1===d.indexOf(p)&&(d.push(p),l+=c(p)):"string"===typeof p?l+=2*p.length:"number"===typeof p?l+=8:"boolean"===typeof p?l+=4:"function"===typeof p&&(l+=2*p.toString().length),l+=2*k[f].length;return l}
if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var d=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:g(J,!1,!0),isArray:g(z,!1,!0),isMixed:g(t,!1,!0),isObservable:g(D,!1,!0),stringify:g(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,function(b,e){if(z(e)||J(e)){if(-1!==c.indexOf(e))return;c.push(e)}return e})},
!1,!0),getKeys:g(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:g(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==
c[b]})},!1,!0),keyCount:N(function(){return this.getKeys("o").length},!1,!0),indexCount:N(function(b){return this.length},!1,!0),count:N(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(y.prototype,{concat:g(Array.prototype.concat),every:g(Array.prototype.every),filter:g(Array.prototype.filter),find:g(Array.prototype.find),findIndex:g(Array.prototype.findIndex),forEach:g(Array.prototype.forEach),includes:g(Array.prototype.includes),indexOf:g(Array.prototype.indexOf),
join:g(Array.prototype.join),lastIndexOf:g(Array.prototype.lastIndexOf),map:g(Array.prototype.map),reduce:g(Array.prototype.reduce),reduceRight:g(Array.prototype.reduceRight),slice:g(Array.prototype.slice),some:g(Array.prototype.some),entries:g(Array.prototype.entries),toLocaleString:g(Array.prototype.toLocaleString),add:g(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());"undefined"===d[b]&&(d[b]=c);return this}),set:g(function(b,c){var d=-1!==
b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());d[b]=c;return this}),get:g(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:g(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:g(function(b){var c=
-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:g(function(b,c){var d=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,b,g(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,d);return this}),addPointer:g(function(b,c){b instanceof y||(b=new y(b,b.__kbname));var d=Object.getOwnPropertyDescriptor(b,
c);Object.defineProperty(this,c,O(b,c,d));this.__kbpointers[c]=b}),move:g(function(b,c){this[c]=b[c];b instanceof y||(b[c]=null);delete b[c];return this}),copy:g(function(b,c){this[c]=b[c];return this}),merge:g(function(b){function c(b,k){for(var l=b instanceof y?b.keys("o"):Object.keys(b),p,f=0,q=l.length;f<q;f++)p=b[l[f]],"object"===typeof p&&-1===d.indexOf(p)&&"undefined"!==k[l[f]]?c(p,k):k[l[f]]=p}var d=[];c(b,this);return this}),copyWithin:g(function(b,c,d){c=c||0;d=d||0;var e=new r(this,b,"copyWithin",
this[b],void 0,arguments,"");if(!0!==f(e)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;d=d<this.length?d:this.length-1;c=0>c?this.length-1:c;d=0>c?this.length-1:d;for(var k=c;k<=d;k++)this[b+(k-c)]=this[k];e.type="postcopyWithin";f(e)}return this}),fill:g(function(b,c,d){c=void 0!==c?Math.max(0,c):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;var e=new r(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==f(e)){for(var k=a.key;k<d;k++)this[k]=
b;e.type="postfill";f(e)}return this}),pop:g(function(){var b=new r(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==f(b)){var c=this[this.length-1];--this.length;b.type="postpop";f(b);return c}return null}),push:g(function(b){var c=new r(this,this.length,"push",b,void 0,arguments,"");!0!==f(c)&&(this[this.length]=b,c.type="postpush",f(c));return this.length}),reverse:g(function(){var b=new r(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==f(b)){for(var c=this.slice().reverse(),
d=0,e=this.length;d<e;d++)this[d]=c[d];b.type="postreverse";f(b)}return this}),shift:g(function(){var b=new r(this,0,"shift",this[0],void 0,arguments,"");if(!0!==f(b)){for(var c=a.key,d=this.length-1;c<d;c++)this[c]=this[c+1];--this.length;b.type="postshift";f(b)}return null}),sort:g(function(){var b=new r(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==f(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),d=0,e=this.length;d<e;d++)this[d]=c[d];b.type="postsort";f(b)}return this}),splice:g(function(b,
c,d){var e=new r(this,b,"splice",void 0,void 0,arguments,"");if(!0!==f(e)){var k=[],l=Array.prototype.slice.call(arguments,2),p=l.length-2,m=0;if(0!==c&&void 0!==this[b-1+c])for(var q=0,h=c;q<h;q++){k.push(this[b+q]);for(var g=b+q,S=this.length-1;g<S;g++)this[g]=this[g+1];delete this[this.length-1]}if(0!==p)for(q=0,h=p;q<h;q++){m=b+Math.min(1,q);g=this.length;for(S=m;g>S;g--)this[g]=this[g-1];this[m]=l[q]}e.type="postsplice";e.listener="";f(e);return k}return[]}),unshift:g(function(){var b=new r(this,
0,"unshift",this[0],void 0,arguments,"");if(!0!==f(b)){for(var c=Array.prototype.slice.call(arguments),d=this.length-1+c.length,e=c.length;-1!==d;d--)this[d]=d<e?c[d]:this[d-c.length];b.type="postunshift";f(b)}return this.length}),getLayer:g(function(b){function c(b){var e=b[0];return void 0===this[e]&&0!==b.length-1?null:t(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=x(b);return c.call(this,b)}),setLayer:g(function(b){function c(b){var e=b[0];void 0===this[e]&&0!==b.length-
1&&(this[e]=y({},this.__kbname,this,this.__kbscopeString+"."+e));return t(this[e])?0!==b.length-1?(b.shift(),c.call(this[e],b)):this[e]:this}b=x(b);return c.call(this,b)}),ignoreCreate:g(function(b){-1===F.indexOf(b)&&F.push(b);return this}),addActionListener:g(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:g(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var d=0,e=this.__kbref.__kbevents[b];d<e;d++)if(this.__kbref.__kbevents[b][d].toString()===
c.toString()){this.__kbref.__kbevents[b].splice(d,1);break}return this}),subscribe:g(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:g(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var d=0,e=this.__kbsubscribers[b].length;d<e;d++)if(this.__kbsubscribers[b][d].toString()===c.toString()){this.__kbsubscribers[b].splice(d,1);break}return this}),callSubscribers:g(function(b,c,d){if(void 0!==this.__kbsubscribers[b])for(var e=
0,k=this.__kbsubscribers[b].length;e<k;e++)this.__kbsubscribers[b].call(this,b,c,d);return this}),stopChange:g(function(){this._stopChange=!0;return this})});Object.defineProperties(y.prototype,{addDataListener:g(G("addDataListener","__kblisteners")),removeDataListener:g(v("removeDataListener","__kblisteners")),addDataUpdateListener:g(G("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:g(v("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:g(G("addDataCreateListener",
"__kbcreatelisteners")),removeDataCreateListener:g(v("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:g(G("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:g(v("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:g(A("addChildDataListener","__kbparentlisteners")),removeChildDataListener:g(B("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:g(A("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:g(B("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:g(A("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:g(B("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:g(A("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:g(B("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return y}}(),V=function(){return function(){function C(n){if("object"===typeof n)for(var y=0,r=n.length;y<
r;y++)K_Components[n[y]]?u(n[y],K_Components[n[y]],document.getElementById("script_"+n[y])):C.load(n[y],"component/"+n[y]+"/"+location.search,u);else"string"===typeof n&&(K_Components[n[y]]?u(n,K_Components[n],document.getElementById("script_"+n)):C.load(n,"component/"+n+"/"+location.search,u))}var u=function(){},P=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});C.getUnknowns=function(n){var y=n.match(P);return y.map(function(n){return n.replace(/[<\/>]/g,"")}).filter(function(n,g){return document.createElement(n)instanceof
HTMLUnknownElement&&-1===y.indexOf(n,g+1)&&!K_Components[n]})};C.load=function(n,y,r){document.head.appendChild(function(g,n,y){var r=document.createElement("script");r.type="text/javascript";r.charset="utf-8";r.async=!0;r.src=n;r.id="script_"+g;r.onload=function(){y(g,K_Components[g],this)};return r}(n,y,r));return C};C.onLoad=function(n){if(void 0===n)return u;u="function"===typeof n?n:u;return C};return C}}(),W=function(C){return function(){function u(h){this.name=h.tagName.toLowerCase();this.template=
x[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=h;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;this.wrapper.innerHTML=this.template;this.fragment.appendChild(this.wrapper);this.maps=this.map(this.wrapper);this.wrapper.kb_maps=this.maps}function P(h,f,b,c,d,e,k,l){function p(c){var b="for"===f?J(c):[],d=this;this.key="for"!==f?E(c):b[0];this.filterNames=Q(c);this.component=
"for"===f?b[1]:void 0;this.id=0;this.isEvent=m;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:z("",!0)});this.__proto__.updateData=function(c){d.isConnected&&d._data&&("object"===typeof c&&c.value||(c={value:c}),"function"===typeof d._data.stopChange&&d._data.stopChange().set(d.key,c.value))};this.__proto__.updateDom=function(c){d.isSynced()&&(d.element.stopChange(),
"object"===typeof c&&c.value||(c={value:c}),d.value=c.value)};this.__proto__.updateLoop=function(){d.kb_loop&&d.loop(d.kb_loop)}}var m="attribute"===f&&-1!==v.indexOf(k.name)||"component"===f&&k.name&&-1!==v.indexOf(k.name);m&&l.stopChange().removeAttribute(k.name);Object.defineProperties(p.prototype,{valget:z(n),valset:z(y),refresh:z(N),connect:z(L),deleteMap:z(K),loop:z(O),unsync:z(H),isSynced:z(r),type:z(f),text:z(b,!0),bindText:z(c,!0),bindNames:z("for"===f?[J(c[0])[0]]:M(c),!0),bindListener:z(m?
d.toLowerCase():d),bindProperty:z(m?k.name.toLowerCase():e),bindTarget:z(k,!0),element:z(l,!0),_data:z({},!0),filters:z({},!0),maps:z(h,!0),loop:z(O)});return p}function n(){return this._value}function y(h){this._value=this.isSynced()?h:this._value;this.refresh()}function r(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function g(h,f){function b(c,b){return b.reduce(function(b,d){return b+("string"===typeof d?d:0===d.filterNames.length?d._value:d.filterNames.reduce(function(b,
d){if(void 0!==c.filters){if(void 0!==c.filters[d])return c.filters[d](b);console.warn("there is no filter by the name %o in the data model filters %o",d,Object.keys(c.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},d._value))},"")}return 1===f.length?"string"===typeof f[0]._value?b(h,f):f[0]._value:b(h,f)}function N(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===
this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=g(this,this.bindText)):this.bindTarget[this.bindProperty]=g(this,this.bindText));return this}function L(h){this._data=h;this.filters=void 0!==h.filters?h.filters:this.filters;h=0;for(var f=this.bindNames.length;h<f;h++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[h])||(console.warn("No property by the name %o exists on this data set %o",
this.bindNames[h],this._data),this._data.add(this.bindNames[h],this._value)),this.value=this._data.get(this.bindNames[h]),"component"!==this.type&&(this.isConnected=!0,this._data.removeDataUpdateListener(this.bindNames[h],this.updateDom).addDataUpdateListener(this.bindNames[h],this.updateDom),"for"===this.type&&this._value.addActionListener&&this._value.removeDataUpdateListener("*",this.updateLoop).addDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).addDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop).addDataDeleteListener(this.updateLoop)));
1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function O(h){this.kb_loop=h;this.element.stopChange().innerHTML="";for(var f=this._value,b=0,c=this.filterNames.length;b<c;b++)f=this.filters[this.filterNames[b]](f);f=0;for(b=this._value.length;f<b;f++)c=document.createElement(this.component),c.k_post=this._value[f],c.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(c),
"function"===typeof h&&h(c)}function K(){this.maps[this.key].splice(this.id,1);return this}function H(){for(var h=0,f=this.bindNames.length;h<f;h++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[h],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=
this.bindNames=this.filters=this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function w(h){return h.split(new RegExp("("+A.split("").join("\\")+")(.*?)("+B.split("").join("\\")+")","g")).map(function(f,b,c){return c[b-1]===A?A+f+B:f}).filter(function(f,b,c){return 0!==f.length&&f!==A&&f!==B&&0!==f.length})}
function M(h){return h.filter(function(f){return-1!==f.indexOf(A)&&-1!==f.indexOf(B)}).map(function(f){return E(f)})}function E(h){return h.replace(new RegExp("["+A+B+"]","g"),"").replace(new RegExp("\\"+I.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function Q(h){return-1!==h.indexOf(I)?h.replace(new RegExp("["+B+"]","g"),"").replace(new RegExp("(.*?)(\\"+I.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function J(h){return-1!==h.indexOf("for")?h.replace(new RegExp("["+A+B+"]",
"g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(f){return 0!==f.length}):[]}function z(h,f,b){return{value:h,writable:!!f,enumerable:!1,configurable:!!b}}function t(h,f){for(var b=F[h],c=0,d=b.length;c<d&&(b[c](f),f._stopPropogation);c++);return f._preventDefault}function D(h){var f=h.match(G).map(function(b){return b.replace(/[<\/>]/g,"")});f.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===f.indexOf(b,c+1)&&void 0===x[b]});
0!==f.length&&t("unknown",new Event("unknown",f));return f}var x={},G=/(<\/.*?>)/g;C().call();var v=Object.keys(HTMLElement.prototype).filter(function(h){return 0===h.indexOf("on")}),A="{{",B="}}",I="|",F={unknown:[]};u.prototype.map=function(h){function f(c){for(var d=0,e=c.length;d<e;d++)if(void 0===c[d].kb_maps){c[d].kb_mapper=h;if(3===c[d].nodeType){var k=c[d],l=b,p=k.textContent,m=k.parentElement instanceof HTMLUnknownElement;if(p.match(new RegExp("(\\"+A.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+
")","g")))for(var q=m?"component":-1!==p.indexOf("for")&&void 0!==p.indexOf("loop")?"for":"text",k=P(l,q,p,w(p),m?"":"textContent","textContent",k,k.parentElement),p=0,m=k.prototype.bindText.length;p<m;p++)0===k.prototype.bindText[p].indexOf(A)&&(q=new k(k.prototype.bindText[p]),k.prototype.bindText[p]=q,void 0===l[q.key]&&(l[q.key]=[]),q.id=l[q.key].length,l[q.key].push(q))}else for(var l=c[d],k=b,p=l.attributes,m=l instanceof HTMLUnknownElement,q=0,g=p.length;q<g;q++)if(p[q].value.match(new RegExp("(\\"+
A.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+")","g")))for(var R=P(k,m?"component":"attribute",p[q].value,w(p[q].value),m?"":p[q].name,"value",p[q],l),t=0,n=R.prototype.bindText.length;t<n;t++)if(0===R.prototype.bindText[t].indexOf(A)){var v=new R(R.prototype.bindText[t]);R.prototype.bindText[t]=v;void 0===k[v.key]&&(k[v.key]=[]);k[v.key].push(v)}c[d].childNodes&&0!==c[d].childNodes.length&&f(c[d].childNodes)}}var b={};f(h.childNodes);return b};u.prototype.addFilter=function(h,f){void 0!==
this.maps[h]&&this.maps[h].forEach(function(b){b.filters.push(f);b.refresh()});return this};u.prototype.removeFilter=function(h,f){void 0!==this.maps[h]&&this.maps[h].forEach(function(b){b.filters.splice(this.maps[h].filters.indexOf(f),1);b.refresh()});return this};u.prototype.swapFilter=function(h,f,b){void 0!==this.maps[h]&&this.maps[h].forEach(function(c){c.filters.splice(this.maps[h].filters.indexOf(f),1,b);c.refresh()});return this};Object.defineProperties(u,{startChars:z(function(h){if(void 0===
h)return A;A="string"===typeof h?h:A;return this}),endChars:z(function(h){if(void 0===h)return B;B="string"===typeof h?h:B;return this}),pipeChars:z(function(h){if(void 0===h)return I;I="string"===typeof h?h:I;return this}),getUnknown:z(D),isRegistered:z(function(h){return void 0!==x[h]}),register:z(function(h,f){void 0===x[h]?(x[h]=f,D(f)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",h);return this}),addEventListener:z(function(h,f){void 0!==F[h]?
F[h].push(f):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",h);return this}),removeEventListener:z(function(h,f){if(void 0!==F[h])for(var b=0,c=F[h].length;b<c;b++)F[h][b].toString()===f.toString()&&F[h].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",h);return this})});return u}}(function(){function C(){function u(c,b){var e=c.length,k;for(k=0;k<e&&(c[k](b),void 0===b._stopPropogation);k++);
}function C(c,b){var e=c.length,k;for(k=0;k<e&&(b.child=b.target,b.target=c[k].parent,c[k].func(b),void 0===b._stopPropogation);k++);}function n(c,b){for(var e=c.length;0<e;h++)if(c[h].toString()===b.toString())return!0;return!1}function y(c,b,e,k,l,f,m,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=e;this.oldValue=k;this.target=c;this.attr=b;this.arguments=l;this.action=f;this.child=void 0;this.type=m;this.stopChange=
q}function r(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function g(c,b,e,k){var l=c.get,f=c.set,m;return function(c){m=l.call(this);e(this,b,c,m,void 0,this._stopChange)&&f.call(this,c);this._stopChange||k(this,b,c,m);this._stopChange=void 0}}function N(c,b,e,k){var l;return function(f){l=
c.value;e(this,b,f,l,arguments,this._stopChange)&&(c.value=f);this._stopChange||k(this,b,f,l,arguments);this._stopChange=void 0}}function L(c,b,e,k){var l=c.value,f;return function(){e(this,b,null,null,arguments,this._stopChange)&&(f=l.apply(this,arguments));this._stopChange||k(this,b,null,null,arguments,f);this._stopChange=void 0;return f}}function O(c,b,e,k,l){var f=l.style,m=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,h;return{get:function(){return h},set:function(c){q=h;e(l,b,c,
q,void 0,this._stopChange)&&(h=c,f.setProperty(m,c));this._stopChange||k(l,b,c,q);this._stopChange=void 0},enumerable:!0,configurable:!0}}function K(c,b,e,k){if("function"!==typeof b)return t;var l=-1!==["value","checked"].indexOf(c),f=-1!==I.indexOf(c),m;if(this.toString()!==t.toString())if(e){var q=this.querySelectorAll("*");e=q.length;for(var h,g=0;g<e;g++){h=q[g].attrListeners();if(l||"*"===c)void 0!==q[g].addInputBinding&&q[g].addInputBinding(),void 0!==q[g].addInputBoxBinding&&q[g].addInputBoxBinding();
if(f)t.injectStyleProperty(q[g],c),m=k?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){m=k?"_parentStyleUpdateListeners":"_parentStyleListeners";e=I.length;for(var n=0;n<e;n++)t.injectStyleProperty(q[g],I[n]);void 0===h[m]["*"]&&(h[m]["*"]=[]);h[m]["*"].push({parent:this,func:b})}m=k?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===h[m][c]&&(h[m][c]=[]);h[m][c].push({parent:this,func:b})}}else{h=this.attrListeners();if(f)m=k?"_styleUpdateListeners":"_styleListeners",
t.injectStyleProperty(this,c);else{if(l||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){m=k?"_styleUpdateListeners":"_styleListeners";e=I.length;for(g=0;g<e;g++)t.injectStyleProperty(this,I[g]);void 0===h[m][c]&&(h[m][c]=[]);h[m][c].push(b)}m=k?"_attrUpdateListeners":"_attrListeners"}void 0===h[m][c]&&(h[m][c]=[]);h[m][c].push(b)}else{if(l||"*"===c)for(n=document.querySelectorAll("input, textarea"),e=n.length,g=
0;g<e;g++)void 0!==n[g].addInputBinding&&n[g].addInputBinding(),void 0!==n[g].addInputBoxBinding&&n[g].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=f.length+1;f.unshift(document.body);for(g=0;g<e;g++)t.injectStyleProperty(f[g],c);m=k?v:G}else{if("*"===c){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));e=f.length+1;l=I.length;f.unshift(document.body);for(g=0;g<e;g++)for(n=0;n<l;n++)t.injectStyleProperty(f[g],I[n]);m=k?v:G;void 0===
m[c]&&(m[c]=[]);m[c].push(b)}m=k?x:D}void 0===m[c]&&(m[c]=[]);m[c].push(b)}}function H(c,b,e,k){function f(c,e){var k=e[c],l=k.length;for(m=0;m<l;m++)k[m].toString()===b.toString()&&k.splice(m,1)}if("function"!==typeof b)return t;["value","checked"].indexOf(c);var h=-1!==I.indexOf(c),m;if(this.toString()!==t.toString())if(e){e=this.querySelectorAll("*");var q=e.length;h?(h=k?"_childStyleUpdateListeners":"_childStyleListeners",f(c,this.attrListeners()[h]),h=k?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===c&&(h=k?"_childStyleUpdateListeners":"_childStyleListeners",f(c,this.attrListeners()[h])),h=k?"_childAttrUpdateListeners":"_childAttrListeners",f(c,this.attrListeners()[h]),h=k?"_parentAttrUpdateListeners":"_parentAttrListeners");for(m=0;m<q;m++){for(var g=e[m].attrListeners()[h][c],n=g.length,w=0;w<n;w++)g[w].isEqualNode(this)&&g.slice(w,1);if("*"===c)for(listenersStyle=k?"_parentStyleUpdateListeners":"_parentStyleListeners",g=e[m].attrListeners()[h][c],n=g.length,w=0;w<n;w++)g[w].isEqualNode(this)&&
g.slice(w,1)}}else h?h=k?"_styleUpdateListeners":"_styleListeners":("*"===c&&(h=k?"_styleUpdateListeners":"_styleListeners",f(c,this.attrListeners()[h])),h=k?"_attrUpdateListeners":"_attrListeners"),f(c,this.attrListeners()[h]);else h?h=k?v:G:("*"===c&&(h=k?v:G,f(c,h)),h=k?x:D),f(c,h)}function w(c,b){t.addAttrListener.call(this,c,b,!0);return this}function M(c,b){t.addAttrUpdateListener.call(this,c,b,!0);return this}function E(c,b){t.removeAttrListener.call(this,c,b,!0);return this}function Q(c,b){t.removeAttrUpdateListener.call(this,
c,b,!0);return this}function J(c,b,e){var k=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(c){case "attr":if(n(k._attrListeners[b],e))return!0;break;case "attrupdate":if(n(k._attrUpdateListeners[b],e))return!0}return!1}function z(){this._stopChange=!0;return this}function t(){function c(c,b){var d,e=b.length;for(d=0;d<e;d++)-1===c.indexOf(b[d])&&c.push(b[d]);return c}function d(c,b){for(var d=Object.keys(c),e,k,f=0,l=d.length;f<l;f++)if(e=d[f],void 0===b[e])b[e]=
c[e].slice();else for(var h=0,g=c[e].length;h<g;h++)k=c[e][h],b[e].push(k)}function e(b){if(3!==b.target.nodeType&&8!==b.target.nodeType){var e=b.target.attrListeners(),k,f=["value","checked"],l=e._attrListeners,h=e._attrUpdateListeners,g=e._parentAttrListeners;k=e._parentAttrUpdateListeners;var m=!1;if(void 0!==D["*"]||void 0!==x["*"])m=!0;if(!0!==m&&void 0!==l["*"]||void 0!==h["*"]||void 0!==g["*"]||void 0!==k["*"])m=!0;if(!0!==m)for(var p=0;p<f.length;p++)if(void 0!==D[f[p]]||void 0!==x[f[p]]||
void 0!==l[f[p]]||void 0!==h[f[p]]||void 0!==g[f[p]]||void 0!==k[f[p]]){m=!0;break}k=m;f=Object.keys(G);l=Object.keys(v);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);h=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);g=[];if(0!==f.length||0!==l.length)g=c(g,f),g=c(g,l);if(0!==g.length&&0!==h.length||0!==e.length)g=c(g,h),g=c(g,e);-1!==g.indexOf("*")&&(g=I);var e=g,f=e.length,n,w,l=[],B,h="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,
g=b.target;void 0!==h&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);if(k){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(l=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||l.unshift(b.arguments[0])):l=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));B=l.length;for(var r=0;r<B;r++)void 0!==l[r].addInputBinding&&
l[r].addInputBinding(),void 0!==l[r].addInputBoxBinding&&l[r].addInputBoxBinding()}"appendChild"===b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(l=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),l.unshift(b.arguments[0])):l=Array.prototype.slice.call(b.target.querySelectorAll("*"));k=b.target.__kb._parentAttrListeners;m=b.target.__kb._parentAttrUpdateListeners;p=b.target.__kb._parentStyleListeners;n=b.target.__kb._parentStyleUpdateListeners;B=l.length;
for(r=0;r<B;r++){if(0!==f)for(w=0;w<f;w++)t.injectStyleProperty(l[r],e[w]);w=l[r].attrListeners();d(k,w._parentAttrListeners);d(m,w._parentAttrUpdateListeners);d(p,w._parentStyleListeners);d(n,w._parentStyleUpdateListeners)}void 0!==h&&(b.attr=h,b.target=g,b.arguments=[])}}function k(c){var b=c.target.attributes[c.arguments[0]],d="setAttribute"===c.attr?c.arguments[1]:"";h(c.target,c.arguments[0],d,void 0!==b?b.value:"",[d])||c.preventDefault()}function l(c){var b=c.target.attributes[c.arguments[0]],
d="setAttribute"===c.attr?c.arguments[1]:"";g(c.target,c.arguments[0],d,void 0!==b?b.value:"",[d])}t.injectPrototypes(Node,"Node");t.injectPrototypes(Element,"Element");t.injectPrototypes(HTMLElement,"HTMLElement");t.injectPrototypes(HTMLInputElement,"HTMLInputElement");t.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");t.injectPrototypes(Document,"Document");var h=f,g=b;t.addAttrUpdateListener("appendChild",e);t.addAttrUpdateListener("removeChild",e);t.addAttrUpdateListener("innerHTML",
e);t.addAttrUpdateListener("outerHTML",e);t.addAttrUpdateListener("innerText",e);t.addAttrUpdateListener("outerText",e);t.addAttrUpdateListener("textContent",e);t.addAttrListener("setAttribute",k);t.addAttrListener("removeAttribute",k);t.addAttrUpdateListener("setAttribute",l);t.addAttrUpdateListener("removeAttribute",l);return t}var D={},x={},G={},v={},A={},B="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),I=Object.getOwnPropertyNames(document.body.style),
F=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener","removeEventListener"]),h,f=function(c,b,e,k,f,h){e=new y(c,b,e,k,f,void 0,"set",h);void 0!==c.__kb&&(k=c.__kb._attrListeners,f=c.__kb._styleListeners,h=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==k[b]&&u(k[b],e),void 0===e._stopPropogation&&void 0!==f[b]&&u(f[b],e),void 0===e._stopPropogation&&void 0!==k["*"]&&(u(k["*"],e),void 0===e._stopPropogation&&u(f["*"],e)),
void 0===e._stopPropogation&&void 0!==h[b]&&C(h[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&C(c[b],e),void 0===e._stopPropogation&&void 0!==h["*"]&&(C(h["*"],e),void 0===e._stopPropogation&&C(c["*"],e)));void 0===e._stopPropogation&&void 0!==D[b]&&u(D[b],e);void 0===e._stopPropogation&&void 0!==G[b]&&u(G[b],e);void 0===e._stopPropogation&&void 0!==D["*"]&&(u(D["*"],e),void 0===e._stopPropogation&&u(G["*"],e));return void 0!==e._preventDefault?!1:!0},b=function(c,b,e,f,l,h){e=new y(c,b,e,f,l,
h,"update");void 0!==c.__kb&&(f=c.__kb._attrUpdateListeners,l=c.__kb._styleUpdateListeners,h=c.__kb._parentAttrUpdateListeners,c=c.__kb._parentStyleUpdateListeners,void 0!==f[b]&&u(f[b],e),void 0===e._stopPropogation&&void 0!==l[b]&&u(l[b],e),void 0===e._stopPropogation&&void 0!==f["*"]&&(u(f["*"],e),void 0===e._stopPropogation&&u(l["*"],e)),void 0===e._stopPropogation&&void 0!==h[b]&&C(h[b],e),void 0===e._stopPropogation&&void 0!==c[b]&&C(c[b],e),void 0===e._stopPropogation&&void 0!==h["*"]&&(C(h["*"],
e),void 0===e._stopPropogation&&C(c["*"],e)));void 0===e._stopPropogation&&void 0!==x[b]&&u(x[b],e);void 0===e._stopPropogation&&void 0!==v[b]&&u(v[b],e);void 0===e._stopPropogation&&void 0!==x["*"]&&(u(x["*"],e),void 0===e._stopPropogation&&u(v["*"],e));return void 0!==e._preventDefault?!1:!0};t.injectPrototypeProperty=function(c,d,e,k,h){var p=c.prototype,m=Object.getOwnPropertyDescriptor(p,d);e=e||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var q=A[e];k=k||f;h=h||b;void 0===p.attrListeners&&
(p={},p.attrListeners=function(){void 0===this.__kb&&(this.__kb=new r);return this.__kb}.bind(p),p.addAttrListener=t.addAttrListener,p.addAttrUpdateListener=t.addAttrUpdateListener,p.addChildAttrListener=w,p.addChildAttrUpdateListener=M,p.hasListener=J,p.removeAttrListener=t.removeAttrListener,p.removeAttrUpdateListener=t.removeAttrUpdateListener,p.removeChildAttrListener=E,p.removeChildAttrUpdateListener=Q,p.stopChange=z);void 0===q&&(A[e]={obj:c,proto:p,descriptors:{},set:void 0,update:void 0},
q=A[e],q.set=k,q.update=h);void 0===q.descriptors[d]&&(q.descriptors[d]=m);m.configurable&&(void 0!==m.set?Object.defineProperty(p,d,{get:m.get,set:g(m,d,k,h),enumerable:!0,configurable:!0}):"function"===typeof m.value?Object.defineProperty(p,d,{value:L(m,d,k,h),writable:!0,enumerable:!0,configurable:!0}):void 0!==m.value&&Object.defineProperty(p,d,{get:function(){return m.value},set:N(m,d,k,h),enumerable:!0,configurable:!0}));return t};t.injectStyleProperty=function(c,d,e,k){var h=c.style,g=Object.getOwnPropertyDescriptor(h,
d),m=c.attrListeners().injectedStyle;e=e||f;k=k||b;void 0===m&&(c.attrListeners().injectedStyle={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=e,c.attrListeners().injectedStyle.update=k,m=c.attrListeners().injectedStyle);void 0===m.descriptors[d]&&(m.descriptors[d]=g);g.configurable&&Object.defineProperty(h,d,O(g,d,e,k,c));return t};t.injectPrototypes=function(c,d,e,k){var h=c.prototype;d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=
A[d],m=Object.getOwnPropertyNames(h);e=e||f;k=k||b;var q;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new r);return this.__kb},h.addAttrListener=t.addAttrListener,h.addAttrUpdateListener=t.addAttrUpdateListener,h.addChildAttrListener=w,h.addChildAttrUpdateListener=M,h.removeAttrListener=t.removeAttrListener,h.removeAttrUpdateListener=t.removeAttrUpdateListener,h.removeChildAttrListener=E,h.removeChildAttrUpdateListener=Q,h.hasListener=J,h.stopChange=z);void 0===
g&&(A[d]={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},g=A[d],g.set=e,g.update=k);q=A[d].descriptors;for(k=0;k<m.length;k+=1)void 0===q[m[k]]&&t.injectPrototypeProperty(c,m[k],d,e,b);if(-1!==m.indexOf("value")){var n=function(c){var b,d,e;if("checkbox"===this.type||"radio"===this.type)b=!0;d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){e=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(g.set(this,
"checked",this.checked,d)?g.update(this,"checked",this.checked,d):q.checked.set.call(this,d));this.value=e;g.set(this,"value",this.value,d)?g.update(this,"value",this.checked,d):q.value.set.call(this,d)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",n)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",n)};h.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;
this.removeEventListener("mouseup",n)};h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",n)}}return t};t.addAttrListener=function(b,d,e){if("html"===b){b=0;for(var f=B.length;b<f;b++)K.call(this,B[b],d,e,!1)}else if("events"===b)for(b=0,f=F.length;b<f;b++)K.call(this,F[b],d,e,!1);else K.call(this,b,d,e,!1);return this};t.addAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var f=B.length;b<f;b++)K.call(this,B[b],d,e,!0)}else if("events"===
b)for(b=0,f=F.length;b<f;b++)K.call(this,F[b],d,e,!0);else K.call(this,b,d,e,!0);return this};t.removeAttrListener=function(b,d,e){if("html"===b){b=0;for(var f=B.length;b<f;b++)H.call(this,B[b],d,e,!1)}else if("events"===b)for(b=0,f=F.length;b<f;b++)H.call(this,F[b],d,e,!1);else H.call(this,b,d,e,!1);return this};t.removeAttrUpdateListener=function(b,d,e){if("html"===b){b=0;for(var f=B.length;b<f;b++)H.call(this,B[b],d,e,!0)}else if("events"===b)for(b=0,f=F.length;b<f;b++)H.call(this,F[b],d,e,!0);
else H.call(this,b,d,e,!0);return this};t.hasListener=function(b,d,e){"html"===d&&(d="innerHTML");"events"===d&&(d="onclick");switch(b){case "attr":if(n(D[d],e))return!0;break;case "attrupdate":if(n(x[d],e))return!0}return!1};t.injectedPrototypes=function(){return A};return t}"function"===typeof define&&define.amd&&define("KB",C);return C}()),T=function(C,u,P){return function(){function n(w,M,E,u){function C(g,n,w,h,f){for(var b=N({},g),c=0,d=Object.keys(n.prototype),e=d.length;c<e;c++)b.__proto__[d[c]]=
n.prototype[d[c]];c=0;d=Object.keys(h);for(e=d.length;c<e;c++)b.set(d[c],h[d[c]]);if(h.pointers)for(c=0,d=Object.keys(h.pointers),e=d.length;c<e;c++)b.addPointer(h.pointers[d[c]],d[c]);n.apply(b,w);c=0;d=Object.keys(f);for(e=d.length;c<e;c++)b.set(d[c],f[d[c]]);if(f.pointers)for(c=0,d=Object.keys(f.pointers),e=d.length;c<e;c++)b.addPointer(f.pointers[d[c]],d[c]);if(b.sessionStorage){if(n=sessionStorage.getItem(b.id||g))for(n=JSON.parse(n),c=0,d=Object.keys(n),e=d.length;c<e;c++)b.set(d[c],n[d[c]]);
else sessionStorage.setItem(b.id||g,b.stringify());b.addChildDataUpdateListener("*",function(){sessionStorage.setItem(b.id||g,b.stringify())})}if(b.localStorage){if(n=localStorage.getItem(b.id||g))for(n=JSON.parse(n),c=0,d=Object.keys(n),e=d.length;c<e;c++)b.set(d[c],n[d[c]]);else localStorage.setItem(b.id||g,b.stringify());b.addChildDataUpdateListener("*",function(){localStorage.setItem(b.id||g,b.stringify())})}b.store&&O.set(b.id||g,b);return b}function z(w,t,r){w.kb_viewmodel=r;Object.keys(t).forEach(function(h){t[h].forEach(function(f){switch(f.type){case "for":f.connect(r);
L.isRegistered(f.component)?f.loop(function(b){n(b)}):(n.loadWaitList(f.component,function(b,c){f.loop(function(b){n(b)})}),n.loadWaitList(f.component).loading||(n.loadWaitList(f.component).loading=!0,g(f.component)));break;case "component":f.connect(r).deleteMap();break;default:f.connect(r)}})})}function t(g,w){x=new L(w);Object.defineProperty(x.wrapper,"__kbcomponenttree",r(w.kb_mapper?w.kb_mapper.__kbcomponenttree:[]));w.parentElement.replaceChild(x.fragment,w);M.unshift(x.wrapper);z(x.wrapper,
x.maps,C(g,K[g],M,v,A));if(-1===x.wrapper.__kbcomponenttree.indexOf(g)||x.wrapper.kb_viewmodel.multiple){x.wrapper.__kbcomponenttree.push(g);for(var t=x.wrapper.querySelectorAll("*"),h=0,f=t.length;h<f;h++)t[h]instanceof HTMLUnknownElement&&n(t[h])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
g),console.error("Recursive Component %o on %o",x.wrapper,x.wrapper.parentElement),x.wrapper.parentElement.removeChild(x.wrapper)}var D=w.tagName.toLowerCase(),x,G=Object.keys(HTMLElement.prototype).filter(function(g){return 0===g.indexOf("on")}),v={},A={};void 0===M&&(M=[]);E&&y(E,v);Object.defineProperty(v,"id",r(v.id||D+"-"+Date.now(),!0));Object.defineProperty(v,"filters",r(v.filters||{}));"string"===typeof v.sessionStorage&&(v.sessionStorage="true"===v.sessionStorage);Object.defineProperty(v,
"sessionStorage",r(void 0!==v.sessionStorage?v.sessionStorage:!1,!0));"string"===typeof v.localStorage&&(v.localStorage="true"===v.localStorage);Object.defineProperty(v,"localStorage",r(void 0!==v.localStorage?v.localStorage:!1,!0));"string"===typeof v.store&&(v.store="true"===v.store);Object.defineProperty(v,"store",r(void 0!==v.store?v.store:!1,!0));"string"===typeof v.multiple&&(v.multiple="true"===v.multiple);Object.defineProperty(v,"multiple",r(void 0!==v.multiple?v.multiple:!1,!0));u&&y(u,A);
A.innerHTML=w.innerHTML.toString();E=0;for(u=w.attributes.length;E<u;E++)A[w.attributes[E].name]=w.attributes[E].value;E=0;for(u=G.length;E<u;E++)w[G[E]]&&(A[G[E]]=w[G[E]]);w.k_post&&y(w.k_post,A);L.isRegistered(D)?t(D,w):(n.loadWaitList(D,function(g,n){t(D,w)}),n.loadWaitList(D).loading||(n.loadWaitList(D).loading=!0,g(D)))}function y(g,n){var r=Object.keys(g);n.pointers||(n.pointers={});for(var u=0,y=r.length;u<y;u++)g.isObservable(r[u])?n.pointers[r[u]]=g:g[r[u]].isMixed()?n.pointers[r[u]]=g[r[u]].__kbImmediateParent:
n[r[u]]=g[r[u]]}function r(g,n,r){return{value:g,writable:!!n,enumerable:!1,configurable:!!r}}window.K_Components||(window.K_Components={});var g=u().onLoad(function(g,r){var u="<style>"+unescape(r.prototype.k_css)+"</style>"+unescape(r.prototype.k_html);n.register(g,r,u,r.prototype.cms);n.loadWaitList(g).forEach(function(n){n(g,r)});n.loadWaitList(g,"clear")}),N=C(),L=P(),O=N({},"Model"),K={};(function(){return window.location.search.replace("?","").split("&").filter(function(g){return 0!==g.length}).reduce(function(g,
n){g[n.split("=")[0]]=n.split("=")[1];return g},{})})();var H={};n.register=function(g,r,u,y){L.register(g,u);K[g]=r;return n};n.loadWaitList=function(g,r){if("undefined"===typeof r&&g)return H[g];if(g){if(void 0===H[g]||"clear"===r){var u=void 0===H[g]?!1:!!H[g].loading;H[g]=[];H[g].loading=u}"function"===typeof r&&H[g].push(r)}return n};return n}}(U,V,W);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return T}):"undefined"!==
typeof module&&(module.exports=T);return T}();
