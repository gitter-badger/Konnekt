var Konnekt=function(){var S=function(){return function(D,A,Q,r){function w(b,c,e,d){b=void 0===b?{}:b;var f={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var k=new Proxy(f,{set:M,deleteProperty:z}),t=Object.keys(b,"all");Object.defineProperties(f,{__kbname:h("string"===typeof c?c:"default",!0,!0),__kbref:h(e?e.__kbref||e:k,!0,!0),__kbscopeString:h(d||"",!0,!0),__kbImmediateParent:h(e||
null,!0,!0),__kbsubscribers:h({}),__kblisteners:h({}),__kbupdatelisteners:h({}),__kbparentlisteners:h({}),__kbparentupdatelisteners:h({}),__kbcreatelisteners:h([]),__kbdeletelisteners:h([]),__kbparentcreatelisteners:h([]),__kbparentdeletelisteners:h([]),__kbpointers:h({}),__kbevents:h(u),length:h(0,!0),__kbnonproxy:h(f,!1,!0),_stopChange:h(!1,!0)});c=0;for(e=t.length;c<e;c++)k[t[c]]=b[t[c]];f.__proto__=w.prototype;f.__kbevents.addlistener=[];f.__kbevents.removelistener=[];f.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return k}function v(b,c,e,d,f,k,t,m){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=k;this.type=this.event=e;this.listener=t;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=d;this.oldValue=f;this.stopChange=m}function h(b,c,e){return{value:b,writable:!!c,enumerable:!1,configurable:!!e}}function O(b,c,e){return{get:function(){return b.call(this)},set:function(e){c&&(b=e)},enumerable:!1,configurable:!!e}}function K(b,c){var e=c,d=c;return{get:function(){return e},
set:function(c){var k=new v(this,b,"set",c,e,arguments,"__kblisteners",this._stopChange);!0!==g(k)&&(d=e,e=c,k.stopChange||(k.listener="__kbupdatelisteners",k.type="postset",g(k)),this._stopChange||this.callSubscribers(b,e,d));this._stopChange=!1},configurable:!0,enumerable:!0}}function P(b,c,e){return{get:function(){return b[c]},set:function(e){(this._stopChange?b.stopChange():b)[c]=e;this._stopChange=!1},enumerable:e.enumerable,configurable:e.configurable}}function L(b,c){for(var e=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],d=[],f,k=0,t=e.length;k<t;k++)if(f=b[e[k].listener],y.call(f))for(var d=Object.keys(f),m=0,q=d.length;m<q;m++)for(var g=0,l=f[d[m]].length;g<l;g++)c[e[k].method](d[m],f[d[m]][g]);else for(m=0,q=f.length;m<q;m++)c[e[k].method](f[m])}function G(b,c){var e=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],d=[],f;if(b[c].__kbImmediateParent)for(var k=0,t=e.length;k<t;k++){f=b[e[k].listener];for(var d=Object.keys(f),m=0,q=d.length;m<q;m++)if(c===d[k])for(var g=0,l=f[d[k]].length;g<l;g++)void 0===b[c].__kbImmediateParent[e[k].listener][c]&&(b[c].__kbImmediateParent[e[k].listener][c]=[]),b[c].__kbImmediateParent[e[k].listener][c].push(f[d[k]][g])}L(b,b[c])}function N(b,c,e,d){e=new w(e,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);L(b,e);if(d){d=new v(b,c,"create",e,void 0,[],"__kbcreatelisteners",b._stopChange);var f=g(d);!0!==f&&(Object.defineProperty(b,c,K(c,e)),d.listener="__kbupdatelisteners",d.type="postcreate",g(d))}else d=new v(b,c,"set",e,void 0,[],"__kblisteners",b._stopChange),f=g(d),!0!==f&&(Object.defineProperty(b,c,K(c,e)),d.listener="__kbupdatelisteners",d.type="postset",g(d));return!0!==f}function H(b,c,e,d){if(d){d=new v(b,c,"create",e,void 0,[],"__kbcreatelisteners",
b._stopChange);var f=g(d);if(!0!==f){var k=Object.getOwnPropertyDescriptor(e.__kbImmediateParent,c);Object.defineProperty(b,c,P(e.__kbImmediateParent,c,k));b.__kbpointers.push(c);G(b,c);d.listener="__kbupdatelisteners";d.type="postcreate";g(d)}return!0!==f}k=Object.getOwnPropertyDescriptor(e.__kbImmediateParent,c);Object.defineProperty(b,c,P(e.__kbImmediateParent,c,k));b.__kbpointers.push(c);G(b,c);return!0}function M(b,c,e){if(I.call(b,c)){if("length"===c)if(e>b.length&&void 0!==b[e-1])b.length=
e;else{if(e<b.length){c=e;for(var d=b.length;c<d;c++)b[c]&&delete b[c];b.length=e}}else{if("object"===typeof e)return N(b,c,e);if(e instanceof w)return H(b,c,e);b[c]=e}return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=e,!0;if(-1===E.indexOf(c)){if("object"===typeof e)return N(b,c,e,!0);if(e instanceof w)return H(b,c,e,!0);var d=new v(b,c,"create",e,void 0,[],"__kbcreatelisteners",b._stopChange),f=g(d);!0!==f&&(Object.defineProperty(b,
c,K(c,e)),d.listener="__kbupdatelisteners",d.type="postcreate",g(d));return!0!==f}}function z(b,c){var e=new v(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),d=g(e);!0!==d&&("object"===typeof b[c]&&(b[c]=null),delete b[c],e.listener="__kbupdatelisteners",e.type="postdelete",g(e));return!0!==d}function y(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===
typeof b?b:this[b]:this)}function n(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function p(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function I(b,c){if(this==Object.prototype&&void 0===
b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var e=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return e?void 0===e.value:!1}function C(b){return b.split(".")}function J(b,c){return function(e,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var f=this[c],k=new v(this,c,"addlistener",f,
void 0,arguments,"");"string"===typeof e&&1!==C(e).length&&(f=C(e),f.pop(),f.join("."),k.local=this.getLayer(f),f=k.local[c],k.value=f,e=C(e).pop());!0!==g(k)&&(y.call(f)?(void 0===f[e]&&(f[e]=[]),f[e].push(d),k.type="postaddlistener",g(k)):n.call(f)&&"function"===typeof e&&(f.push(e),k.type="postaddlistener",g(k)));return this}}function F(b,c){return function(e,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var f=this[c],k=new v(this,c,"removelistener",f,void 0,arguments,"");
"string"===typeof e&&1!==C(e).length&&(f=C(e),f.pop(),f.join("."),k.local=this.getLayer(f),f=k.local[c],k.value=f,e=C(e).pop());if(!0!==g(k))if(y.call(f)){if(void 0!==f[e])for(var t=0,m=f[e].length;t<m;t++)if(f[e][t].toString()===d.toString()){f[e].splice(t,1);k.type="postremovelistener";g(k);break}}else if(n.call(f)&&"function"===typeof e)for(t=0,m=f.length;t<m;t++)if(f[t].toString()===e.toString()){f.splice(t,1);k.type="postremovelistener";g(k);break}return this}}function x(b,c){function e(c,b,
k){var t=Object.keys(this,"all").filter(function(c){return p.call(this[c])}.bind(this)),m=this,q=c;"string"===typeof c&&1!==C(c).length&&(m=C(c),q=m.pop(),m.join("."),m=this.getLayer(m),void 0===m[k][c]&&(m[k][c]=[]),m[k][c].push(b));y.call(m[k])?(void 0===m[k][q]&&(m[k][q]=[]),m[k][q].push(b),void 0!==m.__kbpointers[q]&&(void 0===m.__kbpointers[q][q]&&(m.__kbpointers[q][q]=[]),m.__kbpointers[q][q].push(_func))):m[k].push(b);q=0;for(m=t.length;q<m;q++)e.call(this[t[q]],c,b,k)}return function(d,f){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var k=new v(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==g(k)&&(e.call(this,d,f,c),k.type="postaddchildlistener",g(k));return this}}function B(b,c){function e(c,b,k){var t=Object.keys(this,"all").filter(function(c){return p.call(this[c])}.bind(this)),m=this,q=c;if("string"===typeof c&&1!==C(c).length&&(m=C(c),q=m.pop(),m.join("."),m=this.getLayer(m),void 0!==m[k][c]))for(var g=0,l=m[k][c].length;g<l;g++)if(m[k][c][g].toString()===
b.toString()){m[k][c].splice(g,1);break}if(y.call(m[k])){if(void 0!==m[k][q]){g=0;for(l=m[k][q].length;g<l;g++)if(m[k][q][g].toString()===b.toString()){m[k][q].splice(g,1);break}if(-1!==m.__kbpointers.indexOf(q)&&void 0!==m[q].__kbImmediateParent[k][q])for(g=0,l=m[q].__kbImmediateParent[k][q].length;g<l;g++)if(m[q].__kbImmediateParent[k][q][g].toString()===b.toString()){m[q].__kbImmediateParent[k][q].splice(g,1);break}}}else for(g=0,l=m[k].length;g<l;g++)if(m[k][g].toString()===b.toString()){m[k].splice(g,
1);break}g=0;for(l=t.length;g<l;g++)e.call(this[t[g]],c,b,k)}return function(d,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=new v(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==g(k)&&(e.call(this,d,f,c),k.type="postremovechildlistener",g(k));return this}}var u={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],
reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},E=["__proto__"],l=function(b,c){if(!c._stopPropogration&&b)for(var e=0,d=b.length;e!==d&&(b[e](c),!c._stopPropogration);e++);},g=function(b){if(b.listener){var c=b.local[b.listener],e=b.local[b.listener.replace("__kb","__kbparent")];y.call(c)?(l(c[b.key],b),l(c["*"],b)):l(c,b);y.call(e)?
(l(e[b.key],b),l(e["*"],b)):l(e,b)}l(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof w?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,
10))})};Object.defineProperties(Object.prototype,{"typeof":h(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:h(function(b){function c(b){for(var f=Object.keys(b,"all"),k=0,t=void 0,g=0,q=f.length;g<q;g++)t=b[f[g]],"object"===typeof t&&void 0!==t&&null!==t?-1===e.indexOf(t)&&(e.push(t),k+=c(t)):"string"===typeof t?k+=2*t.length:"number"===typeof t?k+=8:"boolean"===typeof t?k+=4:"function"===typeof t&&(k+=2*t.toString().length),k+=2*f[g].length;return k}
if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var e=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:h(y,!1,!0),isArray:h(n,!1,!0),isMixed:h(p,!1,!0),isObservable:h(I,!1,!0),stringify:h(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,function(b,d){if(n(d)||y(d)){if(-1!==c.indexOf(d))return;c.push(d)}return d})},
!1,!0),getKeys:h(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:h(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==
c[b]})},!1,!0),keyCount:O(function(){return this.getKeys("o").length},!1,!0),indexCount:O(function(b){return this.length},!1,!0),count:O(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(w.prototype,{concat:h(Array.prototype.concat),every:h(Array.prototype.every),filter:h(Array.prototype.filter),find:h(Array.prototype.find),findIndex:h(Array.prototype.findIndex),forEach:h(Array.prototype.forEach),includes:h(Array.prototype.includes),indexOf:h(Array.prototype.indexOf),
join:h(Array.prototype.join),lastIndexOf:h(Array.prototype.lastIndexOf),map:h(Array.prototype.map),reduce:h(Array.prototype.reduce),reduceRight:h(Array.prototype.reduceRight),slice:h(Array.prototype.slice),some:h(Array.prototype.some),entries:h(Array.prototype.entries),toLocaleString:h(Array.prototype.toLocaleString),add:h(function(b,c){var e=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());"undefined"===e[b]&&(e[b]=c);return this}),set:h(function(b,c){var e=-1!==
b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());e[b]=c;return this}),get:h(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:h(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:h(function(b){var c=
-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:h(function(b,c){var e=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===e[b]?Object.defineProperty(e.__proto__,b,h(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,e);return this}),addPointer:h(function(b,c){b instanceof w||(b=new w(b,b.__kbname));var e=Object.getOwnPropertyDescriptor(b,
c);Object.defineProperty(this,c,P(b,c,e));this.__kbpointers[c]=b}),move:h(function(b,c){this[c]=b[c];b instanceof w||(b[c]=null);delete b[c];return this}),copy:h(function(b,c){this[c]=b[c];return this}),merge:h(function(b){function c(b,f){for(var k=b instanceof w?b.keys("o"):Object.keys(b),t,g=0,q=k.length;g<q;g++)t=b[k[g]],"object"===typeof t&&-1===e.indexOf(t)&&"undefined"!==f[k[g]]?c(t,f):f[k[g]]=t}var e=[];c(b,this);return this}),copyWithin:h(function(b,c,e){c=c||0;e=e||0;var d=new v(this,b,"copyWithin",
this[b],void 0,arguments,"");if(!0!==g(d)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;e=e<this.length?e:this.length-1;c=0>c?this.length-1:c;e=0>c?this.length-1:e;for(var f=c;f<=e;f++)this[b+(f-c)]=this[f];d.type="postcopyWithin";g(d)}return this}),fill:h(function(b,c,e){c=void 0!==c?Math.max(0,c):0;e=void 0!==e&&e<=this.length?Math.min(this.length,Math.max(0,e)):this.length;var d=new v(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==g(d)){for(var f=a.key;f<e;f++)this[f]=
b;d.type="postfill";g(d)}return this}),pop:h(function(){var b=new v(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==g(b)){var c=this[this.length-1];--this.length;b.type="postpop";g(b);return c}return null}),push:h(function(b){var c=new v(this,this.length,"push",b,void 0,arguments,"");!0!==g(c)&&(this[this.length]=b,c.type="postpush",g(c));return this.length}),reverse:h(function(){var b=new v(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==g(b)){for(var c=this.slice().reverse(),
e=0,d=this.length;e<d;e++)this[e]=c[e];b.type="postreverse";g(b)}return this}),shift:h(function(){var b=new v(this,0,"shift",this[0],void 0,arguments,"");if(!0!==g(b)){for(var c=a.key,e=this.length-1;c<e;c++)this[c]=this[c+1];--this.length;b.type="postshift";g(b)}return null}),sort:h(function(){var b=new v(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==g(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),e=0,d=this.length;e<d;e++)this[e]=c[e];b.type="postsort";g(b)}return this}),splice:h(function(b,
c,e){var d=new v(this,b,"splice",void 0,void 0,arguments,"");if(!0!==g(d)){var f=[],k=Array.prototype.slice.call(arguments,2),t=k.length-2,m=0;if(0!==c&&void 0!==this[b-1+c])for(var q=0,l=c;q<l;q++){f.push(this[b+q]);for(var h=b+q,p=this.length-1;h<p;h++)this[h]=this[h+1];delete this[this.length-1]}if(0!==t)for(q=0,l=t;q<l;q++){m=b+Math.min(1,q);h=this.length;for(p=m;h>p;h--)this[h]=this[h-1];this[m]=k[q]}d.type="postsplice";d.listener="";g(d);return f}return[]}),unshift:h(function(){var b=new v(this,
0,"unshift",this[0],void 0,arguments,"");if(!0!==g(b)){for(var c=Array.prototype.slice.call(arguments),e=this.length-1+c.length,d=c.length;-1!==e;e--)this[e]=e<d?c[e]:this[e-c.length];b.type="postunshift";g(b)}return this.length}),getLayer:h(function(b){function c(b){var d=b[0];return void 0===this[d]&&0!==b.length-1?null:p(this[d])?0!==b.length-1?(b.shift(),c.call(this[d],b)):this[d]:this}b=C(b);return c.call(this,b)}),setLayer:h(function(b){function c(b){var d=b[0];void 0===this[d]&&0!==b.length-
1&&(this[d]=w({},this.__kbname,this,this.__kbscopeString+"."+d));return p(this[d])?0!==b.length-1?(b.shift(),c.call(this[d],b)):this[d]:this}b=C(b);return c.call(this,b)}),ignoreCreate:h(function(b){-1===E.indexOf(b)&&E.push(b);return this}),addActionListener:h(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:h(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var e=0,d=this.__kbref.__kbevents[b];e<d;e++)if(this.__kbref.__kbevents[b][e].toString()===
c.toString()){this.__kbref.__kbevents[b].splice(e,1);break}return this}),subscribe:h(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:h(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var e=0,d=this.__kbsubscribers[b].length;e<d;e++)if(this.__kbsubscribers[b][e].toString()===c.toString()){this.__kbsubscribers[b].splice(e,1);break}return this}),callSubscribers:h(function(b,c,e){if(void 0!==this.__kbsubscribers[b])for(var d=
0,f=this.__kbsubscribers[b].length;d<f;d++)this.__kbsubscribers[b].call(this,b,c,e);return this}),stopChange:h(function(){this._stopChange=!0;return this})});Object.defineProperties(w.prototype,{addDataListener:h(J("addDataListener","__kblisteners")),removeDataListener:h(F("removeDataListener","__kblisteners")),addDataUpdateListener:h(J("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:h(F("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:h(J("addDataCreateListener",
"__kbcreatelisteners")),removeDataCreateListener:h(F("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:h(J("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:h(F("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:h(x("addChildDataListener","__kbparentlisteners")),removeChildDataListener:h(B("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:h(x("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:h(B("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:h(x("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:h(B("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:h(x("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:h(B("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return w}}(),T=function(){return function(){function D(r){if("object"===typeof r)for(var w=0,v=r.length;w<
v;w++)K_Components[r[w]]?A(r[w],K_Components[r[w]],document.getElementById("script_"+r[w])):D.load(r[w],"component/"+r[w]+"/"+location.search,A);else"string"===typeof r&&(K_Components[r[w]]?A(r,K_Components[r],document.getElementById("script_"+r)):D.load(r,"component/"+r+"/"+location.search,A))}var A=function(){},Q=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});D.getUnknowns=function(r){var w=r.match(Q);return w.map(function(r){return r.replace(/[<\/>]/g,"")}).filter(function(r,h){return document.createElement(r)instanceof
HTMLUnknownElement&&-1===w.indexOf(r,h+1)&&!K_Components[r]})};D.load=function(r,w,v){document.head.appendChild(function(h,r,v){var w=document.createElement("script");w.type="text/javascript";w.charset="utf-8";w.async=!0;w.src=r;w.id="script_"+h;w.onload=function(){v(h,K_Components[h],this)};return w}(r,w,v));return D};D.onLoad=function(r){if(void 0===r)return A;A="function"===typeof r?r:A;return D};return D}}(),U=function(D){return function(){function A(l,g){this.name=l.tagName.toLowerCase();this.template=
C[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=l;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;g||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);g||(this.maps=this.map(this.wrapper));g||(this.wrapper.kb_maps=this.maps)}function Q(l,g,b,c,e,d,f,k){function t(c){var b="for"===g?y(c):[],e=this;this.key="for"!==g?M(c):b[0];this.filterNames=
z(c);this.component="for"===g?b[1]:void 0;this.id=0;this.isEvent=m;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:n("",!0)});this.__proto__.updateData=function(c){if(e.isConnected&&e._data){if("object"!==typeof c||void 0===c.value)c={value:c};"function"===typeof e._data.stopChange&&e._data.stopChange().set(e.key,c.value)}};this.__proto__.updateDom=function(c){if(e.isSynced()){e.element.stopChange();
if("object"!==typeof c||void 0===c.value)c={value:c};e.value=c.value}};this.__proto__.updateLoop=function(){e.kb_loop&&e.loop(e.kb_loop)}}var m="attribute"===g&&-1!==F.indexOf(f.name)||"component"===g&&f.name&&-1!==F.indexOf(f.name);m&&k.stopChange().removeAttribute(f.name);Object.defineProperties(t.prototype,{valget:n(r),valset:n(w),refresh:n(O),connect:n(K),deleteMap:n(L),loop:n(P),unsync:n(G),isSynced:n(v),type:n(g),text:n(b,!0),bindText:n(c,!0),bindNames:n("for"===g?[y(c[0])[0]]:H(c),!0),bindListener:n(m?
e.toLowerCase():e),bindProperty:n(m?f.name.toLowerCase():d),bindTarget:n(f,!0),element:n(k,!0),_data:n({},!0),filters:n({},!0),maps:n(l,!0),loop:n(P)});return t}function r(){return this._value}function w(l){this._value=this.isSynced()?l:this._value;this.refresh()}function v(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function h(l,g){function b(c,b){return b.reduce(function(b,e){return b+("string"===typeof e?e:0===e.filterNames.length?e._value:e.filterNames.reduce(function(b,
e){if(void 0!==c.filters){if(void 0!==c.filters[e])return c.filters[e](b);console.warn("there is no filter by the name %o in the data model filters %o",e,Object.keys(c.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},e._value))},"")}return 1===g.length?"string"===typeof g[0]._value?b(l,g):g[0]._value:b(l,g)}function O(){"for"!==this.type&&(this.isEvent?this.element[this.bindProperty]=this.bindText[0]._value:"component"===
this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=h(this,this.bindText)):this.bindTarget[this.bindProperty]=h(this,this.bindText));return this}function K(l){this._data=l;this.filters=void 0!==l.filters?l.filters:this.filters;l=0;for(var g=this.bindNames.length;l<g;l++)this._data.addDataUpdateListener&&(this._data.exists(this.bindNames[l])||(console.warn("No property by the name %o exists on this data set %o",
this.bindNames[l],this._data),this._data.add(this.bindNames[l],this._value)),this.value=this._data.get(this.bindNames[l]),"component"!==this.type&&"for"!==this.type?(this.isConnected=!0,this._data.addDataUpdateListener(this.bindNames[l],this.updateDom)):"for"===this.type&&this._value.addDataUpdateListener&&this._value.addDataUpdateListener("*",this.updateLoop).addDataCreateListener(this.updateLoop).addDataDeleteListener(this.updateLoop));1!==this.bindText.length||"text"!==this.type&&"attribute"!==
this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function P(l){this.kb_loop=l;this.element.stopChange().innerHTML="";for(var g=this._value,b=0,c=this.filterNames.length;b<c;b++)g=this.filters[this.filterNames[b]](g);g=0;for(b=this._value.length;g<b;g++)c=document.createElement(this.component),c.k_post=this._value[g],c.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(c),"function"===typeof l&&
l(c)}function L(){this.maps[this.key].splice(this.id,1);return this}function G(){for(var l=0,g=this.bindNames.length;l<g;l++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[l],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps=this.bindNames=this.filters=
this._data=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;return!1}function N(l){return l.split(new RegExp("("+x.split("").join("\\")+")(.*?)("+B.split("").join("\\")+")","g")).map(function(g,b,c){return c[b-1]===x?x+g+B:g}).filter(function(g,b,c){return 0!==g.length&&g!==x&&g!==B&&0!==g.length})}function H(l){return l.filter(function(g){return-1!==
g.indexOf(x)&&-1!==g.indexOf(B)}).map(function(g){return M(g)})}function M(l){return l.replace(new RegExp("["+x+B+"]","g"),"").replace(new RegExp("\\"+u.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function z(l){return-1!==l.indexOf(u)?l.replace(new RegExp("["+B+"]","g"),"").replace(new RegExp("(.*?)(\\"+u.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function y(l){return-1!==l.indexOf("for")?l.replace(new RegExp("["+x+B+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(g){return 0!==
g.length}):[]}function n(l,g,b){return{value:l,writable:!!g,enumerable:!1,configurable:!!b}}function p(l,g){for(var b=E[l],c=0,e=b.length;c<e&&(b[c](g),g._stopPropogation);c++);return g._preventDefault}function I(l){var g=l.match(J).map(function(b){return b.replace(/[<\/>]/g,"")});g.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===g.indexOf(b,c+1)&&void 0===C[b]});0!==g.length&&p("unknown",new Event("unknown",g));return g}var C={},J=/(<\/.*?>)/g;D().call();
var F=Object.keys(HTMLElement.prototype).filter(function(l){return 0===l.indexOf("on")}),x="{{",B="}}",u="|",E={unknown:[]};A.prototype.map=function(l){function g(c){for(var e=0,d=c.length;e<d;e++)if(void 0===c[e].kb_maps&&8!==c[e].nodeType){c[e].kb_mapper=l;if(3===c[e].nodeType){var f=c[e],k=b,t=f.textContent,m=f.parentElement instanceof HTMLUnknownElement;if(t.match(new RegExp("(\\"+x.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+")","g")))for(var q=m?"component":-1!==t.indexOf("for")&&
void 0!==t.indexOf("loop")?"for":"text",f=Q(k,q,t,N(t),m?"":"textContent","textContent",f,f.parentElement),t=0,m=f.prototype.bindText.length;t<m;t++)0===f.prototype.bindText[t].indexOf(x)&&(q=new f(f.prototype.bindText[t]),f.prototype.bindText[t]=q,void 0===k[q.key]&&(k[q.key]=[]),q.id=k[q.key].length,k[q.key].push(q))}else for(var k=c[e],f=b,t=k.attributes,m=k instanceof HTMLUnknownElement,q=0,h=t.length;q<h;q++)if(t[q].value.match(new RegExp("(\\"+x.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+
")","g")))for(var p=Q(f,m?"component":"attribute",t[q].value,N(t[q].value),m?"":t[q].name,"value",t[q],k),n=0,r=p.prototype.bindText.length;n<r;n++)if(0===p.prototype.bindText[n].indexOf(x)){var z=new p(p.prototype.bindText[n]);p.prototype.bindText[n]=z;void 0===f[z.key]&&(f[z.key]=[]);f[z.key].push(z)}c[e].childNodes&&0!==c[e].childNodes.length&&g(c[e].childNodes)}}var b={};g(l.childNodes);return b};A.prototype.addFilter=function(l,g){void 0!==this.maps[l]&&this.maps[l].forEach(function(b){b.filters.push(g);
b.refresh()});return this};A.prototype.removeFilter=function(l,g){void 0!==this.maps[l]&&this.maps[l].forEach(function(b){b.filters.splice(this.maps[l].filters.indexOf(g),1);b.refresh()});return this};A.prototype.swapFilter=function(l,g,b){void 0!==this.maps[l]&&this.maps[l].forEach(function(c){c.filters.splice(this.maps[l].filters.indexOf(g),1,b);c.refresh()});return this};Object.defineProperties(A,{startChars:n(function(l){if(void 0===l)return x;x="string"===typeof l?l:x;return this}),endChars:n(function(l){if(void 0===
l)return B;B="string"===typeof l?l:B;return this}),pipeChars:n(function(l){if(void 0===l)return u;u="string"===typeof l?l:u;return this}),getUnknown:n(I),isRegistered:n(function(l){return void 0!==C[l]}),register:n(function(l,g){void 0===C[l]?(C[l]=g,I(g)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",l);return this}),addEventListener:n(function(l,g){void 0!==E[l]?E[l].push(g):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",
l);return this}),removeEventListener:n(function(l,g){if(void 0!==E[l])for(var b=0,c=E[l].length;b<c;b++)E[l][b].toString()===g.toString()&&E[l].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",l);return this})});return A}}(function(){function D(){function A(c,b){var d=c.length,f;for(f=0;f<d&&(c[f](b),void 0===b._stopPropogation);f++);}function D(c,b){var d=c.length,f;for(f=0;f<d&&(b.child=b.target,b.target=c[f].parent,c[f].func(b),void 0===
b._stopPropogation);f++);}function r(c,b){for(var d=c.length;0<d;l++)if(c[l].toString()===b.toString())return!0;return!1}function w(c,b,d,f,k,g,m,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=d;this.oldValue=f;this.target=c;this.attr=b;this.arguments=k;this.action=g;this.child=void 0;this.type=m;this.stopChange=q}function v(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners=
{};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function h(c,b,d,f){var k=c.get,g=c.set,m;return function(c){m=k.call(this);d(this,b,c,m,void 0,this._stopChange)&&g.call(this,c);this._stopChange||f(this,b,c,m);this._stopChange=void 0}}function O(c,b,d,f){var k;return function(g){k=c.value;d(this,b,g,k,arguments,this._stopChange)&&(c.value=g);this._stopChange||f(this,b,g,k,arguments);this._stopChange=
void 0}}function K(c,b,d,f){var k=c.value,g;return function(){d(this,b,null,null,arguments,this._stopChange)&&(g=k.apply(this,arguments));this._stopChange||f(this,b,null,null,arguments,g);this._stopChange=void 0;return g}}function P(c,b,d,f,k){var g=k.style,m=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,l;return{get:function(){return l},set:function(c){q=l;d(k,b,c,q,void 0,this._stopChange)&&(l=c,g.setProperty(m,c));this._stopChange||f(k,b,c,q);this._stopChange=void 0},enumerable:!0,
configurable:!0}}function L(c,b,d,f){if("function"!==typeof b)return p;var k=-1!==["value","checked"].indexOf(c),g=-1!==u.indexOf(c),m;if(this.toString()!==p.toString())if(d){var q=this.querySelectorAll("*");d=q.length;for(var l,h=0;h<d;h++){l=q[h].attrListeners();if(k||"*"===c)void 0!==q[h].addInputBinding&&q[h].addInputBinding(),void 0!==q[h].addInputBoxBinding&&q[h].addInputBoxBinding();if(g)p.injectStyleProperty(q[h],c),m=f?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){m=
f?"_parentStyleUpdateListeners":"_parentStyleListeners";d=u.length;for(var n=0;n<d;n++)p.injectStyleProperty(q[h],u[n]);void 0===l[m]["*"]&&(l[m]["*"]=[]);l[m]["*"].push({parent:this,func:b})}m=f?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===l[m][c]&&(l[m][c]=[]);l[m][c].push({parent:this,func:b})}}else{l=this.attrListeners();if(g)m=f?"_styleUpdateListeners":"_styleListeners",p.injectStyleProperty(this,c);else{if(k||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==
this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){m=f?"_styleUpdateListeners":"_styleListeners";d=u.length;for(h=0;h<d;h++)p.injectStyleProperty(this,u[h]);void 0===l[m][c]&&(l[m][c]=[]);l[m][c].push(b)}m=f?"_attrUpdateListeners":"_attrListeners"}void 0===l[m][c]&&(l[m][c]=[]);l[m][c].push(b)}else{if(k||"*"===c)for(n=document.querySelectorAll("input, textarea"),d=n.length,h=0;h<d;h++)void 0!==n[h].addInputBinding&&n[h].addInputBinding(),void 0!==n[h].addInputBoxBinding&&n[h].addInputBoxBinding();
if(g){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=g.length+1;g.unshift(document.body);for(h=0;h<d;h++)p.injectStyleProperty(g[h],c);m=f?F:J}else{if("*"===c){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=g.length+1;k=u.length;g.unshift(document.body);for(h=0;h<d;h++)for(n=0;n<k;n++)p.injectStyleProperty(g[h],u[n]);m=f?F:J;void 0===m[c]&&(m[c]=[]);m[c].push(b)}m=f?C:I}void 0===m[c]&&(m[c]=[]);m[c].push(b)}}function G(c,b,d,f){function k(c,d){var f=d[c],
g=f.length;for(l=0;l<g;l++)f[l].toString()===b.toString()&&f.splice(l,1)}if("function"!==typeof b)return p;["value","checked"].indexOf(c);var g=-1!==u.indexOf(c),l;if(this.toString()!==p.toString())if(d){d=this.querySelectorAll("*");var q=d.length;g?(g=f?"_childStyleUpdateListeners":"_childStyleListeners",k(c,this.attrListeners()[g]),g=f?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===c&&(g=f?"_childStyleUpdateListeners":"_childStyleListeners",k(c,this.attrListeners()[g])),g=f?"_childAttrUpdateListeners":
"_childAttrListeners",k(c,this.attrListeners()[g]),g=f?"_parentAttrUpdateListeners":"_parentAttrListeners");for(l=0;l<q;l++){for(var h=d[l].attrListeners()[g][c],n=h.length,z=0;z<n;z++)h[z].isEqualNode(this)&&h.slice(z,1);if("*"===c)for(listenersStyle=f?"_parentStyleUpdateListeners":"_parentStyleListeners",h=d[l].attrListeners()[g][c],n=h.length,z=0;z<n;z++)h[z].isEqualNode(this)&&h.slice(z,1)}}else g?g=f?"_styleUpdateListeners":"_styleListeners":("*"===c&&(g=f?"_styleUpdateListeners":"_styleListeners",
k(c,this.attrListeners()[g])),g=f?"_attrUpdateListeners":"_attrListeners"),k(c,this.attrListeners()[g]);else g?g=f?F:J:("*"===c&&(g=f?F:J,k(c,g)),g=f?C:I),k(c,g)}function N(c,b){p.addAttrListener.call(this,c,b,!0);return this}function H(c,b){p.addAttrUpdateListener.call(this,c,b,!0);return this}function M(c,b){p.removeAttrListener.call(this,c,b,!0);return this}function z(c,b){p.removeAttrUpdateListener.call(this,c,b,!0);return this}function y(c,b,d){var f=this.attrListeners();"html"===b&&(b="innerHTML");
"events"===b&&(b="onclick");switch(c){case "attr":if(r(f._attrListeners[b],d))return!0;break;case "attrupdate":if(r(f._attrUpdateListeners[b],d))return!0}return!1}function n(){this._stopChange=!0;return this}function p(){function c(c,b){var e,d=b.length;for(e=0;e<d;e++)-1===c.indexOf(b[e])&&c.push(b[e]);return c}function e(c,b){for(var e=Object.keys(c),d,f,g=0,k=e.length;g<k;g++)if(d=e[g],void 0===b[d])b[d]=c[d].slice();else for(var l=0,h=c[d].length;l<h;l++)f=c[d][l],b[d].push(f)}function d(b){if(3!==
b.target.nodeType&&8!==b.target.nodeType){var d=b.target.attrListeners(),f,g=["value","checked"],k=d._attrListeners,l=d._attrUpdateListeners,h=d._parentAttrListeners;f=d._parentAttrUpdateListeners;var t=!1;if(void 0!==I["*"]||void 0!==C["*"])t=!0;if(!0!==t&&void 0!==k["*"]||void 0!==l["*"]||void 0!==h["*"]||void 0!==f["*"])t=!0;if(!0!==t)for(var m=0;m<g.length;m++)if(void 0!==I[g[m]]||void 0!==C[g[m]]||void 0!==k[g[m]]||void 0!==l[g[m]]||void 0!==h[g[m]]||void 0!==f[g[m]]){t=!0;break}f=t;g=Object.keys(J);
k=Object.keys(F);Object.keys(d._styleListeners);Object.keys(d._styleUpdateListeners);l=Object.keys(d._parentStyleListeners);d=Object.keys(d._parentStyleUpdateListeners);h=[];if(0!==g.length||0!==k.length)h=c(h,g),h=c(h,k);if(0!==h.length&&0!==l.length||0!==d.length)h=c(h,l),h=c(h,d);-1!==h.indexOf("*")&&(h=u);var d=h,g=d.length,n,z,k=[],r,l="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,h=b.target;void 0!==l&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);
if(f){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(k=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||k.unshift(b.arguments[0])):k=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));r=k.length;for(var y=0;y<r;y++)void 0!==k[y].addInputBinding&&k[y].addInputBinding(),void 0!==k[y].addInputBoxBinding&&k[y].addInputBoxBinding()}"appendChild"===
b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(k=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),k.unshift(b.arguments[0])):k=Array.prototype.slice.call(b.target.querySelectorAll("*"));f=b.target.__kb._parentAttrListeners;t=b.target.__kb._parentAttrUpdateListeners;m=b.target.__kb._parentStyleListeners;n=b.target.__kb._parentStyleUpdateListeners;r=k.length;for(y=0;y<r;y++){if(0!==g)for(z=0;z<g;z++)p.injectStyleProperty(k[y],d[z]);z=k[y].attrListeners();
e(f,z._parentAttrListeners);e(t,z._parentAttrUpdateListeners);e(m,z._parentStyleListeners);e(n,z._parentStyleUpdateListeners)}void 0!==l&&(b.attr=l,b.target=h,b.arguments=[])}}function f(c){var b=c.target.attributes[c.arguments[0]],e="setAttribute"===c.attr?c.arguments[1]:"";l(c.target,c.arguments[0],e,void 0!==b?b.value:"",[e])||c.preventDefault()}function k(c){var b=c.target.attributes[c.arguments[0]],e="setAttribute"===c.attr?c.arguments[1]:"";h(c.target,c.arguments[0],e,void 0!==b?b.value:"",
[e])}p.injectPrototypes(Node,"Node");p.injectPrototypes(Element,"Element");p.injectPrototypes(HTMLElement,"HTMLElement");p.injectPrototypes(HTMLInputElement,"HTMLInputElement");p.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");p.injectPrototypes(Document,"Document");var l=g,h=b;p.addAttrUpdateListener("appendChild",d);p.addAttrUpdateListener("removeChild",d);p.addAttrUpdateListener("innerHTML",d);p.addAttrUpdateListener("outerHTML",d);p.addAttrUpdateListener("innerText",d);p.addAttrUpdateListener("outerText",
d);p.addAttrUpdateListener("textContent",d);p.addAttrListener("setAttribute",f);p.addAttrListener("removeAttribute",f);p.addAttrUpdateListener("setAttribute",k);p.addAttrUpdateListener("removeAttribute",k);return p}var I={},C={},J={},F={},x={},B="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),u=Object.getOwnPropertyNames(document.body.style),E=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener",
"removeEventListener"]),l,g=function(c,b,d,f,g,l){d=new w(c,b,d,f,g,void 0,"set",l);void 0!==c.__kb&&(f=c.__kb._attrListeners,g=c.__kb._styleListeners,l=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==f[b]&&A(f[b],d),void 0===d._stopPropogation&&void 0!==g[b]&&A(g[b],d),void 0===d._stopPropogation&&void 0!==f["*"]&&(A(f["*"],d),void 0===d._stopPropogation&&A(g["*"],d)),void 0===d._stopPropogation&&void 0!==l[b]&&D(l[b],d),void 0===d._stopPropogation&&void 0!==c[b]&&D(c[b],d),void 0===
d._stopPropogation&&void 0!==l["*"]&&(D(l["*"],d),void 0===d._stopPropogation&&D(c["*"],d)));void 0===d._stopPropogation&&void 0!==I[b]&&A(I[b],d);void 0===d._stopPropogation&&void 0!==J[b]&&A(J[b],d);void 0===d._stopPropogation&&void 0!==I["*"]&&(A(I["*"],d),void 0===d._stopPropogation&&A(J["*"],d));return void 0!==d._preventDefault?!1:!0},b=function(c,b,d,f,g,l){d=new w(c,b,d,f,g,l,"update");void 0!==c.__kb&&(f=c.__kb._attrUpdateListeners,g=c.__kb._styleUpdateListeners,l=c.__kb._parentAttrUpdateListeners,
c=c.__kb._parentStyleUpdateListeners,void 0!==f[b]&&A(f[b],d),void 0===d._stopPropogation&&void 0!==g[b]&&A(g[b],d),void 0===d._stopPropogation&&void 0!==f["*"]&&(A(f["*"],d),void 0===d._stopPropogation&&A(g["*"],d)),void 0===d._stopPropogation&&void 0!==l[b]&&D(l[b],d),void 0===d._stopPropogation&&void 0!==c[b]&&D(c[b],d),void 0===d._stopPropogation&&void 0!==l["*"]&&(D(l["*"],d),void 0===d._stopPropogation&&D(c["*"],d)));void 0===d._stopPropogation&&void 0!==C[b]&&A(C[b],d);void 0===d._stopPropogation&&
void 0!==F[b]&&A(F[b],d);void 0===d._stopPropogation&&void 0!==C["*"]&&(A(C["*"],d),void 0===d._stopPropogation&&A(F["*"],d));return void 0!==d._preventDefault?!1:!0};p.injectPrototypeProperty=function(c,e,d,f,k){var l=c.prototype,m=Object.getOwnPropertyDescriptor(l,e);d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var q=x[d];f=f||g;k=k||b;void 0===l.attrListeners&&(l={},l.attrListeners=function(){void 0===this.__kb&&(this.__kb=new v);return this.__kb}.bind(l),l.addAttrListener=
p.addAttrListener,l.addAttrUpdateListener=p.addAttrUpdateListener,l.addChildAttrListener=N,l.addChildAttrUpdateListener=H,l.hasListener=y,l.removeAttrListener=p.removeAttrListener,l.removeAttrUpdateListener=p.removeAttrUpdateListener,l.removeChildAttrListener=M,l.removeChildAttrUpdateListener=z,l.stopChange=n);void 0===q&&(x[d]={obj:c,proto:l,descriptors:{},set:void 0,update:void 0},q=x[d],q.set=f,q.update=k);void 0===q.descriptors[e]&&(q.descriptors[e]=m);m.configurable&&(void 0!==m.set?Object.defineProperty(l,
e,{get:m.get,set:h(m,e,f,k),enumerable:!0,configurable:!0}):"function"===typeof m.value?Object.defineProperty(l,e,{value:K(m,e,f,k),writable:!0,enumerable:!0,configurable:!0}):void 0!==m.value&&Object.defineProperty(l,e,{get:function(){return m.value},set:O(m,e,f,k),enumerable:!0,configurable:!0}));return p};p.injectStyleProperty=function(c,e,d,f){var k=c.style,l=Object.getOwnPropertyDescriptor(k,e),h=c.attrListeners().injectedStyle;d=d||g;f=f||b;void 0===h&&(c.attrListeners().injectedStyle={obj:c,
proto:k,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=d,c.attrListeners().injectedStyle.update=f,h=c.attrListeners().injectedStyle);void 0===h.descriptors[e]&&(h.descriptors[e]=l);l.configurable&&Object.defineProperty(k,e,P(l,e,d,f,c));return p};p.injectPrototypes=function(c,e,d,f){var k=c.prototype;e=e||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var l=x[e],h=Object.getOwnPropertyNames(k);d=d||g;f=f||b;var q;void 0===k.attrListeners&&(k.attrListeners=
function(){void 0===this.__kb&&(this.__kb=new v);return this.__kb},k.addAttrListener=p.addAttrListener,k.addAttrUpdateListener=p.addAttrUpdateListener,k.addChildAttrListener=N,k.addChildAttrUpdateListener=H,k.removeAttrListener=p.removeAttrListener,k.removeAttrUpdateListener=p.removeAttrUpdateListener,k.removeChildAttrListener=M,k.removeChildAttrUpdateListener=z,k.hasListener=y,k.stopChange=n);void 0===l&&(x[e]={obj:c,proto:k,descriptors:{},set:void 0,update:void 0},l=x[e],l.set=d,l.update=f);q=x[e].descriptors;
for(f=0;f<h.length;f+=1)void 0===q[h[f]]&&p.injectPrototypeProperty(c,h[f],e,d,b);if(-1!==h.indexOf("value")){var r=function(b){var c,d,e;if("checkbox"===this.type||"radio"===this.type)c=!0;d=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){e=c?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;c&&(l.set(this,"checked",this.checked,d)?l.update(this,"checked",this.checked,d):q.checked.set.call(this,d));this.value=
e;l.set(this,"value",this.value,d)?l.update(this,"value",this.value,d):q.value.set.call(this,d)}.bind(this),0)};k.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",r)};k.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",r)};k.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",r)};k.addInputBoxBinding=function(){this.attrListeners()._onmousedown=
!0;this.addEventListener("mouseup",r)}}return p};p.addAttrListener=function(c,b,d){if("html"===c){c=0;for(var f=B.length;c<f;c++)L.call(this,B[c],b,d,!1)}else if("events"===c)for(c=0,f=E.length;c<f;c++)L.call(this,E[c],b,d,!1);else L.call(this,c,b,d,!1);return this};p.addAttrUpdateListener=function(b,e,d){if("html"===b){b=0;for(var f=B.length;b<f;b++)L.call(this,B[b],e,d,!0)}else if("events"===b)for(b=0,f=E.length;b<f;b++)L.call(this,E[b],e,d,!0);else L.call(this,b,e,d,!0);return this};p.removeAttrListener=
function(b,e,d){if("html"===b){b=0;for(var f=B.length;b<f;b++)G.call(this,B[b],e,d,!1)}else if("events"===b)for(b=0,f=E.length;b<f;b++)G.call(this,E[b],e,d,!1);else G.call(this,b,e,d,!1);return this};p.removeAttrUpdateListener=function(b,e,d){if("html"===b){b=0;for(var f=B.length;b<f;b++)G.call(this,B[b],e,d,!0)}else if("events"===b)for(b=0,f=E.length;b<f;b++)G.call(this,E[b],e,d,!0);else G.call(this,b,e,d,!0);return this};p.hasListener=function(b,e,d){"html"===e&&(e="innerHTML");"events"===e&&(e=
"onclick");switch(b){case "attr":if(r(I[e],d))return!0;break;case "attrupdate":if(r(C[e],d))return!0}return!1};p.injectedPrototypes=function(){return x};return p}"function"===typeof define&&define.amd&&define("KB",D);return D}()),R=function(D,A,Q){return function(){function r(z,y,n,p){function A(l,g,b,c,e){for(var d=O({},l),f=0,k=Object.keys(g.prototype),h=k.length;f<h;f++)d.__proto__[k[f]]=g.prototype[k[f]];f=0;k=Object.keys(c);for(h=k.length;f<h;f++)-1!==N.indexOf(k[f])?Object.defineProperty(d,
k[f],v(c[k[f]],"filters"!==k[f])):d.set(k[f],c[k[f]]);if(c.pointers)for(f=0,k=Object.keys(c.pointers),h=k.length;f<h;f++)d.addPointer(c.pointers[k[f]],k[f]);g.apply(d,b);f=0;k=Object.keys(e);for(h=k.length;f<h;f++)-1!==N.indexOf(k[f])?Object.defineProperty(d,k[f],v(e[k[f]],"filters"!==k[f])):d.set(k[f],e[k[f]]);if(e.pointers)for(f=0,k=Object.keys(e.pointers),h=k.length;f<h;f++)d.addPointer(e.pointers[k[f]],k[f]);f=0;k=Object.keys(d.filters);for(h=k.length;f<h;f++)d.filters[k[f]]=d.filters[k[f]].bind(d);
if(d.sessionStorage){if(g=sessionStorage.getItem(d.id||l))for(g=JSON.parse(g),f=0,k=Object.keys(g),h=k.length;f<h;f++)d.set(k[f],g[k[f]]);else sessionStorage.setItem(d.id||l,d.stringify());d.addChildDataUpdateListener("*",function(){sessionStorage.setItem(d.id||l,d.stringify())})}if(d.localStorage){if(g=localStorage.getItem(d.id||l))for(g=JSON.parse(g),f=0,k=Object.keys(g),h=k.length;f<h;f++)d.set(k[f],g[k[f]]);else localStorage.setItem(d.id||l,d.stringify());d.addChildDataUpdateListener("*",function(){localStorage.setItem(d.id||
l,d.stringify())})}d.store&&P.set(d.id||l,d);return d}function C(l,g,b){l.kb_viewmodel=b;g.wrapper.innerHTML=x.template.replace(new RegExp("("+K.startChars()+"local"+K.endChars()+")","g"),b.local);var c=g.maps=g.map(g.wrapper);g.wrapper.kb_maps=c;Object.keys(c).forEach(function(e){c[e].forEach(function(c){switch(c.type){case "for":c.connect(b);K.isRegistered(c.component)?c.loop(function(b){r(b)}):(r.loadWaitList(c.component,function(b,e){c.loop(function(b){r(b)})}),r.loadWaitList(c.component).loading||
(r.loadWaitList(c.component).loading=!0,h(c.component)));break;case "component":c.connect(b).deleteMap();break;default:c.connect(b)}})});g.wrapper.kb_viewmodel.onFinish.call(g.wrapper.kb_viewmodel,g.wrapper)}function D(l,g){x=new K(g,!0);Object.defineProperty(x.wrapper,"__kbcomponenttree",v(g.kb_mapper?g.kb_mapper.__kbcomponenttree.slice():[]));g.parentElement.replaceChild(x.fragment,g);y.unshift(x.wrapper);C(x.wrapper,x,A(l,L[l],y,u,E));if(-1===x.wrapper.__kbcomponenttree.indexOf(l)||x.wrapper.kb_viewmodel.multiple){x.wrapper.__kbcomponenttree.push(l);
x.wrapper.classList.add(x.wrapper.kb_viewmodel.local);for(var b=x.wrapper.querySelectorAll("*"),c=0,e=b.length;c<e;c++)b[c]instanceof HTMLUnknownElement&&r(b[c])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",l),console.error("Recursive Component %o on %o",
x.wrapper,x.wrapper.parentElement),x.wrapper.parentElement.removeChild(x.wrapper)}var F=z.tagName.toLowerCase(),x,B=Object.keys(HTMLElement.prototype).filter(function(l){return 0===l.indexOf("on")}),u={},E={};void 0===y&&(y=[]);n&&w(n,u);Object.defineProperty(u,"local",v(u.local||F+"-"+Date.now(),!0,!1,!0));Object.defineProperty(u,"filters",v(u.filters||{},!1,!1,!0));"function"!==typeof u.onFinish&&(u.onFinish=function(){});Object.defineProperty(u,"onFinish",v(u.onFinish,!0,!1,!0));"string"===typeof u.sessionStorage&&
(u.sessionStorage="true"===u.sessionStorage);Object.defineProperty(u,"sessionStorage",v(void 0!==u.sessionStorage?u.sessionStorage:!1,!0,!1,!0));"string"===typeof u.localStorage&&(u.localStorage="true"===u.localStorage);Object.defineProperty(u,"localStorage",v(void 0!==u.localStorage?u.localStorage:!1,!0,!1,!0));"string"===typeof u.store&&(u.store="true"===u.store);Object.defineProperty(u,"store",v(void 0!==u.store?u.store:!1,!0,!1,!0));"string"===typeof u.multiple&&(u.multiple="true"===u.multiple);
Object.defineProperty(u,"multiple",v(void 0!==u.multiple?u.multiple:!1,!0,!1,!0));p&&w(p,E);E.innerHTML=z.innerHTML.toString();n=0;for(p=z.attributes.length;n<p;n++)E[z.attributes[n].name]=z.attributes[n].value;n=0;for(p=B.length;n<p;n++)z[B[n]]&&(E[B[n]]=z[B[n]]);z.k_post&&w(z.k_post,E);K.isRegistered(F)?D(F,z):(r.loadWaitList(F,function(l,g){D(F,z)}),r.loadWaitList(F).loading||(r.loadWaitList(F).loading=!0,h(F)))}function w(h,r){var n=Object.keys(h);r.pointers||(r.pointers={});for(var p=0,w=n.length;p<
w;p++)if(h.isObservable(n[p]))r.pointers[n[p]]=h;else if(h[n[p]].isMixed())r.pointers[n[p]]=h[n[p]].__kbImmediateParent;else if(Object.prototype.isObject(h[n[p]]))for(var v=0,A=Object.keys(h[n[p]]);v<w;v++)r[n[p]][A[v]]=h[n[p]][A[v]];else if(Object.prototype.isArray(h[n[p]]))for(v=0;v<w;v++)r[n[p]][v]=h[n[p]][v];else r[n[p]]=h[n[p]]}function v(h,r,n,p){return{value:h,writable:!!r,enumerable:!!p,configurable:!!n}}window.K_Components||(window.K_Components={});var h=A().onLoad(function(h,y){var n="<style>"+
unescape(y.prototype.k_css)+"</style>"+unescape(y.prototype.k_html);r.register(h,y,n,y.prototype.cms);r.loadWaitList(h).forEach(function(n){n(h,y)});r.loadWaitList(h,"clear")}),O=D(),K=Q(),P=O({},"Model"),L={},G=function(){return window.location.search.replace("?","").split("&").filter(function(h){return 0!==h.length}).reduce(function(h,r){h[r.split("=")[0]]=r.split("=")[1];return h},{})}(),N="id filters class sessionStorage localStorage store component multiple".split(" "),H={},M;r.register=function(h,
y,n,p){K.register(h,n);L[h]=y;return r};r.loadWaitList=function(h,y){if("undefined"===typeof y&&h)return H[h];if(h){if(void 0===H[h]||"clear"===y){var n=void 0===H[h]?!1:!!H[h].loading;H[h]=[];H[h].loading=n}"function"===typeof y&&H[h].push(y)}return r};r.localRouting=function(h){h?(M=Node.prototype.appendChild,Node.prototype.appendChild=function(h){if("script"===h.tagName.toLowerCase()){h.src=h.src.substring(0,-1!==h.src.indexOf("?")?h.src.indexOf("?"):h.src.length);var n=h.src.match(/(.*?component\/)/);
n&&(G.env||(G.env="prod"),"dev"===G.env&&(G.env="qa"),n=h.src.replace(n[0],"").replace(/[\/\s]/g,""),h.src="/components/"+n+"/build/"+G.env+"/"+n+(G.debug&&"prod"!==G.env?"":".min")+".js",arguments[0]=h)}return M.apply(this,arguments)}):M&&(Node.prototype.appendChild=M,M=null);return r};return r}}(S,T,U);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return R}):"undefined"!==typeof module&&(module.exports=R);return R}();
