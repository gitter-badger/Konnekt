var Konnekt=function(){var W=function(){return function(t,w,N,r){function p(b,d,f,m){b=void 0===b?{}:b;var e={},k=window.Proxy?new Proxy(e,{set:O,deleteProperty:T}):e,c=Object.keys(b,"all");Object.defineProperties(e,{__kbname:h("string"===typeof d?d:"default",!0,!0),__kbref:h(f?f.__kbref||f:k,!0,!0),__kbscopeString:h(m||"",!0,!0),__kbImmediateParent:h(f||null,!0,!0),__kbsubscribers:h({}),__kblisteners:h({}),__kbupdatelisteners:h({}),__kbparentlisteners:h({}),__kbparentupdatelisteners:h({}),__kbcreatelisteners:h([]),
__kbdeletelisteners:h([]),__kbparentcreatelisteners:h([]),__kbparentdeletelisteners:h([]),__kbmethodlisteners:h([]),__kbmethodupdatelisteners:h([]),__kbpointers:h({}),__kbevents:h(C),length:h(0,!0),__kbnonproxy:h(e,!1,!0),__kbproxy:h(k,!1,!0),_stopChange:h(!1,!0)});e.__proto__=p.prototype;d=0;for(f=c.length;d<f;d++)k.set(c[d],b[c[d]]);e.__kbevents.addlistener=[];e.__kbevents.removelistener=[];e.addActionListener("addlistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var d=
b.local.__kbpointers[b.arguments[0]],d=d.point.getLayer(d.keys);if(void 0!==d[b.arguments[0]])d[b.arguments[2]](b.arguments[0],b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var d=b.local.__kbpointers[b.arguments[0]],d=d.point.getLayer(d.keys);if(void 0!==d[b.arguments[0]])d[b.arguments[2]](b.arguments[0],b.arguments[1])}});return k}function B(b,d,f,m,e,k,c,g){this.stopPropogation=function(){this._stopPropogration=
!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=d;this.arguments=k;this.type=this.event=f;this.listener=c;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.__kbImmediateParent;this.value=m;this.oldValue=e;this.stopChange=g}function h(b,d,f,m){return{value:b,writable:!!d,enumerable:!!m,configurable:!!f}}function P(b,d,f){return{get:function(){return b.call(this)},set:function(f){d&&(b=f)},enumerable:!1,configurable:!!f}}function Q(b,
d){var f=d,m=d;return{get:function(){return f},set:function(d){var k=new B(this,b,"set",d,f,arguments,"__kblisteners",this._stopChange);!0!==g(k)&&(m=f,f=d,k.stopChange||(k.listener="__kbupdatelisteners",k.type="postset",g(k)),this._stopChange||this.callSubscribers(b,f,m));this._stopChange=!1},configurable:!0,enumerable:!0}}function R(){var b=Array.prototype.slice.call(arguments),d=b.shift();return{get:function(){return b.reduce(function(b,d){return b[d]},d)},set:function(f){var m=b.slice(0,b.length-
1).reduce(function(b,d){return b[d]},d);(this._stopChange?m.stopChange():m)[b[b.length-1]]=f;this._stopChange=!1},enumerable:!0,configurable:!0}}function M(b,d){for(var f=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],m=[],e,c=0,z=f.length;c<z;c++)if(e=b[f[c].listener],E.call(e))for(var m=
Object.keys(e),g=0,q=m.length;g<q;g++)for(var v=0,h=e[m[g]].length;v<h;v++)d[f[c].method](m[g],e[m[g]][v]);else for(g=0,q=e.length;g<q;g++)d[f[c].method](e[g])}function O(b,d,f){if(n(b,d)||"length"===d){if("length"===d)if(f>b.length&&void 0!==b[f-1])b.length=f;else{if(f<b.length){d=f;for(var m=b.length;d<m;d++)b[d]&&delete b[d];b.length=f}}else b[d]=f;return!0}b.set(d,f)}function T(b,d){b.del(d);return!0}function K(b,d,f){var m=l(f),e=E(f),c=x(f);if(m&&f.__kbname!==b.__kbname)"default"===f.__kbname?
b.merge(f,d):b.__kbpointers[d]||b.addPointer(f,d);else{var m=new B(this,d,"create",f,void 0,[],"__kbcreatelisteners",this._stopChange),z=g(m),A=parseInt(d,10);if(!0!==z)if((e||c)&&0!==Object.keys(f,"all").length)for(K.call(this,b,d,{}),e=0,c=Object.keys(f,"all"),m=c.length;e<m;e++)K.call(this[d],b[d],c[e],f[c[e]]);else{if(e||c)f=new p(f,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+d),M(b,f);Object.defineProperty(b,d,Q(d,f));!isNaN(A)&&b.length<=A&&(b.length=A+1);m.listener=
"__kbupdatelisteners";m.type="postcreate";g(m)}}}function S(b,d,f,m){var e=l(f),c=E(f),z=x(f);if(e&&f.__kbname!==b.__kbname)"default"===f.__kbname?b.merge(f,d):b.__kbpointers[d]||b.addPointer(f,d);else if(void 0===b[d])-1===u.indexOf(d)?K.call(this,b,d,f):(m?b.stopChange():b)[d]=f;else if(c||z)for(e=0,c=Object.keys(f,"all"),z=c.length;e<z;e++)S.call(this[d],b[d],c[e],f[c[e]],m);else(m?b.stopChange():b)[d]=f}function I(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function E(b){return"object"===
I(void 0!==b?b:this)}function x(b){return"array"===I(void 0!==b?b:this)}function l(b){return"mixed"===I(void 0!==b?b:this)}function n(b,d){d="string"===typeof b?b:d;var f=Object.getOwnPropertyDescriptor("string"===typeof b?this:b,d);return f?void 0===f.value:!1}function L(b,d){"number"===typeof b&&(b=b.toString());var f=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());var c=new B(this,b,"set",d,this[b],arguments,"__kbmethodlisteners");
!0!==g(c)&&(S.call(this,f,b,d,this._stopChange),this.stopChange=void 0,c.type="postset",c.listener="__kbmethodupdatelisteners",g(c));return this}function G(b){return b.split(".")}function H(b,d){return function(f,c){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var e=this[d],k=new B(this,d,"addlistener",e,void 0,arguments,"");"string"===typeof f&&1!==G(f).length&&(e=G(f),f=e.pop(),e=e.join("."),k.local=this.getLayer(e),e=k.local[d],k.value=e);!0!==g(k)&&(E.call(e)?(void 0===e[f]&&
(e[f]=[]),e[f].push(c),k.type="postaddlistener",g(k)):x.call(e)&&"function"===typeof f&&(e.push(f),k.type="postaddlistener",g(k)));return this}}function J(b,d){return function(f,c){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var e=this[d],k=new B(this,d,"removelistener",e,void 0,arguments,"");"string"===typeof f&&1!==G(f).length&&(e=G(f),e.pop(),e.join("."),k.local=this.getLayer(e),e=k.local[d],k.value=e,f=G(f).pop());if(!0!==g(k))if(E.call(e)){if(void 0!==e[f])for(var z=0,A=
e[f].length;z<A;z++)if(e[f][z].toString()===c.toString()){e[f].splice(z,1);k.type="postremovelistener";g(k);break}}else if(x.call(e)&&"function"===typeof f)for(z=0,A=e.length;z<A;z++)if(e[z].toString()===f.toString()){e.splice(z,1);k.type="postremovelistener";g(k);break}return this}}function F(b,d){function f(b,d,c){var z=Object.keys(this,"all").filter(function(b){return l.call(this[b])}.bind(this)),g=this,q=b;"string"===typeof b&&1!==G(b).length&&(g=G(b),q=g.pop(),g=g.join("."),g=this.getLayer(g),
void 0===g[c][q]&&(g[c][q]=[]),g[c][q].push(d));E.call(g[c])?(void 0===g[c][q]&&(g[c][q]=[]),g[c][q].push(d),g=g.__kbpointers[q],g=g.point.getLayer(g.keys),void 0!==g[q]&&(void 0===g[c][q]&&(g[c][q]=[]),g[c][q].push(_func))):g[c].push(d);q=0;for(g=z.length;q<g;q++)f.call(this[z[q]],b,d,c)}return function(c,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=new B(this,d,"addchildlistener",void 0,void 0,arguments,"");!0!==g(k)&&(f.call(this.__kbnonproxy,c,e,d),k.type="postaddchildlistener",
g(k));return this}}function y(b,d){function f(b,d,c){var g=Object.keys(this,"all").filter(function(b){return l.call(this[b])}.bind(this)),h=this,q=b;if("string"===typeof b&&1!==G(b).length){var v=G(b),q=v.pop();v.join(".");h=this.getLayer(v);if(void 0!==h[c][b])for(var v=0,n=h[c][b].length;v<n;v++)if(h[c][b][v].toString()===d.toString()){h[c][b].splice(v,1);break}}if(E.call(h[c])){if(void 0!==h[c][q]){v=0;for(n=h[c][q].length;v<n;v++)if(h[c][q][v].toString()===d.toString()){h[c][q].splice(v,1);break}if(-1!==
h.__kbpointers.indexOf(q)&&(v=h.__kbpointers[q],h=v.point.getLayer(v.keys),void 0!==h[c][q]))for(v=0,n=h[c][q].length;v<n;v++)if(h[c][q][v].toString()===d.toString()){h[c][q].splice(v,1);break}}}else for(v=0,n=h[c].length;v<n;v++)if(h[c][v].toString()===d.toString()){h[c].splice(v,1);break}v=0;for(n=g.length;v<n;v++)f.call(this[g[v]],b,d,c)}return function(c,e){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var k=new B(this,d,"removechildlistener",void 0,void 0,arguments,"");!0!==
g(k)&&(f.call(this.__kbnonproxy,c,e,d),k.type="postremovechildlistener",g(k));return this}}var C={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},
u=["__proto__","_stopChange"],D=function(b,d){if(!d._stopPropogration&&b)for(var f=0,c=b.length;f!==c&&(b[f](d),!d._stopPropogration);f++);},g=function(b){if(b.listener){var d=b.local[b.listener],f=b.local[b.listener.replace("__kb","__kbparent")];E.call(d)?(D(d[b.key],b),D(d["*"],b)):D(d,b);E.call(f)?(D(f[b.key],b),D(f["*"],b)):D(f,b)}D(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault},c=Array.prototype.sort;Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);
Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof p?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,d){return Object._keys(b).filter(function(b){return d&&"object"!==d&&"o"!==d?"all"===d?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(p.prototype,{"typeof":h(I,!1,!0),sizeof:h(function(b){function d(b){for(var c=Object.keys(b,"all"),k=0,g=void 0,h=0,q=c.length;h<q;h++)g=b[c[h]],"object"===
typeof g&&void 0!==g&&null!==g?-1===f.indexOf(g)&&(f.push(g),k+=d(g)):"string"===typeof g?k+=2*g.length:"number"===typeof g?k+=8:"boolean"===typeof g?k+=4:"function"===typeof g&&(k+=2*g.toString().length),k+=2*c[h].length;return k}var f=[];return d(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:h(E,!1,!0),isArray:h(x,!1,!0),isMixed:h(l,!1,!0),isObservable:h(n,!1,!0),stringify:h(function(b){var d=[];return JSON.stringify(b||this,function(b,c){if(x(c)||E(c)){if(-1!==d.indexOf(c))return;d.push(c)}return c})},
!1,!0),getKeys:h(function(b,d){d="string"===typeof b?b:d?d:"object";return Object.keys("string"===typeof b||void 0===b?this:b,d)},!1,!0),getIndexes:h(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var d=[],f=0,c=b.length;f<c;f++)void 0!==b[f]&&(d[d.length]=f);return d},!1,!0),keyCount:P(function(){return this.getKeys("object").length},!1,!0),indexCount:P(function(){return this.length},!1,!0),count:P(function(){return this.keyCount+this.indexCount},!1,!0),concat:h(Array.prototype.concat),
every:h(Array.prototype.every),filter:h(Array.prototype.filter),find:h(Array.prototype.find),findIndex:h(Array.prototype.findIndex),forEach:h(Array.prototype.forEach),includes:h(Array.prototype.includes),indexOf:h(Array.prototype.indexOf),join:h(Array.prototype.join),lastIndexOf:h(Array.prototype.lastIndexOf),map:h(Array.prototype.map),reduce:h(Array.prototype.reduce),reduceRight:h(Array.prototype.reduceRight),slice:h(Array.prototype.slice),some:h(Array.prototype.some),entries:h(Array.prototype.entries),
toLocaleString:h(Array.prototype.toLocaleString),add:h(function(b,d){L.call(this,b,d);return this}),set:h(L),get:h(function(b){"number"===typeof b&&(b=b.toString());var d=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(d)return d[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:h(function(b,d){var f="number"===typeof b||!isNaN(parseInt(b,10));f&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):
this,e=b.split(".").pop();if(c&&void 0!==c[e])if(f&&c.length>parseInt(b,10)&&!d)c=c.__kbnonproxy,c.splice(e,1);else{var k=new B(c,b,"delete",c[e],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==g(k)&&(c=c.__kbnonproxy,Object.defineProperty(c,e,h(void 0,!0,!0,!1)),delete c[e],f&&c.length>parseInt(b,10)&&d&&--c.length,k.listener="__kbupdatelisteners",k.type="postdelete",k.oldValue=k.value,k.value=void 0,g(k))}return this}),exists:h(function(b){var d=-1!==b.indexOf(".")?this.__kbnonproxy.getLayer(b):
this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());return d?void 0!==d[b]:!!d}),addPrototype:h(function(b,d){var c=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===c[b]?Object.defineProperty(c.__proto__,b,h(d,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,c);return this}),addPointer:h(function(){var b=Array.prototype.slice.call(arguments),d=b.shift(),c=
b[b.length-1];d instanceof p||(d=new p(d,d.__kbname));var m=new B(this,c,"create",d[c],void 0,[],"__kbcreatelisteners",this._stopChange),e=this.__kbnonproxy;m.root=d.__kbref.__kbproxy;if(!0!==g(m)){Object.defineProperty(e,c,R.apply(e,arguments));e.__kbpointers[c]={keys:b.join("."),point:d};var b=e,d=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],e=[],k;if(b[c].__kbImmediateParent)for(var z=0,h=d.length;z<h;z++){k=b[d[z].listener];
for(var e=Object.keys(k),q=0,v=e.length;q<v;q++)if(c===e[z])for(var l=0,n=k[e[z]].length;l<n;l++)void 0===b[c].__kbImmediateParent[d[z].listener][c]&&(b[c].__kbImmediateParent[d[z].listener][c]=[]),b[c].__kbImmediateParent[d[z].listener][c].push(k[e[z]][l])}M(b,b[c]);m.listener="__kbupdatelisteners";m.type="postcreate";g(m)}return this}),move:h(function(b,d){this.__kbnonproxy.set(d,b[d]);l(b)?b.del(d):(b[d]=null,delete b[d]);return this}),copy:h(function(b,d){var c=this.__kbnonproxy;l(b)?"default"===
b.__kbname?c.merge(b[d],d):c.addPointer(b,d):c.set(d,b[d]);return this}),merge:h(function(b,d){function c(b,d){for(var e=l(b)?b.keys("object"):Object.keys(b),g,h=0,n=e.length;h<n;h++)g=b[e[h]],"object"===typeof g&&-1===m.indexOf(g)&&"undefined"!==d[e[h]]?c(g,d):d.set(e[h],"object"===typeof g?{}:g)}var m=[],e=this.__kbnonproxy;d&&void 0===e[d]&&e.set(d,{});c(b,d?e[d]:e);return this}),copyWithin:h(function(b,d,c){d=d||0;c=c||0;var m=new B(this,b,"copyWithin",this[b],void 0,arguments,"__kbmethodlisteners"),
e=this.__kbnonproxy;if(!0!==g(m)&&b<e.length){b=0>b?e.length-1:b;d=d<e.length?d:e.length-1;c=c<e.length?c:e.length-1;d=0>d?e.length-1:d;c=0>d?e.length-1:c;for(var k=d;k<=c;k++)e.set(b+(k-d),e[k]);m.type="postcopyWithin";m.listener="__kbmethodupdatelisteners";g(m)}return this}),fill:h(function(b,d,c){d=void 0!==d?Math.max(0,d):0;c=void 0!==c&&c<=this.length?Math.min(this.length,Math.max(0,c)):this.length;var m=new B(this,_start,"fill",this[_start],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;
if(!0!==g(m)){for(var k=a.key;k<c;k++)e[k]=b;m.type="postfill";m.listener="__kbmethodupdatelisteners";g(m)}return this}),pop:h(function(){var b=new B(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==g(b)){var c=d[d.length-1];d.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";g(b);return c}return null}),push:h(function(b){var d=new B(this,this.length,"push",b,void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;
!0!==g(d)&&(c.set(c.length,b),d.type="postpush",d.listener="__kbmethodupdatelisteners",g(d));return this.length}),reverse:h(function(){var b=new B(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==g(b)){for(var c=null,m=null,e=d.length,c=0;c<e/2;c+=1){var m=e-1-c,k=d[c];d[c]=d[m];d[m]=k}b.type="postreverse";b.listener="__kbmethodupdatelisteners";g(b)}return this}),shift:h(function(){var b=new B(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),
d=this.__kbnonproxy;if(!0!==g(b)){for(var c=a.key,m=this.length-1;c<m;c++)d[c]=d[c+1];d.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";g(b)}return null}),sort:h(function(){var b=new B(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;!0!==g(b)&&(c.apply(d,arguments),b.type="postsort",b.listener="__kbmethodupdatelisteners",g(b));return this}),splice:h(function(b,d,c){b="string"===typeof b?parseInt(b,10):b;var m=new B(this,b,"splice",
void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==g(m)){var k=[],z=Array.prototype.slice.call(arguments,2),h=z.length-2,q=0;if(0!==d&&void 0!==e[b-1+d])for(var l=0,n=d;l<n;l++){k.push(e[b+l]);for(var x=b+l,p=this.length-1;x<p;x++)e[x]=e[x+1];e.del(e.length-1,!0)}if(0!==h)for(l=0,n=h;l<n;l++){q=b+Math.min(1,l);x=e.length;for(p=q;x>p;x--)e.set(x,e[x-1]);e.set(q,z[l])}m.type="postsplice";m.listener="__kbmethodupdatelisteners";g(m);return k}return[]}),unshift:h(function(){var b=
new B(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==g(b)){for(var c=Array.prototype.slice.call(arguments),m=d.length-1+c.length,e=c.length;-1!==m;m--)m<e?d.set(m,c[m]):d.set(m,d[m-c.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";g(b)}return this.length}),getLayer:h(function(b){function d(b){var c=b[0];return void 0===this[c]&&0!==b.length-1?null:l(this[c])?0!==b.length-1?(b.shift(),d.call(this[c],b)):this[c]:this}b=G(b);return d.call(this,
b)}),setLayer:h(function(b){function d(b){var c=b[0];void 0===this[c]&&0!==b.length-1&&(this[c]=p({},this.__kbname,this,this.__kbscopeString+"."+c));return l(this[c])?0!==b.length-1?(b.shift(),d.call(this[c],b)):this[c]:this}b=G(b);return d.call(this,b)}),ignoreCreate:h(function(b){-1===u.indexOf(b)&&u.push(b);return this}),addActionListener:h(function(b,c){var f=this.__kbnonproxy;void 0!==f.__kbref.__kbevents[b]&&f.__kbref.__kbevents[b].push(c);return this}),removeActionListener:h(function(b,c){var f=
this.__kbnonproxy;if(void 0!==f.__kbref.__kbevents[b])for(var g=0,e=f.__kbref.__kbevents[b];g<e;g++)if(f.__kbref.__kbevents[b][g].toString()===c.toString()){f.__kbref.__kbevents[b].splice(g,1);break}return this}),subscribe:h(function(b,c){var f=this.__kbnonproxy;void 0===f.__kbsubscribers[b]&&(f.__kbsubscribers[b]=[]);f.__kbsubscribers[b].push(c);return this}),unsubscribe:h(function(b,c){var f=this.__kbnonproxy;if(void 0!==f.__kbsubscribers[b])for(var g=0,e=f.__kbsubscribers[b].length;g<e;g++)if(f.__kbsubscribers[b][g].toString()===
c.toString()){f.__kbsubscribers[b].splice(g,1);break}return this}),callSubscribers:h(function(b,c,f){var g=this.__kbnonproxy;if(void 0!==g.__kbsubscribers[b])for(var e=0,k=g.__kbsubscribers[b].length;e<k;e++)g.__kbsubscribers[b].call(this,b,c,f);return this}),stopChange:h(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(p.prototype,{addDataListener:h(H("addDataListener","__kblisteners")),removeDataListener:h(J("removeDataListener","__kblisteners")),addDataUpdateListener:h(H("addDataUpdateListener",
"__kbupdatelisteners")),removeDataUpdateListener:h(J("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:h(H("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:h(J("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:h(H("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:h(J("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:h(H("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:h(J("removeDataMethodListener",
"__kbmethodlisteners")),addDataMethodUpdateListener:h(H("addDataMethodUpdateListener","__kbmethodupdatelisteners")),removeDataMethodUpdateListener:h(J("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:h(F("addChildDataListener","__kbparentlisteners")),removeChildDataListener:h(y("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:h(F("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:h(y("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:h(F("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:h(y("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:h(F("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:h(y("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return p}}(),X=function(){return function(){function t(r){if("object"===typeof r)for(var p=0,B=r.length;p<
B;p++)K_Components[r[p]]?w(r[p],K_Components[r[p]],document.getElementById("script_"+r[p])):t.load(r[p],"component/"+r[p]+"/"+location.search,w);else"string"===typeof r&&(K_Components[r[p]]?w(r,K_Components[r],document.getElementById("script_"+r)):t.load(r,"component/"+r+"/"+location.search,w))}var w=function(){},N=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});t.getUnknowns=function(r){var p=r.match(N);return p.map(function(p){return p.replace(/[<\/>]/g,"")}).filter(function(r,h){return document.createElement(r)instanceof
HTMLUnknownElement&&-1===p.indexOf(r,h+1)&&!K_Components[r]})};t.load=function(r,p,w){document.head.appendChild(function(h,p,r){var w=document.createElement("script");w.type="text/javascript";w.charset="utf-8";w.async=!0;w.src=p;w.id="script_"+h;w.onload=function(){r(h,K_Components[h],this)};return w}(r,p,w));return t};t.onLoad=function(r){if(void 0===r)return w;w="function"===typeof r?r:w;return t};return t}}(),U=function(){function t(){function w(c,b){var d=c.length,f;for(f=0;f<d&&(c[f](b),void 0===
b._stopPropogation);f++);}function t(c,b){var d=c.length,f;for(f=0;f<d&&(b.child=b.target,b.target=c[f].parent,c[f].func(b),void 0===b._stopPropogation);f++);}function r(c,b){for(var d=c.length;0<d;u++)if(c[u].toString()===b.toString())return!0;return!1}function p(c,b,d,f,g,e,k,z){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=d;this.oldValue=f;this.target=c;this.attr=b;this.arguments=g;this.action=e;this.child=void 0;this.type=
k;this.stopChange=z}function B(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function h(c,b,d,f){var g=c.get,e=c.set,k;return function(c){k=g.call(this);d(this,b,c,k,void 0,this._stopChange)&&e.call(this,c);this._stopChange||f(this,b,c,k);this._stopChange=void 0}}function P(c,b,d,f){var g;
return function(e){g=c.value;d(this,b,e,g,arguments,this._stopChange)&&(c.value=e);this._stopChange||f(this,b,e,g,arguments);this._stopChange=void 0}}function Q(c,b,d,f){var g=c.value,e;return function(){d(this,b,null,null,arguments,this._stopChange)&&(e=g.apply(this,arguments));this._stopChange||f(this,b,null,null,arguments,e);this._stopChange=void 0;return e}}function R(c,b,d,f,g){var e=g.style,k=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),z,h;return{get:function(){return h},set:function(c){z=
h;d(g,b,c,z,void 0,this._stopChange)&&(h=c,e.setProperty(k,c));this._stopChange||f(g,b,c,z);this._stopChange=void 0},enumerable:!0,configurable:!0}}function M(c,b,d,f){if("function"!==typeof b)return l;var g=-1!==["value","checked"].indexOf(c),e=-1!==y.indexOf(c),k;if(this.toString()!==l.toString())if(d){var h=this.querySelectorAll("*");d=h.length;for(var A,q=0;q<d;q++){A=h[q].attrListeners();if(g||"*"===c)void 0!==h[q].addInputBinding&&h[q].addInputBinding(),void 0!==h[q].addInputBoxBinding&&h[q].addInputBoxBinding();
if(e)l.injectStyleProperty(h[q],c),k=f?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){k=f?"_parentStyleUpdateListeners":"_parentStyleListeners";d=y.length;for(var v=0;v<d;v++)l.injectStyleProperty(h[q],y[v]);void 0===A[k]["*"]&&(A[k]["*"]=[]);A[k]["*"].push({parent:this,func:b})}k=f?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===A[k][c]&&(A[k][c]=[]);A[k][c].push({parent:this,func:b})}}else{A=this.attrListeners();if(e)k=f?"_styleUpdateListeners":"_styleListeners",
l.injectStyleProperty(this,c);else{if(g||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){k=f?"_styleUpdateListeners":"_styleListeners";d=y.length;for(q=0;q<d;q++)l.injectStyleProperty(this,y[q]);void 0===A[k][c]&&(A[k][c]=[]);A[k][c].push(b)}k=f?"_attrUpdateListeners":"_attrListeners"}void 0===A[k][c]&&(A[k][c]=[]);A[k][c].push(b)}else{if(g||"*"===c)for(v=document.querySelectorAll("input, textarea"),d=v.length,q=
0;q<d;q++)void 0!==v[q].addInputBinding&&v[q].addInputBinding(),void 0!==v[q].addInputBoxBinding&&v[q].addInputBoxBinding();if(e){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=e.length+1;e.unshift(document.body);for(q=0;q<d;q++)l.injectStyleProperty(e[q],c);k=f?H:G}else{if("*"===c){e=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=e.length+1;g=y.length;e.unshift(document.body);for(q=0;q<d;q++)for(v=0;v<g;v++)l.injectStyleProperty(e[q],y[v]);k=f?H:G;void 0===
k[c]&&(k[c]=[]);k[c].push(b)}k=f?L:n}void 0===k[c]&&(k[c]=[]);k[c].push(b)}}function O(c,b,d,f){function g(c,d){var e=d[c],f=e.length;for(k=0;k<f;k++)e[k].toString()===b.toString()&&e.splice(k,1)}if("function"!==typeof b)return l;["value","checked"].indexOf(c);var e=-1!==y.indexOf(c),k;if(this.toString()!==l.toString())if(d){d=this.querySelectorAll("*");var h=d.length;e?(e=f?"_childStyleUpdateListeners":"_childStyleListeners",g(c,this.attrListeners()[e]),e=f?"_parentStyleUpdateListeners":"_parentStyleListeners"):
("*"===c&&(e=f?"_childStyleUpdateListeners":"_childStyleListeners",g(c,this.attrListeners()[e])),e=f?"_childAttrUpdateListeners":"_childAttrListeners",g(c,this.attrListeners()[e]),e=f?"_parentAttrUpdateListeners":"_parentAttrListeners");for(k=0;k<h;k++){for(var A=d[k].attrListeners()[e][c],q=A.length,v=0;v<q;v++)A[v].isEqualNode(this)&&A.slice(v,1);if("*"===c)for(listenersStyle=f?"_parentStyleUpdateListeners":"_parentStyleListeners",A=d[k].attrListeners()[e][c],q=A.length,v=0;v<q;v++)A[v].isEqualNode(this)&&
A.slice(v,1)}}else e?e=f?"_styleUpdateListeners":"_styleListeners":("*"===c&&(e=f?"_styleUpdateListeners":"_styleListeners",g(c,this.attrListeners()[e])),e=f?"_attrUpdateListeners":"_attrListeners"),g(c,this.attrListeners()[e]);else e?e=f?H:G:("*"===c&&(e=f?H:G,g(c,e)),e=f?L:n),g(c,e)}function T(c,b){l.addAttrListener.call(this,c,b,!0);return this}function K(c,b){l.addAttrUpdateListener.call(this,c,b,!0);return this}function S(c,b){l.removeAttrListener.call(this,c,b,!0);return this}function I(c,b){l.removeAttrUpdateListener.call(this,
c,b,!0);return this}function E(c,b,d){var f=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(c){case "attr":if(r(f._attrListeners[b],d))return!0;break;case "attrupdate":if(r(f._attrUpdateListeners[b],d))return!0}return!1}function x(){this._stopChange=!0;return this}function l(){function c(b,c){var d,e=c.length;for(d=0;d<e;d++)-1===b.indexOf(c[d])&&b.push(c[d]);return b}function b(b,c){for(var d=Object.keys(b),e,f,g=0,k=d.length;g<k;g++)if(e=d[g],void 0===c[e])c[e]=
b[e].slice();else for(var m=0,h=b[e].length;m<h;m++)f=b[e][m],c[e].push(f)}function d(d){if(3!==d.target.nodeType&&8!==d.target.nodeType){var e=d.target.attrListeners(),f,g=["value","checked"],k=e._attrListeners,m=e._attrUpdateListeners,h=e._parentAttrListeners;f=e._parentAttrUpdateListeners;var x=!1;if(void 0!==n["*"]||void 0!==L["*"])x=!0;if(!0!==x&&void 0!==k["*"]||void 0!==m["*"]||void 0!==h["*"]||void 0!==f["*"])x=!0;if(!0!==x)for(var p=0;p<g.length;p++)if(void 0!==n[g[p]]||void 0!==L[g[p]]||
void 0!==k[g[p]]||void 0!==m[g[p]]||void 0!==h[g[p]]||void 0!==f[g[p]]){x=!0;break}f=x;g=Object.keys(G);k=Object.keys(H);Object.keys(e._styleListeners);Object.keys(e._styleUpdateListeners);m=Object.keys(e._parentStyleListeners);e=Object.keys(e._parentStyleUpdateListeners);h=[];if(0!==g.length||0!==k.length)h=c(h,g),h=c(h,k);if(0!==h.length&&0!==m.length||0!==e.length)h=c(h,m),h=c(h,e);-1!==h.indexOf("*")&&(h=y);var e=h,g=e.length,r,u,k=[],w,m="outerHTML"===d.attr||"outerText"===d.attr?d.attr:void 0,
h=d.target;void 0!==m&&(d.attr="appendChild",d.arguments=[d.target],d.target=d.target.parentElement);if(f){"appendChild"===d.attr&&3!==d.arguments[0].nodeType&&8!==d.arguments[0].nodeType?(k=Array.prototype.slice.call(d.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==d.arguments[0].tagName&&"TEXTAREA"!==d.arguments[0].tagName||k.unshift(d.arguments[0])):k=Array.prototype.slice.call(d.target.querySelectorAll("input,textarea"));w=k.length;for(var t=0;t<w;t++)void 0!==k[t].addInputBinding&&
k[t].addInputBinding(),void 0!==k[t].addInputBoxBinding&&k[t].addInputBoxBinding()}"appendChild"===d.attr&&"#text"!==d.arguments[0].nodeName&&"#comment"!==d.arguments[0].nodeName?(k=Array.prototype.slice.call(d.arguments[0].querySelectorAll("*")),k.unshift(d.arguments[0])):k=Array.prototype.slice.call(d.target.querySelectorAll("*"));f=d.target.__kb._parentAttrListeners;x=d.target.__kb._parentAttrUpdateListeners;p=d.target.__kb._parentStyleListeners;r=d.target.__kb._parentStyleUpdateListeners;w=k.length;
for(t=0;t<w;t++){if(0!==g)for(u=0;u<g;u++)l.injectStyleProperty(k[t],e[u]);u=k[t].attrListeners();b(f,u._parentAttrListeners);b(x,u._parentAttrUpdateListeners);b(p,u._parentStyleListeners);b(r,u._parentStyleUpdateListeners)}void 0!==m&&(d.attr=m,d.target=h,d.arguments=[])}}function f(b){var d=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:"";e(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])||b.preventDefault()}function m(b){var d=b.target.attributes[b.arguments[0]],
c="setAttribute"===b.attr?b.arguments[1]:"";k(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])}l.injectPrototypes(Node,"Node");l.injectPrototypes(Element,"Element");l.injectPrototypes(HTMLElement,"HTMLElement");l.injectPrototypes(HTMLInputElement,"HTMLInputElement");l.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");l.injectPrototypes(Document,"Document");var e=D,k=g;l.addAttrUpdateListener("appendChild",d);l.addAttrUpdateListener("removeChild",d);l.addAttrUpdateListener("innerHTML",
d);l.addAttrUpdateListener("outerHTML",d);l.addAttrUpdateListener("innerText",d);l.addAttrUpdateListener("outerText",d);l.addAttrUpdateListener("textContent",d);l.addAttrListener("setAttribute",f);l.addAttrListener("removeAttribute",f);l.addAttrUpdateListener("setAttribute",m);l.addAttrUpdateListener("removeAttribute",m);return l}var n={},L={},G={},H={},J={},F="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),y=Object.getOwnPropertyNames(document.documentElement.style),
C=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener","removeEventListener"]),u,D=function(c,b,d,f,g,e){d=new p(c,b,d,f,g,void 0,"set",e);void 0!==c.__kb&&(f=c.__kb._attrListeners,g=c.__kb._styleListeners,e=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==f[b]&&w(f[b],d),void 0===d._stopPropogation&&void 0!==g[b]&&w(g[b],d),void 0===d._stopPropogation&&void 0!==f["*"]&&(w(f["*"],d),void 0===d._stopPropogation&&w(g["*"],d)),
void 0===d._stopPropogation&&void 0!==e[b]&&t(e[b],d),void 0===d._stopPropogation&&void 0!==c[b]&&t(c[b],d),void 0===d._stopPropogation&&void 0!==e["*"]&&(t(e["*"],d),void 0===d._stopPropogation&&t(c["*"],d)));void 0===d._stopPropogation&&void 0!==n[b]&&w(n[b],d);void 0===d._stopPropogation&&void 0!==G[b]&&w(G[b],d);void 0===d._stopPropogation&&void 0!==n["*"]&&(w(n["*"],d),void 0===d._stopPropogation&&w(G["*"],d));return void 0!==d._preventDefault?!1:!0},g=function(c,b,d,f,g,e){d=new p(c,b,d,f,g,
e,"update");void 0!==c.__kb&&(f=c.__kb._attrUpdateListeners,g=c.__kb._styleUpdateListeners,e=c.__kb._parentAttrUpdateListeners,c=c.__kb._parentStyleUpdateListeners,void 0!==f[b]&&w(f[b],d),void 0===d._stopPropogation&&void 0!==g[b]&&w(g[b],d),void 0===d._stopPropogation&&void 0!==f["*"]&&(w(f["*"],d),void 0===d._stopPropogation&&w(g["*"],d)),void 0===d._stopPropogation&&void 0!==e[b]&&t(e[b],d),void 0===d._stopPropogation&&void 0!==c[b]&&t(c[b],d),void 0===d._stopPropogation&&void 0!==e["*"]&&(t(e["*"],
d),void 0===d._stopPropogation&&t(c["*"],d)));void 0===d._stopPropogation&&void 0!==L[b]&&w(L[b],d);void 0===d._stopPropogation&&void 0!==H[b]&&w(H[b],d);void 0===d._stopPropogation&&void 0!==L["*"]&&(w(L["*"],d),void 0===d._stopPropogation&&w(H["*"],d));return void 0!==d._preventDefault?!1:!0};l.injectPrototypeProperty=function(c,b,d,f,m){var e=c.prototype,k=Object.getOwnPropertyDescriptor(e,b);d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var n=J[d];f=f||D;m=m||g;void 0===e.attrListeners&&
(e={},e.attrListeners=function(){void 0===this.__kb&&(this.__kb=new B);return this.__kb}.bind(e),e.addAttrListener=l.addAttrListener,e.addAttrUpdateListener=l.addAttrUpdateListener,e.addChildAttrListener=T,e.addChildAttrUpdateListener=K,e.hasListener=E,e.removeAttrListener=l.removeAttrListener,e.removeAttrUpdateListener=l.removeAttrUpdateListener,e.removeChildAttrListener=S,e.removeChildAttrUpdateListener=I,e.stopChange=x);void 0===n&&(J[d]={obj:c,proto:e,descriptors:{},set:void 0,update:void 0},
n=J[d],n.set=f,n.update=m);void 0===n.descriptors[b]&&(n.descriptors[b]=k);k.configurable&&(void 0!==k.set?Object.defineProperty(e,b,{get:k.get,set:h(k,b,f,m),enumerable:!0,configurable:!0}):"function"===typeof k.value?Object.defineProperty(e,b,{value:Q(k,b,f,m),writable:!0,enumerable:!0,configurable:!0}):void 0!==k.value&&Object.defineProperty(e,b,{get:function(){return k.value},set:P(k,b,f,m),enumerable:!0,configurable:!0}));return l};l.injectStyleProperty=function(c,b,d,f){var h=c.style,e=Object.getOwnPropertyDescriptor(h,
b),k=c.attrListeners().injectedStyle;d=d||D;f=f||g;void 0===k&&(c.attrListeners().injectedStyle={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=d,c.attrListeners().injectedStyle.update=f,k=c.attrListeners().injectedStyle);void 0===k.descriptors[b]&&(k.descriptors[b]=e);e.configurable&&Object.defineProperty(h,b,R(e,b,d,f,c));return l};l.injectPrototypes=function(c,b,d,f){var h=c.prototype;b=b||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var e=
J[b],k=Object.getOwnPropertyNames(h);d=d||D;f=f||g;var n;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new B);return this.__kb},h.addAttrListener=l.addAttrListener,h.addAttrUpdateListener=l.addAttrUpdateListener,h.addChildAttrListener=T,h.addChildAttrUpdateListener=K,h.removeAttrListener=l.removeAttrListener,h.removeAttrUpdateListener=l.removeAttrUpdateListener,h.removeChildAttrListener=S,h.removeChildAttrUpdateListener=I,h.hasListener=E,h.stopChange=x);void 0===
e&&(J[b]={obj:c,proto:h,descriptors:{},set:void 0,update:void 0},e=J[b],e.set=d,e.update=f);n=J[b].descriptors;for(f=0;f<k.length;f+=1)void 0===n[k[f]]&&l.injectPrototypeProperty(c,k[f],b,d,g);if(-1!==k.indexOf("value")){var p=function(b){var d,c,f;if("checkbox"===this.type||"radio"===this.type)d=!0;c=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;d&&(e.set(this,
"checked",this.checked,c)?e.update(this,"checked",this.checked,c):n.checked.set.call(this,c));this.value!==f&&(this.value=f);e.set(this,"value",this.value,c)?e.update(this,"value",this.value,c):n.value.set.call(this,c)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",p)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",p)};h.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=
void 0;this.removeEventListener("mouseup",p)};h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",p)}}return l};l.addAttrListener=function(c,b,d){if("html"===c){c=0;for(var f=F.length;c<f;c++)M.call(this,F[c],b,d,!1)}else if("events"===c)for(c=0,f=C.length;c<f;c++)M.call(this,C[c],b,d,!1);else M.call(this,c,b,d,!1);return this};l.addAttrUpdateListener=function(c,b,d){if("html"===c){c=0;for(var f=F.length;c<f;c++)M.call(this,F[c],b,d,!0)}else if("events"===
c)for(c=0,f=C.length;c<f;c++)M.call(this,C[c],b,d,!0);else M.call(this,c,b,d,!0);return this};l.removeAttrListener=function(c,b,d){if("html"===c){c=0;for(var f=F.length;c<f;c++)O.call(this,F[c],b,d,!1)}else if("events"===c)for(c=0,f=C.length;c<f;c++)O.call(this,C[c],b,d,!1);else O.call(this,c,b,d,!1);return this};l.removeAttrUpdateListener=function(c,b,d){if("html"===c){c=0;for(var f=F.length;c<f;c++)O.call(this,F[c],b,d,!0)}else if("events"===c)for(c=0,f=C.length;c<f;c++)O.call(this,C[c],b,d,!0);
else O.call(this,c,b,d,!0);return this};l.hasListener=function(c,b,d){"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(c){case "attr":if(r(n[b],d))return!0;break;case "attrupdate":if(r(L[b],d))return!0}return!1};l.injectedPrototypes=function(){return J};return l}"function"===typeof define&&define.amd&&define("KB",t);return t}(),Y=function(){return function(){function t(r){0===r.length&&(r=w);document.body.innerHTML="<"+r+"></"+r+">";N(r);return t}var w="",N=function(){};t.base=function(r){if(void 0===
r)return w;w="string"===typeof r?r:w;return t};t.onChange=function(r){if(void 0===r)return N;N="function"===typeof r?r:N;return t};t.watch=function(r){window.onhashchange=r?function(){t(window.location.hash.replace("#",""))}:null;return t};return t}}(),U=function(t){return function(){function w(g,c){this.name=g.tagName.toLowerCase();this.template=H[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=g;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");
this.wrapper.className="Wrapper Wrapper__"+this.name;c||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);c||(this.maps=this.map(this.wrapper));c||(this.wrapper.kb_maps=this.maps)}function N(){return new RegExp("(\\"+y.split("").join("\\")+")(.*?)(\\"+C.split("").join("\\")+")","g")}function r(g,c,b,d,f,m,e,k){function z(b){var d="for"===c?l(b):[],e=this;this.key="for"!==c?E(b):d[0];this.localKey=this.key.split(".").pop();this.filterNames=x(b);this.component="for"===c?
d[1]:void 0;this.id=0;this.isEvent=r;this.isInput=q;this.isRadio=v;this.__proto__.bindText=this.__proto__.bindText.map(function(d){return d===b?this:d});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:p,set:B,enumerable:!0,configurable:!0}});this.updateData=function(b){if(e.isConnected&&e._data){if("object"!==typeof b||void 0===b.value)b={value:b};"function"===typeof e._data.stopChange&&e._data.stopChange().set(e.key,b.value)}};this.updateDom=function(b){e.refresh()};this.updateLoop=
function(b){e.kb_loop&&e.loop(b,e.kb_loop)}}var r="attribute"===c&&-1!==F.indexOf(e.name)||"component"===c&&e.name&&-1!==F.indexOf(e.name),q="input"===k.tagName.toLowerCase(),v="radio"===k.type||"check"===k.type;r&&k.stopChange().removeAttribute(e.name);Object.defineProperties(z.prototype,{refresh:n(Q),connect:n(R),deleteMap:n(O),loop:n(M),unsync:n(K),unconnect:n(T),isSynced:n(h),type:n(c),text:n(b,!0),bindText:n(d,!0),bindNames:n("for"===c?[l(d[0])[0]]:I(d),!0),bindMaps:n([],!0),bindListener:n(r?
f.toLowerCase():f),bindProperty:n(r?e.name.toLowerCase():m),bindTarget:n(e,!0),element:n(k,!0),_data:n({},!0),filters:n({},!0),maps:n(g,!0)});return z}function p(){return this._data.get?this._data.get(this.key):""}function B(g){this._data.set&&this._data.stopChange().set(this.key,g)}function h(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function P(g,c){function b(b,c){return c.reduce(function(c,e){return c+("string"===typeof e?e:0===e.filterNames.length?e.value:
e.filterNames.reduce(function(c,e){if(void 0!==b.filters){if(void 0!==b.filters[e])return b.filters[e](c);console.warn("there is no filter by the name %o in the data model filters %o",e,Object.keys(b.filters));return c}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return c},e.value))},"")}return 1===c.length?"function"!==typeof c[0].value&&"object"!==typeof c[0].value?b(g,c):c[0].value:b(g,c)}function Q(){if("for"!==this.type)if(this.isEvent)this.element.stopChange()[this.bindProperty]=
this.bindText[0].value;else if("component"===this.type)this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=P(this,this.bindText);else if("innerHTML"===this.key){this.bindTarget[this.bindProperty]="";for(var g=0,c=this.value.length;g<c;g++)this.element.stopChange().appendChild(this.value[g])}else this.bindTarget[this.bindProperty]=P(this,this.bindText),this.isInput&&(this.element.stopChange()[this.bindTarget.name]=P(this,
this.bindText));return this}function R(g){this.__proto__._data=g;this.__proto__.filters=void 0!==g.filters?g.filters:this.filters;for(var c=0,b=this.bindNames.length;c<b;c++)g.addDataUpdateListener&&(g.exists(this.bindNames[c])||(console.warn("No property by the name %o exists on this data set %o",this.bindNames[c],g),g.add(this.bindNames[c],this.value)),this.refresh(),"component"!==this.type&&"for"!==this.type?(this.isConnected=!0,g.getLayer(this.key).addDataUpdateListener(this.bindNames[c],this.updateDom)):
"for"===this.type&&g.addDataUpdateListener&&(this.element.stopChange().innerHTML="",g.getLayer(this.key).addDataMethodUpdateListener(this.updateLoop).addDataDeleteListener(this.updateLoop)));1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function M(g,c){"function"===typeof g&&(this.kb_loop=g);for(var b=this._data.get(this.key),d=0,f=this.filterNames.length;d<
f;d++)b=this.filters[this.filterNames[d]](b);if("function"===typeof g)for(b=0,d=this._data.get(this.key).length;b<d;b++)f=document.createElement(this.component),f.k_post=this._data.get(this.key)[b],f.k_post.k_id=b,f.kb_wrapper=this.element.kb_wrapper,this.element.stopChange().appendChild(f),g(f);else if("postset"===g.type&&("undefined"===typeof g.oldValue||"string"===typeof g.oldValue&&0===g.oldValue.length))f=document.createElement(this.component),b=this.element.children.length,f.k_post=this._data.get(this.key)[g.key],
f.kb_wrapper=this.element.kb_wrapper,parseInt(g.key)>=b?this.element.stopChange().appendChild(f):this.element.stopChange().insertBefore(f,this.element.children[g.key]),"function"===typeof c&&c(f);else if("delete"===g.event)this.element.stopChange().removeChild(this.element.children[g.key]);else if("postpush"!==g.type)for(b=0,d=this._data.get(this.key).length;b<d;b++){for(var f=0,h=Object.keys(this.element.children[b].kb_viewmodel.pointers).length;f<h;f++);for(var f=this.element.children[b].kb_maps,
h=0,e=Object.keys(f),k=e.length;h<k;h++)for(var l=0,n=f[e[h]].length;l<n;l++)f[e[h]][l].unconnect().connect(f[e[h]][l]._data)}}function O(){this.maps[this.key].splice(this.id,1);return this}function T(g){g=0;for(var c=this.bindNames.length;g<c;g++)this._data.getLayer(this.key).removeDataUpdateListener(this.bindNames[g],this.updateDom);return this}function K(){for(var g=0,c=this.bindNames.length;g<c;g++)this._data.removeDataUpdateListener&&("for"===this.type?this._data.getLayer(this.key).removeDataMethodUpdateListener("*",
this.updateLoop).removeDataDeleteListener(this.updateLoop):"component"!==this.type&&this._data.getLayer(this.key).removeDataUpdateListener(this.bindNames[g],this.updateDom));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.maps[this.key].splice(this.id,1);g=0;for(c=this.maps[this.key].length;g<c;g++)this.maps[this.key][g].id=g;this.bindMaps=this.maps=this.bindNames=null;this.__proto__._data=null;this.__proto__.element=null;this.__proto__.filters=
null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return this}function S(g){return g.split(new RegExp("("+y.split("").join("\\")+")(.*?)("+C.split("").join("\\")+")","g")).map(function(c,b,d){return d[b-1]===y?y+c+C:c}).filter(function(c,b,d){return 0!==c.length&&c!==y&&c!==C&&0!==c.length})}function I(g){return g.filter(function(c){return-1!==c.indexOf(y)&&-1!==c.indexOf(C)}).map(function(c){return E(c)})}
function E(g){return g.replace(new RegExp("["+y+C+"]","g"),"").replace(new RegExp("\\"+u.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function x(g){return-1!==g.indexOf(u)?g.replace(new RegExp("["+C+"]","g"),"").replace(new RegExp("(.*?)(\\"+u.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function l(g){return-1!==g.indexOf("for")?g.replace(new RegExp("["+y+C+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(c){return 0!==c.length}):[]}
function n(g,c,b){return{value:g,writable:!!c,enumerable:!1,configurable:!!b}}function L(g,c){for(var b=D[g],d=0,f=b.length;d<f&&(b[d](c),c._stopPropogation);d++);return c._preventDefault}function G(g){var c=g.match(J).map(function(b){return b.replace(/[<\/>]/g,"")});c.filter(function(b,d){return document.createElement(b)instanceof HTMLUnknownElement&&-1===c.indexOf(b,d+1)&&void 0===H[b]});0!==c.length&&L("unknown",new Event("unknown",c));return c}var H={},J=/(<\/.*?>)/g;t().call();var F=Object.keys(HTMLElement.prototype).filter(function(g){return 0===
g.indexOf("on")}),y="{{",C="}}",u="|",D={unknown:[]};w.prototype.map=function(g){function c(d){d=Array.prototype.slice.call(d);for(var f=0,h=d.length;f<h;f++)if(void 0===d[f].kb_maps&&8!==d[f].nodeType){d[f].kb_mapper=g;if(3===d[f].nodeType){var e=d[f],k=b,l=e.textContent,n=e.parentElement instanceof HTMLUnknownElement;if(l.match(N()))for(var q=n?"component":l.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+C.split("").join("\\")+")","g"))?"for":"text",e=r(k,q,l,S(l),
n?"":"textContent","textContent",e,e.parentElement),l=0,n=e.prototype.bindText.length;l<n;l++)q=e.prototype.bindText[l],0===q.indexOf(y)&&(q=new e(q),e.prototype.bindText[l]=q,void 0===k[q.key]&&(k[q.key]=[]),q.id=k[q.key].length,k[q.key].push(q))}else for(var k=d[f],e=b,l=Array.prototype.slice.call(k.attributes),n=k instanceof HTMLUnknownElement,x=void 0,q=0,p=l.length;q<p;q++)if(x=l[q],x.value.match(N()))for(var x=r(e,n?"component":"attribute",x.value,S(x.value),n?"":x.name,"value",x,k),u=0,w=x.prototype.bindText.length;u<
w;u++){var t=x.prototype.bindText[u];0===t.indexOf(y)&&(t=new x(t),x.prototype.bindText[u]=t,void 0===e[t.key]&&(e[t.key]=[]),e[t.key].push(t),t.id=e[t.key].length-1)}d[f].childNodes&&0!==d[f].childNodes.length&&c(d[f].childNodes)}}var b={};c(g.childNodes);return b};Object.defineProperties(w,{start:n(function(g){if(void 0===g)return y;y="string"===typeof g?g:y;return this}),end:n(function(g){if(void 0===g)return C;C="string"===typeof g?g:C;return this}),pipe:n(function(g){if(void 0===g)return u;u=
"string"===typeof g?g:u;return this}),getUnknown:n(G),isRegistered:n(function(g){return void 0!==H[g]}),register:n(function(g,c){void 0===H[g]?(H[g]=c,G(c)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",g);return this}),addEventListener:n(function(g,c){void 0!==D[g]?D[g].push(c):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",g);return this}),removeEventListener:n(function(g,c){if(void 0!==D[g])for(var b=
0,d=D[g].length;b<d;b++)D[g][b].toString()===c.toString()&&D[g].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",g);return this})});return w}}(U),V=function(t,w,N,r){return function(){function p(x,l,n,r){function t(g,c,b,d,f){for(var m=Q({},g),e=0,k=Object.keys(c.prototype),l=k.length;e<l;e++)m.__proto__[k[e]]=c.prototype[k[e]];e=0;k=Object.keys(d);for(l=k.length;e<l;e++)-1!==S.indexOf(k[e])?Object.defineProperty(m,k[e],h(d[k[e]],"filters"!==
k[e])):d.pointers?void 0===d.pointers[k[e]]&&m.set(k[e],d[k[e]]):m.set(k[e],d[k[e]]);if(d.pointers)for(m.pointers||Object.defineProperty(m,"pointers",h({},!1,!0)),e=0,k=Object.keys(d.pointers),l=k.length;e<l;e++)m.pointers[k[e]]=d.pointers[k[e]],m.addPointer(m.pointers[k[e]].point,m.pointers[k[e]].key,k[e]);c.apply(m,b);e=0;k=Object.keys(f);for(l=k.length;e<l;e++)-1!==S.indexOf(k[e])?Object.defineProperty(m,k[e],h(f[k[e]],"filters"!==k[e])):f.pointers?void 0===f.pointers[k[e]]&&m.set(k[e],f[k[e]]):
m.set(k[e],f[k[e]]);if(f.pointers)for(m.pointers||Object.defineProperty(m,"pointers",h({},!1,!0)),e=0,k=Object.keys(f.pointers),l=k.length;e<l;e++)m.pointers[k[e]]=f.pointers[k[e]],m.addPointer(m.pointers[k[e]].point,m.pointers[k[e]].key,k[e]);e=0;k=Object.keys(m.filters);for(l=k.length;e<l;e++)m.filters[k[e]]=m.filters[k[e]].bind(m);if(m.sessionStorage){if(c=sessionStorage.getItem(m.id||g))for(c=JSON.parse(c),e=0,k=Object.keys(c),l=k.length;e<l;e++)m.set(k[e],c[k[e]]);else sessionStorage.setItem(m.id||
g,m.stringify());m.addChildDataUpdateListener("*",function(){sessionStorage.setItem(m.id||g,m.stringify())})}if(m.localStorage){if(c=localStorage.getItem(m.id||g))for(c=JSON.parse(c),e=0,k=Object.keys(c),l=k.length;e<l;e++)m.set(k[e],c[k[e]]);else localStorage.setItem(m.id||g,m.stringify());m.addChildDataUpdateListener("*",function(){localStorage.setItem(m.id||g,m.stringify())})}m.store&&O.set(m.id||g,m);return m}function w(g,c,b){g.kb_viewmodel=b;c.wrapper.innerHTML=y.template.replace(new RegExp("("+
R.start()+"local"+R.end()+")","g"),b.local);var d=c.maps=c.map(c.wrapper);c.wrapper.kb_maps=d;Object.keys(d).forEach(function(c){d[c].forEach(function(c){switch(c.type){case "for":c.connect(b);R.isRegistered(c.component)?c.loop(function(b){p(b)}):(p.loadWaitList(c.component,function(b,d){c.loop(function(b){p(b)})}),p.loadWaitList(c.component).loading||(p.loadWaitList(c.component).loading=!0,P(c.component)));break;case "component":c.connect(b).unsync();break;default:c.connect(b)}})});c.wrapper.kb_viewmodel.onFinish.call(c.wrapper.kb_viewmodel,
c.wrapper)}function E(g,c){y=new R(c,!0);Object.defineProperty(y.wrapper,"__kbcomponenttree",h(c.kb_mapper?c.kb_mapper.__kbcomponenttree.slice():[]));c.parentElement.replaceChild(y.fragment,c);l.unshift(y.wrapper);w(y.wrapper,y,t(g,T[g],l,u,D));if(-1===y.wrapper.__kbcomponenttree.indexOf(g)||y.wrapper.kb_viewmodel.multiple){y.wrapper.__kbcomponenttree.push(g);y.wrapper.classList.add(y.wrapper.kb_viewmodel.local);for(var b=y.wrapper.querySelectorAll("*"),d=0,f=b.length;d<f;d++)b[d]instanceof HTMLUnknownElement&&
p(b[d])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",g),console.error("Recursive Component %o on %o",y.wrapper,y.wrapper.parentElement),y.wrapper.parentElement.removeChild(y.wrapper)}var F=x.tagName.toLowerCase(),y,C=Object.keys(HTMLElement.prototype).filter(function(g){return 0===
g.indexOf("on")}),u={},D={};void 0===l&&(l=[]);n&&B(n,u);Object.defineProperty(u,"local",h(u.local||F+"-"+Date.now(),!0,!1,!0));Object.defineProperty(u,"filters",h(u.filters||{},!1,!1,!0));"function"!==typeof u.onFinish&&(u.onFinish=function(){});Object.defineProperty(u,"onFinish",h(u.onFinish,!0,!1,!0));"string"===typeof u.sessionStorage&&(u.sessionStorage="true"===u.sessionStorage);Object.defineProperty(u,"sessionStorage",h(void 0!==u.sessionStorage?u.sessionStorage:!1,!0,!1,!0));"string"===typeof u.localStorage&&
(u.localStorage="true"===u.localStorage);Object.defineProperty(u,"localStorage",h(void 0!==u.localStorage?u.localStorage:!1,!0,!1,!0));"string"===typeof u.store&&(u.store="true"===u.store);Object.defineProperty(u,"store",h(void 0!==u.store?u.store:!1,!0,!1,!0));"string"===typeof u.multiple&&(u.multiple="true"===u.multiple);Object.defineProperty(u,"multiple",h(void 0!==u.multiple?u.multiple:!1,!0,!1,!0));r&&B(r,D);D.innerHTML=Array.prototype.slice.call(x.childNodes);n=0;for(r=x.attributes.length;n<
r;n++)D[x.attributes[n].name]=x.attributes[n].value;n=0;for(r=C.length;n<r;n++)x[C[n]]&&(D[C[n]]=x[C[n]]);x.k_post&&B(x.k_post,D);R.isRegistered(F)?E(F,x):(p.loadWaitList(F,function(g,c){E(F,x)}),p.loadWaitList(F).loading||(p.loadWaitList(F).loading=!0,P(F)))}function B(h,l){var n=Object.keys(h);l.pointers||Object.defineProperty(l,"pointers",{value:{},writable:!0,enumerable:!1,configurable:!0});for(var p=0,r=n.length;p<r;p++)if(Q.prototype.isObservable(h,n[p]))l.pointers[n[p]]={key:h.__kbscopeString.split(".").pop(),
point:h.__kbImmediateParent};else if(Q.prototype.isMixed(h[n[p]]))l.pointers[n[p]]={key:h[n[p]].__kbImmediateParent.__kbscopeString.split(".").pop(),point:h[n[p]].__kbImmediateParent.__kbImmediateParent};else if(Q.prototype.isObject(h[n[p]]))for(var t=0,w=Object.keys(h[n[p]]);t<r;t++)l[n[p]][w[t]]=h[n[p]][w[t]];else if(Q.prototype.isArray(h[n[p]]))for(t=0;t<r;t++)l[n[p]][t]=h[n[p]][t];else l[n[p]]=h[n[p]]}function h(h,l,n,p){return{value:h,writable:!!l,enumerable:!!p,configurable:!!n}}window.K_Components||
(window.K_Components={});var P=w().onLoad(function(h,l){var n="<style>"+unescape(l.prototype.k_css)+"</style>"+unescape(l.prototype.k_html);p.register(h,l,n,l.prototype.cms);p.loadWaitList(h).forEach(function(n){n(h,l)});p.loadWaitList(h,"clear")}),Q=t(),R=N(),M=r().base(void 0!==config&&void 0!==config.base?config.base:"default").watch(!0).onChange(function(h){p(document.querySelector(h))}),O=Q({},"Model"),T={},K=function(){return window.location.search.replace("?","").split("&").filter(function(h){return 0!==
h.length}).reduce(function(h,l){h[l.split("=")[0]]=l.split("=")[1];return h},{})}(),S="id filters class sessionStorage localStorage store component multiple".split(" "),I={},E;p.register=function(h,l,n,r){R.register(h,n);T[h]=l;return p};p.loadWaitList=function(h,l){if("undefined"===typeof l&&h)return I[h];if(h){if(void 0===I[h]||"clear"===l){var n=void 0===I[h]?!1:!!I[h].loading;I[h]=[];I[h].loading=n}"function"===typeof l&&I[h].push(l)}return p};p.localRouting=function(h){h?(E=Node.prototype.appendChild,
Node.prototype.appendChild=function(h){if("script"===h.nodeName.toLowerCase()){h.src=h.src.substring(0,-1!==h.src.indexOf("?")?h.src.indexOf("?"):h.src.length);var n=h.src.match(/(.*?component\/)/);n&&(K.env||(K.env="prod"),"dev"===K.env&&(K.env="qa"),n=h.src.replace(n[0],"").replace(/[\/\s]/g,""),h.src="/components/"+n+"/build/"+K.env+"/"+n+(K.debug&&"prod"!==K.env?"":".min")+".js",arguments[0]=h)}return E.apply(this,arguments)}):E&&(Node.prototype.appendChild=E,E=null);return p};p.hashRouting=function(h){h&&
M(window.location.hash.replace("#",""))};return p}}(W,X,U,Y);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return V}):"undefined"!==typeof module&&(module.exports=V);return V}();
