var Konnekt=function(){var T=function(){return function(D,z,R,p){function x(b,c,f,d){b=void 0===b?{}:b;var h={};if("undefined"===typeof Proxy)return console.error("There is no support for proxies! This library can not be used here, please update Your js library or browser");var l=new Proxy(h,{set:N,deleteProperty:A}),q=Object.keys(b,"all");Object.defineProperties(h,{__kbname:k("string"===typeof c?c:"default",!0,!0),__kbref:k(f?f.__kbref||f:l,!0,!0),__kbscopeString:k(d||"",!0,!0),__kbImmediateParent:k(f||
null,!0,!0),__kbsubscribers:k({}),__kblisteners:k({}),__kbupdatelisteners:k({}),__kbparentlisteners:k({}),__kbparentupdatelisteners:k({}),__kbcreatelisteners:k([]),__kbdeletelisteners:k([]),__kbparentcreatelisteners:k([]),__kbparentdeletelisteners:k([]),__kbpointers:k({}),__kbevents:k(v),length:k(0,!0),__kbnonproxy:k(h,!1,!0),_stopChange:k(!1,!0)});c=0;for(f=q.length;c<f;c++)l[q[c]]=b[q[c]];h.__proto__=x.prototype;h.__kbevents.addlistener=[];h.__kbevents.removelistener=[];h.addActionListener("addlistener",
function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])}).addActionListener("removelistener",function(c){if("string"===typeof c.arguments[0]&&void 0!==c.local.__kbpointers[c.arguments[0]])c.local.__kbpointers[c.arguments[0]][c.arguments[2]](c.arguments[0],c.arguments[1])});return l}function w(b,c,f,d,h,l,q,r){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=
function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=l;this.type=this.event=f;this.listener=q;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.___kbImmediateParent;this.value=d;this.oldValue=h;this.stopChange=r}function k(b,c,f){return{value:b,writable:!!c,enumerable:!1,configurable:!!f}}function P(b,c,f){return{get:function(){return b.call(this)},set:function(f){c&&(b=f)},enumerable:!1,configurable:!!f}}function L(b,c){var f=c,d=c;return{get:function(){return f},
set:function(c){var l=new w(this,b,"set",c,f,arguments,"__kblisteners",this._stopChange);!0!==g(l)&&(d=f,f=c,l.stopChange||(l.listener="__kbupdatelisteners",l.type="postset",g(l)),this._stopChange||this.callSubscribers(b,f,d));this._stopChange=!1},configurable:!0,enumerable:!0}}function Q(b,c,f){return{get:function(){return b[c]},set:function(f){(this._stopChange?b.stopChange():b)[c]=f;this._stopChange=!1},enumerable:f.enumerable,configurable:f.configurable}}function M(b,c){for(var f=[{listener:"__kbparentlisteners",
action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],d=[],h,l=0,q=f.length;l<q;l++)if(h=b[f[l].listener],u.call(h))for(var d=Object.keys(h),r=0,t=d.length;r<t;r++)for(var g=0,e=h[d[r]].length;g<e;g++)c[f[l].method](d[r],h[d[r]][g]);else for(r=0,t=h.length;r<t;r++)c[f[l].method](h[r])}function H(b,c){var f=[{listeners:"__kblisteners",
method:"addDataListener"},{listeners:"__kbupdatelisteners",method:"addDataUpdateListener"}],d=[],h;if(b[c].__kbImmediateParent)for(var l=0,q=f.length;l<q;l++){h=b[f[l].listener];for(var d=Object.keys(h),r=0,t=d.length;r<t;r++)if(c===d[l])for(var g=0,e=h[d[l]].length;g<e;g++)void 0===b[c].__kbImmediateParent[f[l].listener][c]&&(b[c].__kbImmediateParent[f[l].listener][c]=[]),b[c].__kbImmediateParent[f[l].listener][c].push(h[d[l]][g])}M(b,b[c])}function O(b,c,f,d){f=new x(f,b.__kbname,b,b.__kbscopeString+
(0!==b.__kbscopeString.length?".":"")+c);M(b,f);if(d){d=new w(b,c,"create",f,void 0,[],"__kbcreatelisteners",b._stopChange);var h=g(d);!0!==h&&(Object.defineProperty(b,c,L(c,f)),d.listener="__kbupdatelisteners",d.type="postcreate",g(d))}else d=new w(b,c,"set",f,void 0,[],"__kblisteners",b._stopChange),h=g(d),!0!==h&&(Object.defineProperty(b,c,L(c,f)),d.listener="__kbupdatelisteners",d.type="postset",g(d));return!0!==h}function I(b,c,f,d){if(d){d=new w(b,c,"create",f,void 0,[],"__kbcreatelisteners",
b._stopChange);var h=g(d);if(!0!==h){var l=Object.getOwnPropertyDescriptor(f.__kbImmediateParent,c);Object.defineProperty(b,c,Q(f.__kbImmediateParent,c,l));b.__kbpointers.push(c);H(b,c);d.listener="__kbupdatelisteners";d.type="postcreate";g(d)}return!0!==h}l=Object.getOwnPropertyDescriptor(f.__kbImmediateParent,c);Object.defineProperty(b,c,Q(f.__kbImmediateParent,c,l));b.__kbpointers.push(c);H(b,c);return!0}function N(b,c,f){if(J.call(b,c)){if("length"===c)if(f>b.length&&void 0!==b[f-1])b.length=
f;else{if(f<b.length){c=f;for(var d=b.length;c<d;c++)b[c]&&delete b[c];b.length=f}}else{if("object"===typeof f)return O(b,c,f);if(f instanceof x)return I(b,c,f);b[c]=f}return!0}isNaN(parseInt(c,10))||(c=parseInt(c,10),b.length<=c&&(b.length=c+1));if(b._stopChange||"_stopChange"===c)return b[c]=f,!0;if(-1===E.indexOf(c)){if("object"===typeof f)return O(b,c,f,!0);if(f instanceof x)return I(b,c,f,!0);var d=new w(b,c,"create",f,void 0,[],"__kbcreatelisteners",b._stopChange),h=g(d);!0!==h&&(Object.defineProperty(b,
c,L(c,f)),d.listener="__kbupdatelisteners",d.type="postcreate",g(d));return!0!==h}}function A(b,c){var f=new w(b,c,"delete",b[c],void 0,[],"__kbdeletelisteners",b._stopChange),d=g(f);!0!==d&&("object"===typeof b[c]&&(b[c]=null),delete b[c],f.listener="__kbupdatelisteners",f.type="postdelete",g(f));return!0!==d}function u(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isObject to check"):"object"===Object.prototype["typeof"](void 0!==b?"object"===
typeof b?b:this[b]:this)}function m(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isArray to check"):"array"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function n(b){return this==Object.prototype&&void 0===b?console.error("No value specified in Object.prototype.isMixed to check"):"mixed"===Object.prototype["typeof"](void 0!==b?"object"===typeof b?b:this[b]:this)}function J(b,c){if(this==Object.prototype&&void 0===
b&&void 0===c)return console.error("No object and property specified in Object.prototype.isObservable to check");if(void 0===b)return console.error("No property specified in isObservable to check");var f=Object.getOwnPropertyDescriptor(void 0!==b&&"string"!==typeof b?b:this,void 0!==c?c:b);return f?void 0===f.value:!1}function C(b){return b.split(".")}function K(b,c){return function(f,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[c],l=new w(this,c,"addlistener",h,
void 0,arguments,"");"string"===typeof f&&1!==C(f).length&&(h=C(f),h.pop(),h.join("."),l.local=this.getLayer(h),h=l.local[c],l.value=h,f=C(f).pop());!0!==g(l)&&(u.call(h)?(void 0===h[f]&&(h[f]=[]),h[f].push(d),l.type="postaddlistener",g(l)):m.call(h)&&"function"===typeof f&&(h.push(f),l.type="postaddlistener",g(l)));return this}}function F(b,c){return function(f,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[c],l=new w(this,c,"removelistener",h,void 0,arguments,"");
"string"===typeof f&&1!==C(f).length&&(h=C(f),h.pop(),h.join("."),l.local=this.getLayer(h),h=l.local[c],l.value=h,f=C(f).pop());if(!0!==g(l))if(u.call(h)){if(void 0!==h[f])for(var q=0,r=h[f].length;q<r;q++)if(h[f][q].toString()===d.toString()){h[f].splice(q,1);l.type="postremovelistener";g(l);break}}else if(m.call(h)&&"function"===typeof f)for(q=0,r=h.length;q<r;q++)if(h[q].toString()===f.toString()){h.splice(q,1);l.type="postremovelistener";g(l);break}return this}}function y(b,c){function f(c,b,
l){var q=Object.keys(this,"all").filter(function(c){return n.call(this[c])}.bind(this)),r=this,g=c;"string"===typeof c&&1!==C(c).length&&(r=C(c),g=r.pop(),r.join("."),r=this.getLayer(r),void 0===r[l][c]&&(r[l][c]=[]),r[l][c].push(b));u.call(r[l])?(void 0===r[l][g]&&(r[l][g]=[]),r[l][g].push(b),void 0!==r.__kbpointers[g]&&(void 0===r.__kbpointers[g][g]&&(r.__kbpointers[g][g]=[]),r.__kbpointers[g][g].push(_func))):r[l].push(b);g=0;for(r=q.length;g<r;g++)f.call(this[q[g]],c,b,l)}return function(d,h){arguments=
Array.prototype.slice.call(arguments);arguments.push(b);var l=new w(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==g(l)&&(f.call(this,d,h,c),l.type="postaddchildlistener",g(l));return this}}function B(b,c){function f(c,b,l){var q=Object.keys(this,"all").filter(function(c){return n.call(this[c])}.bind(this)),g=this,t=c;if("string"===typeof c&&1!==C(c).length&&(g=C(c),t=g.pop(),g.join("."),g=this.getLayer(g),void 0!==g[l][c]))for(var e=0,G=g[l][c].length;e<G;e++)if(g[l][c][e].toString()===
b.toString()){g[l][c].splice(e,1);break}if(u.call(g[l])){if(void 0!==g[l][t]){e=0;for(G=g[l][t].length;e<G;e++)if(g[l][t][e].toString()===b.toString()){g[l][t].splice(e,1);break}if(-1!==g.__kbpointers.indexOf(t)&&void 0!==g[t].__kbImmediateParent[l][t])for(e=0,G=g[t].__kbImmediateParent[l][t].length;e<G;e++)if(g[t].__kbImmediateParent[l][t][e].toString()===b.toString()){g[t].__kbImmediateParent[l][t].splice(e,1);break}}}else for(e=0,G=g[l].length;e<G;e++)if(g[l][e].toString()===b.toString()){g[l].splice(e,
1);break}e=0;for(G=q.length;e<G;e++)f.call(this[q[e]],c,b,l)}return function(d,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var l=new w(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==g(l)&&(f.call(this,d,h,c),l.type="postremovechildlistener",g(l));return this}}var v={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],
reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},E=["__proto__"],e=function(b,c){if(!c._stopPropogration&&b)for(var f=0,d=b.length;f!==d&&(b[f](c),!c._stopPropogration);f++);},g=function(b){if(b.listener){var c=b.local[b.listener],f=b.local[b.listener.replace("__kb","__kbparent")];u.call(c)?(e(c[b.key],b),e(c["*"],b)):e(c,b);u.call(f)?
(e(f[b.key],b),e(f["*"],b)):e(f,b)}e(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof x?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,
10))})};Object.defineProperties(Object.prototype,{"typeof":k(function(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},!1,!0),sizeof:k(function(b){function c(b){for(var h=Object.keys(b,"all"),l=0,g=void 0,e=0,t=h.length;e<t;e++)g=b[h[e]],"object"===typeof g&&void 0!==g&&null!==g?-1===f.indexOf(g)&&(f.push(g),l+=c(g)):"string"===typeof g?l+=2*g.length:"number"===typeof g?l+=8:"boolean"===typeof g?l+=4:"function"===typeof g&&(l+=2*g.toString().length),l+=2*h[e].length;return l}
if(this==Object.prototype&&void 0===b)return console.error("No object specified in Object.prototype.sizeof");var f=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:k(u,!1,!0),isArray:k(m,!1,!0),isMixed:k(n,!1,!0),isObservable:k(J,!1,!0),stringify:k(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.stringify to stringify");var c=[];return JSON.stringify(this,function(b,d){if(m(d)||u(d)){if(-1!==c.indexOf(d))return;c.push(d)}return d})},
!1,!0),getKeys:k(function(b,c){return this==Object.prototype&&void 0===b?console.error("No object was specified in Object.prototype.getkeys"):Object.keys(void 0!==b&&"string"!==typeof b?"object"===typeof b?b:this[b]:this)},!1,!0),getIndexes:k(function(b){if(this==Object.prototype&&void 0===b)return console.error("No object was specified in Object.prototype.getIndexes");var c=void 0!==b?"object"===typeof b?b:this[b]:this;return c.slice().map(function(c,b){return b}).filter(function(b){return void 0!==
c[b]})},!1,!0),keyCount:P(function(){return this.getKeys("o").length},!1,!0),indexCount:P(function(b){return this.length},!1,!0),count:P(function(b){return this.keyCount+this.indexCount},!1,!0)});Object.defineProperties(x.prototype,{concat:k(Array.prototype.concat),every:k(Array.prototype.every),filter:k(Array.prototype.filter),find:k(Array.prototype.find),findIndex:k(Array.prototype.findIndex),forEach:k(Array.prototype.forEach),includes:k(Array.prototype.includes),indexOf:k(Array.prototype.indexOf),
join:k(Array.prototype.join),lastIndexOf:k(Array.prototype.lastIndexOf),map:k(Array.prototype.map),reduce:k(Array.prototype.reduce),reduceRight:k(Array.prototype.reduceRight),slice:k(Array.prototype.slice),some:k(Array.prototype.some),entries:k(Array.prototype.entries),toLocaleString:k(Array.prototype.toLocaleString),add:k(function(b,c){var f=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());"undefined"===f[b]&&(f[b]=c);return this}),set:k(function(b,c){var f=-1!==
b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());f[b]=c;return this}),get:k(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:k(function(b){var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());c&&void 0!==c[b]&&delete this[b];return this}),exists:k(function(b){var c=
-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:k(function(b,c){var f=-1!==b.indexOf(".")?this.setLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===f[b]?Object.defineProperty(f.__proto__,b,k(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,f);return this}),addPointer:k(function(b,c){b instanceof x||(b=new x(b,b.__kbname));var f=Object.getOwnPropertyDescriptor(b,
c);Object.defineProperty(this,c,Q(b,c,f));this.__kbpointers[c]=b}),move:k(function(b,c){this[c]=b[c];b instanceof x||(b[c]=null);delete b[c];return this}),copy:k(function(b,c){this[c]=b[c];return this}),merge:k(function(b){function c(b,h){for(var l=b instanceof x?b.keys("o"):Object.keys(b),g,e=0,t=l.length;e<t;e++)g=b[l[e]],"object"===typeof g&&-1===f.indexOf(g)&&"undefined"!==h[l[e]]?c(g,h):h[l[e]]=g}var f=[];c(b,this);return this}),copyWithin:k(function(b,c,f){c=c||0;f=f||0;var d=new w(this,b,"copyWithin",
this[b],void 0,arguments,"");if(!0!==g(d)&&b<this.length){b=0>b?this.length-1:b;c=c<this.length?c:this.length-1;f=f<this.length?f:this.length-1;c=0>c?this.length-1:c;f=0>c?this.length-1:f;for(var h=c;h<=f;h++)this[b+(h-c)]=this[h];d.type="postcopyWithin";g(d)}return this}),fill:k(function(b,c,f){c=void 0!==c?Math.max(0,c):0;f=void 0!==f&&f<=this.length?Math.min(this.length,Math.max(0,f)):this.length;var d=new w(this,_start,"fill",this[_start],void 0,arguments,"");if(!0!==g(d)){for(var h=a.key;h<f;h++)this[h]=
b;d.type="postfill";g(d)}return this}),pop:k(function(){var b=new w(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"");if(!0!==g(b)){var c=this[this.length-1];--this.length;b.type="postpop";g(b);return c}return null}),push:k(function(b){var c=new w(this,this.length,"push",b,void 0,arguments,"");!0!==g(c)&&(this[this.length]=b,c.type="postpush",g(c));return this.length}),reverse:k(function(){var b=new w(this,void 0,"reverse",void 0,void 0,arguments,"");if(!0!==g(b)){for(var c=this.slice().reverse(),
f=0,d=this.length;f<d;f++)this[f]=c[f];b.type="postreverse";g(b)}return this}),shift:k(function(){var b=new w(this,0,"shift",this[0],void 0,arguments,"");if(!0!==g(b)){for(var c=a.key,f=this.length-1;c<f;c++)this[c]=this[c+1];--this.length;b.type="postshift";g(b)}return null}),sort:k(function(){var b=new w(this,void 0,"sort",void 0,void 0,arguments,"");if(!0!==g(b)){for(var c=this.slice(),c=c.sort.apply(c,arguments),f=0,d=this.length;f<d;f++)this[f]=c[f];b.type="postsort";g(b)}return this}),splice:k(function(b,
c,f){var d=new w(this,b,"splice",void 0,void 0,arguments,"");if(!0!==g(d)){var h=[],l=Array.prototype.slice.call(arguments,2),q=l.length-2,e=0;if(0!==c&&void 0!==this[b-1+c])for(var t=0,k=c;t<k;t++){h.push(this[b+t]);for(var G=b+t,n=this.length-1;G<n;G++)this[G]=this[G+1];delete this[this.length-1]}if(0!==q)for(t=0,k=q;t<k;t++){e=b+Math.min(1,t);G=this.length;for(n=e;G>n;G--)this[G]=this[G-1];this[e]=l[t]}d.type="postsplice";d.listener="";g(d);return h}return[]}),unshift:k(function(){var b=new w(this,
0,"unshift",this[0],void 0,arguments,"");if(!0!==g(b)){for(var c=Array.prototype.slice.call(arguments),f=this.length-1+c.length,d=c.length;-1!==f;f--)this[f]=f<d?c[f]:this[f-c.length];b.type="postunshift";g(b)}return this.length}),getLayer:k(function(b){function c(b){var d=b[0];return void 0===this[d]&&0!==b.length-1?null:n(this[d])?0!==b.length-1?(b.shift(),c.call(this[d],b)):this[d]:this}b=C(b);return c.call(this,b)}),setLayer:k(function(b){function c(b){var d=b[0];void 0===this[d]&&0!==b.length-
1&&(this[d]=x({},this.__kbname,this,this.__kbscopeString+"."+d));return n(this[d])?0!==b.length-1?(b.shift(),c.call(this[d],b)):this[d]:this}b=C(b);return c.call(this,b)}),ignoreCreate:k(function(b){-1===E.indexOf(b)&&E.push(b);return this}),addActionListener:k(function(b,c){void 0!==this.__kbref.__kbevents[b]&&this.__kbref.__kbevents[b].push(c);return this}),removeActionListener:k(function(b,c){if(void 0!==this.__kbref.__kbevents[b])for(var f=0,d=this.__kbref.__kbevents[b];f<d;f++)if(this.__kbref.__kbevents[b][f].toString()===
c.toString()){this.__kbref.__kbevents[b].splice(f,1);break}return this}),subscribe:k(function(b,c){void 0===this.__kbsubscribers[b]&&(this.__kbsubscribers[b]=[]);this.__kbsubscribers[b].push(c);return this}),unsubscribe:k(function(b,c){if(void 0!==this.__kbsubscribers[b])for(var f=0,d=this.__kbsubscribers[b].length;f<d;f++)if(this.__kbsubscribers[b][f].toString()===c.toString()){this.__kbsubscribers[b].splice(f,1);break}return this}),callSubscribers:k(function(b,c,f){if(void 0!==this.__kbsubscribers[b])for(var d=
0,h=this.__kbsubscribers[b].length;d<h;d++)this.__kbsubscribers[b].call(this,b,c,f);return this}),stopChange:k(function(){this._stopChange=!0;return this})});Object.defineProperties(x.prototype,{addDataListener:k(K("addDataListener","__kblisteners")),removeDataListener:k(F("removeDataListener","__kblisteners")),addDataUpdateListener:k(K("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:k(F("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:k(K("addDataCreateListener",
"__kbcreatelisteners")),removeDataCreateListener:k(F("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:k(K("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:k(F("removeDataDeleteListener","__kbdeletelisteners")),addChildDataListener:k(y("addChildDataListener","__kbparentlisteners")),removeChildDataListener:k(B("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:k(y("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:k(B("removeChildDataUpdateListener",
"__kbparentupdatelisteners")),addChildDataCreateListener:k(y("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:k(B("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:k(y("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:k(B("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return x}}(),U=function(){return function(){function D(p){if("object"===typeof p)for(var x=0,w=p.length;x<
w;x++)K_Components[p[x]]?z(p[x],K_Components[p[x]],document.getElementById("script_"+p[x])):D.load(p[x],"component/"+p[x]+"/"+location.search,z);else"string"===typeof p&&(K_Components[p[x]]?z(p,K_Components[p],document.getElementById("script_"+p)):D.load(p,"component/"+p+"/"+location.search,z))}var z=function(){},R=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});D.getUnknowns=function(p){var x=p.match(R);return x.map(function(p){return p.replace(/[<\/>]/g,"")}).filter(function(p,k){return document.createElement(p)instanceof
HTMLUnknownElement&&-1===x.indexOf(p,k+1)&&!K_Components[p]})};D.load=function(p,x,w){document.head.appendChild(function(k,p,w){var x=document.createElement("script");x.type="text/javascript";x.charset="utf-8";x.async=!0;x.src=p;x.id="script_"+k;x.onload=function(){w(k,K_Components[k],this)};return x}(p,x,w));return D};D.onLoad=function(p){if(void 0===p)return z;z="function"===typeof p?p:z;return D};return D}}(),V=function(D){return function(){function z(e,g){this.name=e.tagName.toLowerCase();this.template=
C[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=e;this.fragment=document.createDocumentFragment();this.wrapper=document.createElement("div");this.wrapper.className="Wrapper Wrapper__"+this.name;g||(this.wrapper.innerHTML=this.template);this.fragment.appendChild(this.wrapper);g||(this.maps=this.map(this.wrapper));g||(this.wrapper.kb_maps=this.maps)}function R(e,g,b,c,f,d,h,l){function q(c){var b="for"===g?u(c):[],f=this;this.key="for"!==g?N(c):b[0];this.filterNames=
A(c);this.component="for"===g?b[1]:void 0;this.id=0;this.isEvent=r;this.__proto__.bindText=this.__proto__.bindText.map(function(b){return b===c?this:b});this.__proto__.bindMaps.push(this);Object.defineProperties(this,{value:{get:this.valget,set:this.valset,enumerable:!0,configurable:!1},_value:m("",!0)});this.updateData=function(c){if(f.isConnected&&f._data){if("object"!==typeof c||void 0===c.value)c={value:c};"function"===typeof f._data.stopChange&&f._data.stopChange().set(f.key,c.value)}};this.updateDom=
function(c){if(f.isSynced()){f.element.stopChange();if("object"!==typeof c||void 0===c.value)c={value:c};f.value=c.value}};this.updateLoop=function(){f.kb_loop&&f.loop(f.kb_loop)}}var r="attribute"===g&&-1!==F.indexOf(h.name)||"component"===g&&h.name&&-1!==F.indexOf(h.name);r&&l.stopChange().removeAttribute(h.name);Object.defineProperties(q.prototype,{valget:m(p),valset:m(x),refresh:m(P),connect:m(L),deleteMap:m(M),loop:m(Q),unsync:m(H),isSynced:m(w),type:m(g),text:m(b,!0),bindText:m(c,!0),bindNames:m("for"===
g?[u(c[0])[0]]:I(c),!0),bindMaps:m([],!0),bindListener:m(r?f.toLowerCase():f),bindProperty:m(r?h.name.toLowerCase():d),bindTarget:m(h,!0),element:m(l,!0),_data:m({},!0),filters:m({},!0),maps:m(e,!0),loop:m(Q)});return q}function p(){return this._value}function x(e){this._value=this.isSynced()?e:this._value;this.refresh()}function w(){return this.element.parentElement?!!this.element.parentElement:this.unsync()}function k(e,g){function b(c,b){return b.reduce(function(b,f){return b+("string"===typeof f?
f:0===f.filterNames.length?f._value:f.filterNames.reduce(function(b,f){if(void 0!==c.filters){if(void 0!==c.filters[f])return c.filters[f](b);console.warn("there is no filter by the name %o in the data model filters %o",f,Object.keys(c.filters));return b}console.error("Somehow filters object was not added to the mapping via .connect() method, please see dev");return b},f._value))},"")}return 1===g.length?"string"===typeof g[0]._value?b(e,g):g[0]._value:b(e,g)}function P(){"for"!==this.type&&(this.isEvent?
this.element[this.bindProperty]=this.bindText[0]._value:"component"===this.type?(this.element.k_post||(this.element.k_post={}),this.element.k_post["textContent"===this.bindProperty?"innerHTML":this.bindTarget.name]=k(this,this.bindText)):this.bindTarget[this.bindProperty]=k(this,this.bindText));return this}function L(e){this._data=e;this.filters=void 0!==e.filters?e.filters:this.filters;e=0;for(var g=this.bindNames.length;e<g;e++){var b=this.bindNames[e],c=this.bindMaps[e];c._data.addDataUpdateListener&&
(c._data.exists(b)||(console.warn("No property by the name %o exists on this data set %o",b,c._data),c._data.add(b,c._value)),c.value=c._data.get(b),"component"!==c.type&&"for"!==c.type?(c.isConnected=!0,c._data.addDataUpdateListener(b,c.updateDom)):"for"===c.type&&c._value.addDataUpdateListener&&c._value.addDataUpdateListener("*",c.updateLoop).addDataCreateListener(c.updateLoop).addDataDeleteListener(c.updateLoop))}1!==this.bindText.length||"text"!==this.type&&"attribute"!==this.type&&!this.isEvent||
this.element.addAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);return this}function Q(e){this.kb_loop=e;this.element.stopChange().innerHTML="";for(var g=this._value,b=0,c=this.filterNames.length;b<c;b++)g=this.filters[this.filterNames[b]](g);g=0;for(b=this._value.length;g<b;g++){var c=this._value[g],f=document.createElement(this.component);f.k_post=c;f.kb_wrapper=this.element.kb_wrapper;this.element.stopChange().appendChild(f);"function"===typeof e&&e(f)}}function M(){this.maps[this.key].splice(this.id,
1);return this}function H(){for(var e=0,g=this.bindNames.length;e<g;e++)this._data.removeDataUpdateListener&&(this._data.removeDataUpdateListener(this.bindNames[e],this.updateDom),this._value.removeDataUpdateListener("*",this.updateLoop).removeDataCreateListener(this.updateLoop).removeDataDeleteListener(this.updateLoop));this.element.removeAttrUpdateListener("text"===this.type?"html":this.bindListener,this.updateData);this.bindMaps=this.maps=this.bindNames=this.filters=this._data=null;this.__proto__._data=
null;this.__proto__.element=null;this.__proto__.filters=null;this.__proto__.bindTarget=null;this.__proto__.bindText=null;this.__proto__.bindNames=null;this.__proto__.element=null;this.__proto__.maps=null;this.__proto__.bindMaps=null;return!1}function O(e){return e.split(new RegExp("("+y.split("").join("\\")+")(.*?)("+B.split("").join("\\")+")","g")).map(function(g,b,c){return c[b-1]===y?y+g+B:g}).filter(function(g,b,c){return 0!==g.length&&g!==y&&g!==B&&0!==g.length})}function I(e){return e.filter(function(g){return-1!==
g.indexOf(y)&&-1!==g.indexOf(B)}).map(function(g){return N(g)})}function N(e){return e.replace(new RegExp("["+y+B+"]","g"),"").replace(new RegExp("\\"+v.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function A(e){return-1!==e.indexOf(v)?e.replace(new RegExp("["+B+"]","g"),"").replace(new RegExp("(.*?)(\\"+v.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[]}function u(e){return-1!==e.indexOf("for")?e.replace(new RegExp("["+y+B+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(g){return 0!==
g.length}):[]}function m(e,g,b){return{value:e,writable:!!g,enumerable:!1,configurable:!!b}}function n(e,g){for(var b=E[e],c=0,f=b.length;c<f&&(b[c](g),g._stopPropogation);c++);return g._preventDefault}function J(e){var g=e.match(K).map(function(b){return b.replace(/[<\/>]/g,"")});g.filter(function(b,c){return document.createElement(b)instanceof HTMLUnknownElement&&-1===g.indexOf(b,c+1)&&void 0===C[b]});0!==g.length&&n("unknown",new Event("unknown",g));return g}var C={},K=/(<\/.*?>)/g;D().call();
var F=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}),y="{{",B="}}",v="|",E={unknown:[]};z.prototype.map=function(e){function g(c){for(var f=0,d=c.length;f<d;f++)if(void 0===c[f].kb_maps&&8!==c[f].nodeType){c[f].kb_mapper=e;if(3===c[f].nodeType){var h=c[f],l=b,q=h.textContent,r=h.parentElement instanceof HTMLUnknownElement;if(q.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+")","g")))for(var t=r?"component":-1!==q.indexOf("for")&&
void 0!==q.indexOf("loop")?"for":"text",h=R(l,t,q,O(q),r?"":"textContent","textContent",h,h.parentElement),q=0,r=h.prototype.bindText.length;q<r;q++){var t=q,k=h.prototype.bindText[q];0===k.indexOf(y)&&(k=new h(k),h.prototype.bindText[t]=k,void 0===l[k.key]&&(l[k.key]=[]),k.id=l[k.key].length,l[k.key].push(k))}}else for(l=c[f],h=b,q=l.attributes,r=l instanceof HTMLUnknownElement,t=0,k=q.length;t<k;t++){var k=q.length,n=q[t];if(n.value.match(new RegExp("(\\"+y.split("").join("\\")+")(.*?)(\\"+B.split("").join("\\")+
")","g")))for(var n=R(h,r?"component":"attribute",n.value,O(n.value),r?"":n.name,"value",n,l),m=0,p=n.prototype.bindText.length;m<p;m++){var A=m,u=n.prototype.bindText[m];0===u.indexOf(y)&&(u=new n(u),n.prototype.bindText[A]=u,void 0===h[u.key]&&(h[u.key]=[]),h[u.key].push(u))}}c[f].childNodes&&0!==c[f].childNodes.length&&g(c[f].childNodes)}}var b={};g(e.childNodes);return b};z.prototype.addFilter=function(e,g){void 0!==this.maps[e]&&this.maps[e].forEach(function(b){b.filters.push(g);b.refresh()});
return this};z.prototype.removeFilter=function(e,g){void 0!==this.maps[e]&&this.maps[e].forEach(function(b){b.filters.splice(this.maps[e].filters.indexOf(g),1);b.refresh()});return this};z.prototype.swapFilter=function(e,g,b){void 0!==this.maps[e]&&this.maps[e].forEach(function(c){c.filters.splice(this.maps[e].filters.indexOf(g),1,b);c.refresh()});return this};Object.defineProperties(z,{startChars:m(function(e){if(void 0===e)return y;y="string"===typeof e?e:y;return this}),endChars:m(function(e){if(void 0===
e)return B;B="string"===typeof e?e:B;return this}),pipeChars:m(function(e){if(void 0===e)return v;v="string"===typeof e?e:v;return this}),getUnknown:m(J),isRegistered:m(function(e){return void 0!==C[e]}),register:m(function(e,g){void 0===C[e]?(C[e]=g,J(g)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",e);return this}),addEventListener:m(function(e,g){void 0!==E[e]?E[e].push(g):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",
e);return this}),removeEventListener:m(function(e,g){if(void 0!==E[e])for(var b=0,c=E[e].length;b<c;b++)E[e][b].toString()===g.toString()&&E[e].splice(b,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",e);return this})});return z}}(function(){function D(){function z(c,b){var d=c.length,h;for(h=0;h<d&&(c[h](b),void 0===b._stopPropogation);h++);}function D(c,b){var d=c.length,h;for(h=0;h<d&&(b.child=b.target,b.target=c[h].parent,c[h].func(b),void 0===
b._stopPropogation);h++);}function p(c,b){for(var d=c.length;0<d;e++)if(c[e].toString()===b.toString())return!0;return!1}function x(c,b,d,h,l,g,e,t){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=d;this.oldValue=h;this.target=c;this.attr=b;this.arguments=l;this.action=g;this.child=void 0;this.type=e;this.stopChange=t}function w(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners=
{};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function k(c,b,d,h){var l=c.get,g=c.set,e;return function(c){e=l.call(this);d(this,b,c,e,void 0,this._stopChange)&&g.call(this,c);this._stopChange||h(this,b,c,e);this._stopChange=void 0}}function P(c,b,d,h){var l;return function(g){l=c.value;d(this,b,g,l,arguments,this._stopChange)&&(c.value=g);this._stopChange||h(this,b,g,l,arguments);this._stopChange=
void 0}}function L(c,b,d,h){var l=c.value,g;return function(){d(this,b,null,null,arguments,this._stopChange)&&(g=l.apply(this,arguments));this._stopChange||h(this,b,null,null,arguments,g);this._stopChange=void 0;return g}}function Q(c,b,d,h,l){var g=l.style,e=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),t,k;return{get:function(){return k},set:function(c){t=k;d(l,b,c,t,void 0,this._stopChange)&&(k=c,g.setProperty(e,c));this._stopChange||h(l,b,c,t);this._stopChange=void 0},enumerable:!0,
configurable:!0}}function M(c,b,d,h){if("function"!==typeof b)return n;var l=-1!==["value","checked"].indexOf(c),g=-1!==v.indexOf(c),e;if(this.toString()!==n.toString())if(d){var t=this.querySelectorAll("*");d=t.length;for(var k,m=0;m<d;m++){k=t[m].attrListeners();if(l||"*"===c)void 0!==t[m].addInputBinding&&t[m].addInputBinding(),void 0!==t[m].addInputBoxBinding&&t[m].addInputBoxBinding();if(g)n.injectStyleProperty(t[m],c),e=h?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===c){e=
h?"_parentStyleUpdateListeners":"_parentStyleListeners";d=v.length;for(var u=0;u<d;u++)n.injectStyleProperty(t[m],v[u]);void 0===k[e]["*"]&&(k[e]["*"]=[]);k[e]["*"].push({parent:this,func:b})}e=h?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===k[e][c]&&(k[e][c]=[]);k[e][c].push({parent:this,func:b})}}else{k=this.attrListeners();if(g)e=h?"_styleUpdateListeners":"_styleListeners",n.injectStyleProperty(this,c);else{if(l||"*"===c)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==
this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===c){e=h?"_styleUpdateListeners":"_styleListeners";d=v.length;for(m=0;m<d;m++)n.injectStyleProperty(this,v[m]);void 0===k[e][c]&&(k[e][c]=[]);k[e][c].push(b)}e=h?"_attrUpdateListeners":"_attrListeners"}void 0===k[e][c]&&(k[e][c]=[]);k[e][c].push(b)}else{if(l||"*"===c)for(u=document.querySelectorAll("input, textarea"),d=u.length,m=0;m<d;m++)void 0!==u[m].addInputBinding&&u[m].addInputBinding(),void 0!==u[m].addInputBoxBinding&&u[m].addInputBoxBinding();
if(g){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=g.length+1;g.unshift(document.body);for(m=0;m<d;m++)n.injectStyleProperty(g[m],c);e=h?F:K}else{if("*"===c){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=g.length+1;l=v.length;g.unshift(document.body);for(m=0;m<d;m++)for(u=0;u<l;u++)n.injectStyleProperty(g[m],v[u]);e=h?F:K;void 0===e[c]&&(e[c]=[]);e[c].push(b)}e=h?C:J}void 0===e[c]&&(e[c]=[]);e[c].push(b)}}function H(c,b,d,h){function g(c,d){var h=d[c],
l=h.length;for(k=0;k<l;k++)h[k].toString()===b.toString()&&h.splice(k,1)}if("function"!==typeof b)return n;["value","checked"].indexOf(c);var e=-1!==v.indexOf(c),k;if(this.toString()!==n.toString())if(d){d=this.querySelectorAll("*");var t=d.length;e?(e=h?"_childStyleUpdateListeners":"_childStyleListeners",g(c,this.attrListeners()[e]),e=h?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===c&&(e=h?"_childStyleUpdateListeners":"_childStyleListeners",g(c,this.attrListeners()[e])),e=h?"_childAttrUpdateListeners":
"_childAttrListeners",g(c,this.attrListeners()[e]),e=h?"_parentAttrUpdateListeners":"_parentAttrListeners");for(k=0;k<t;k++){for(var m=d[k].attrListeners()[e][c],u=m.length,p=0;p<u;p++)m[p].isEqualNode(this)&&m.slice(p,1);if("*"===c)for(listenersStyle=h?"_parentStyleUpdateListeners":"_parentStyleListeners",m=d[k].attrListeners()[e][c],u=m.length,p=0;p<u;p++)m[p].isEqualNode(this)&&m.slice(p,1)}}else e?e=h?"_styleUpdateListeners":"_styleListeners":("*"===c&&(e=h?"_styleUpdateListeners":"_styleListeners",
g(c,this.attrListeners()[e])),e=h?"_attrUpdateListeners":"_attrListeners"),g(c,this.attrListeners()[e]);else e?e=h?F:K:("*"===c&&(e=h?F:K,g(c,e)),e=h?C:J),g(c,e)}function O(c,b){n.addAttrListener.call(this,c,b,!0);return this}function I(c,b){n.addAttrUpdateListener.call(this,c,b,!0);return this}function N(c,b){n.removeAttrListener.call(this,c,b,!0);return this}function A(c,b){n.removeAttrUpdateListener.call(this,c,b,!0);return this}function u(c,b,d){var h=this.attrListeners();"html"===b&&(b="innerHTML");
"events"===b&&(b="onclick");switch(c){case "attr":if(p(h._attrListeners[b],d))return!0;break;case "attrupdate":if(p(h._attrUpdateListeners[b],d))return!0}return!1}function m(){this._stopChange=!0;return this}function n(){function c(c,b){var f,d=b.length;for(f=0;f<d;f++)-1===c.indexOf(b[f])&&c.push(b[f]);return c}function f(c,b){for(var f=Object.keys(c),d,h,g=0,l=f.length;g<l;g++)if(d=f[g],void 0===b[d])b[d]=c[d].slice();else for(var e=0,k=c[d].length;e<k;e++)h=c[d][e],b[d].push(h)}function d(b){if(3!==
b.target.nodeType&&8!==b.target.nodeType){var d=b.target.attrListeners(),h,g=["value","checked"],l=d._attrListeners,e=d._attrUpdateListeners,k=d._parentAttrListeners;h=d._parentAttrUpdateListeners;var m=!1;if(void 0!==J["*"]||void 0!==C["*"])m=!0;if(!0!==m&&void 0!==l["*"]||void 0!==e["*"]||void 0!==k["*"]||void 0!==h["*"])m=!0;if(!0!==m)for(var q=0;q<g.length;q++)if(void 0!==J[g[q]]||void 0!==C[g[q]]||void 0!==l[g[q]]||void 0!==e[g[q]]||void 0!==k[g[q]]||void 0!==h[g[q]]){m=!0;break}h=m;g=Object.keys(K);
l=Object.keys(F);Object.keys(d._styleListeners);Object.keys(d._styleUpdateListeners);e=Object.keys(d._parentStyleListeners);d=Object.keys(d._parentStyleUpdateListeners);k=[];if(0!==g.length||0!==l.length)k=c(k,g),k=c(k,l);if(0!==k.length&&0!==e.length||0!==d.length)k=c(k,e),k=c(k,d);-1!==k.indexOf("*")&&(k=v);var d=k,g=d.length,u,r,l=[],p,e="outerHTML"===b.attr||"outerText"===b.attr?b.attr:void 0,k=b.target;void 0!==e&&(b.attr="appendChild",b.arguments=[b.target],b.target=b.target.parentElement);
if(h){"appendChild"===b.attr&&3!==b.arguments[0].nodeType&&8!==b.arguments[0].nodeType?(l=Array.prototype.slice.call(b.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==b.arguments[0].tagName&&"TEXTAREA"!==b.arguments[0].tagName||l.unshift(b.arguments[0])):l=Array.prototype.slice.call(b.target.querySelectorAll("input,textarea"));p=l.length;for(var A=0;A<p;A++)void 0!==l[A].addInputBinding&&l[A].addInputBinding(),void 0!==l[A].addInputBoxBinding&&l[A].addInputBoxBinding()}"appendChild"===
b.attr&&"#text"!==b.arguments[0].nodeName&&"#comment"!==b.arguments[0].nodeName?(l=Array.prototype.slice.call(b.arguments[0].querySelectorAll("*")),l.unshift(b.arguments[0])):l=Array.prototype.slice.call(b.target.querySelectorAll("*"));h=b.target.__kb._parentAttrListeners;m=b.target.__kb._parentAttrUpdateListeners;q=b.target.__kb._parentStyleListeners;u=b.target.__kb._parentStyleUpdateListeners;p=l.length;for(A=0;A<p;A++){if(0!==g)for(r=0;r<g;r++)n.injectStyleProperty(l[A],d[r]);r=l[A].attrListeners();
f(h,r._parentAttrListeners);f(m,r._parentAttrUpdateListeners);f(q,r._parentStyleListeners);f(u,r._parentStyleUpdateListeners)}void 0!==e&&(b.attr=e,b.target=k,b.arguments=[])}}function h(c){var b=c.target.attributes[c.arguments[0]],f="setAttribute"===c.attr?c.arguments[1]:"";e(c.target,c.arguments[0],f,void 0!==b?b.value:"",[f])||c.preventDefault()}function l(c){var b=c.target.attributes[c.arguments[0]],f="setAttribute"===c.attr?c.arguments[1]:"";k(c.target,c.arguments[0],f,void 0!==b?b.value:"",
[f])}n.injectPrototypes(Node,"Node");n.injectPrototypes(Element,"Element");n.injectPrototypes(HTMLElement,"HTMLElement");n.injectPrototypes(HTMLInputElement,"HTMLInputElement");n.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");n.injectPrototypes(Document,"Document");var e=g,k=b;n.addAttrUpdateListener("appendChild",d);n.addAttrUpdateListener("removeChild",d);n.addAttrUpdateListener("innerHTML",d);n.addAttrUpdateListener("outerHTML",d);n.addAttrUpdateListener("innerText",d);n.addAttrUpdateListener("outerText",
d);n.addAttrUpdateListener("textContent",d);n.addAttrListener("setAttribute",h);n.addAttrListener("removeAttribute",h);n.addAttrUpdateListener("setAttribute",l);n.addAttrUpdateListener("removeAttribute",l);return n}var J={},C={},K={},F={},y={},B="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),v=Object.getOwnPropertyNames(document.body.style),E=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")}).concat(["addEventListener",
"removeEventListener"]),e,g=function(c,b,d,h,g,e){d=new x(c,b,d,h,g,void 0,"set",e);void 0!==c.__kb&&(h=c.__kb._attrListeners,g=c.__kb._styleListeners,e=c.__kb._parentAttrListeners,c=c.__kb._parentStyleListeners,void 0!==h[b]&&z(h[b],d),void 0===d._stopPropogation&&void 0!==g[b]&&z(g[b],d),void 0===d._stopPropogation&&void 0!==h["*"]&&(z(h["*"],d),void 0===d._stopPropogation&&z(g["*"],d)),void 0===d._stopPropogation&&void 0!==e[b]&&D(e[b],d),void 0===d._stopPropogation&&void 0!==c[b]&&D(c[b],d),void 0===
d._stopPropogation&&void 0!==e["*"]&&(D(e["*"],d),void 0===d._stopPropogation&&D(c["*"],d)));void 0===d._stopPropogation&&void 0!==J[b]&&z(J[b],d);void 0===d._stopPropogation&&void 0!==K[b]&&z(K[b],d);void 0===d._stopPropogation&&void 0!==J["*"]&&(z(J["*"],d),void 0===d._stopPropogation&&z(K["*"],d));return void 0!==d._preventDefault?!1:!0},b=function(c,b,d,h,g,e){d=new x(c,b,d,h,g,e,"update");void 0!==c.__kb&&(h=c.__kb._attrUpdateListeners,g=c.__kb._styleUpdateListeners,e=c.__kb._parentAttrUpdateListeners,
c=c.__kb._parentStyleUpdateListeners,void 0!==h[b]&&z(h[b],d),void 0===d._stopPropogation&&void 0!==g[b]&&z(g[b],d),void 0===d._stopPropogation&&void 0!==h["*"]&&(z(h["*"],d),void 0===d._stopPropogation&&z(g["*"],d)),void 0===d._stopPropogation&&void 0!==e[b]&&D(e[b],d),void 0===d._stopPropogation&&void 0!==c[b]&&D(c[b],d),void 0===d._stopPropogation&&void 0!==e["*"]&&(D(e["*"],d),void 0===d._stopPropogation&&D(c["*"],d)));void 0===d._stopPropogation&&void 0!==C[b]&&z(C[b],d);void 0===d._stopPropogation&&
void 0!==F[b]&&z(F[b],d);void 0===d._stopPropogation&&void 0!==C["*"]&&(z(C["*"],d),void 0===d._stopPropogation&&z(F["*"],d));return void 0!==d._preventDefault?!1:!0};n.injectPrototypeProperty=function(c,f,d,h,e){var q=c.prototype,r=Object.getOwnPropertyDescriptor(q,f);d=d||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var p=y[d];h=h||g;e=e||b;void 0===q.attrListeners&&(q={},q.attrListeners=function(){void 0===this.__kb&&(this.__kb=new w);return this.__kb}.bind(q),q.addAttrListener=
n.addAttrListener,q.addAttrUpdateListener=n.addAttrUpdateListener,q.addChildAttrListener=O,q.addChildAttrUpdateListener=I,q.hasListener=u,q.removeAttrListener=n.removeAttrListener,q.removeAttrUpdateListener=n.removeAttrUpdateListener,q.removeChildAttrListener=N,q.removeChildAttrUpdateListener=A,q.stopChange=m);void 0===p&&(y[d]={obj:c,proto:q,descriptors:{},set:void 0,update:void 0},p=y[d],p.set=h,p.update=e);void 0===p.descriptors[f]&&(p.descriptors[f]=r);r.configurable&&(void 0!==r.set?Object.defineProperty(q,
f,{get:r.get,set:k(r,f,h,e),enumerable:!0,configurable:!0}):"function"===typeof r.value?Object.defineProperty(q,f,{value:L(r,f,h,e),writable:!0,enumerable:!0,configurable:!0}):void 0!==r.value&&Object.defineProperty(q,f,{get:function(){return r.value},set:P(r,f,h,e),enumerable:!0,configurable:!0}));return n};n.injectStyleProperty=function(c,f,d,h){var e=c.style,k=Object.getOwnPropertyDescriptor(e,f),m=c.attrListeners().injectedStyle;d=d||g;h=h||b;void 0===m&&(c.attrListeners().injectedStyle={obj:c,
proto:e,descriptors:{},set:void 0,update:void 0},c.attrListeners().injectedStyle.set=d,c.attrListeners().injectedStyle.update=h,m=c.attrListeners().injectedStyle);void 0===m.descriptors[f]&&(m.descriptors[f]=k);k.configurable&&Object.defineProperty(e,f,Q(k,f,d,h,c));return n};n.injectPrototypes=function(c,f,d,h){var e=c.prototype;f=f||c.toString().split(/\s+/)[1].split("{")[0].replace("()","");var k=y[f],p=Object.getOwnPropertyNames(e);d=d||g;h=h||b;var t;void 0===e.attrListeners&&(e.attrListeners=
function(){void 0===this.__kb&&(this.__kb=new w);return this.__kb},e.addAttrListener=n.addAttrListener,e.addAttrUpdateListener=n.addAttrUpdateListener,e.addChildAttrListener=O,e.addChildAttrUpdateListener=I,e.removeAttrListener=n.removeAttrListener,e.removeAttrUpdateListener=n.removeAttrUpdateListener,e.removeChildAttrListener=N,e.removeChildAttrUpdateListener=A,e.hasListener=u,e.stopChange=m);void 0===k&&(y[f]={obj:c,proto:e,descriptors:{},set:void 0,update:void 0},k=y[f],k.set=d,k.update=h);t=y[f].descriptors;
for(h=0;h<p.length;h+=1)void 0===t[p[h]]&&n.injectPrototypeProperty(c,p[h],f,d,b);if(-1!==p.indexOf("value")){var v=function(c){var b,d,f;if("checkbox"===this.type||"radio"===this.type)b=!0;d=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){f=b?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;b&&(k.set(this,"checked",this.checked,d)?k.update(this,"checked",this.checked,d):t.checked.set.call(this,d));this.value=
f;k.set(this,"value",this.value,d)?k.update(this,"value",this.value,d):t.value.set.call(this,d)}.bind(this),0)};e.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",v)};e.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",v)};e.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",v)};e.addInputBoxBinding=function(){this.attrListeners()._onmousedown=
!0;this.addEventListener("mouseup",v)}}return n};n.addAttrListener=function(c,b,d){if("html"===c){c=0;for(var e=B.length;c<e;c++)M.call(this,B[c],b,d,!1)}else if("events"===c)for(c=0,e=E.length;c<e;c++)M.call(this,E[c],b,d,!1);else M.call(this,c,b,d,!1);return this};n.addAttrUpdateListener=function(c,b,d){if("html"===c){c=0;for(var e=B.length;c<e;c++)M.call(this,B[c],b,d,!0)}else if("events"===c)for(c=0,e=E.length;c<e;c++)M.call(this,E[c],b,d,!0);else M.call(this,c,b,d,!0);return this};n.removeAttrListener=
function(b,f,d){if("html"===b){b=0;for(var e=B.length;b<e;b++)H.call(this,B[b],f,d,!1)}else if("events"===b)for(b=0,e=E.length;b<e;b++)H.call(this,E[b],f,d,!1);else H.call(this,b,f,d,!1);return this};n.removeAttrUpdateListener=function(b,f,d){if("html"===b){b=0;for(var e=B.length;b<e;b++)H.call(this,B[b],f,d,!0)}else if("events"===b)for(b=0,e=E.length;b<e;b++)H.call(this,E[b],f,d,!0);else H.call(this,b,f,d,!0);return this};n.hasListener=function(b,e,d){"html"===e&&(e="innerHTML");"events"===e&&(e=
"onclick");switch(b){case "attr":if(p(J[e],d))return!0;break;case "attrupdate":if(p(C[e],d))return!0}return!1};n.injectedPrototypes=function(){return y};return n}"function"===typeof define&&define.amd&&define("KB",D);return D}()),S=function(D,z,R){return function(){function p(A,u,m,n){function z(e,g,b,c,f){for(var d=P({},e),h=0,l=Object.keys(g.prototype),k=l.length;h<k;h++)d.__proto__[l[h]]=g.prototype[l[h]];h=0;l=Object.keys(c);for(k=l.length;h<k;h++)-1!==O.indexOf(l[h])?Object.defineProperty(d,
l[h],w(c[l[h]],"filters"!==l[h])):d.set(l[h],c[l[h]]);if(c.pointers)for(h=0,l=Object.keys(c.pointers),k=l.length;h<k;h++)d.addPointer(c.pointers[l[h]],l[h]);g.apply(d,b);h=0;l=Object.keys(f);for(k=l.length;h<k;h++)-1!==O.indexOf(l[h])?Object.defineProperty(d,l[h],w(f[l[h]],"filters"!==l[h])):d.set(l[h],f[l[h]]);if(f.pointers)for(h=0,l=Object.keys(f.pointers),k=l.length;h<k;h++)d.addPointer(f.pointers[l[h]],l[h]);h=0;l=Object.keys(d.filters);for(k=l.length;h<k;h++)d.filters[l[h]]=d.filters[l[h]].bind(d);
if(d.sessionStorage){if(g=sessionStorage.getItem(d.id||e))for(g=JSON.parse(g),h=0,l=Object.keys(g),k=l.length;h<k;h++)d.set(l[h],g[l[h]]);else sessionStorage.setItem(d.id||e,d.stringify());d.addChildDataUpdateListener("*",function(){sessionStorage.setItem(d.id||e,d.stringify())})}if(d.localStorage){if(g=localStorage.getItem(d.id||e))for(g=JSON.parse(g),h=0,l=Object.keys(g),k=l.length;h<k;h++)d.set(l[h],g[l[h]]);else localStorage.setItem(d.id||e,d.stringify());d.addChildDataUpdateListener("*",function(){localStorage.setItem(d.id||
e,d.stringify())})}d.store&&Q.set(d.id||e,d);return d}function C(e,g,b){e.kb_viewmodel=b;g.wrapper.innerHTML=y.template.replace(new RegExp("("+L.startChars()+"local"+L.endChars()+")","g"),b.local);var c=g.maps=g.map(g.wrapper);g.wrapper.kb_maps=c;Object.keys(c).forEach(function(e){c[e].forEach(function(c){switch(c.type){case "for":c.connect(b);L.isRegistered(c.component)?c.loop(function(b){p(b)}):(p.loadWaitList(c.component,function(b,e){c.loop(function(b){p(b)})}),p.loadWaitList(c.component).loading||
(p.loadWaitList(c.component).loading=!0,k(c.component)));break;case "component":c.connect(b).deleteMap();break;default:c.connect(b)}})});g.wrapper.kb_viewmodel.onFinish.call(g.wrapper.kb_viewmodel,g.wrapper)}function D(e,g){y=new L(g,!0);Object.defineProperty(y.wrapper,"__kbcomponenttree",w(g.kb_mapper?g.kb_mapper.__kbcomponenttree.slice():[]));g.parentElement.replaceChild(y.fragment,g);u.unshift(y.wrapper);C(y.wrapper,y,z(e,M[e],u,v,E));if(-1===y.wrapper.__kbcomponenttree.indexOf(e)||y.wrapper.kb_viewmodel.multiple){y.wrapper.__kbcomponenttree.push(e);
y.wrapper.classList.add(y.wrapper.kb_viewmodel.local);for(var b=y.wrapper.querySelectorAll("*"),c=0,f=b.length;c<f;c++)b[c]instanceof HTMLUnknownElement&&p(b[c])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",e),console.error("Recursive Component %o on %o",
y.wrapper,y.wrapper.parentElement),y.wrapper.parentElement.removeChild(y.wrapper)}var F=A.tagName.toLowerCase(),y,B=Object.keys(HTMLElement.prototype).filter(function(e){return 0===e.indexOf("on")}),v={},E={};void 0===u&&(u=[]);m&&x(m,v);Object.defineProperty(v,"local",w(v.local||F+"-"+Date.now(),!0,!1,!0));Object.defineProperty(v,"filters",w(v.filters||{},!1,!1,!0));"function"!==typeof v.onFinish&&(v.onFinish=function(){});Object.defineProperty(v,"onFinish",w(v.onFinish,!0,!1,!0));"string"===typeof v.sessionStorage&&
(v.sessionStorage="true"===v.sessionStorage);Object.defineProperty(v,"sessionStorage",w(void 0!==v.sessionStorage?v.sessionStorage:!1,!0,!1,!0));"string"===typeof v.localStorage&&(v.localStorage="true"===v.localStorage);Object.defineProperty(v,"localStorage",w(void 0!==v.localStorage?v.localStorage:!1,!0,!1,!0));"string"===typeof v.store&&(v.store="true"===v.store);Object.defineProperty(v,"store",w(void 0!==v.store?v.store:!1,!0,!1,!0));"string"===typeof v.multiple&&(v.multiple="true"===v.multiple);
Object.defineProperty(v,"multiple",w(void 0!==v.multiple?v.multiple:!1,!0,!1,!0));n&&x(n,E);E.innerHTML=A.innerHTML.toString();m=0;for(n=A.attributes.length;m<n;m++)E[A.attributes[m].name]=A.attributes[m].value;m=0;for(n=B.length;m<n;m++)A[B[m]]&&(E[B[m]]=A[B[m]]);A.k_post&&x(A.k_post,E);L.isRegistered(F)?D(F,A):(p.loadWaitList(F,function(e,g){D(F,A)}),p.loadWaitList(F).loading||(p.loadWaitList(F).loading=!0,k(F)))}function x(k,p){var m=Object.keys(k);p.pointers||(p.pointers={});for(var n=0,x=m.length;n<
x;n++)if(k.isObservable(m[n]))p.pointers[m[n]]=k;else if(k[m[n]].isMixed())p.pointers[m[n]]=k[m[n]].__kbImmediateParent;else if(Object.prototype.isObject(k[m[n]]))for(var w=0,z=Object.keys(k[m[n]]);w<x;w++)p[m[n]][z[w]]=k[m[n]][z[w]];else if(Object.prototype.isArray(k[m[n]]))for(w=0;w<x;w++)p[m[n]][w]=k[m[n]][w];else p[m[n]]=k[m[n]]}function w(k,p,m,n){return{value:k,writable:!!p,enumerable:!!n,configurable:!!m}}window.K_Components||(window.K_Components={});var k=z().onLoad(function(k,u){var m="<style>"+
unescape(u.prototype.k_css)+"</style>"+unescape(u.prototype.k_html);p.register(k,u,m,u.prototype.cms);p.loadWaitList(k).forEach(function(m){m(k,u)});p.loadWaitList(k,"clear")}),P=D(),L=R(),Q=P({},"Model"),M={},H=function(){return window.location.search.replace("?","").split("&").filter(function(k){return 0!==k.length}).reduce(function(k,p){k[p.split("=")[0]]=p.split("=")[1];return k},{})}(),O="id filters class sessionStorage localStorage store component multiple".split(" "),I={},N;p.register=function(k,
u,m,n){L.register(k,m);M[k]=u;return p};p.loadWaitList=function(k,u){if("undefined"===typeof u&&k)return I[k];if(k){if(void 0===I[k]||"clear"===u){var m=void 0===I[k]?!1:!!I[k].loading;I[k]=[];I[k].loading=m}"function"===typeof u&&I[k].push(u)}return p};p.localRouting=function(k){k?(N=Node.prototype.appendChild,Node.prototype.appendChild=function(k){if("script"===k.tagName.toLowerCase()){k.src=k.src.substring(0,-1!==k.src.indexOf("?")?k.src.indexOf("?"):k.src.length);var m=k.src.match(/(.*?component\/)/);
m&&(H.env||(H.env="prod"),"dev"===H.env&&(H.env="qa"),m=k.src.replace(m[0],"").replace(/[\/\s]/g,""),k.src="/components/"+m+"/build/"+H.env+"/"+m+(H.debug&&"prod"!==H.env?"":".min")+".js",arguments[0]=k)}return N.apply(this,arguments)}):N&&(Node.prototype.appendChild=N,N=null);return p};return p}}(T,U,V);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return S}):"undefined"!==typeof module&&(module.exports=S);return S}();
