var Konnekt=function(){var U=function(){return function(C,n,q,u){function M(b,e,d,l){b=void 0===b?{}:b;var h={},g=window.Proxy?new Proxy(h,{set:E,deleteProperty:O}):h,p=Object.keys(b,"all");Object.defineProperties(h,{__kbname:c("string"===typeof e?e:"default",!0,!0),__kbref:c(d?d.__kbref||d:g,!0,!0),__kbscopeString:c(l||"",!0,!0),__kbImmediateParent:c(d||null,!0,!0),__kbsubscribers:c({}),__kblisteners:c({}),__kbupdatelisteners:c({}),__kbparentlisteners:c({}),__kbparentupdatelisteners:c({}),__kbcreatelisteners:c([]),
__kbdeletelisteners:c([]),__kbparentcreatelisteners:c([]),__kbparentdeletelisteners:c([]),__kbmethodlisteners:c([]),__kbmethodupdatelisteners:c([]),__kbpointers:c({}),__kbevents:c(w),length:c(0,!0),__kbnonproxy:c(h,!1,!0),__kbproxy:c(g,!1,!0),_stopChange:c(!1,!0)});h.__proto__=M.prototype;e=0;for(d=p.length;e<d;e++)g.set(p[e],b[p[e]]);h.__kbevents.addlistener=[];h.__kbevents.removelistener=[];h.addActionListener("addlistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]])b.local.__kbpointers[b.arguments[0]][b.arguments[2]](b.arguments[0],
b.arguments[1])}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]])b.local.__kbpointers[b.arguments[0]][b.arguments[2]](b.arguments[0],b.arguments[1])});return g}function D(b,e,d,l,h,g,p,m){this.stopPropogation=function(){this._stopPropogration=!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=e;this.arguments=g;this.type=this.event=d;this.listener=p;this.name=b.__kbname;this.root=b.__kbref;
this.scope=b.__kbscopeString;this.parent=b.__kbImmediateParent;this.value=l;this.oldValue=h;this.stopChange=m}function c(b,e,d,l){return{value:b,writable:!!e,enumerable:!!l,configurable:!!d}}function P(b,e,d){return{get:function(){return b.call(this)},set:function(d){e&&(b=d)},enumerable:!1,configurable:!!d}}function I(b,e){var d=e,l=e;return{get:function(){return d},set:function(e){var g=new D(this,b,"set",e,d,arguments,"__kblisteners",this._stopChange);!0!==k(g)&&(l=d,d=e,g.stopChange||(g.listener=
"__kbupdatelisteners",g.type="postset",k(g)),this._stopChange||this.callSubscribers(b,d,l));this._stopChange=!1},configurable:!0,enumerable:!0}}function R(b,e,d){return{get:function(){return b[e]},set:function(d){(this._stopChange?b.stopChange():b)[e]=d;this._stopChange=!1},enumerable:d.enumerable,configurable:d.configurable}}function G(b,e){for(var d=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",
action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],l=[],h,g=0,p=d.length;g<p;g++)if(h=b[d[g].listener],J.call(h))for(var l=Object.keys(h),m=0,t=l.length;m<t;m++)for(var c=0,f=h[l[m]].length;c<f;c++)e[d[g].method](l[m],h[l[m]][c]);else for(m=0,t=h.length;m<t;m++)e[d[g].method](h[m])}function E(b,e,d){if(r(b,e)||"length"===e){if("length"===e)if(d>b.length&&void 0!==b[d-1])b.length=d;else{if(d<b.length){e=d;for(var l=b.length;e<l;e++)b[e]&&delete b[e];
b.length=d}}else b[e]=d;return!0}b.set(e,d)}function O(b,e){b.del(e);return!0}function N(b,e,d){var l=f(d),h=J(d),g=K(d);if(l&&d.__kbname!==b.__kbname)"default"===d.__kbname?b.merge(d,e):b.__kbpointers[e]||b.addPointer(d,e);else{var l=new D(this,e,"create",d,void 0,[],"__kbcreatelisteners",this._stopChange),p=k(l),m=parseInt(e,10);if(!0!==p)if((h||g)&&0!==Object.keys(d,"all").length)for(N.call(this,b,e,{}),h=0,g=Object.keys(d,"all"),l=g.length;h<l;h++)N.call(this[e],b[e],g[h],d[g[h]]);else{if(h||
g)d=new M(d,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+e),G(b,d);Object.defineProperty(b,e,I(e,d));!isNaN(m)&&b.length<=m&&(b.length=m+1);l.listener="__kbupdatelisteners";l.type="postcreate";k(l)}}}function Q(b,e,d){var l=f(d),h=J(d),g=K(d);if(l&&d.__kbname!==b.__kbname)"default"===d.__kbname?b.merge(d,e):b.__kbpointers[e]||b.addPointer(d,e);else if(void 0===b[e])-1===x.indexOf(e)?N.call(this,b,e,d):b[e]=d;else if(h||g)for(l=0,h=Object.keys(d,"all"),g=h.length;l<g;l++)Q.call(this[e],
b[e],h[l],d[h[l]]);else b[e]=d}function L(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function J(b){return"object"===L(void 0!==b?b:this)}function K(b){return"array"===L(void 0!==b?b:this)}function f(b){return"mixed"===L(void 0!==b?b:this)}function r(b,e){e="string"===typeof b?b:e;var d=Object.getOwnPropertyDescriptor("string"===typeof b?this:b,e);return d?void 0===d.value:!1}function y(b,e){"number"===typeof b&&(b=b.toString());var d=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):
this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());Q.call(this,d,b,e);return this}function F(b){return b.split(".")}function z(b,e){return function(d,l){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[e],g=new D(this,e,"addlistener",h,void 0,arguments,"");"string"===typeof d&&1!==F(d).length&&(h=F(d),d=h.pop(),h=h.join("."),g.local=this.getLayer(h),h=g.local[e],g.value=h);!0!==k(g)&&(J.call(h)?(void 0===h[d]&&(h[d]=[]),h[d].push(l),g.type="postaddlistener",
k(g)):K.call(h)&&"function"===typeof d&&(h.push(d),g.type="postaddlistener",k(g)));return this}}function H(b,e){return function(d,l){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=this[e],g=new D(this,e,"removelistener",h,void 0,arguments,"");"string"===typeof d&&1!==F(d).length&&(h=F(d),h.pop(),h.join("."),g.local=this.getLayer(h),h=g.local[e],g.value=h,d=F(d).pop());if(!0!==k(g))if(J.call(h)){if(void 0!==h[d])for(var p=0,m=h[d].length;p<m;p++)if(h[d][p].toString()===l.toString()){h[d].splice(p,
1);g.type="postremovelistener";k(g);break}}else if(K.call(h)&&"function"===typeof d)for(p=0,m=h.length;p<m;p++)if(h[p].toString()===d.toString()){h.splice(p,1);g.type="postremovelistener";k(g);break}return this}}function v(b,e){function d(b,e,g){var p=Object.keys(this,"all").filter(function(b){return f.call(this[b])}.bind(this)),m=this,t=b;"string"===typeof b&&1!==F(b).length&&(m=F(b),t=m.pop(),m=m.join("."),m=this.getLayer(m),void 0===m[g][t]&&(m[g][t]=[]),m[g][t].push(e));J.call(m[g])?(void 0===
m[g][t]&&(m[g][t]=[]),m[g][t].push(e),void 0!==m.__kbpointers[t]&&(void 0===m.__kbpointers[t][t]&&(m.__kbpointers[t][t]=[]),m.__kbpointers[t][t].push(_func))):m[g].push(e);t=0;for(m=p.length;t<m;t++)d.call(this[p[t]],b,e,g)}return function(l,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=new D(this,e,"addchildlistener",void 0,void 0,arguments,"");!0!==k(g)&&(d.call(this.__kbnonproxy,l,h,e),g.type="postaddchildlistener",k(g));return this}}function A(b,e){function d(b,e,
g){var p=Object.keys(this,"all").filter(function(b){return f.call(this[b])}.bind(this)),m=this,t=b;if("string"===typeof b&&1!==F(b).length&&(m=F(b),t=m.pop(),m.join("."),m=this.getLayer(m),void 0!==m[g][b]))for(var c=0,k=m[g][b].length;c<k;c++)if(m[g][b][c].toString()===e.toString()){m[g][b].splice(c,1);break}if(J.call(m[g])){if(void 0!==m[g][t]){c=0;for(k=m[g][t].length;c<k;c++)if(m[g][t][c].toString()===e.toString()){m[g][t].splice(c,1);break}if(-1!==m.__kbpointers.indexOf(t)&&void 0!==m[t].__kbImmediateParent[g][t])for(c=
0,k=m[t].__kbImmediateParent[g][t].length;c<k;c++)if(m[t].__kbImmediateParent[g][t][c].toString()===e.toString()){m[t].__kbImmediateParent[g][t].splice(c,1);break}}}else for(c=0,k=m[g].length;c<k;c++)if(m[g][c].toString()===e.toString()){m[g].splice(c,1);break}c=0;for(k=p.length;c<k;c++)d.call(this[p[c]],b,e,g)}return function(l,h){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var g=new D(this,e,"removechildlistener",void 0,void 0,arguments,"");!0!==k(g)&&(d.call(this.__kbnonproxy,
l,h,e),g.type="postremovechildlistener",k(g));return this}}var w={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},x=["__proto__","_stopChange"],
B=function(b,e){if(!e._stopPropogration&&b)for(var d=0,l=b.length;d!==l&&(b[d](e),!e._stopPropogration);d++);},k=function(b){if(b.listener){var e=b.local[b.listener],d=b.local[b.listener.replace("__kb","__kbparent")];J.call(e)?(B(e[b.key],b),B(e["*"],b)):B(e,b);J.call(d)?(B(d[b.key],b),B(d["*"],b)):B(d,b)}B(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault};Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);Object._keys||(Object._keys=Object.keys);Object.prototype.toString=
function(){return this instanceof M?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,e){return Object._keys(b).filter(function(b){return e&&"object"!==e&&"o"!==e?"all"===e?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(M.prototype,{"typeof":c(L,!1,!0),sizeof:c(function(b){function e(b){for(var h=Object.keys(b,"all"),g=0,p=void 0,m=0,c=h.length;m<c;m++)p=b[h[m]],"object"===typeof p&&void 0!==p&&null!==p?-1===d.indexOf(p)&&(d.push(p),
g+=e(p)):"string"===typeof p?g+=2*p.length:"number"===typeof p?g+=8:"boolean"===typeof p?g+=4:"function"===typeof p&&(g+=2*p.toString().length),g+=2*h[m].length;return g}var d=[];return e(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:c(J,!1,!0),isArray:c(K,!1,!0),isMixed:c(f,!1,!0),isObservable:c(r,!1,!0),stringify:c(function(b){var e=[];return JSON.stringify(b||this,function(b,l){if(K(l)||J(l)){if(-1!==e.indexOf(l))return;e.push(l)}return l})},!1,!0),getKeys:c(function(b,e){e="string"===typeof b?
b:e?e:"object";return Object.keys("string"===typeof b||void 0===b?this:b,e)},!1,!0),getIndexes:c(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var e=[],d=0,l=b.length;d<l;d++)void 0!==b[d]&&(e[e.length]=d);return e},!1,!0),keyCount:P(function(){return this.getKeys("object").length},!1,!0),indexCount:P(function(){return this.length},!1,!0),count:P(function(){return this.keyCount+this.indexCount},!1,!0),concat:c(Array.prototype.concat),every:c(Array.prototype.every),filter:c(Array.prototype.filter),
find:c(Array.prototype.find),findIndex:c(Array.prototype.findIndex),forEach:c(Array.prototype.forEach),includes:c(Array.prototype.includes),indexOf:c(Array.prototype.indexOf),join:c(Array.prototype.join),lastIndexOf:c(Array.prototype.lastIndexOf),map:c(Array.prototype.map),reduce:c(Array.prototype.reduce),reduceRight:c(Array.prototype.reduceRight),slice:c(Array.prototype.slice),some:c(Array.prototype.some),entries:c(Array.prototype.entries),toLocaleString:c(Array.prototype.toLocaleString),add:c(function(b,
e){y.call(this,b,e);return this}),set:c(y),get:c(function(b){"number"===typeof b&&(b=b.toString());var e=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(e)return e[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:c(function(b,e){var d="number"===typeof b||!isNaN(parseInt(b,10));d&&(b=b.toString());var l=-1!==b.indexOf(".")?this.getLayer(b):this,h=b.split(".").pop();if(l&&void 0!==l[h])if(d&&l.length>parseInt(b,
10)&&!e)l=l.__kbnonproxy,l.splice(h,1);else{var g=new D(l,b,"delete",l[h],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==k(g)&&(l=l.__kbnonproxy,Object.defineProperty(l,h,c(void 0,!0,!0,!1)),delete l[h],d&&l.length>parseInt(b,10)&&e&&--l.length,g.listener="__kbupdatelisteners",g.type="postdelete",g.oldValue=g.value,g.value=void 0,k(g))}return this}),exists:c(function(b){var e=-1!==b.indexOf(".")?this.__kbnonproxy.getLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());return e?
void 0!==e[b]:!!e}),addPrototype:c(function(b,e){var d=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,b,c(e,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",prop,d);return this}),addPointer:c(function(b,e){b instanceof M||(b=new M(b,b.__kbname));var d=new D(this,e,"create",b[e],void 0,[],"__kbcreatelisteners",this._stopChange),l=this.__kbnonproxy;
d.root=b.__kbref.__kbproxy;if(!0!==k(d)){var h=Object.getOwnPropertyDescriptor(b,e);Object.defineProperty(l,e,R(b,e,h));l.__kbpointers[e]=b;var h=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],g=[],p;if(l[e].__kbImmediateParent)for(var m=0,c=h.length;m<c;m++){p=l[h[m].listener];for(var g=Object.keys(p),f=0,H=g.length;f<H;f++)if(e===g[m])for(var r=0,v=p[g[m]].length;r<v;r++)void 0===l[e].__kbImmediateParent[h[m].listener][e]&&(l[e].__kbImmediateParent[h[m].listener][e]=
[]),l[e].__kbImmediateParent[h[m].listener][e].push(p[g[m]][r])}G(l,l[e]);d.listener="__kbupdatelisteners";d.type="postcreate";k(d)}return this}),move:c(function(b,e){this.__kbnonproxy.set(e,b[e]);f(b)?b.del(e):(b[e]=null,delete b[e]);return this}),copy:c(function(b,e){var d=this.__kbnonproxy;f(b)?"default"===b.__kbname?d.merge(b[e],e):d.addPointer(b,e):d.set(e,b[e]);return this}),merge:c(function(b,e){function d(b,e){for(var m=f(b)?b.keys("object"):Object.keys(b),h,c=0,k=m.length;c<k;c++)h=b[m[c]],
"object"===typeof h&&-1===l.indexOf(h)&&"undefined"!==e[m[c]]?d(h,e):e.set(m[c],"object"===typeof h?{}:h)}var l=[],h=this.__kbnonproxy;e&&void 0===h[e]&&h.set(e,{});d(b,e?h[e]:h);return this}),copyWithin:c(function(b,e,d){e=e||0;d=d||0;var l=new D(this,b,"copyWithin",this[b],void 0,arguments,"__kbmethodlisteners"),h=this.__kbnonproxy;if(!0!==k(l)&&b<h.length){b=0>b?h.length-1:b;e=e<h.length?e:h.length-1;d=d<h.length?d:h.length-1;e=0>e?h.length-1:e;d=0>e?h.length-1:d;for(var g=e;g<=d;g++)h.set(b+(g-
e),h[g]);l.type="postcopyWithin";l.listener="__kbmethodupdatelisteners";k(l)}return this}),fill:c(function(b,e,d){e=void 0!==e?Math.max(0,e):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;var l=new D(this,_start,"fill",this[_start],void 0,arguments,"__kbmethodlisteners"),h=this.__kbnonproxy;if(!0!==k(l)){for(var g=a.key;g<d;g++)h[g]=b;l.type="postfill";l.listener="__kbmethodupdatelisteners";k(l)}return this}),pop:c(function(){var b=new D(this,this.length-1,"pop",this[this.length-
1],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){var d=e[e.length-1];e.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";k(b);return d}return null}),push:c(function(b){var e=new D(this,this.length,"push",b,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;!0!==k(e)&&(d.set(d.length,b),e.type="postpush",e.listener="__kbmethodupdatelisteners",k(e));return this.length}),reverse:c(function(){var b=new D(this,void 0,"reverse",void 0,void 0,
arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){for(var d=null,l=null,h=e.length,d=0;d<h/2;d+=1){var l=h-1-d,g=e[d];e[d]=e[l];e[l]=g}b.type="postreverse";b.listener="__kbmethodupdatelisteners";k(b)}return this}),shift:c(function(){var b=new D(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){for(var d=a.key,l=this.length-1;d<l;d++)e[d]=e[d+1];e.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";k(b)}return null}),
sort:c(function(){var b=new D(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;!0!==k(b)&&(e.sort.apply(e,arguments),b.type="postsort",b.listener="__kbmethodupdatelisteners",k(b));return this}),splice:c(function(b,e,d){b="string"===typeof b?parseInt(b,10):b;var l=new D(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),h=this.__kbnonproxy;if(!0!==k(l)){var g=[],c=Array.prototype.slice.call(arguments,2),m=c.length-2,t=0;if(0!==e&&void 0!==h[b-1+e])for(var f=
0,H=e;f<H;f++){g.push(h[b+f]);for(var r=b+f,v=this.length-1;r<v;r++)h[r]=h[r+1];h.del(h.length-1,!0)}if(0!==m)for(f=0,H=m;f<H;f++){t=b+Math.min(1,f);r=h.length;for(v=t;r>v;r--)h.set(r,h[r-1]);h.set(t,c[f])}l.type="postsplice";l.listener="__kbmethodupdatelisteners";k(l);return g}return[]}),unshift:c(function(){var b=new D(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),e=this.__kbnonproxy;if(!0!==k(b)){for(var d=Array.prototype.slice.call(arguments),l=e.length-1+d.length,h=d.length;-1!==
l;l--)l<h?e.set(l,d[l]):e.set(l,e[l-d.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";k(b)}return this.length}),getLayer:c(function(b){function e(b){var l=b[0];return void 0===this[l]&&0!==b.length-1?null:f(this[l])?0!==b.length-1?(b.shift(),e.call(this[l],b)):this[l]:this}b=F(b);return e.call(this,b)}),setLayer:c(function(b){function e(b){var l=b[0];void 0===this[l]&&0!==b.length-1&&(this[l]=M({},this.__kbname,this,this.__kbscopeString+"."+l));return f(this[l])?0!==b.length-
1?(b.shift(),e.call(this[l],b)):this[l]:this}b=F(b);return e.call(this,b)}),ignoreCreate:c(function(b){-1===x.indexOf(b)&&x.push(b);return this}),addActionListener:c(function(b,e){var d=this.__kbnonproxy;void 0!==d.__kbref.__kbevents[b]&&d.__kbref.__kbevents[b].push(e);return this}),removeActionListener:c(function(b,e){var d=this.__kbnonproxy;if(void 0!==d.__kbref.__kbevents[b])for(var l=0,h=d.__kbref.__kbevents[b];l<h;l++)if(d.__kbref.__kbevents[b][l].toString()===e.toString()){d.__kbref.__kbevents[b].splice(l,
1);break}return this}),subscribe:c(function(b,e){var d=this.__kbnonproxy;void 0===d.__kbsubscribers[b]&&(d.__kbsubscribers[b]=[]);d.__kbsubscribers[b].push(e);return this}),unsubscribe:c(function(b,e){var d=this.__kbnonproxy;if(void 0!==d.__kbsubscribers[b])for(var l=0,h=d.__kbsubscribers[b].length;l<h;l++)if(d.__kbsubscribers[b][l].toString()===e.toString()){d.__kbsubscribers[b].splice(l,1);break}return this}),callSubscribers:c(function(b,e,d){var l=this.__kbnonproxy;if(void 0!==l.__kbsubscribers[b])for(var h=
0,g=l.__kbsubscribers[b].length;h<g;h++)l.__kbsubscribers[b].call(this,b,e,d);return this}),stopChange:c(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(M.prototype,{addDataListener:c(z("addDataListener","__kblisteners")),removeDataListener:c(H("removeDataListener","__kblisteners")),addDataUpdateListener:c(z("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:c(H("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:c(z("addDataCreateListener",
"__kbcreatelisteners")),removeDataCreateListener:c(H("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:c(z("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:c(H("removeDataDeleteListener","__kbdeletelisteners")),addDataMethodListener:c(z("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:c(H("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:c(z("addDataMethodUpdateListener","__kbmethodupdatelisteners")),
removeDataMethodUpdateListener:c(H("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:c(v("addChildDataListener","__kbparentlisteners")),removeChildDataListener:c(A("removeChildDataListener","__kbparentlisteners")),addChildDataUpdateListener:c(v("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:c(A("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:c(v("addChildDataCreateListener","__kbparentcreatelisteners")),
removeChildDataCreateListener:c(A("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:c(v("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:c(A("removeChildDataDeleteListener","__kbparentdeletelisteners"))});return M}}(),V=function(){return function(){function C(u){if("object"===typeof u)for(var q=0,D=u.length;q<D;q++)K_Components[u[q]]?n(u[q],K_Components[u[q]],document.getElementById("script_"+u[q])):C.load(u[q],"component/"+
u[q]+"/"+location.search,n);else"string"===typeof u&&(K_Components[u[q]]?n(u,K_Components[u],document.getElementById("script_"+u)):C.load(u,"component/"+u+"/"+location.search,n))}var n=function(){},q=/(<\/.*?>)/g;window.K_Components||(window.K_Components={});C.getUnknowns=function(u){var n=u.match(q);return n.map(function(n){return n.replace(/[<\/>]/g,"")}).filter(function(u,c){return document.createElement(u)instanceof HTMLUnknownElement&&-1===n.indexOf(u,c+1)&&!K_Components[u]})};C.load=function(n,
q,D){document.head.appendChild(function(c,n,u){var q=document.createElement("script");q.type="text/javascript";q.charset="utf-8";q.async=!0;q.src=n;q.id="script_"+c;q.onload=function(){u(c,K_Components[c],this)};return q}(n,q,D));return C};C.onLoad=function(q){if(void 0===q)return n;n="function"===typeof q?q:n;return C};return C}}(),W=function(C){return function(){function n(c){document.createDocumentFragment();this.name=c.tagName.toLowerCase();this.template=N[this.name]||'<div class="missing_component">Unknown Component</div>';
this.node=c;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name}function q(c,n,f,r){return{value:c,writable:!!n,enumerable:!!r,configurable:!!f}}function u(c,n,f,r){Object.getOwnPropertyDescriptor(c,n);return{get:function(){return c.get(n)},set:function(f){(this._stopChange?c.stopChange():c).set(prop,f);this._stopChange=!1},configurable:!!f,enumerable:!!r}}function M(){return new RegExp("(\\"+
G.split("").join("\\")+")(.*?)(\\"+E.split("").join("\\")+")","g")}function D(c){return c.split(new RegExp("("+G.split("").join("\\")+")(.*?)("+E.split("").join("\\")+")","g")).map(function(c,f,r){return r[f-1]===G?G+c+E:c}).filter(function(c,f,r){return 0!==c.length&&c!==G&&c!==E&&0!==c.length})}function c(c){return c.replace(new RegExp("["+G+E+"]","g"),"").replace(new RegExp("\\"+O.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function P(c){return c.reduce(function(c,f){f.match(/(\()(.*?)(\))/)?
c.vmFilters[c.vmFilters.length]=f.replace(/[\(\)]/g,""):f.match(/(\[)(.*?)(\])/)?-1!==f.indexOf("~")?c.model[c.model.length]=f.replace(/[\[\]\~]/g,""):-1!==f.indexOf("+")?c.local[c.local.length]=f.replace(/[\[\]\+]/g,""):c.session[c.session.length]=f.replace(/[\[\]\-]/g,""):c.filters[c.filters.length]=f;return c},{filters:[],vmFilters:[],model:[],local:[],session:[]})}function I(c){return-1!==c.indexOf("for")?c.replace(new RegExp("["+G+E+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(c){return 0!==
c.length}):[]}function R(){function c(f,r){this.text=f;this.key=r;var A;A=-1!==f.indexOf(O)?f.replace(new RegExp("["+E+"]","g"),"").replace(new RegExp("(.*?)(\\"+O.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[];this.filters=P(A);this.component="for"===this.type?I(f)[1]:void 0;this.id=0}function n(c,f,r){return f.reduce(function(c,f){return r[f]?r[f](c):c},c)}function f(c,f){if(0!==f.length&&window.model)for(var r=0,y=f.length;r<y;r++)window.model.set(f[r],c)}function r(c,f){if(0!==
c.length)for(var r=0,y=c.length;r<y;r++)localStorage.setItem(c[r],f)}function y(c,f){if(0!==filters.length)for(var r=0,y=filters.length;r<y;r++)sessionStorage.setItem(filters[r],f)}function F(c){for(var f=document.createElement(this.component),r=0,y=Object.keys(this.value[c],"all"),F=y.length;r<F;r++)f.k_post||(f.k_post={},f.k_post.pointers={}),f.k_post.pointers[y[r]]=this.value[c];c>=this.node.children.length?this.node.appendChild(f):this.node.insertBefore(f,this.node.children[c]);return f}function z(c){this.unsync();
this.node.removeChild(this.node.children[c])}Object.defineProperties(c.prototype,{addPointer:q(F),removePointer:q(z),reapplyPointer:q(function(c){var f=this.node.children[c].kb_viewmodel,r=0;c=Object.keys(this.value[c],"all");for(var y=c.length;r<y;r++)f.addPointer(this.value,c[r])}),connect:q(function(c){var f=this;this._data=c;Object.defineProperty(this,"value",u(c,this.key),!0,!0);"for"!==this.type?(this.dataListener=function(c){"delete"===c.event?f.unsync():f.setDom(c.value)},c.getLayer(this.key).addDataUpdateListener(this.key,
this.dataListener)):(this.dataListener=function(c){f.setLoop(c.key,c.event)},this.extraListener=function(c){f.setLoop("*","organize")},c.getLayer(this.key).addDataUpdateListener("*",this.dataListener).addMethodUpdateListener(this.extraListener),1===this.bindText.length&&this.node.addAttrUpdateListener(this.listener,function(c){f.setData(c.value)}));return this}),setData:q(function(c){c=n(c,this.filters.vmFilters,this._data.filters);this._data.set(this.key,c);f(this.filters.model,c);y(this.filters.session,
c);r(this.filters.local,c);return this}),setDom:q(function(c){f(this.filters.model,c);y(this.filters.session,c);r(this.filters.local,c);this.local[this.attr]=n(c,this.filters.filters,this._data.filters);return this}),setLoop:q(function(c,f){switch(f){case "create":return F(c);case "delete":return z(c);case "set":return this.reapplyPointer(c);case "organize":for(var r=0,y=this.value.length;r<y;r++)this.reapplyPointer(r)}return this}),bindMaps:q([]),unsync:q(function(){Object.defineProperty(this,"value",
q(void 0,!0,!0,!1));delete this.value;this.__proto__.bindText=null;this._data.getLayer(this.key).removeDataUpdateListener(this.dataListener);this.extraListener&&this._data.getLayer(this.key).removeMethodUpdateListener(this.extraListener);this._data=null;delete this._data;this.bindMaps.splice(this.bindMapId,1);for(var c=this.bindMapId,f=this.bindMaps.length;c<f;c++)this.bindMaps[c].bindMapId=c;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;return this})});return c}var G=
"{{",E="}}",O="|",N={},Q=/(<\/.*?>)/g;C().call();var L=Object.keys(HTMLElement.prototype).filter(function(c){return 0===c.indexOf("on")});n.start=function(c){if(void 0===c)return G;G="string"===typeof c?c:G;return n};n.end=function(c){if(void 0===c)return E;E="string"===typeof c?c:E;return n};n.pipe=function(c){if(void 0===c)return O;O="string"===typeof c?c:O;return n};n.getUnknown=function(c){var n=c.match(Q).map(function(c){return c.replace(/[<\/>]/g,"")});n.filter(function(c,r){return document.createElement(c)instanceof
HTMLUnknownElement&&-1===n.indexOf(c,r+1)&&void 0===N[c]});return n};n.isRegistered=function(c){return void 0!==N[c]};n.register=function(c,q){void 0===N[c]?(N[c]=q,n.getUnknown(q)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",c);return this};Object.defineProperties(n.prototype,{register:q(n.register),isRegistered:q(n.isRegistered),getUnknown:q(n.getUnknown),map:q(function(n){function q(f,r){for(var y=0,F=f.length;y<F;y++)if(void 0===f[y].kb_maps&&
8!==f[y].nodeType){f[y].kb_mapper=n;f[y].kb_maps=r;if(3===f[y].nodeType){var z=f[y],u=r,v=z.textContent;if(v.match(M())){var A=D(v),w=R();w.prototype.type=v.match(new RegExp("(\\"+G.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+E.split("").join("\\")+")","g"))?"for":"text";w.prototype.text=v;w.prototype.bindText=A;w.prototype.listener="textContent";w.prototype.attr="textContent";w.prototype.local=z;w.prototype.node=z.parentElement;w.prototype.binds=u;z=0;for(v=A.length;z<v;z++)if(0===A[z].indexOf(G)){var x=
"for"===w.prototype.type?I(A[z])[0]:c(A[z]),B=new w(A[z],x);void 0===u[x]&&(u[x]=[]);B.bindText[z]=B;B.bindMaps.push(B);B.id=u[x].length;u[x].push(B)}}}else for(u=f[y],A=r,w=Array.prototype.slice.call(u.attributes),z=u instanceof HTMLUnknownElement,v=0,x=w.length;v<x;v++)if(w[v].value.match(M())){var B=D(w[v].value),k=R();k.prototype.type=z?"component":"attribute";k.prototype.text=w[v].value;k.prototype.bindText=B;k.prototype.isEvent=-1!==L.indexOf(w[v].name);k.prototype.isInput="input"===u.tagName.toLowerCase();
k.prototype.listener=w[v].name;k.prototype.attr=w[v].name;k.prototype.local=u;k.prototype.node=u.parentElement;k.prototype.binds=A;k.prototype.isEvent&&u.removeAttribute(w[v].name);for(var b=0,e=B.length;b<e;b++)if(0===B[b].indexOf(G)){var d=c(B[b]),l=new k(B[b],d);void 0===A[d]&&(A[d]=[]);l.bindText[b]=l;l.bindMaps.push(l);l.id=A[d].length;l.bindMapId=l.bindMaps.length-1;A[d].push(l)}}f[y].childNodes&&0!==f[y].childNodes.length&&(r=q(f[y].childNodes,r))}return r}return q(n.childNodes,{})})});return n}}(S),
S=function(){function C(){function n(b,e){var d=b.length,c;for(c=0;c<d&&(b[c](e),void 0===e._stopPropogation);c++);}function q(b,e){var d=b.length,c;for(c=0;c<d&&(e.child=e.target,e.target=b[c].parent,b[c].func(e),void 0===e._stopPropogation);c++);}function u(b,e){for(var d=b.length;0<d;x++)if(b[x].toString()===e.toString())return!0;return!1}function C(b,e,d,c,h,g,f,m){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=d;this.oldValue=
c;this.target=b;this.attr=e;this.arguments=h;this.action=g;this.child=void 0;this.type=f;this.stopChange=m}function D(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function c(b,e,d,c){var h=b.get,g=b.set,f;return function(b){f=h.call(this);d(this,e,b,f,void 0,this._stopChange)&&g.call(this,
b);this._stopChange||c(this,e,b,f);this._stopChange=void 0}}function P(b,e,d,c){var h;return function(g){h=b.value;d(this,e,g,h,arguments,this._stopChange)&&(b.value=g);this._stopChange||c(this,e,g,h,arguments);this._stopChange=void 0}}function I(b,e,d,c){var h=b.value,g;return function(){d(this,e,null,null,arguments,this._stopChange)&&(g=h.apply(this,arguments));this._stopChange||c(this,e,null,null,arguments,g);this._stopChange=void 0;return g}}function R(b,e,d,c,h){var g=h.style,f=e.replace(/([A-Z])/g,
"-$1").replace("webkit","-webkit"),m,t;return{get:function(){return t},set:function(b){m=t;d(h,e,b,m,void 0,this._stopChange)&&(t=b,g.setProperty(f,b));this._stopChange||c(h,e,b,m);this._stopChange=void 0},enumerable:!0,configurable:!0}}function G(b,e,d,c){if("function"!==typeof e)return f;var h=-1!==["value","checked"].indexOf(b),g=-1!==A.indexOf(b),p;if(this.toString()!==f.toString())if(d){var m=this.querySelectorAll("*");d=m.length;for(var t,k=0;k<d;k++){t=m[k].attrListeners();if(h||"*"===b)void 0!==
m[k].addInputBinding&&m[k].addInputBinding(),void 0!==m[k].addInputBoxBinding&&m[k].addInputBoxBinding();if(g)f.injectStyleProperty(m[k],b),p=c?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===b){p=c?"_parentStyleUpdateListeners":"_parentStyleListeners";d=A.length;for(var n=0;n<d;n++)f.injectStyleProperty(m[k],A[n]);void 0===t[p]["*"]&&(t[p]["*"]=[]);t[p]["*"].push({parent:this,func:e})}p=c?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===t[p][b]&&(t[p][b]=[]);t[p][b].push({parent:this,
func:e})}}else{t=this.attrListeners();if(g)p=c?"_styleUpdateListeners":"_styleListeners",f.injectStyleProperty(this,b);else{if(h||"*"===b)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===b){p=c?"_styleUpdateListeners":"_styleListeners";d=A.length;for(k=0;k<d;k++)f.injectStyleProperty(this,A[k]);void 0===t[p][b]&&(t[p][b]=[]);t[p][b].push(e)}p=c?"_attrUpdateListeners":"_attrListeners"}void 0===t[p][b]&&(t[p][b]=[]);t[p][b].push(e)}else{if(h||
"*"===b)for(n=document.querySelectorAll("input, textarea"),d=n.length,k=0;k<d;k++)void 0!==n[k].addInputBinding&&n[k].addInputBinding(),void 0!==n[k].addInputBoxBinding&&n[k].addInputBoxBinding();if(g){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=g.length+1;g.unshift(document.body);for(k=0;k<d;k++)f.injectStyleProperty(g[k],b);p=c?z:F}else{if("*"===b){g=Array.prototype.slice.call(document.body.querySelectorAll("*"));d=g.length+1;h=A.length;g.unshift(document.body);for(k=0;k<
d;k++)for(n=0;n<h;n++)f.injectStyleProperty(g[k],A[n]);p=c?z:F;void 0===p[b]&&(p[b]=[]);p[b].push(e)}p=c?y:r}void 0===p[b]&&(p[b]=[]);p[b].push(e)}}function E(b,e,d,c){function h(b,d){var c=d[b],g=c.length;for(p=0;p<g;p++)c[p].toString()===e.toString()&&c.splice(p,1)}if("function"!==typeof e)return f;["value","checked"].indexOf(b);var g=-1!==A.indexOf(b),p;if(this.toString()!==f.toString())if(d){d=this.querySelectorAll("*");var m=d.length;g?(g=c?"_childStyleUpdateListeners":"_childStyleListeners",
h(b,this.attrListeners()[g]),g=c?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===b&&(g=c?"_childStyleUpdateListeners":"_childStyleListeners",h(b,this.attrListeners()[g])),g=c?"_childAttrUpdateListeners":"_childAttrListeners",h(b,this.attrListeners()[g]),g=c?"_parentAttrUpdateListeners":"_parentAttrListeners");for(p=0;p<m;p++){for(var t=d[p].attrListeners()[g][b],k=t.length,n=0;n<k;n++)t[n].isEqualNode(this)&&t.slice(n,1);if("*"===b)for(listenersStyle=c?"_parentStyleUpdateListeners":
"_parentStyleListeners",t=d[p].attrListeners()[g][b],k=t.length,n=0;n<k;n++)t[n].isEqualNode(this)&&t.slice(n,1)}}else g?g=c?"_styleUpdateListeners":"_styleListeners":("*"===b&&(g=c?"_styleUpdateListeners":"_styleListeners",h(b,this.attrListeners()[g])),g=c?"_attrUpdateListeners":"_attrListeners"),h(b,this.attrListeners()[g]);else g?g=c?z:F:("*"===b&&(g=c?z:F,h(b,g)),g=c?y:r),h(b,g)}function O(b,e){f.addAttrListener.call(this,b,e,!0);return this}function N(b,e){f.addAttrUpdateListener.call(this,b,
e,!0);return this}function Q(b,e){f.removeAttrListener.call(this,b,e,!0);return this}function L(b,e){f.removeAttrUpdateListener.call(this,b,e,!0);return this}function J(b,e,d){var c=this.attrListeners();"html"===e&&(e="innerHTML");"events"===e&&(e="onclick");switch(b){case "attr":if(u(c._attrListeners[e],d))return!0;break;case "attrupdate":if(u(c._attrUpdateListeners[e],d))return!0}return!1}function K(){this._stopChange=!0;return this}function f(){function b(b,e){var d,c=e.length;for(d=0;d<c;d++)-1===
b.indexOf(e[d])&&b.push(e[d]);return b}function e(b,e){for(var d=Object.keys(b),c,g,h=0,l=d.length;h<l;h++)if(c=d[h],void 0===e[c])e[c]=b[c].slice();else for(var f=0,p=b[c].length;f<p;f++)g=b[c][f],e[c].push(g)}function d(d){if(3!==d.target.nodeType&&8!==d.target.nodeType){var c=d.target.attrListeners(),g,h=["value","checked"],l=c._attrListeners,p=c._attrUpdateListeners,k=c._parentAttrListeners;g=c._parentAttrUpdateListeners;var n=!1;if(void 0!==r["*"]||void 0!==y["*"])n=!0;if(!0!==n&&void 0!==l["*"]||
void 0!==p["*"]||void 0!==k["*"]||void 0!==g["*"])n=!0;if(!0!==n)for(var q=0;q<h.length;q++)if(void 0!==r[h[q]]||void 0!==y[h[q]]||void 0!==l[h[q]]||void 0!==p[h[q]]||void 0!==k[h[q]]||void 0!==g[h[q]]){n=!0;break}g=n;h=Object.keys(F);l=Object.keys(z);Object.keys(c._styleListeners);Object.keys(c._styleUpdateListeners);p=Object.keys(c._parentStyleListeners);c=Object.keys(c._parentStyleUpdateListeners);k=[];if(0!==h.length||0!==l.length)k=b(k,h),k=b(k,l);if(0!==k.length&&0!==p.length||0!==c.length)k=
b(k,p),k=b(k,c);-1!==k.indexOf("*")&&(k=A);var c=k,h=c.length,u,v,l=[],w,p="outerHTML"===d.attr||"outerText"===d.attr?d.attr:void 0,k=d.target;void 0!==p&&(d.attr="appendChild",d.arguments=[d.target],d.target=d.target.parentElement);if(g){"appendChild"===d.attr&&3!==d.arguments[0].nodeType&&8!==d.arguments[0].nodeType?(l=Array.prototype.slice.call(d.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==d.arguments[0].tagName&&"TEXTAREA"!==d.arguments[0].tagName||l.unshift(d.arguments[0])):l=
Array.prototype.slice.call(d.target.querySelectorAll("input,textarea"));w=l.length;for(var x=0;x<w;x++)void 0!==l[x].addInputBinding&&l[x].addInputBinding(),void 0!==l[x].addInputBoxBinding&&l[x].addInputBoxBinding()}"appendChild"===d.attr&&"#text"!==d.arguments[0].nodeName&&"#comment"!==d.arguments[0].nodeName?(l=Array.prototype.slice.call(d.arguments[0].querySelectorAll("*")),l.unshift(d.arguments[0])):l=Array.prototype.slice.call(d.target.querySelectorAll("*"));g=d.target.__kb._parentAttrListeners;
n=d.target.__kb._parentAttrUpdateListeners;q=d.target.__kb._parentStyleListeners;u=d.target.__kb._parentStyleUpdateListeners;w=l.length;for(x=0;x<w;x++){if(0!==h)for(v=0;v<h;v++)f.injectStyleProperty(l[x],c[v]);v=l[x].attrListeners();e(g,v._parentAttrListeners);e(n,v._parentAttrUpdateListeners);e(q,v._parentStyleListeners);e(u,v._parentStyleUpdateListeners)}void 0!==p&&(d.attr=p,d.target=k,d.arguments=[])}}function c(b){var d=b.target.attributes[b.arguments[0]],e="setAttribute"===b.attr?b.arguments[1]:
"";g(b.target,b.arguments[0],e,void 0!==d?d.value:"",[e])||b.preventDefault()}function h(b){var d=b.target.attributes[b.arguments[0]],e="setAttribute"===b.attr?b.arguments[1]:"";p(b.target,b.arguments[0],e,void 0!==d?d.value:"",[e])}f.injectPrototypes(Node,"Node");f.injectPrototypes(Element,"Element");f.injectPrototypes(HTMLElement,"HTMLElement");f.injectPrototypes(HTMLInputElement,"HTMLInputElement");f.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");f.injectPrototypes(Document,"Document");
var g=B,p=k;f.addAttrUpdateListener("appendChild",d);f.addAttrUpdateListener("removeChild",d);f.addAttrUpdateListener("innerHTML",d);f.addAttrUpdateListener("outerHTML",d);f.addAttrUpdateListener("innerText",d);f.addAttrUpdateListener("outerText",d);f.addAttrUpdateListener("textContent",d);f.addAttrListener("setAttribute",c);f.addAttrListener("removeAttribute",c);f.addAttrUpdateListener("setAttribute",h);f.addAttrUpdateListener("removeAttribute",h);return f}var r={},y={},F={},z={},H={},v="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
A=Object.getOwnPropertyNames(document.documentElement.style),w=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}).concat(["addEventListener","removeEventListener"]),x,B=function(b,e,d,c,h,g){d=new C(b,e,d,c,h,void 0,"set",g);void 0!==b.__kb&&(c=b.__kb._attrListeners,h=b.__kb._styleListeners,g=b.__kb._parentAttrListeners,b=b.__kb._parentStyleListeners,void 0!==c[e]&&n(c[e],d),void 0===d._stopPropogation&&void 0!==h[e]&&n(h[e],d),void 0===d._stopPropogation&&void 0!==
c["*"]&&(n(c["*"],d),void 0===d._stopPropogation&&n(h["*"],d)),void 0===d._stopPropogation&&void 0!==g[e]&&q(g[e],d),void 0===d._stopPropogation&&void 0!==b[e]&&q(b[e],d),void 0===d._stopPropogation&&void 0!==g["*"]&&(q(g["*"],d),void 0===d._stopPropogation&&q(b["*"],d)));void 0===d._stopPropogation&&void 0!==r[e]&&n(r[e],d);void 0===d._stopPropogation&&void 0!==F[e]&&n(F[e],d);void 0===d._stopPropogation&&void 0!==r["*"]&&(n(r["*"],d),void 0===d._stopPropogation&&n(F["*"],d));return void 0!==d._preventDefault?
!1:!0},k=function(b,e,d,c,h,g){d=new C(b,e,d,c,h,g,"update");void 0!==b.__kb&&(c=b.__kb._attrUpdateListeners,h=b.__kb._styleUpdateListeners,g=b.__kb._parentAttrUpdateListeners,b=b.__kb._parentStyleUpdateListeners,void 0!==c[e]&&n(c[e],d),void 0===d._stopPropogation&&void 0!==h[e]&&n(h[e],d),void 0===d._stopPropogation&&void 0!==c["*"]&&(n(c["*"],d),void 0===d._stopPropogation&&n(h["*"],d)),void 0===d._stopPropogation&&void 0!==g[e]&&q(g[e],d),void 0===d._stopPropogation&&void 0!==b[e]&&q(b[e],d),
void 0===d._stopPropogation&&void 0!==g["*"]&&(q(g["*"],d),void 0===d._stopPropogation&&q(b["*"],d)));void 0===d._stopPropogation&&void 0!==y[e]&&n(y[e],d);void 0===d._stopPropogation&&void 0!==z[e]&&n(z[e],d);void 0===d._stopPropogation&&void 0!==y["*"]&&(n(y["*"],d),void 0===d._stopPropogation&&n(z["*"],d));return void 0!==d._preventDefault?!1:!0};f.injectPrototypeProperty=function(b,e,d,l,h){var g=b.prototype,p=Object.getOwnPropertyDescriptor(g,e);d=d||b.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var m=H[d];l=l||B;h=h||k;void 0===g.attrListeners&&(g={},g.attrListeners=function(){void 0===this.__kb&&(this.__kb=new D);return this.__kb}.bind(g),g.addAttrListener=f.addAttrListener,g.addAttrUpdateListener=f.addAttrUpdateListener,g.addChildAttrListener=O,g.addChildAttrUpdateListener=N,g.hasListener=J,g.removeAttrListener=f.removeAttrListener,g.removeAttrUpdateListener=f.removeAttrUpdateListener,g.removeChildAttrListener=Q,g.removeChildAttrUpdateListener=L,g.stopChange=K);void 0===m&&(H[d]={obj:b,
proto:g,descriptors:{},set:void 0,update:void 0},m=H[d],m.set=l,m.update=h);void 0===m.descriptors[e]&&(m.descriptors[e]=p);p.configurable&&(void 0!==p.set?Object.defineProperty(g,e,{get:p.get,set:c(p,e,l,h),enumerable:!0,configurable:!0}):"function"===typeof p.value?Object.defineProperty(g,e,{value:I(p,e,l,h),writable:!0,enumerable:!0,configurable:!0}):void 0!==p.value&&Object.defineProperty(g,e,{get:function(){return p.value},set:P(p,e,l,h),enumerable:!0,configurable:!0}));return f};f.injectStyleProperty=
function(b,e,d,c){var h=b.style,g=Object.getOwnPropertyDescriptor(h,e),p=b.attrListeners().injectedStyle;d=d||B;c=c||k;void 0===p&&(b.attrListeners().injectedStyle={obj:b,proto:h,descriptors:{},set:void 0,update:void 0},b.attrListeners().injectedStyle.set=d,b.attrListeners().injectedStyle.update=c,p=b.attrListeners().injectedStyle);void 0===p.descriptors[e]&&(p.descriptors[e]=g);g.configurable&&Object.defineProperty(h,e,R(g,e,d,c,b));return f};f.injectPrototypes=function(b,e,d,c){var h=b.prototype;
e=e||b.toString().split(/\s+/)[1].split("{")[0].replace("()","");var g=H[e],p=Object.getOwnPropertyNames(h);d=d||B;c=c||k;var m;void 0===h.attrListeners&&(h.attrListeners=function(){void 0===this.__kb&&(this.__kb=new D);return this.__kb},h.addAttrListener=f.addAttrListener,h.addAttrUpdateListener=f.addAttrUpdateListener,h.addChildAttrListener=O,h.addChildAttrUpdateListener=N,h.removeAttrListener=f.removeAttrListener,h.removeAttrUpdateListener=f.removeAttrUpdateListener,h.removeChildAttrListener=Q,
h.removeChildAttrUpdateListener=L,h.hasListener=J,h.stopChange=K);void 0===g&&(H[e]={obj:b,proto:h,descriptors:{},set:void 0,update:void 0},g=H[e],g.set=d,g.update=c);m=H[e].descriptors;for(c=0;c<p.length;c+=1)void 0===m[p[c]]&&f.injectPrototypeProperty(b,p[c],e,d,k);if(-1!==p.indexOf("value")){var r=function(b){var d,c,e;if("checkbox"===this.type||"radio"===this.type)d=!0;c=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){e=d?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;d&&(g.set(this,"checked",this.checked,c)?g.update(this,"checked",this.checked,c):m.checked.set.call(this,c));this.value=e;g.set(this,"value",this.value,c)?g.update(this,"value",this.value,c):m.value.set.call(this,c)}.bind(this),0)};h.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",r)};h.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",r)};h.removeInputBoxBinding=
function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",r)};h.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",r)}}return f};f.addAttrListener=function(b,c,d){if("html"===b){b=0;for(var l=v.length;b<l;b++)G.call(this,v[b],c,d,!1)}else if("events"===b)for(b=0,l=w.length;b<l;b++)G.call(this,w[b],c,d,!1);else G.call(this,b,c,d,!1);return this};f.addAttrUpdateListener=function(b,c,d){if("html"===b){b=0;for(var l=v.length;b<
l;b++)G.call(this,v[b],c,d,!0)}else if("events"===b)for(b=0,l=w.length;b<l;b++)G.call(this,w[b],c,d,!0);else G.call(this,b,c,d,!0);return this};f.removeAttrListener=function(b,c,d){if("html"===b){b=0;for(var l=v.length;b<l;b++)E.call(this,v[b],c,d,!1)}else if("events"===b)for(b=0,l=w.length;b<l;b++)E.call(this,w[b],c,d,!1);else E.call(this,b,c,d,!1);return this};f.removeAttrUpdateListener=function(b,c,d){if("html"===b){b=0;for(var l=v.length;b<l;b++)E.call(this,v[b],c,d,!0)}else if("events"===b)for(b=
0,l=w.length;b<l;b++)E.call(this,w[b],c,d,!0);else E.call(this,b,c,d,!0);return this};f.hasListener=function(b,c,d){"html"===c&&(c="innerHTML");"events"===c&&(c="onclick");switch(b){case "attr":if(u(r[c],d))return!0;break;case "attrupdate":if(u(y[c],d))return!0}return!1};f.injectedPrototypes=function(){return H};return f}"function"===typeof define&&define.amd&&define("KB",C);return C}(),S=function(){return function(){function C(u){0===u.length&&(u=n);document.body.innerHTML="<"+u+"></"+u+">";q(u);
return C}var n="",q=function(){};C.base=function(q){if(void 0===q)return n;n="string"===typeof q?q:n;return C};C.onChange=function(n){if(void 0===n)return q;q="function"===typeof n?n:q;return C};C.watch=function(n){window.onhashchange=n?function(){C(window.location.hash.replace("#",""))}:null;return C};return C}}(),T=function(C,n,q,u){return function(M,D){function c(f,n,q,z){function u(b,c,l,h,g){for(var f=G({},b),m=0,k=Object.keys(c.prototype),r=k.length;m<r;m++)f.__proto__[k[m]]=c.prototype[k[m]];
m=0;k=Object.keys(h);for(r=k.length;m<r;m++)-1!==J.indexOf(k[m])?Object.defineProperty(f,k[m],I(h[k[m]],"filters"!==k[m])):f.set(k[m],h[k[m]]);if(h.pointers)for(m=0,k=Object.keys(h.pointers),r=k.length;m<r;m++)f.addPointer(h.pointers[k[m]],k[m]);c.apply(f,l);m=0;k=Object.keys(g);for(r=k.length;m<r;m++)-1!==J.indexOf(k[m])?Object.defineProperty(f,k[m],I(g[k[m]],"filters"!==k[m])):f.set(k[m],g[k[m]]);if(g.pointers)for(m=0,k=Object.keys(g.pointers),r=k.length;m<r;m++)f.addPointer(g.pointers[k[m]],k[m]);
m=0;k=Object.keys(f.filters);for(r=k.length;m<r;m++)f.filters[k[m]]=f.filters[k[m]].bind(f);if(f.sessionStorage){if(c=sessionStorage.getItem(f.id||b))for(c=JSON.parse(c),m=0,k=Object.keys(c),r=k.length;m<r;m++)f.set(k[m],c[k[m]]);else sessionStorage.setItem(f.id||b,f.stringify());f.addChildDataUpdateListener("*",function(){sessionStorage.setItem(f.id||b,f.stringify())})}if(f.localStorage){if(c=localStorage.getItem(f.id||b))for(c=JSON.parse(c),m=0,k=Object.keys(c),r=k.length;m<r;m++)f.set(k[m],c[k[m]]);
else localStorage.setItem(f.id||b,f.stringify());f.addChildDataUpdateListener("*",function(){localStorage.setItem(f.id||b,f.stringify())})}f.store&&N.set(f.id||b,f);return f}function v(b,d,f){b.kb_viewmodel=f;d.wrapper.innerHTML=x.template.replace(new RegExp("("+E.startChars()+"local"+E.endChars()+")","g"),f.local);var h=d.maps=d.map(d.wrapper);d.wrapper.kb_maps=h;Object.keys(h).forEach(function(b){h[b].forEach(function(b){switch(b.type){case "for":b.connect(f);E.isRegistered(b.component)?b.loop(function(b){c(b)}):
(c.loadWaitList(b.component,function(d,e){b.loop(function(b){c(b)})}),c.loadWaitList(b.component).loading||(c.loadWaitList(b.component).loading=!0,R(b.component)));break;case "component":b.connect(f).unsync();break;default:b.connect(f)}})});d.wrapper.kb_viewmodel.onFinish.call(d.wrapper.kb_viewmodel,d.wrapper)}function A(e,d){x=new E(d,!0);Object.defineProperty(x.wrapper,"__kbcomponenttree",I(d.kb_mapper?d.kb_mapper.__kbcomponenttree.slice():[]));d.parentElement.replaceChild(x.fragment,d);n.unshift(x.wrapper);
v(x.wrapper,x,u(e,Q[e],n,k,b));if(-1===x.wrapper.__kbcomponenttree.indexOf(e)||x.wrapper.kb_viewmodel.multiple){x.wrapper.__kbcomponenttree.push(e);x.wrapper.classList.add(x.wrapper.kb_viewmodel.local);for(var f=x.wrapper.querySelectorAll("*"),h=0,g=f.length;h<g;h++)f[h]instanceof HTMLUnknownElement&&c(f[h])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",
e),console.error("Recursive Component %o on %o",x.wrapper,x.wrapper.parentElement),x.wrapper.parentElement.removeChild(x.wrapper)}var w=f.tagName.toLowerCase(),x,B=Object.keys(HTMLElement.prototype).filter(function(b){return 0===b.indexOf("on")}),k={},b={};void 0===n&&(n=[]);q&&P(q,k);Object.defineProperty(k,"local",I(k.local||w+"-"+Date.now(),!0,!1,!0));Object.defineProperty(k,"filters",I(k.filters||{},!1,!1,!0));"function"!==typeof k.onFinish&&(k.onFinish=function(){});Object.defineProperty(k,"onFinish",
I(k.onFinish,!0,!1,!0));"string"===typeof k.sessionStorage&&(k.sessionStorage="true"===k.sessionStorage);Object.defineProperty(k,"sessionStorage",I(void 0!==k.sessionStorage?k.sessionStorage:!1,!0,!1,!0));"string"===typeof k.localStorage&&(k.localStorage="true"===k.localStorage);Object.defineProperty(k,"localStorage",I(void 0!==k.localStorage?k.localStorage:!1,!0,!1,!0));"string"===typeof k.store&&(k.store="true"===k.store);Object.defineProperty(k,"store",I(void 0!==k.store?k.store:!1,!0,!1,!0));
"string"===typeof k.multiple&&(k.multiple="true"===k.multiple);Object.defineProperty(k,"multiple",I(void 0!==k.multiple?k.multiple:!1,!0,!1,!0));z&&P(z,b);b.innerHTML=f.childNodes;q=0;for(z=f.attributes.length;q<z;q++)b[f.attributes[q].name]=f.attributes[q].value;q=0;for(z=B.length;q<z;q++)f[B[q]]&&(b[B[q]]=f[B[q]]);f.k_post&&P(f.k_post,b);E.isRegistered(w)?A(w,f):(c.loadWaitList(w,function(b,c){A(w,f)}),c.loadWaitList(w).loading||(c.loadWaitList(w).loading=!0,R(w)))}function P(c,f){var n=Object.keys(c);
f.pointers||(f.pointers={});for(var q=0,u=n.length;q<u;q++)if(c.isObservable(n[q]))f.pointers[n[q]]=c;else if(c[n[q]].isMixed())f.pointers[n[q]]=c[n[q]].__kbImmediateParent;else if(Object.prototype.isObject(c[n[q]]))for(var v=0,A=Object.keys(c[n[q]]);v<u;v++)f[n[q]][A[v]]=c[n[q]][A[v]];else if(Object.prototype.isArray(c[n[q]]))for(v=0;v<u;v++)f[n[q]][v]=c[n[q]][v];else f[n[q]]=c[n[q]]}function I(c,f,n,q){return{value:c,writable:!!f,enumerable:!!q,configurable:!!n}}window.K_Components||(window.K_Components=
{});var R=n().onLoad(function(f,n){var q="<style>"+unescape(n.prototype.k_css)+"</style>"+unescape(n.prototype.k_html);c.register(f,n,q,n.prototype.cms);c.loadWaitList(f).forEach(function(c){c(f,n)});c.loadWaitList(f,"clear")}),G=C(),E=q(),O=u().base(void 0!==config&&void 0!==config.base?config.base:"default").watch(!0).onChange(function(f){c(document.querySelector(f))}),N=G({},"Model"),Q={},L=function(){return window.location.search.replace("?","").split("&").filter(function(c){return 0!==c.length}).reduce(function(c,
f){c[f.split("=")[0]]=f.split("=")[1];return c},{})}(),J="id filters class sessionStorage localStorage store component multiple".split(" "),K={},f;c.register=function(f,n,q,u){E.register(f,q);Q[f]=n;return c};c.loadWaitList=function(f,n){if("undefined"===typeof n&&f)return K[f];if(f){if(void 0===K[f]||"clear"===n){var q=void 0===K[f]?!1:!!K[f].loading;K[f]=[];K[f].loading=q}"function"===typeof n&&K[f].push(n)}return c};c.localRouting=function(n){n?(f=Node.prototype.appendChild,Node.prototype.appendChild=
function(c){if("script"===c.nodeName.toLowerCase()){c.src=c.src.substring(0,-1!==c.src.indexOf("?")?c.src.indexOf("?"):c.src.length);var n=c.src.match(/(.*?component\/)/);n&&(L.env||(L.env="prod"),"dev"===L.env&&(L.env="qa"),n=c.src.replace(n[0],"").replace(/[\/\s]/g,""),c.src="/components/"+n+"/build/"+L.env+"/"+n+(L.debug&&"prod"!==L.env?"":".min")+".js",arguments[0]=c)}return f.apply(this,arguments)}):f&&(Node.prototype.appendChild=f,f=null);return c};M&&c.localRouting(M);D&&O(window.location.hash.replace("#",
""));return c}}(U,V,W,S);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return T}):"undefined"!==typeof module&&(module.exports=T);return T}();
