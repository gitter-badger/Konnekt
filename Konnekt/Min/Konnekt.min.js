var Konnekt=function(){var W=function(){return function(F,m,n,z){function S(b,c,k,d){b=void 0===b?{}:b;var f={},h=window.Proxy?new Proxy(f,{set:L,deleteProperty:R}):f,q=Object.keys(b,"all");Object.defineProperties(f,{__kbname:g("string"===typeof c?c:"default",!0,!0),__kbref:g(k?k.__kbref||k:h,!0,!0),__kbscopeString:g(d||"",!0,!0),__kbImmediateParent:g(k||null,!0,!0),__kbsubscribers:g({}),__kblisteners:g({}),__kbupdatelisteners:g({}),__kbparentlisteners:g({}),__kbparentupdatelisteners:g({}),__kbcreatelisteners:g([]),
__kbdeletelisteners:g([]),__kbparentcreatelisteners:g([]),__kbparentdeletelisteners:g([]),__kbmethodlisteners:g([]),__kbmethodupdatelisteners:g([]),__kbpointers:g({}),__kbevents:g(w),length:g(0,!0),__kbnonproxy:g(f,!1,!0),__kbproxy:g(h,!1,!0),_stopChange:g(!1,!0)});f.__proto__=S.prototype;c=0;for(k=q.length;c<k;c++)h.set(q[c],b[q[c]]);f.__kbevents.addlistener=[];f.__kbevents.removelistener=[];f.addActionListener("addlistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var c=
b.local.__kbpointers[b.arguments[0]],c=c.point.getLayer(c.keys);if(void 0!==c[b.arguments[0]])c[b.arguments[2]](b.arguments[0],b.arguments[1])}}).addActionListener("removelistener",function(b){if("string"===typeof b.arguments[0]&&void 0!==b.local.__kbpointers[b.arguments[0]]){var c=b.local.__kbpointers[b.arguments[0]],c=c.point.getLayer(c.keys);if(void 0!==c[b.arguments[0]])c[b.arguments[2]](b.arguments[0],b.arguments[1])}});return h}function C(b,c,k,d,f,h,q,e){this.stopPropogation=function(){this._stopPropogration=
!0};this.preventDefault=function(){this._preventDefault=!0};this.local=b;this.key=c;this.arguments=h;this.type=this.event=k;this.listener=q;this.name=b.__kbname;this.root=b.__kbref;this.scope=b.__kbscopeString;this.parent=b.__kbImmediateParent;this.value=d;this.oldValue=f;this.stopChange=e}function g(b,c,k,d){return{value:b,writable:!!c,enumerable:!!d,configurable:!!k}}function M(b,c,k){return{get:function(){return b.call(this)},set:function(k){c&&(b=k)},enumerable:!1,configurable:!!k}}function T(b,
c){var k=c,d=c;return{get:function(){return k},set:function(c){var h=new C(this,b,"set",c,k,arguments,"__kblisteners",this._stopChange);!0!==l(h)&&(d=k,k=c,h.stopChange||(h.listener="__kbupdatelisteners",h.type="postset",l(h)),this._stopChange||this.callSubscribers(b,k,d));this._stopChange=!1},configurable:!0,enumerable:!0}}function K(){var b=Array.prototype.slice.call(arguments),c=b.shift();return{get:function(){return b.reduce(function(b,c){return b[c]},c)},set:function(k){var d=b.slice(0,b.length-
1).reduce(function(b,c){return b[c]},c);(this._stopChange?d.stopChange():d)[b[b.length-1]]=k;this._stopChange=!1},enumerable:!0,configurable:!0}}function I(b,c){for(var k=[{listener:"__kbparentlisteners",action:"addChildListener"},{listener:"__kbparentupdatelisteners",action:"addChildUpdateListener"},{listener:"__kbparentcreatelisteners",action:"addChildCreateListener"},{listener:"__kbparentdeletelisteners",action:"addChildDeleteListener"}],d=[],f,h=0,q=k.length;h<q;h++)if(f=b[k[h].listener],H.call(f))for(var d=
Object.keys(f),e=0,v=d.length;e<v;e++)for(var u=0,l=f[d[e]].length;u<l;u++)c[k[h].method](d[e],f[d[e]][u]);else for(e=0,v=f.length;e<v;e++)c[k[h].method](f[e])}function L(b,c,k){if(E(b,c)||"length"===c){if("length"===c)if(k>b.length&&void 0!==b[k-1])b.length=k;else{if(k<b.length){c=k;for(var d=b.length;c<d;c++)b[c]&&delete b[c];b.length=k}}else b[c]=k;return!0}b.set(c,k)}function R(b,c){b.del(c);return!0}function Q(b,c,k){var d=e(k),f=H(k),h=O(k);if(d&&k.__kbname!==b.__kbname)"default"===k.__kbname?
b.merge(k,c):b.__kbpointers[c]||b.addPointer(k,c);else{var d=new C(this,c,"create",k,void 0,[],"__kbcreatelisteners",this._stopChange),q=l(d),p=parseInt(c,10);if(!0!==q)if((f||h)&&0!==Object.keys(k,"all").length)for(Q.call(this,b,c,{}),f=0,h=Object.keys(k,"all"),d=h.length;f<d;f++)Q.call(this[c],b[c],h[f],k[h[f]]);else{if(f||h)k=new S(k,b.__kbname,b,b.__kbscopeString+(0!==b.__kbscopeString.length?".":"")+c),I(b,k);Object.defineProperty(b,c,T(c,k));!isNaN(p)&&b.length<=p&&(b.length=p+1);d.listener=
"__kbupdatelisteners";d.type="postcreate";l(d)}}}function P(b,c,k,d){var f=e(k),h=H(k),q=O(k);if(f&&k.__kbname!==b.__kbname)"default"===k.__kbname?b.merge(k,c):b.__kbpointers[c]||b.addPointer(k,c);else if(void 0===b[c])-1===J.indexOf(c)?Q.call(this,b,c,k):(d?b.stopChange():b)[c]=k;else if(h||q)for(f=0,h=Object.keys(k,"all"),q=h.length;f<q;f++)P.call(this[c],b[c],h[f],k[h[f]],d);else(d?b.stopChange():b)[c]=k}function N(b){return{}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function H(b){return"object"===
N(void 0!==b?b:this)}function O(b){return"array"===N(void 0!==b?b:this)}function e(b){return"mixed"===N(void 0!==b?b:this)}function E(b,c){c="string"===typeof b?b:c;var k=Object.getOwnPropertyDescriptor("string"===typeof b?this:b,c);return k?void 0===k.value:!1}function y(b,c){"number"===typeof b&&(b=b.toString());var k=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());var d=new C(this,b,"set",c,this[b],arguments,"__kbmethodlisteners");
!0!==l(d)&&(P.call(this,k,b,c,this._stopChange),this.stopChange=void 0,d.type="postset",d.listener="__kbmethodupdatelisteners",l(d));return this}function G(b){return b.split(".")}function D(b,c){return function(k,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var f=this[c],h=new C(this,c,"addlistener",f,void 0,arguments,"");"string"===typeof k&&1!==G(k).length&&(f=G(k),k=f.pop(),f=f.join("."),h.local=this.getLayer(f),f=h.local[c],h.value=f);!0!==l(h)&&(H.call(f)?(void 0===f[k]&&
(f[k]=[]),f[k].push(d),h.type="postaddlistener",l(h)):O.call(f)&&"function"===typeof k&&(f.push(k),h.type="postaddlistener",l(h)));return this}}function x(b,c){return function(k,d){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var f=this[c],h=new C(this,c,"removelistener",f,void 0,arguments,"");"string"===typeof k&&1!==G(k).length&&(f=G(k),f.pop(),f.join("."),h.local=this.getLayer(f),f=h.local[c],h.value=f,k=G(k).pop());if(!0!==l(h))if(H.call(f)){if(void 0!==f[k])for(var q=0,e=
f[k].length;q<e;q++)if(f[k][q].toString()===d.toString()){f[k].splice(q,1);h.type="postremovelistener";l(h);break}}else if(O.call(f)&&"function"===typeof k)for(q=0,e=f.length;q<e;q++)if(f[q].toString()===k.toString()){f.splice(q,1);h.type="postremovelistener";l(h);break}return this}}function A(b,c){function k(b,c,d){var q=Object.keys(this,"all").filter(function(b){return e.call(this[b])}.bind(this)),p=this,v=b;"string"===typeof b&&1!==G(b).length&&(p=G(b),v=p.pop(),p=p.join("."),p=this.getLayer(p),
void 0===p[d][v]&&(p[d][v]=[]),p[d][v].push(c));H.call(p[d])?(void 0===p[d][v]&&(p[d][v]=[]),p[d][v].push(c),p=p.__kbpointers[v],p=p.point.getLayer(p.keys),void 0!==p[v]&&(void 0===p[d][v]&&(p[d][v]=[]),p[d][v].push(_func))):p[d].push(c);v=0;for(p=q.length;v<p;v++)k.call(this[q[v]],b,c,d)}return function(d,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=new C(this,c,"addchildlistener",void 0,void 0,arguments,"");!0!==l(h)&&(k.call(this.__kbnonproxy,d,f,c),h.type="postaddchildlistener",
l(h));return this}}function B(b,c){function k(b,c,d){var q=Object.keys(this,"all").filter(function(b){return e.call(this[b])}.bind(this)),p=this,v=b;if("string"===typeof b&&1!==G(b).length){var u=G(b),v=u.pop();u.join(".");p=this.getLayer(u);if(void 0!==p[d][b])for(var u=0,l=p[d][b].length;u<l;u++)if(p[d][b][u].toString()===c.toString()){p[d][b].splice(u,1);break}}if(H.call(p[d])){if(void 0!==p[d][v]){u=0;for(l=p[d][v].length;u<l;u++)if(p[d][v][u].toString()===c.toString()){p[d][v].splice(u,1);break}if(-1!==
p.__kbpointers.indexOf(v)&&(u=p.__kbpointers[v],p=u.point.getLayer(u.keys),void 0!==p[d][v]))for(u=0,l=p[d][v].length;u<l;u++)if(p[d][v][u].toString()===c.toString()){p[d][v].splice(u,1);break}}}else for(u=0,l=p[d].length;u<l;u++)if(p[d][u].toString()===c.toString()){p[d].splice(u,1);break}u=0;for(l=q.length;u<l;u++)k.call(this[q[u]],b,c,d)}return function(d,f){arguments=Array.prototype.slice.call(arguments);arguments.push(b);var h=new C(this,c,"removechildlistener",void 0,void 0,arguments,"");!0!==
l(h)&&(k.call(this.__kbnonproxy,d,f,c),h.type="postremovechildlistener",l(h));return this}}var w={set:[],postset:[],create:[],postcreate:[],"delete":[],postdelete:[],splice:[],postsplice:[],push:[],postpush:[],pop:[],postpop:[],shift:[],postshift:[],unshift:[],postunshift:[],fill:[],postfill:[],reverse:[],postreverse:[],sort:[],postsort:[],addlistener:[],postaddlistener:[],removelistener:[],postremovelistener:[],addchildlistener:[],postaddchildlistener:[],removechildlistener:[],postremovechildlistener:[]},
J=["__proto__","_stopChange"],t=function(b,c){if(!c._stopPropogration&&b)for(var d=0,r=b.length;d!==r&&(b[d](c),!c._stopPropogration);d++);},l=function(b){if(b.listener){var c=b.local[b.listener],d=b.local[b.listener.replace("__kb","__kbparent")];H.call(c)?(t(c[b.key],b),t(c["*"],b)):t(c,b);H.call(d)?(t(d[b.key],b),t(d["*"],b)):t(d,b)}t(b.local.__kbref.__kbevents[b.type],b);return b._preventDefault},d=Array.prototype.sort;Object.prototype._toString||(Object.prototype._toString=Object.prototype.toString);
Object._keys||(Object._keys=Object.keys);Object.prototype.toString=function(){return this instanceof S?"[object Mixed]":Object.prototype._toString.apply(this,arguments)};Object.keys=function(b,c){return Object._keys(b).filter(function(b){return c&&"object"!==c&&"o"!==c?"all"===c?!0:!isNaN(parseInt(b,10)):isNaN(parseInt(b,10))})};Object.defineProperties(S.prototype,{"typeof":g(N,!1,!0),sizeof:g(function(b){function c(b){for(var f=Object.keys(b,"all"),h=0,q=void 0,e=0,v=f.length;e<v;e++)q=b[f[e]],"object"===
typeof q&&void 0!==q&&null!==q?-1===d.indexOf(q)&&(d.push(q),h+=c(q)):"string"===typeof q?h+=2*q.length:"number"===typeof q?h+=8:"boolean"===typeof q?h+=4:"function"===typeof q&&(h+=2*q.toString().length),h+=2*f[e].length;return h}var d=[];return c(b||this)+" Bytes (Rough estimate)"},!1,!0),isObject:g(H,!1,!0),isArray:g(O,!1,!0),isMixed:g(e,!1,!0),isObservable:g(E,!1,!0),stringify:g(function(b){var c=[];return JSON.stringify(b||this,function(b,d){if(O(d)||H(d)){if(-1!==c.indexOf(d))return;c.push(d)}return d})},
!1,!0),getKeys:g(function(b,c){c="string"===typeof b?b:c?c:"object";return Object.keys("string"===typeof b||void 0===b?this:b,c)},!1,!0),getIndexes:g(function(b){b=void 0!==b?"object"===typeof b?b:this[b]:this;for(var c=[],d=0,e=b.length;d<e;d++)void 0!==b[d]&&(c[c.length]=d);return c},!1,!0),keyCount:M(function(){return this.getKeys("object").length},!1,!0),indexCount:M(function(){return this.length},!1,!0),count:M(function(){return this.keyCount+this.indexCount},!1,!0),concat:g(Array.prototype.concat),
every:g(Array.prototype.every),filter:g(Array.prototype.filter),find:g(Array.prototype.find),findIndex:g(Array.prototype.findIndex),forEach:g(Array.prototype.forEach),includes:g(Array.prototype.includes),indexOf:g(Array.prototype.indexOf),join:g(Array.prototype.join),lastIndexOf:g(Array.prototype.lastIndexOf),map:g(Array.prototype.map),reduce:g(Array.prototype.reduce),reduceRight:g(Array.prototype.reduceRight),slice:g(Array.prototype.slice),some:g(Array.prototype.some),entries:g(Array.prototype.entries),
toLocaleString:g(Array.prototype.toLocaleString),add:g(function(b,c){y.call(this,b,c);return this}),set:g(y),get:g(function(b){"number"===typeof b&&(b=b.toString());var c=-1!==b.indexOf(".")?this.getLayer(b):this;-1!==b.indexOf(".")&&(b=b.split(".").pop());if(c)return c[b];console.warn("Module: KonnektDT, Method: get, nothing exists on %o with the key %o",this,b)}),del:g(function(b,c){var d="number"===typeof b||!isNaN(parseInt(b,10));d&&(b=b.toString());var e=-1!==b.indexOf(".")?this.getLayer(b):
this,f=b.split(".").pop();if(e&&void 0!==e[f])if(d&&e.length>parseInt(b,10)&&!c)e=e.__kbnonproxy,e.splice(f,1);else{var h=new C(e,b,"delete",e[f],void 0,[],"__kbmethodlisteners"),q=l(h),p=new C(e,b,"delete",e[f],void 0,[],"__kbdeletelisteners",this._stopChange);!0!==l(p)&&!0!==q&&(e=e.__kbnonproxy,Object.defineProperty(e,f,g(void 0,!0,!0,!1)),delete e[f],d&&e.length>parseInt(b,10)&&c&&--e.length,h.type="postdelete",h.listener="__kbmethodupdatelisteners",l(h),p.listener="__kbupdatelisteners",p.type=
"postdelete",p.oldValue=p.value,p.value=void 0,l(p))}return this}),exists:g(function(b){var c=-1!==b.indexOf(".")?this.__kbnonproxy.getLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());return c?void 0!==c[b]:!!c}),addPrototype:g(function(b,c){var d=-1!==b.indexOf(".")?this.__kbnonproxy.setLayer(b):this.__kbnonproxy;-1!==b.indexOf(".")&&(b=b.split(".").pop());void 0===d[b]?Object.defineProperty(d.__proto__,b,g(c,!0,!0)):console.error("Your attempting to add your prototype with the prop %O that already exists on %O",
prop,d);return this}),addPointer:g(function(){var b=Array.prototype.slice.call(arguments),c=b.shift(),d=b[b.length-1];c instanceof S||(c=new S(c,c.__kbname));var e=new C(this,d,"create",c[d],void 0,[],"__kbcreatelisteners",this._stopChange),f=this.__kbnonproxy;e.root=c.__kbref.__kbproxy;if(!0!==l(e)){Object.defineProperty(f,d,K.apply(f,arguments));f.__kbpointers[d]={keys:b.join("."),point:c};var b=f,c=[{listener:"__kblisteners",method:"addDataListener"},{listener:"__kbupdatelisteners",method:"addDataUpdateListener"}],
f=[],h;if(b[d].__kbImmediateParent)for(var q=0,p=c.length;q<p;q++){h=b[c[q].listener];for(var f=Object.keys(h),v=0,u=f.length;v<u;v++)if(d===f[q])for(var g=0,t=h[f[q]].length;g<t;g++)void 0===b[d].__kbImmediateParent[c[q].listener][d]&&(b[d].__kbImmediateParent[c[q].listener][d]=[]),b[d].__kbImmediateParent[c[q].listener][d].push(h[f[q]][g])}I(b,b[d]);e.listener="__kbupdatelisteners";e.type="postcreate";l(e)}return this}),move:g(function(b,c){this.__kbnonproxy.set(c,b[c]);e(b)?b.del(c):(b[c]=null,
delete b[c]);return this}),copy:g(function(b,c){var d=this.__kbnonproxy;e(b)?"default"===b.__kbname?d.merge(b[c],c):d.addPointer(b,c):d.set(c,b[c]);return this}),merge:g(function(b,c){function d(b,c){for(var f=e(b)?b.keys("object"):Object.keys(b),v,u=0,l=f.length;u<l;u++)v=b[f[u]],"object"===typeof v&&-1===r.indexOf(v)&&"undefined"!==c[f[u]]?d(v,c):c.set(f[u],"object"===typeof v?{}:v)}var r=[],f=this.__kbnonproxy;c&&void 0===f[c]&&f.set(c,{});d(b,c?f[c]:f);return this}),copyWithin:g(function(b,c,
d){c=c||0;d=d||0;var e=new C(this,b,"copyWithin",this[b],void 0,arguments,"__kbmethodlisteners"),f=this.__kbnonproxy;if(!0!==l(e)&&b<f.length){b=0>b?f.length-1:b;c=c<f.length?c:f.length-1;d=d<f.length?d:f.length-1;c=0>c?f.length-1:c;d=0>c?f.length-1:d;for(var h=c;h<=d;h++)f.set(b+(h-c),f[h]);e.type="postcopyWithin";e.listener="__kbmethodupdatelisteners";l(e)}return this}),fill:g(function(b,c,d){c=void 0!==c?Math.max(0,c):0;d=void 0!==d&&d<=this.length?Math.min(this.length,Math.max(0,d)):this.length;
var e=new C(this,_start,"fill",this[_start],void 0,arguments,"__kbmethodlisteners"),f=this.__kbnonproxy;if(!0!==l(e)){for(var h=a.key;h<d;h++)f[h]=b;e.type="postfill";e.listener="__kbmethodupdatelisteners";l(e)}return this}),pop:g(function(){var b=new C(this,this.length-1,"pop",this[this.length-1],void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;if(!0!==l(b)){var d=c[c.length-1];c.del(this.length-1);b.type="postpop";b.listener="__kbmethodupdatelisteners";l(b);return d}return null}),push:g(function(b){var c=
new C(this,this.length,"push",b,void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;!0!==l(c)&&(d.set(d.length,b),c.type="postpush",c.listener="__kbmethodupdatelisteners",l(c));return this.length}),reverse:g(function(){var b=new C(this,void 0,"reverse",void 0,void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;if(!0!==l(b)){for(var d=null,e=null,f=c.length,d=0;d<f/2;d+=1){var e=f-1-d,h=c[d];c[d]=c[e];c[e]=h}b.type="postreverse";b.listener="__kbmethodupdatelisteners";l(b)}return this}),
shift:g(function(){var b=new C(this,0,"shift",this[0],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==l(b)){for(var k=a.key,e=this.length-1;k<e;k++)d[k]=d[k+1];d.del(this.length-1);b.type="postshift";b.listener="__kbmethodupdatelisteners";l(b)}return null}),sort:g(function(){var b=new C(this,void 0,"sort",void 0,void 0,arguments,"__kbmethodlisteners"),c=this.__kbnonproxy;!0!==l(b)&&(d.apply(c,arguments),b.type="postsort",b.listener="__kbmethodupdatelisteners",l(b));return this}),
splice:g(function(b,d,k){b="string"===typeof b?parseInt(b,10):b;var e=new C(this,b,"splice",void 0,void 0,arguments,"__kbmethodlisteners"),f=this.__kbnonproxy;if(!0!==l(e)){var h=[],q=Array.prototype.slice.call(arguments,2),p=q.length-2,v=0;if(0!==d&&void 0!==f[b-1+d])for(var u=0,g=d;u<g;u++){h.push(f[b+u]);for(var t=b+u,J=this.length-1;t<J;t++)f[t]=f[t+1];f.del(f.length-1,!0)}if(0!==p)for(u=0,g=p;u<g;u++){v=b+Math.min(1,u);t=f.length;for(J=v;t>J;t--)f.set(t,f[t-1]);f.set(v,q[u])}e.type="postsplice";
e.listener="__kbmethodupdatelisteners";l(e);return h}return[]}),unshift:g(function(){var b=new C(this,0,"unshift",this[0],void 0,arguments,"__kbmethodlisteners"),d=this.__kbnonproxy;if(!0!==l(b)){for(var k=Array.prototype.slice.call(arguments),e=d.length-1+k.length,f=k.length;-1!==e;e--)e<f?d.set(e,k[e]):d.set(e,d[e-k.length]);b.type="postunshift";b.listener="__kbmethodupdatelisteners";l(b)}return this.length}),getLayer:g(function(b){function d(b){var r=b[0];return void 0===this[r]&&0!==b.length-
1?null:e(this[r])?0!==b.length-1?(b.shift(),d.call(this[r],b)):this[r]:this}b=G(b);return d.call(this,b)}),setLayer:g(function(b){function d(b){var r=b[0];void 0===this[r]&&0!==b.length-1&&(this[r]=S({},this.__kbname,this,this.__kbscopeString+"."+r));return e(this[r])?0!==b.length-1?(b.shift(),d.call(this[r],b)):this[r]:this}b=G(b);return d.call(this,b)}),ignoreCreate:g(function(b){-1===J.indexOf(b)&&J.push(b);return this}),addActionListener:g(function(b,d){var k=this.__kbnonproxy;void 0!==k.__kbref.__kbevents[b]&&
k.__kbref.__kbevents[b].push(d);return this}),removeActionListener:g(function(b,d){var k=this.__kbnonproxy;if(void 0!==k.__kbref.__kbevents[b])for(var e=0,f=k.__kbref.__kbevents[b];e<f;e++)if(k.__kbref.__kbevents[b][e].toString()===d.toString()){k.__kbref.__kbevents[b].splice(e,1);break}return this}),subscribe:g(function(b,d){var k=this.__kbnonproxy;void 0===k.__kbsubscribers[b]&&(k.__kbsubscribers[b]=[]);k.__kbsubscribers[b].push(d);return this}),unsubscribe:g(function(b,d){var k=this.__kbnonproxy;
if(void 0!==k.__kbsubscribers[b])for(var e=0,f=k.__kbsubscribers[b].length;e<f;e++)if(k.__kbsubscribers[b][e].toString()===d.toString()){k.__kbsubscribers[b].splice(e,1);break}return this}),callSubscribers:g(function(b,d,k){var e=this.__kbnonproxy;if(void 0!==e.__kbsubscribers[b])for(var f=0,h=e.__kbsubscribers[b].length;f<h;f++)e.__kbsubscribers[b].call(this,b,d,k);return this}),stopChange:g(function(){this.__kbnonproxy._stopChange=!0;return this})});Object.defineProperties(S.prototype,{addDataListener:g(D("addDataListener",
"__kblisteners")),removeDataListener:g(x("removeDataListener","__kblisteners")),addDataUpdateListener:g(D("addDataUpdateListener","__kbupdatelisteners")),removeDataUpdateListener:g(x("removeDataUpdateListener","__kbupdatelisteners")),addDataCreateListener:g(D("addDataCreateListener","__kbcreatelisteners")),removeDataCreateListener:g(x("removeDataCreateListener","__kbcreatelisteners")),addDataDeleteListener:g(D("addDataDeleteListener","__kbdeletelisteners")),removeDataDeleteListener:g(x("removeDataDeleteListener",
"__kbdeletelisteners")),addDataMethodListener:g(D("addDataMethodListener","__kbmethodlisteners")),removeDataMethodListener:g(x("removeDataMethodListener","__kbmethodlisteners")),addDataMethodUpdateListener:g(D("addDataMethodUpdateListener","__kbmethodupdatelisteners")),removeDataMethodUpdateListener:g(x("removeDataMethodUpdateListener","__kbmethodupdatelisteners")),addChildDataListener:g(A("addChildDataListener","__kbparentlisteners")),removeChildDataListener:g(B("removeChildDataListener","__kbparentlisteners")),
addChildDataUpdateListener:g(A("addChildDataUpdateListener","__kbparentupdatelisteners")),removeChildDataUpdateListener:g(B("removeChildDataUpdateListener","__kbparentupdatelisteners")),addChildDataCreateListener:g(A("addChildDataCreateListener","__kbparentcreatelisteners")),removeChildDataCreateListener:g(B("removeChildDataCreateListener","__kbparentcreatelisteners")),addChildDataDeleteListener:g(A("addChildDataDeleteListener","__kbparentdeletelisteners")),removeChildDataDeleteListener:g(B("removeChildDataDeleteListener",
"__kbparentdeletelisteners"))});return S}}(),X=function(){return function(){function F(z){if("object"===typeof z)for(var n=0,C=z.length;n<C;n++)K_Components[z[n]]?m(z[n],K_Components[z[n]],document.getElementById("script_"+z[n])):F.load(z[n],"component/"+z[n]+"/"+location.search,m);else"string"===typeof z&&(K_Components[z[n]]?m(z,K_Components[z],document.getElementById("script_"+z)):F.load(z,"component/"+z+"/"+location.search,m))}var m=function(){},n=/(<\/.*?>)/g;window.K_Components||(window.K_Components=
{});F.getUnknowns=function(m){var F=m.match(n);return F.map(function(m){return m.replace(/[<\/>]/g,"")}).filter(function(m,g){return document.createElement(m)instanceof HTMLUnknownElement&&-1===F.indexOf(m,g+1)&&!K_Components[m]})};F.load=function(m,n,C){document.head.appendChild(function(g,m,C){var n=document.createElement("script");n.type="text/javascript";n.charset="utf-8";n.async=!0;n.src=m;n.id="script_"+g;n.onload=function(){C(g,K_Components[g],this)};return n}(m,n,C));return F};F.onLoad=function(n){if(void 0===
n)return m;m="function"===typeof n?n:m;return F};return F}}(),Y=function(){function F(){function m(d,b){var c=d.length,k;for(k=0;k<c&&(d[k](b),void 0===b._stopPropogation);k++);}function n(d,b){var c=d.length,k;for(k=0;k<c&&(b.child=b.target,b.target=d[k].parent,d[k].func(b),void 0===b._stopPropogation);k++);}function z(d,b){for(var c=d.length;0<c;J++)if(d[J].toString()===b.toString())return!0;return!1}function F(d,b,c,k,e,f,h,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=
function(){this._preventDefault=!0};this.value=c;this.oldValue=k;this.target=d;this.attr=b;this.arguments=e;this.action=f;this.child=void 0;this.type=h;this.stopChange=q}function C(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners={};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function g(d,b,c,k){var e=d.get,f=d.set,h;return function(d){h=
e.call(this);c(this,b,d,h,void 0,this._stopChange)&&f.call(this,d);this._stopChange||k(this,b,d,h);this._stopChange=void 0}}function M(d,b,c,k){var e;return function(f){e=d.value;c(this,b,f,e,arguments,this._stopChange)&&(d.value=f);this._stopChange||k(this,b,f,e,arguments);this._stopChange=void 0}}function T(d,b,c,k){var e=d.value,f;return function(){c(this,b,null,null,arguments,this._stopChange)&&(f=e.apply(this,arguments));this._stopChange||k(this,b,null,null,arguments,f);this._stopChange=void 0;
return f}}function K(d,b,c,k,e){var f=e.style,h=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,p;return{get:function(){return p},set:function(d){q=p;c(e,b,d,q,void 0,this._stopChange)&&(p=d,f.setProperty(h,d));this._stopChange||k(e,b,d,q);this._stopChange=void 0},enumerable:!0,configurable:!0}}function I(d,b,c,k){if("function"!==typeof b)return e;var r=-1!==["value","checked"].indexOf(d),f=-1!==B.indexOf(d),h;if(this.toString()!==e.toString())if(c){var q=this.querySelectorAll("*");c=q.length;
for(var p,v=0;v<c;v++){p=q[v].attrListeners();if(r||"*"===d)void 0!==q[v].addInputBinding&&q[v].addInputBinding(),void 0!==q[v].addInputBoxBinding&&q[v].addInputBoxBinding();if(f)e.injectStyleProperty(q[v],d),h=k?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===d){h=k?"_parentStyleUpdateListeners":"_parentStyleListeners";c=B.length;for(var u=0;u<c;u++)e.injectStyleProperty(q[v],B[u]);void 0===p[h]["*"]&&(p[h]["*"]=[]);p[h]["*"].push({parent:this,func:b})}h=k?"_parentAttrUpdateListeners":
"_parentAttrListeners"}void 0===p[h][d]&&(p[h][d]=[]);p[h][d].push({parent:this,func:b})}}else{p=this.attrListeners();if(f)h=k?"_styleUpdateListeners":"_styleListeners",e.injectStyleProperty(this,d);else{if(r||"*"===d)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===d){h=k?"_styleUpdateListeners":"_styleListeners";c=B.length;for(v=0;v<c;v++)e.injectStyleProperty(this,B[v]);void 0===p[h][d]&&(p[h][d]=[]);p[h][d].push(b)}h=k?
"_attrUpdateListeners":"_attrListeners"}void 0===p[h][d]&&(p[h][d]=[]);p[h][d].push(b)}else{if(r||"*"===d)for(u=document.querySelectorAll("input, textarea"),c=u.length,v=0;v<c;v++)void 0!==u[v].addInputBinding&&u[v].addInputBinding(),void 0!==u[v].addInputBoxBinding&&u[v].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=f.length+1;f.unshift(document.body);for(v=0;v<c;v++)e.injectStyleProperty(f[v],d);h=k?D:G}else{if("*"===d){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));
c=f.length+1;r=B.length;f.unshift(document.body);for(v=0;v<c;v++)for(u=0;u<r;u++)e.injectStyleProperty(f[v],B[u]);h=k?D:G;void 0===h[d]&&(h[d]=[]);h[d].push(b)}h=k?y:E}void 0===h[d]&&(h[d]=[]);h[d].push(b)}}function L(d,b,c,k){function r(d,c){var f=c[d],k=f.length;for(h=0;h<k;h++)f[h].toString()===b.toString()&&f.splice(h,1)}if("function"!==typeof b)return e;["value","checked"].indexOf(d);var f=-1!==B.indexOf(d),h;if(this.toString()!==e.toString())if(c){c=this.querySelectorAll("*");var q=c.length;
f?(f=k?"_childStyleUpdateListeners":"_childStyleListeners",r(d,this.attrListeners()[f]),f=k?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===d&&(f=k?"_childStyleUpdateListeners":"_childStyleListeners",r(d,this.attrListeners()[f])),f=k?"_childAttrUpdateListeners":"_childAttrListeners",r(d,this.attrListeners()[f]),f=k?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<q;h++){for(var p=c[h].attrListeners()[f][d],v=p.length,u=0;u<v;u++)p[u].isEqualNode(this)&&p.slice(u,1);if("*"===
d)for(listenersStyle=k?"_parentStyleUpdateListeners":"_parentStyleListeners",p=c[h].attrListeners()[f][d],v=p.length,u=0;u<v;u++)p[u].isEqualNode(this)&&p.slice(u,1)}}else f?f=k?"_styleUpdateListeners":"_styleListeners":("*"===d&&(f=k?"_styleUpdateListeners":"_styleListeners",r(d,this.attrListeners()[f])),f=k?"_attrUpdateListeners":"_attrListeners"),r(d,this.attrListeners()[f]);else f?f=k?D:G:("*"===d&&(f=k?D:G,r(d,f)),f=k?y:E),r(d,f)}function R(d,b){e.addAttrListener.call(this,d,b,!0);return this}
function Q(d,b){e.addAttrUpdateListener.call(this,d,b,!0);return this}function P(d,b){e.removeAttrListener.call(this,d,b,!0);return this}function N(d,b){e.removeAttrUpdateListener.call(this,d,b,!0);return this}function H(d,b,c){var k=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(z(k._attrListeners[b],c))return!0;break;case "attrupdate":if(z(k._attrUpdateListeners[b],c))return!0}return!1}function O(){this._stopChange=!0;return this}function e(){function d(b,
d){var c,f=d.length;for(c=0;c<f;c++)-1===b.indexOf(d[c])&&b.push(d[c]);return b}function b(b,d){for(var c=Object.keys(b),f,k,e=0,h=c.length;e<h;e++)if(f=c[e],void 0===d[f])d[f]=b[f].slice();else for(var r=0,l=b[f].length;r<l;r++)k=b[f][r],d[f].push(k)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var f=c.target.attrListeners(),k,h=["value","checked"],r=f._attrListeners,l=f._attrUpdateListeners,t=f._parentAttrListeners;k=f._parentAttrUpdateListeners;var g=!1;if(void 0!==E["*"]||void 0!==
y["*"])g=!0;if(!0!==g&&void 0!==r["*"]||void 0!==l["*"]||void 0!==t["*"]||void 0!==k["*"])g=!0;if(!0!==g)for(var J=0;J<h.length;J++)if(void 0!==E[h[J]]||void 0!==y[h[J]]||void 0!==r[h[J]]||void 0!==l[h[J]]||void 0!==t[h[J]]||void 0!==k[h[J]]){g=!0;break}k=g;h=Object.keys(G);r=Object.keys(D);Object.keys(f._styleListeners);Object.keys(f._styleUpdateListeners);l=Object.keys(f._parentStyleListeners);f=Object.keys(f._parentStyleUpdateListeners);t=[];if(0!==h.length||0!==r.length)t=d(t,h),t=d(t,r);if(0!==
t.length&&0!==l.length||0!==f.length)t=d(t,l),t=d(t,f);-1!==t.indexOf("*")&&(t=B);var f=t,h=f.length,m,H,r=[],n,l="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,t=c.target;void 0!==l&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(k){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?(r=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||
r.unshift(c.arguments[0])):r=Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));n=r.length;for(var w=0;w<n;w++)void 0!==r[w].addInputBinding&&r[w].addInputBinding(),void 0!==r[w].addInputBoxBinding&&r[w].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(r=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),r.unshift(c.arguments[0])):r=Array.prototype.slice.call(c.target.querySelectorAll("*"));k=c.target.__kb._parentAttrListeners;
g=c.target.__kb._parentAttrUpdateListeners;J=c.target.__kb._parentStyleListeners;m=c.target.__kb._parentStyleUpdateListeners;n=r.length;for(w=0;w<n;w++){if(0!==h)for(H=0;H<h;H++)e.injectStyleProperty(r[w],f[H]);H=r[w].attrListeners();b(k,H._parentAttrListeners);b(g,H._parentAttrUpdateListeners);b(J,H._parentStyleListeners);b(m,H._parentStyleUpdateListeners)}void 0!==l&&(c.attr=l,c.target=t,c.arguments=[])}}function k(b){var d=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:
"";f(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])||b.preventDefault()}function r(b){var d=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:"";h(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])}e.injectPrototypes(Node,"Node");e.injectPrototypes(Element,"Element");e.injectPrototypes(HTMLElement,"HTMLElement");e.injectPrototypes(HTMLInputElement,"HTMLInputElement");e.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");e.injectPrototypes(Document,"Document");
var f=t,h=l;e.addAttrUpdateListener("appendChild",c);e.addAttrUpdateListener("removeChild",c);e.addAttrUpdateListener("innerHTML",c);e.addAttrUpdateListener("outerHTML",c);e.addAttrUpdateListener("innerText",c);e.addAttrUpdateListener("outerText",c);e.addAttrUpdateListener("textContent",c);e.addAttrListener("setAttribute",k);e.addAttrListener("removeAttribute",k);e.addAttrUpdateListener("setAttribute",r);e.addAttrUpdateListener("removeAttribute",r);return e}var E={},y={},G={},D={},x={},A="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),
B=Object.getOwnPropertyNames(document.documentElement.style),w=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}).concat(["addEventListener","removeEventListener"]),J,t=function(d,b,c,k,e,f){c=new F(d,b,c,k,e,void 0,"set",f);void 0!==d.__kb&&(k=d.__kb._attrListeners,e=d.__kb._styleListeners,f=d.__kb._parentAttrListeners,d=d.__kb._parentStyleListeners,void 0!==k[b]&&m(k[b],c),void 0===c._stopPropogation&&void 0!==e[b]&&m(e[b],c),void 0===c._stopPropogation&&void 0!==
k["*"]&&(m(k["*"],c),void 0===c._stopPropogation&&m(e["*"],c)),void 0===c._stopPropogation&&void 0!==f[b]&&n(f[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&n(d[b],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(n(f["*"],c),void 0===c._stopPropogation&&n(d["*"],c)));void 0===c._stopPropogation&&void 0!==E[b]&&m(E[b],c);void 0===c._stopPropogation&&void 0!==G[b]&&m(G[b],c);void 0===c._stopPropogation&&void 0!==E["*"]&&(m(E["*"],c),void 0===c._stopPropogation&&m(G["*"],c));return void 0!==c._preventDefault?
!1:!0},l=function(d,b,c,k,e,f){c=new F(d,b,c,k,e,f,"update");void 0!==d.__kb&&(k=d.__kb._attrUpdateListeners,e=d.__kb._styleUpdateListeners,f=d.__kb._parentAttrUpdateListeners,d=d.__kb._parentStyleUpdateListeners,void 0!==k[b]&&m(k[b],c),void 0===c._stopPropogation&&void 0!==e[b]&&m(e[b],c),void 0===c._stopPropogation&&void 0!==k["*"]&&(m(k["*"],c),void 0===c._stopPropogation&&m(e["*"],c)),void 0===c._stopPropogation&&void 0!==f[b]&&n(f[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&n(d[b],c),
void 0===c._stopPropogation&&void 0!==f["*"]&&(n(f["*"],c),void 0===c._stopPropogation&&n(d["*"],c)));void 0===c._stopPropogation&&void 0!==y[b]&&m(y[b],c);void 0===c._stopPropogation&&void 0!==D[b]&&m(D[b],c);void 0===c._stopPropogation&&void 0!==y["*"]&&(m(y["*"],c),void 0===c._stopPropogation&&m(D["*"],c));return void 0!==c._preventDefault?!1:!0};e.injectPrototypeProperty=function(d,b,c,k,r){var f=d.prototype,h=Object.getOwnPropertyDescriptor(f,b);c=c||d.toString().split(/\s+/)[1].split("{")[0].replace("()",
"");var q=x[c];k=k||t;r=r||l;void 0===f.attrListeners&&(f={},f.attrListeners=function(){void 0===this.__kb&&(this.__kb=new C);return this.__kb}.bind(f),f.addAttrListener=e.addAttrListener,f.addAttrUpdateListener=e.addAttrUpdateListener,f.addChildAttrListener=R,f.addChildAttrUpdateListener=Q,f.hasListener=H,f.removeAttrListener=e.removeAttrListener,f.removeAttrUpdateListener=e.removeAttrUpdateListener,f.removeChildAttrListener=P,f.removeChildAttrUpdateListener=N,f.stopChange=O);void 0===q&&(x[c]={obj:d,
proto:f,descriptors:{},set:void 0,update:void 0},q=x[c],q.set=k,q.update=r);void 0===q.descriptors[b]&&(q.descriptors[b]=h);h.configurable&&(void 0!==h.set?Object.defineProperty(f,b,{get:h.get,set:g(h,b,k,r),enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(f,b,{value:T(h,b,k,r),writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&Object.defineProperty(f,b,{get:function(){return h.value},set:M(h,b,k,r),enumerable:!0,configurable:!0}));return e};e.injectStyleProperty=
function(d,b,c,k){var r=d.style,f=Object.getOwnPropertyDescriptor(r,b),h=d.attrListeners().injectedStyle;c=c||t;k=k||l;void 0===h&&(d.attrListeners().injectedStyle={obj:d,proto:r,descriptors:{},set:void 0,update:void 0},d.attrListeners().injectedStyle.set=c,d.attrListeners().injectedStyle.update=k,h=d.attrListeners().injectedStyle);void 0===h.descriptors[b]&&(h.descriptors[b]=f);f.configurable&&Object.defineProperty(r,b,K(f,b,c,k,d));return e};e.injectPrototypes=function(d,b,c,k){var r=d.prototype;
b=b||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var f=x[b],h=Object.getOwnPropertyNames(r);c=c||t;k=k||l;var q;void 0===r.attrListeners&&(r.attrListeners=function(){void 0===this.__kb&&(this.__kb=new C);return this.__kb},r.addAttrListener=e.addAttrListener,r.addAttrUpdateListener=e.addAttrUpdateListener,r.addChildAttrListener=R,r.addChildAttrUpdateListener=Q,r.removeAttrListener=e.removeAttrListener,r.removeAttrUpdateListener=e.removeAttrUpdateListener,r.removeChildAttrListener=P,
r.removeChildAttrUpdateListener=N,r.hasListener=H,r.stopChange=O);void 0===f&&(x[b]={obj:d,proto:r,descriptors:{},set:void 0,update:void 0},f=x[b],f.set=c,f.update=k);q=x[b].descriptors;for(k=0;k<h.length;k+=1)void 0===q[h[k]]&&e.injectPrototypeProperty(d,h[k],b,c,l);if(-1!==h.indexOf("value")){var p=function(b){var d,c,k;if("checkbox"===this.type||"radio"===this.type)d=!0;c=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){k=d?"string"===typeof this.checked?
this.checked:this.checked?"true":"false":this.value;d&&(f.set(this,"checked",this.checked,c)?f.update(this,"checked",this.checked,c):q.checked.set.call(this,c));this.value!==k&&(this.value=k);f.set(this,"value",this.value,c)?f.update(this,"value",this.value,c):q.value.set.call(this,c)}.bind(this),0)};r.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",p)};r.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",
p)};r.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",p)};r.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",p)}}return e};e.addAttrListener=function(d,b,c){if("html"===d){d=0;for(var k=A.length;d<k;d++)I.call(this,A[d],b,c,!1)}else if("events"===d)for(d=0,k=w.length;d<k;d++)I.call(this,w[d],b,c,!1);else I.call(this,d,b,c,!1);return this};e.addAttrUpdateListener=function(d,b,c){if("html"===
d){d=0;for(var k=A.length;d<k;d++)I.call(this,A[d],b,c,!0)}else if("events"===d)for(d=0,k=w.length;d<k;d++)I.call(this,w[d],b,c,!0);else I.call(this,d,b,c,!0);return this};e.removeAttrListener=function(d,b,c){if("html"===d){d=0;for(var k=A.length;d<k;d++)L.call(this,A[d],b,c,!1)}else if("events"===d)for(d=0,k=w.length;d<k;d++)L.call(this,w[d],b,c,!1);else L.call(this,d,b,c,!1);return this};e.removeAttrUpdateListener=function(d,b,c){if("html"===d){d=0;for(var k=A.length;d<k;d++)L.call(this,A[d],b,
c,!0)}else if("events"===d)for(d=0,k=w.length;d<k;d++)L.call(this,w[d],b,c,!0);else L.call(this,d,b,c,!0);return this};e.hasListener=function(d,b,c){"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(z(E[b],c))return!0;break;case "attrupdate":if(z(y[b],c))return!0}return!1};e.injectedPrototypes=function(){return x};return e}"function"===typeof define&&define.amd&&define("KB",F);return F}(),Z=function(F){return function(){function m(g){document.createDocumentFragment();
this.name=g.tagName.toLowerCase();this.template=R[this.name]||'<div class="missing_component">Unknown Component</div>';this.node=g;this.fragment=document.createDocumentFragment();this.wrapper=this.fragment.appendChild(document.createElement("div"));this.wrapper.className="Wrapper Wrapper__"+this.name}function n(g,m,e,E){return{value:g,writable:!!m,enumerable:!!E,configurable:!!e}}function z(){return new RegExp("(\\"+K.split("").join("\\")+")(.*?)(\\"+I.split("").join("\\")+")","g")}function S(g){return g.split(new RegExp("("+
K.split("").join("\\")+")(.*?)("+I.split("").join("\\")+")","g")).map(function(g,e,E){return E[e-1]===K?K+g+I:g}).filter(function(g,e,E){return 0!==g.length&&g!==K&&g!==I&&0!==g.length})}function C(g){return g.replace(new RegExp("["+K+I+"]","g"),"").replace(new RegExp("\\"+L.split("").join("\\")+"(.*)"),"").replace(/\s/g,"")}function g(g){return g.reduce(function(g,e){e.match(/(\()(.*?)(\))/)?g.vmFilters[g.vmFilters.length]=e.replace(/[\(\)]/g,""):e.match(/(\[)(.*?)(\])/)?-1!==e.indexOf("~")?g.model[g.model.length]=
e.replace(/[\[\]\~]/g,""):-1!==e.indexOf("+")?g.local[g.local.length]=e.replace(/[\[\]\+]/g,""):g.session[g.session.length]=e.replace(/[\[\]\-]/g,""):g.filters[g.filters.length]=e;return g},{filters:[],vmFilters:[],model:[],local:[],session:[]})}function M(g){return-1!==g.indexOf("for")?g.replace(new RegExp("["+K+I+"]","g"),"").replace(/\|(.*)/,"").replace(/\s/g,"").split(/for(.*?)loop/).filter(function(g){return 0!==g.length}):[]}function T(){function m(e,t){this.text=e;this.key=t;this.keyLength=
this.key.split(".").length;this.localKey=this.key.split(".").pop();var l;l=-1!==e.indexOf(L)?e.replace(new RegExp("["+I+"]","g"),"").replace(new RegExp("(.*?)(\\"+L.split("").join("\\")+")"),"").replace(/\s/g,"").split(","):[];this.filters=g(l);this.component="for"===this.type?M(e)[1]:void 0;this.id=0}function C(g){if(0!==g.length){for(var t="",l=0,d=g.length;l<d;l++)t="string"===typeof g[l]?t+g[l]:void 0===g[l]._data?t+g[l].text:t+e(g[l]._data.get(g[l].key),g[l].filters.filters,g[l]._data.filters);
return t}return e(g[0]._data.get(g[0].key),g[0].filters.filters,g[0]._data.filters)}function e(e,g,l){return g.reduce(function(d,b){return l[b]?l[b](d):d},e)}function E(e,g,l,d){return g.reduce(function(b,c){return l[c]?l[c](b,d):b},e)}function y(e,g){for(var l=0,d=g.length;l<d;l++)e.stopChange().appendChild(g[l])}function G(e){if(e&&window.model)return window.model.get(e[0])}function z(e,g){if(g&&0!==g.length&&window.model)for(var l=0,d=g.length;l<d;l++)window.model.set(g[l],e)}function x(e){if(e&&
window.localStorage)return localStorage.getItem(e[0])}function A(e,g){if(e&&0!==e.length&&window.localStorage)for(var l=0,d=e.length;l<d;l++)localStorage.setItem(e[l],g)}function B(e){if(e&&window.sessionStorage)return sessionStorage.getItem(e[0])}function w(e,g){if(e&&0!==e.length&&window.sessionStorage)for(var l=0,d=e.length;l<d;l++)sessionStorage.setItem(e[l],g)}Object.defineProperties(m.prototype,{addPointer:n(function(e){for(var g=document.createElement(this.component),l=E(this._data.getLayer(this.key),
this.filters.filters,this._data.filters,e)[e],d=0,b=Object.keys(l,"all"),c=b.length;d<c;d++)g.k_post||(g.k_post={}),g.k_post[b[d]]=l;e>=this.node.children.length?this.node.stopChange().appendChild(g):this.node.stopChange().insertBefore(g,this.node.children[e]);e={event:"loopitem",node:g,parent:this.node};g=N[e.event];l=0;for(d=g.length;l<d;l++)g[l](e);return this}),removePointer:n(function(e){for(var g=this.node.children[e].kb_maps,l=0,d=Object.keys(this.node.children[e].kb_viewmodel.pointers),b=
d.length;l<b;l++){var c=g[d[l]];if(c)for(var k=0,r=c.length;k<r;k++)c[k].unsync(),c[k]=null,delete c[k]}this.node.stopChange().removeChild(this.node.children[e]);return this}),reapplyPointer:n(function(e){var g=this.node.children[e].kb_maps,l=0;e=Object.keys(this.node.children[e].kb_viewmodel.pointers);for(var d=e.length;l<d;l++){var b=g[e[l]];if(void 0!==b)for(var c=0,k=b.length;c<k;c++)b[c].reconnect()}return this}),connect:n(function(e){var g=this;this._data=e;"for"!==this.type?(this.dataListener=
function(e){"delete"===e.event?g.unsync():g.setDom(e.value)},e.getLayer(this.key).addDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&(this.domListener=function(e){g.setData(e.value)},this.node.addAttrUpdateListener(this.listener,this.domListener))):(this.dataListener=function(e){"postset"!==e.type||e.oldValue&&0!==e.oldValue.length||(e.event="create");g.setLoop(e.key,e.event)},e.getLayer(this.key).addDataMethodUpdateListener(this.dataListener));"for"!==this.type&&(this.filters.model&&
0!==this.filters.model.length?this._data.stopChange().set(this.key,G(this.filters.model)):this.filters.session&&0!==this.filters.session.length?this._data.stopChange().set(this.key,B(this.filters.session)):this.filters.local&&0!==this.filters.local.length&&this._data.stopChange().set(this.key,x(this.filters.local)),this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",y(this.node,this._data.innerHTML)):(this.local.stopChange()[this.localAttr]=
C(this.bindText),this.isInput&&-1!==["value","checked"].indexOf(this.attr)&&(this.node.stopChange()[this.attr]=this._data.get(this.key))));return this}),reconnect:n(function(){"for"!==this.type?(this._data.getLayer(this.key).removeDataUpdateListener(this.localKey,this.dataListener),1===this.bindText.length&&this.node.removeAttrUpdateListener(this.listener,this.domListener)):data.getLayer(this.key).removeDataMethodUpdateListener(this.extraListener);this.connect(this._data);return this}),createloop:n(function(){this.node.stopChange().innerHTML=
"";for(var e=0,g=E(this._data.get(this.key),this.filters.filters,this._data.filters).length;e<g;e++)this.setLoop(e,"create");return this}),setData:n(function(g){g=e(g,this.filters.vmFilters,this._data.filters);this._data.stopChange().set(this.key,g);z(this.filters.model,g);w(this.filters.session,g);A(this.filters.local,g);return this}),setDom:n(function(e){z(this.filters.model,e);w(this.filters.session,e);A(this.filters.local,e);this.isEvent?this.node.stopChange()[this.attr]=this._data.get(this.key):
this.isInput&&-1!==["value","checked"].indexOf(this.attr)?this.node.stopChange()[this.attr]=this._data.get(this.key):"innerHTML"===this.key?(this.node.stopChange().innerHTML="",y(this.node,this._data.innerHTML)):this.local.stopChange()[this.localAttr]=C(this.bindText);return this}),setLoop:n(function(e,g){switch(g){case "create":this.addPointer(e);break;case "delete":this.removePointer(e);break;case "set":this.reapplyPointer(e);break;default:if("push"!==g)for(var l=0,d=this._data.getLayer(this.key).length;l<
d;l++)this.reapplyPointer(l)}return this}),bindMaps:n([]),unsync:n(function(){this._data=this.__proto__.bindText=null;delete this._data;this.bindMaps=null;delete this.bindMaps;this.binds=null;delete this.binds;return this})});return m}var K="{{",I="}}",L="|",R={},Q=/(<\/.*?>)/g;F().call();var P=Object.keys(HTMLElement.prototype).filter(function(g){return 0===g.indexOf("on")}),N={loopitem:[]};m.start=function(g){if(void 0===g)return K;K="string"===typeof g?g:K;return m};m.end=function(g){if(void 0===
g)return I;I="string"===typeof g?g:I;return m};m.pipe=function(g){if(void 0===g)return L;L="string"===typeof g?g:L;return m};m.getUnknown=function(g){var m=g.match(Q).map(function(e){return e.replace(/[<\/>]/g,"")});m.filter(function(e,g){return document.createElement(e)instanceof HTMLUnknownElement&&-1===m.indexOf(e,g+1)&&void 0===R[e]});return m};m.isRegistered=function(g){return void 0!==R[g]};m.register=function(g,n){void 0===R[g]?(R[g]=n,m.getUnknown(n)):console.error("Class: KonnektMP Method: 'register', A template by the name %o already exists",
g);return this};m.addEventListener=function(g,n){void 0!==N[g]?N[g].push(n):console.error("Class: KonnektMP Method: 'addEventListener', No event exists with the name %o",g);return m};m.removeEventListener=function(g,n){if(void 0!==N[g])for(var e=0,E=N[g].length;e<E;e++)N[g][e].toString()===n.toString()&&N[g].splice(e,1);else console.error("Class: KonnektMP Method: 'removeEventListener', No event exists with the name %o",g);return m};Object.defineProperties(m.prototype,{register:n(m.register),isRegistered:n(m.isRegistered),
getUnknown:n(m.getUnknown),map:n(function(g){function m(e,E){for(var y=0,n=e.length;y<n;y++)if(void 0===e[y].kb_maps&&8!==e[y].nodeType){e[y].kb_mapper=g;e[y].kb_maps=E;if(3===e[y].nodeType){var D=e[y],x=E,A=D.textContent;if(A.match(z())){var B=S(A),w=T();w.prototype.type=A.match(new RegExp("(\\"+K.split("").join("\\")+")(.*?)(for)(.*?)(loop)(.*?)(\\"+I.split("").join("\\")+")","g"))?"for":"text";w.prototype.text=A;w.prototype.bindText=B;w.prototype.listener="textContent";w.prototype.attr="textContent";
w.prototype.localAttr="textContent";w.prototype.local=D;w.prototype.node=D.parentElement;w.prototype.binds=x;D=0;for(A=B.length;D<A;D++)if(0===B[D].indexOf(K)){var J="for"===w.prototype.type?M(B[D])[0]:C(B[D]),t=new w(B[D],J);void 0===x[J]&&(x[J]=[]);t.bindText[D]=t;t.bindMaps.push(t);t.id=x[J].length;x[J].push(t)}}}else for(x=e[y],B=E,w=Array.prototype.slice.call(x.attributes),D=x instanceof HTMLUnknownElement,A=0,J=w.length;A<J;A++)if(w[A].value.match(z())){var t=S(w[A].value),l=T();l.prototype.type=
D?"component":"attribute";l.prototype.text=w[A].value;l.prototype.bindText=t;l.prototype.isEvent=-1!==P.indexOf(w[A].name);l.prototype.isInput="input"===x.tagName.toLowerCase();l.prototype.isRadio=l.prototype.isInput?-1!==["radio","checkbox"].indexOf(x.type):!1;l.prototype.listener=w[A].name;l.prototype.attr=w[A].name;l.prototype.localAttr="value";l.prototype.local=w[A];l.prototype.node=x;l.prototype.binds=B;l.prototype.isEvent&&x.removeAttribute(w[A].name);for(var d=0,b=t.length;d<b;d++)if(0===t[d].indexOf(K)){var c=
C(t[d]),k=new l(t[d],c);void 0===B[c]&&(B[c]=[]);k.bindText[d]=k;k.bindMaps.push(k);k.id=B[c].length;B[c].push(k)}}e[y].childNodes&&0!==e[y].childNodes.length&&(E=m(e[y].childNodes,E))}return E}return m(g.childNodes,{})})});return m}}(U),U=function(){function F(){function m(d,b){var c=d.length,e;for(e=0;e<c&&(d[e](b),void 0===b._stopPropogation);e++);}function n(d,b){var c=d.length,e;for(e=0;e<c&&(b.child=b.target,b.target=d[e].parent,d[e].func(b),void 0===b._stopPropogation);e++);}function z(d,b){for(var c=
d.length;0<c;J++)if(d[J].toString()===b.toString())return!0;return!1}function F(d,b,c,e,g,f,h,q){this.stopPropagation=function(){this._stopPropogation=!0};this.preventDefault=function(){this._preventDefault=!0};this.value=c;this.oldValue=e;this.target=d;this.attr=b;this.arguments=g;this.action=f;this.child=void 0;this.type=h;this.stopChange=q}function C(){this._attrListeners={};this._attrUpdateListeners={};this._styleListeners={};this._styleUpdateListeners={};this._parentStyleListeners={};this._parentStyleUpdateListeners=
{};this._parentAttrListeners={};this._parentAttrUpdateListeners={};this._injectedStyle={}}function g(d,b,c,e){var g=d.get,f=d.set,h;return function(d){h=g.call(this);c(this,b,d,h,void 0,this._stopChange)&&f.call(this,d);this._stopChange||e(this,b,d,h);this._stopChange=void 0}}function M(d,b,c,e){var g;return function(f){g=d.value;c(this,b,f,g,arguments,this._stopChange)&&(d.value=f);this._stopChange||e(this,b,f,g,arguments);this._stopChange=void 0}}function T(d,b,c,e){var g=d.value,f;return function(){c(this,
b,null,null,arguments,this._stopChange)&&(f=g.apply(this,arguments));this._stopChange||e(this,b,null,null,arguments,f);this._stopChange=void 0;return f}}function K(d,b,c,e,g){var f=g.style,h=b.replace(/([A-Z])/g,"-$1").replace("webkit","-webkit"),q,p;return{get:function(){return p},set:function(d){q=p;c(g,b,d,q,void 0,this._stopChange)&&(p=d,f.setProperty(h,d));this._stopChange||e(g,b,d,q);this._stopChange=void 0},enumerable:!0,configurable:!0}}function I(d,b,c,k){if("function"!==typeof b)return e;
var g=-1!==["value","checked"].indexOf(d),f=-1!==B.indexOf(d),h;if(this.toString()!==e.toString())if(c){var q=this.querySelectorAll("*");c=q.length;for(var p,l=0;l<c;l++){p=q[l].attrListeners();if(g||"*"===d)void 0!==q[l].addInputBinding&&q[l].addInputBinding(),void 0!==q[l].addInputBoxBinding&&q[l].addInputBoxBinding();if(f)e.injectStyleProperty(q[l],d),h=k?"_parentStyleUpdateListeners":"_parentStyleListeners";else{if("*"===d){h=k?"_parentStyleUpdateListeners":"_parentStyleListeners";c=B.length;
for(var u=0;u<c;u++)e.injectStyleProperty(q[l],B[u]);void 0===p[h]["*"]&&(p[h]["*"]=[]);p[h]["*"].push({parent:this,func:b})}h=k?"_parentAttrUpdateListeners":"_parentAttrListeners"}void 0===p[h][d]&&(p[h][d]=[]);p[h][d].push({parent:this,func:b})}}else{p=this.attrListeners();if(f)h=k?"_styleUpdateListeners":"_styleListeners",e.injectStyleProperty(this,d);else{if(g||"*"===d)void 0!==this.addInputBinding&&this.addInputBinding(),void 0!==this.addInputBoxBinding&&this.addInputBoxBinding();if("*"===d){h=
k?"_styleUpdateListeners":"_styleListeners";c=B.length;for(l=0;l<c;l++)e.injectStyleProperty(this,B[l]);void 0===p[h][d]&&(p[h][d]=[]);p[h][d].push(b)}h=k?"_attrUpdateListeners":"_attrListeners"}void 0===p[h][d]&&(p[h][d]=[]);p[h][d].push(b)}else{if(g||"*"===d)for(u=document.querySelectorAll("input, textarea"),c=u.length,l=0;l<c;l++)void 0!==u[l].addInputBinding&&u[l].addInputBinding(),void 0!==u[l].addInputBoxBinding&&u[l].addInputBoxBinding();if(f){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));
c=f.length+1;f.unshift(document.body);for(l=0;l<c;l++)e.injectStyleProperty(f[l],d);h=k?D:G}else{if("*"===d){f=Array.prototype.slice.call(document.body.querySelectorAll("*"));c=f.length+1;g=B.length;f.unshift(document.body);for(l=0;l<c;l++)for(u=0;u<g;u++)e.injectStyleProperty(f[l],B[u]);h=k?D:G;void 0===h[d]&&(h[d]=[]);h[d].push(b)}h=k?y:E}void 0===h[d]&&(h[d]=[]);h[d].push(b)}}function L(d,b,c,k){function g(d,c){var e=c[d],f=e.length;for(h=0;h<f;h++)e[h].toString()===b.toString()&&e.splice(h,1)}
if("function"!==typeof b)return e;["value","checked"].indexOf(d);var f=-1!==B.indexOf(d),h;if(this.toString()!==e.toString())if(c){c=this.querySelectorAll("*");var q=c.length;f?(f=k?"_childStyleUpdateListeners":"_childStyleListeners",g(d,this.attrListeners()[f]),f=k?"_parentStyleUpdateListeners":"_parentStyleListeners"):("*"===d&&(f=k?"_childStyleUpdateListeners":"_childStyleListeners",g(d,this.attrListeners()[f])),f=k?"_childAttrUpdateListeners":"_childAttrListeners",g(d,this.attrListeners()[f]),
f=k?"_parentAttrUpdateListeners":"_parentAttrListeners");for(h=0;h<q;h++){for(var l=c[h].attrListeners()[f][d],v=l.length,u=0;u<v;u++)l[u].isEqualNode(this)&&l.slice(u,1);if("*"===d)for(listenersStyle=k?"_parentStyleUpdateListeners":"_parentStyleListeners",l=c[h].attrListeners()[f][d],v=l.length,u=0;u<v;u++)l[u].isEqualNode(this)&&l.slice(u,1)}}else f?f=k?"_styleUpdateListeners":"_styleListeners":("*"===d&&(f=k?"_styleUpdateListeners":"_styleListeners",g(d,this.attrListeners()[f])),f=k?"_attrUpdateListeners":
"_attrListeners"),g(d,this.attrListeners()[f]);else f?f=k?D:G:("*"===d&&(f=k?D:G,g(d,f)),f=k?y:E),g(d,f)}function R(d,b){e.addAttrListener.call(this,d,b,!0);return this}function Q(d,b){e.addAttrUpdateListener.call(this,d,b,!0);return this}function P(d,b){e.removeAttrListener.call(this,d,b,!0);return this}function N(d,b){e.removeAttrUpdateListener.call(this,d,b,!0);return this}function H(d,b,c){var e=this.attrListeners();"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(z(e._attrListeners[b],
c))return!0;break;case "attrupdate":if(z(e._attrUpdateListeners[b],c))return!0}return!1}function O(){this._stopChange=!0;return this}function e(){function d(b,d){var c,e=d.length;for(c=0;c<e;c++)-1===b.indexOf(d[c])&&b.push(d[c]);return b}function b(b,d){for(var c=Object.keys(b),e,f,k=0,h=c.length;k<h;k++)if(e=c[k],void 0===d[e])d[e]=b[e].slice();else for(var g=0,l=b[e].length;g<l;g++)f=b[e][g],d[e].push(f)}function c(c){if(3!==c.target.nodeType&&8!==c.target.nodeType){var f=c.target.attrListeners(),
k,h=["value","checked"],g=f._attrListeners,l=f._attrUpdateListeners,r=f._parentAttrListeners;k=f._parentAttrUpdateListeners;var t=!1;if(void 0!==E["*"]||void 0!==y["*"])t=!0;if(!0!==t&&void 0!==g["*"]||void 0!==l["*"]||void 0!==r["*"]||void 0!==k["*"])t=!0;if(!0!==t)for(var m=0;m<h.length;m++)if(void 0!==E[h[m]]||void 0!==y[h[m]]||void 0!==g[h[m]]||void 0!==l[h[m]]||void 0!==r[h[m]]||void 0!==k[h[m]]){t=!0;break}k=t;h=Object.keys(G);g=Object.keys(D);Object.keys(f._styleListeners);Object.keys(f._styleUpdateListeners);
l=Object.keys(f._parentStyleListeners);f=Object.keys(f._parentStyleUpdateListeners);r=[];if(0!==h.length||0!==g.length)r=d(r,h),r=d(r,g);if(0!==r.length&&0!==l.length||0!==f.length)r=d(r,l),r=d(r,f);-1!==r.indexOf("*")&&(r=B);var f=r,h=f.length,n,w,g=[],C,l="outerHTML"===c.attr||"outerText"===c.attr?c.attr:void 0,r=c.target;void 0!==l&&(c.attr="appendChild",c.arguments=[c.target],c.target=c.target.parentElement);if(k){"appendChild"===c.attr&&3!==c.arguments[0].nodeType&&8!==c.arguments[0].nodeType?
(g=Array.prototype.slice.call(c.arguments[0].querySelectorAll("input,textarea")),"INPUT"!==c.arguments[0].tagName&&"TEXTAREA"!==c.arguments[0].tagName||g.unshift(c.arguments[0])):g=Array.prototype.slice.call(c.target.querySelectorAll("input,textarea"));C=g.length;for(var x=0;x<C;x++)void 0!==g[x].addInputBinding&&g[x].addInputBinding(),void 0!==g[x].addInputBoxBinding&&g[x].addInputBoxBinding()}"appendChild"===c.attr&&"#text"!==c.arguments[0].nodeName&&"#comment"!==c.arguments[0].nodeName?(g=Array.prototype.slice.call(c.arguments[0].querySelectorAll("*")),
g.unshift(c.arguments[0])):g=Array.prototype.slice.call(c.target.querySelectorAll("*"));k=c.target.__kb._parentAttrListeners;t=c.target.__kb._parentAttrUpdateListeners;m=c.target.__kb._parentStyleListeners;n=c.target.__kb._parentStyleUpdateListeners;C=g.length;for(x=0;x<C;x++){if(0!==h)for(w=0;w<h;w++)e.injectStyleProperty(g[x],f[w]);w=g[x].attrListeners();b(k,w._parentAttrListeners);b(t,w._parentAttrUpdateListeners);b(m,w._parentStyleListeners);b(n,w._parentStyleUpdateListeners)}void 0!==l&&(c.attr=
l,c.target=r,c.arguments=[])}}function k(b){var d=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:"";f(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])||b.preventDefault()}function g(b){var d=b.target.attributes[b.arguments[0]],c="setAttribute"===b.attr?b.arguments[1]:"";h(b.target,b.arguments[0],c,void 0!==d?d.value:"",[c])}e.injectPrototypes(Node,"Node");e.injectPrototypes(Element,"Element");e.injectPrototypes(HTMLElement,"HTMLElement");e.injectPrototypes(HTMLInputElement,
"HTMLInputElement");e.injectPrototypes(HTMLTextAreaElement,"HTMLTextAreaElement");e.injectPrototypes(Document,"Document");var f=t,h=l;e.addAttrUpdateListener("appendChild",c);e.addAttrUpdateListener("removeChild",c);e.addAttrUpdateListener("innerHTML",c);e.addAttrUpdateListener("outerHTML",c);e.addAttrUpdateListener("innerText",c);e.addAttrUpdateListener("outerText",c);e.addAttrUpdateListener("textContent",c);e.addAttrListener("setAttribute",k);e.addAttrListener("removeAttribute",k);e.addAttrUpdateListener("setAttribute",
g);e.addAttrUpdateListener("removeAttribute",g);return e}var E={},y={},G={},D={},x={},A="textContent innerHTML innerText outerHTML outerText appendChild removeChild replaceChild insertAdjacentHTML insertBefore".split(" "),B=Object.getOwnPropertyNames(document.documentElement.style),w=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}).concat(["addEventListener","removeEventListener"]),J,t=function(d,b,c,e,g,f){c=new F(d,b,c,e,g,void 0,"set",f);void 0!==d.__kb&&(e=d.__kb._attrListeners,
g=d.__kb._styleListeners,f=d.__kb._parentAttrListeners,d=d.__kb._parentStyleListeners,void 0!==e[b]&&m(e[b],c),void 0===c._stopPropogation&&void 0!==g[b]&&m(g[b],c),void 0===c._stopPropogation&&void 0!==e["*"]&&(m(e["*"],c),void 0===c._stopPropogation&&m(g["*"],c)),void 0===c._stopPropogation&&void 0!==f[b]&&n(f[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&n(d[b],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(n(f["*"],c),void 0===c._stopPropogation&&n(d["*"],c)));void 0===c._stopPropogation&&
void 0!==E[b]&&m(E[b],c);void 0===c._stopPropogation&&void 0!==G[b]&&m(G[b],c);void 0===c._stopPropogation&&void 0!==E["*"]&&(m(E["*"],c),void 0===c._stopPropogation&&m(G["*"],c));return void 0!==c._preventDefault?!1:!0},l=function(d,b,c,e,g,f){c=new F(d,b,c,e,g,f,"update");void 0!==d.__kb&&(e=d.__kb._attrUpdateListeners,g=d.__kb._styleUpdateListeners,f=d.__kb._parentAttrUpdateListeners,d=d.__kb._parentStyleUpdateListeners,void 0!==e[b]&&m(e[b],c),void 0===c._stopPropogation&&void 0!==g[b]&&m(g[b],
c),void 0===c._stopPropogation&&void 0!==e["*"]&&(m(e["*"],c),void 0===c._stopPropogation&&m(g["*"],c)),void 0===c._stopPropogation&&void 0!==f[b]&&n(f[b],c),void 0===c._stopPropogation&&void 0!==d[b]&&n(d[b],c),void 0===c._stopPropogation&&void 0!==f["*"]&&(n(f["*"],c),void 0===c._stopPropogation&&n(d["*"],c)));void 0===c._stopPropogation&&void 0!==y[b]&&m(y[b],c);void 0===c._stopPropogation&&void 0!==D[b]&&m(D[b],c);void 0===c._stopPropogation&&void 0!==y["*"]&&(m(y["*"],c),void 0===c._stopPropogation&&
m(D["*"],c));return void 0!==c._preventDefault?!1:!0};e.injectPrototypeProperty=function(d,b,c,k,r){var f=d.prototype,h=Object.getOwnPropertyDescriptor(f,b);c=c||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var q=x[c];k=k||t;r=r||l;void 0===f.attrListeners&&(f={},f.attrListeners=function(){void 0===this.__kb&&(this.__kb=new C);return this.__kb}.bind(f),f.addAttrListener=e.addAttrListener,f.addAttrUpdateListener=e.addAttrUpdateListener,f.addChildAttrListener=R,f.addChildAttrUpdateListener=
Q,f.hasListener=H,f.removeAttrListener=e.removeAttrListener,f.removeAttrUpdateListener=e.removeAttrUpdateListener,f.removeChildAttrListener=P,f.removeChildAttrUpdateListener=N,f.stopChange=O);void 0===q&&(x[c]={obj:d,proto:f,descriptors:{},set:void 0,update:void 0},q=x[c],q.set=k,q.update=r);void 0===q.descriptors[b]&&(q.descriptors[b]=h);h.configurable&&(void 0!==h.set?Object.defineProperty(f,b,{get:h.get,set:g(h,b,k,r),enumerable:!0,configurable:!0}):"function"===typeof h.value?Object.defineProperty(f,
b,{value:T(h,b,k,r),writable:!0,enumerable:!0,configurable:!0}):void 0!==h.value&&Object.defineProperty(f,b,{get:function(){return h.value},set:M(h,b,k,r),enumerable:!0,configurable:!0}));return e};e.injectStyleProperty=function(d,b,c,k){var g=d.style,f=Object.getOwnPropertyDescriptor(g,b),h=d.attrListeners().injectedStyle;c=c||t;k=k||l;void 0===h&&(d.attrListeners().injectedStyle={obj:d,proto:g,descriptors:{},set:void 0,update:void 0},d.attrListeners().injectedStyle.set=c,d.attrListeners().injectedStyle.update=
k,h=d.attrListeners().injectedStyle);void 0===h.descriptors[b]&&(h.descriptors[b]=f);f.configurable&&Object.defineProperty(g,b,K(f,b,c,k,d));return e};e.injectPrototypes=function(d,b,c,k){var g=d.prototype;b=b||d.toString().split(/\s+/)[1].split("{")[0].replace("()","");var f=x[b],h=Object.getOwnPropertyNames(g);c=c||t;k=k||l;var q;void 0===g.attrListeners&&(g.attrListeners=function(){void 0===this.__kb&&(this.__kb=new C);return this.__kb},g.addAttrListener=e.addAttrListener,g.addAttrUpdateListener=
e.addAttrUpdateListener,g.addChildAttrListener=R,g.addChildAttrUpdateListener=Q,g.removeAttrListener=e.removeAttrListener,g.removeAttrUpdateListener=e.removeAttrUpdateListener,g.removeChildAttrListener=P,g.removeChildAttrUpdateListener=N,g.hasListener=H,g.stopChange=O);void 0===f&&(x[b]={obj:d,proto:g,descriptors:{},set:void 0,update:void 0},f=x[b],f.set=c,f.update=k);q=x[b].descriptors;for(k=0;k<h.length;k+=1)void 0===q[h[k]]&&e.injectPrototypeProperty(d,h[k],b,c,l);if(-1!==h.indexOf("value")){var p=
function(b){var d,c,e;if("checkbox"===this.type||"radio"===this.type)d=!0;c=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;setTimeout(function(){e=d?"string"===typeof this.checked?this.checked:this.checked?"true":"false":this.value;d&&(f.set(this,"checked",this.checked,c)?f.update(this,"checked",this.checked,c):q.checked.set.call(this,c));this.value!==e&&(this.value=e);f.set(this,"value",this.value,c)?f.update(this,"value",this.value,c):q.value.set.call(this,
c)}.bind(this),0)};g.removeInputBinding=function(){this.attrListeners()._onkeydown=void 0;this.removeEventListener("keydown",p)};g.addInputBinding=function(){this.attrListeners()._onkeydown=!0;this.addEventListener("keydown",p)};g.removeInputBoxBinding=function(){this.attrListeners()._onmousedown=void 0;this.removeEventListener("mouseup",p)};g.addInputBoxBinding=function(){this.attrListeners()._onmousedown=!0;this.addEventListener("mouseup",p)}}return e};e.addAttrListener=function(d,b,c){if("html"===
d){d=0;for(var e=A.length;d<e;d++)I.call(this,A[d],b,c,!1)}else if("events"===d)for(d=0,e=w.length;d<e;d++)I.call(this,w[d],b,c,!1);else I.call(this,d,b,c,!1);return this};e.addAttrUpdateListener=function(d,b,c){if("html"===d){d=0;for(var e=A.length;d<e;d++)I.call(this,A[d],b,c,!0)}else if("events"===d)for(d=0,e=w.length;d<e;d++)I.call(this,w[d],b,c,!0);else I.call(this,d,b,c,!0);return this};e.removeAttrListener=function(d,b,c){if("html"===d){d=0;for(var e=A.length;d<e;d++)L.call(this,A[d],b,c,!1)}else if("events"===
d)for(d=0,e=w.length;d<e;d++)L.call(this,w[d],b,c,!1);else L.call(this,d,b,c,!1);return this};e.removeAttrUpdateListener=function(d,b,c){if("html"===d){d=0;for(var e=A.length;d<e;d++)L.call(this,A[d],b,c,!0)}else if("events"===d)for(d=0,e=w.length;d<e;d++)L.call(this,w[d],b,c,!0);else L.call(this,d,b,c,!0);return this};e.hasListener=function(d,b,c){"html"===b&&(b="innerHTML");"events"===b&&(b="onclick");switch(d){case "attr":if(z(E[b],c))return!0;break;case "attrupdate":if(z(y[b],c))return!0}return!1};
e.injectedPrototypes=function(){return x};return e}"function"===typeof define&&define.amd&&define("KB",F);return F}(),U=function(){return function(){function F(z){0===z.length&&(z=m);document.body.innerHTML="<"+z+"></"+z+">";n(z);return F}var m="",n=function(){};F.base=function(n){if(void 0===n)return m;m="string"===typeof n?n:m;return F};F.onChange=function(m){if(void 0===m)return n;n="function"===typeof m?m:n;return F};F.watch=function(m){window.onhashchange=m?function(){F(window.location.hash.replace("#",
""))}:null;return F};return F}}(),V=function(F,m,n,z,S){return function(){function n(e,m,y,G){function D(d,b,c,e,g){for(var f=K({},d),h=0,l=Object.keys(b.prototype),p=l.length;h<p;h++)f.__proto__[l[h]]=b.prototype[l[h]];h=0;l=Object.keys(e);for(p=l.length;h<p;h++)-1!==N.indexOf(l[h])?Object.defineProperty(f,l[h],M(e[l[h]],"filters"!==l[h])):e.pointers?void 0===e.pointers[l[h]]&&f.set(l[h],e[l[h]]):f.set(l[h],e[l[h]]);if(e.pointers)for(f.pointers||Object.defineProperty(f,"pointers",M({},!1,!0)),h=
0,l=Object.keys(e.pointers),p=l.length;h<p;h++)f.pointers[l[h]]=e.pointers[l[h]],f.addPointer(f.pointers[l[h]].point,f.pointers[l[h]].key,l[h]);b.apply(f,c);h=0;l=Object.keys(g);for(p=l.length;h<p;h++)-1!==N.indexOf(l[h])?Object.defineProperty(f,l[h],M(g[l[h]],"filters"!==l[h])):g.pointers?void 0===g.pointers[l[h]]&&f.set(l[h],g[l[h]]):f.set(l[h],g[l[h]]);if(g.pointers)for(f.pointers||Object.defineProperty(f,"pointers",M({},!1,!0)),h=0,l=Object.keys(g.pointers),p=l.length;h<p;h++)f.pointers[l[h]]=
g.pointers[l[h]],f.addPointer(f.pointers[l[h]].point,f.pointers[l[h]].key,l[h]);h=0;l=Object.keys(f.filters);for(p=l.length;h<p;h++)f.filters[l[h]]=f.filters[l[h]].bind(f);if(f.sessionStorage){if(b=sessionStorage.getItem(f.id||d))for(b=JSON.parse(b),h=0,l=Object.keys(b),p=l.length;h<p;h++)f.set(l[h],b[l[h]]);else sessionStorage.setItem(f.id||d,f.stringify());f.addChildDataUpdateListener("*",function(){sessionStorage.setItem(f.id||d,f.stringify())})}if(f.localStorage){if(b=localStorage.getItem(f.id||
d))for(b=JSON.parse(b),h=0,l=Object.keys(b),p=l.length;h<p;h++)f.set(l[h],b[l[h]]);else localStorage.setItem(f.id||d,f.stringify());f.addChildDataUpdateListener("*",function(){localStorage.setItem(f.id||d,f.stringify())})}f.store&&R.set(f.id||d,f);return f}function x(d,b,c){d.kb_viewmodel=c;b.wrapper.innerHTML=w.template.replace(new RegExp("("+I.start()+"local"+I.end()+")","g"),c.local);var e=b.maps=b.map(b.wrapper);b.wrapper.kb_maps=e;Object.keys(e).forEach(function(b){e[b].forEach(function(b){switch(b.type){case "for":b.connect(c).createloop();
break;case "component":b.connect(c).unsync();break;default:b.connect(c)}})});b.wrapper.kb_viewmodel.onFinish.call(b.wrapper.kb_viewmodel,b.wrapper)}function A(d,b){w=new I(b,!0);Object.defineProperty(w.wrapper,"__kbcomponenttree",M(b.kb_mapper?b.kb_mapper.__kbcomponenttree.slice():[]));b.parentElement.replaceChild(w.fragment,b);m.unshift(w.wrapper);x(w.wrapper,w,D(d,Q[d],m,t,l));if(-1===w.wrapper.__kbcomponenttree.indexOf(d)||w.wrapper.kb_viewmodel.multiple){w.wrapper.__kbcomponenttree.push(d);w.wrapper.classList.add(w.wrapper.kb_viewmodel.local);
for(var c=w.wrapper.querySelectorAll("*"),e=0,g=c.length;e<g;e++)c[e]instanceof HTMLUnknownElement&&n(c[e])}else console.error("Warning!! You are attempting to make a recursive component %o, recursive components can lead to memory stack overflows unless properly handled, Please check your components html for use of this component, if You want this to be a recursive component please set `this.multiple = true;`",d),console.error("Recursive Component %o on %o",w.wrapper,w.wrapper.parentElement),w.wrapper.parentElement.removeChild(w.wrapper)}
var B=e.tagName.toLowerCase(),w,z=Object.keys(HTMLElement.prototype).filter(function(d){return 0===d.indexOf("on")}),t={},l={};void 0===m&&(m=[]);y&&g(y,t);Object.defineProperty(t,"local",M(t.local||B+"-"+Date.now(),!0,!1,!0));Object.defineProperty(t,"filters",M(t.filters||{},!1,!1,!0));"function"!==typeof t.onFinish&&(t.onFinish=function(){});Object.defineProperty(t,"onFinish",M(t.onFinish,!0,!1,!0));"string"===typeof t.sessionStorage&&(t.sessionStorage="true"===t.sessionStorage);Object.defineProperty(t,
"sessionStorage",M(void 0!==t.sessionStorage?t.sessionStorage:!1,!0,!1,!0));"string"===typeof t.localStorage&&(t.localStorage="true"===t.localStorage);Object.defineProperty(t,"localStorage",M(void 0!==t.localStorage?t.localStorage:!1,!0,!1,!0));"string"===typeof t.store&&(t.store="true"===t.store);Object.defineProperty(t,"store",M(void 0!==t.store?t.store:!1,!0,!1,!0));"string"===typeof t.multiple&&(t.multiple="true"===t.multiple);Object.defineProperty(t,"multiple",M(void 0!==t.multiple?t.multiple:
!1,!0,!1,!0));G&&g(G,l);l.innerHTML=Array.prototype.slice.call(e.childNodes);y=0;for(G=e.attributes.length;y<G;y++)l[e.attributes[y].name]=e.attributes[y].value;y=0;for(G=z.length;y<G;y++)e[z[y]]&&(l[z[y]]=e[z[y]]);e.k_post&&g(e.k_post,l);n.isRegistered(B)||e.kb_isLoading?n.isRegistered(B)&&A(B,e):(n.loadWaitList(B,function(d,b){A(B,e)}),n.loadWaitList(B).loading||(n.loadWaitList(B).loading=!0,T(B)))}function g(e,g){var m=Object.keys(e);g.pointers||Object.defineProperty(g,"pointers",{value:{},writable:!0,
enumerable:!1,configurable:!0});for(var n=0,z=m.length;n<z;n++)if(K.prototype.isObservable(e,m[n]))g.pointers[m[n]]={key:e.__kbscopeString.split(".").pop(),point:e.__kbImmediateParent};else if(K.prototype.isMixed(e[m[n]]))g.pointers[m[n]]={key:e[m[n]].__kbscopeString.split(".").pop(),point:e[m[n]].__kbImmediateParent};else if(K.prototype.isObject(e[m[n]]))for(var x=0,A=Object.keys(e[m[n]]);x<z;x++)g[m[n]][A[x]]=e[m[n]][A[x]];else if(K.prototype.isArray(e[m[n]]))for(x=0;x<z;x++)g[m[n]][x]=e[m[n]][x];
else g[m[n]]=e[m[n]]}function M(e,g,m,n){return{value:e,writable:!!g,enumerable:!!n,configurable:!!m}}window.K_Components||(window.K_Components={});var T=m().onLoad(function(e,g){var m="<style>"+unescape(g.prototype.k_css)+"</style>"+unescape(g.prototype.k_html);n.register(e,g,m,g.prototype.cms);n.loadWaitList(e).forEach(function(m){m(e,g)});n.loadWaitList(e,"clear")}),K=F(),I=z().addEventListener("loopitem",function(e){var g=e.node.tagName.toLowerCase();n.isRegistered(g)||e.node.kb_isLoading?n.isRegistered(g)&&
n(e.node):(e.node.kb_isLoading=!0,n.loadWaitList(g,function(g,m){n(e.node)}),n.loadWaitList(g).loading||(n.loadWaitList(g).loading=!0,T(g)))}),L=S().base(void 0!==config&&void 0!==config.base?config.base:"default").watch(!0).onChange(function(e){n(document.querySelector(e))}),R=K({},"Model"),Q={},P=function(){return window.location.search.replace("?","").split("&").filter(function(e){return 0!==e.length}).reduce(function(e,g){e[g.split("=")[0]]=g.split("=")[1];return e},{})}(),N="id filters class sessionStorage localStorage store component multiple".split(" "),
H={},O;n.register=function(e,g,m,z){I.register(e,m);Q[e]=g;return n};n.isRegistered=function(e){return void 0!==Q[e]&&I.isRegistered(e)};n.registered=function(){return Object.keys(Q)};n.loadWaitList=function(e,g){if("undefined"===typeof g&&e)return H[e];if(e){if(void 0===H[e]||"clear"===g){var m=void 0===H[e]?!1:!!H[e].loading;H[e]=[];H[e].loading=m}"function"===typeof g&&H[e].push(g)}return n};n.localRouting=function(e){e?(O=Node.prototype.appendChild,Node.prototype.appendChild=function(e){if("script"===
e.nodeName.toLowerCase()){e.src=e.src.substring(0,-1!==e.src.indexOf("?")?e.src.indexOf("?"):e.src.length);var g=e.src.match(/(.*?component\/)/);g&&(P.env||(P.env="prod"),"dev"===P.env&&(P.env="qa"),g=e.src.replace(g[0],"").replace(/[\/\s]/g,""),e.src="/components/"+g+"/build/"+P.env+"/"+g+(P.debug&&"prod"!==P.env?"":".min")+".js",arguments[0]=e)}return O.apply(this,arguments)}):O&&(Node.prototype.appendChild=O,O=null);return n};n.hashRouting=function(e){e&&(void 0===document.body?document.addEventListener("DOMContentLoaded",
function(){L(window.location.hash.replace("#",""))}):L(window.location.hash.replace("#","")))};return n}}(W,X,Y,Z,U);"undefined"!==typeof window&&"undefined"!==typeof window.define&&"undefined"!==typeof window.require?define([],function(){return V}):"undefined"!==typeof module&&(module.exports=V);return V}();
